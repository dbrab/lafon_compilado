{"version":3,"sources":["./node_modules/inherits/inherits_browser.js","./node_modules/ng-fullcalendar/ng-fullcalendar.es5.js","./node_modules/ng-fullcalendar/node_modules/fullcalendar/dist/fullcalendar.js","./node_modules/process/browser.js","./node_modules/rxjs/_esm5/observable/FromEventObservable.js","./node_modules/rxjs/_esm5/observable/fromEvent.js","./node_modules/util/support/isBufferBrowser.js","./node_modules/util/util.js","./src/app/articulo/articulo.service.ts","./src/app/comentarioincidente/comentarioincidente.service.ts","./src/app/directives/no-dbl-click-directive.directive.ts","./src/app/incidencias/incidencia-add/incidencia-add.component.css","./src/app/incidencias/incidencia-add/incidencia-add.component.html","./src/app/incidencias/incidencia-add/incidencia-add.component.ts","./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.css","./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.html","./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.ts","./src/app/incidencias/incidencia-edit/incidencia-edit.component.css","./src/app/incidencias/incidencia-edit/incidencia-edit.component.html","./src/app/incidencias/incidencia-edit/incidencia-edit.component.ts","./src/app/incidencias/incidencia-index/incidencia-index.component.css","./src/app/incidencias/incidencia-index/incidencia-index.component.html","./src/app/incidencias/incidencia-index/incidencia-index.component.ts","./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.css","./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.html","./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.ts","./src/app/incidencias/incidencias-routing.module.ts","./src/app/incidencias/incidencias.module.ts","./src/app/respuesta/respuestas.service.ts","./src/app/singuser/singuser.component.css","./src/app/singuser/singuser.component.html","./src/app/singuser/singuser.component.ts","./src/app/singuser/singuser.module.ts","./src/app/viewmodel/MaterialRespuesta.ts","./src/app/viewmodel/comentario_incidente.ts","./src/app/viewmodel/incidencia.ts","./src/app/viewmodel/respuesta.ts","./src/app/viewmodel/tecnicoadicional.ts"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqG;AAC9E;AACiB;AACxC,8CAAC;AACD,qDAAqD;AACrD,gBAAgB;;AAEhB,kCAAkC;AAClC,gBAAgB,8CAAC;AACjB,8CAA8C;AAC9C,gBAAgB;;AAEhB;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8CAAC;AACb;;AAEA;AACA,qBAAqB;AACrB;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,kBAAkB,oDAAY;AAC9B;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,4BAA4B;AAC5B,uBAAuB,EAAE,qBAAqB,EAAE;AAChD;AACA;AACA;;AAEA;AACA,oCAAoC,EAAE;AACtC,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,2DAAY;AACjD;AACA,6BAA6B,2DAAY;AACzC,+BAA+B,2DAAY;AAC3C,oCAAoC,2DAAY;AAChD,mCAAmC,2DAAY;AAC/C,8BAA8B,2DAAY;AAC1C,+BAA+B,2DAAY;AAC3C,gCAAgC,2DAAY;AAC5C,8BAA8B,2DAAY;AAC1C,oCAAoC,2DAAY;AAChD,uCAAuC,2DAAY;AACnD,+BAA+B,2DAAY;AAC3C,+BAA+B,2DAAY;AAC3C,gCAAgC,2DAAY;AAC5C,kCAAkC,2DAAY;AAC9C,iCAAiC,2DAAY;AAC7C,+BAA+B,2DAAY;AAC3C,0BAA0B,2DAAY;AACtC,4BAA4B,2DAAY;AACxC,4BAA4B,2DAAY;AACxC,mCAAmC,2DAAY;AAC/C,oCAAoC,2DAAY;AAChD,kCAAkC,2DAAY;AAC9C,iCAAiC,2DAAY;AAC7C,wBAAwB,2DAAY;AACpC,gCAAgC,2DAAY;AAC5C,6BAA6B,2DAAY;AACzC,kCAAkC,2DAAY;AAC9C;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,SAAS;AACT;AACA,mBAAmB,EAAE;AACrB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8CAAC;AACjB;AACA;AACA;AACA;AACA,+BAA+B,EAAE;AACjC,gBAAgB,8CAAC;AACjB,mCAAmC,EAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,2BAA2B,EAAE;AAC7B,4BAA4B;AAC5B;AACA;AACA,mCAAmC,EAAE,WAAW,8CAAC;AACjD,mCAAmC,EAAE;AACrC;AACA;AACA;AACA,mCAAmC,EAAE;AACrC;AACA;AACA,qBAAqB;AACrB,wCAAwC,EAAE,UAAU,iBAAiB;AACrE;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,uBAAuB,EAAE;AACzB;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA,oCAAoC,EAAE,UAAU,iBAAiB;AACjE;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb,gCAAgC,EAAE,UAAU,iBAAiB;AAC7D;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,EAAE,cAAc;AAC3C,2BAA2B,EAAE;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB,gBAAgB;AAChB;AACA;AACA,eAAe,KAAK;AACpB,gBAAgB;AAChB;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8CAAC;AACxB;AACA,uBAAuB,8CAAC;AACxB;AACA,uBAAuB,8CAAC;AACxB;AACA;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,8CAAC;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,8CAAC;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,eAAe,EAAE;AACjB,gBAAgB;AAChB;AACA;AACA,QAAQ,8CAAC;AACT;AACA,YAAY,8CAAC;AACb,YAAY,8CAAC;AACb;AACA;AACA;AACA,SAAS,OAAO,wDAAS;AACzB;AACA;AACA,iBAAiB,IAAI;AACrB;AACA;AACA,oDAAoD;AACpD,SAAS,OAAO,yDAAU,GAAG;AAC7B,SAAS,OAAO,qDAAM,GAAG;AACzB,MAAM;AACN;AACA,yBAAyB,OAAO,oDAAK,0BAA0B;AAC/D,+BAA+B,OAAO,qDAAM,EAAE;AAC9C,qBAAqB,OAAO,oDAAK,EAAE;AACnC,uBAAuB,OAAO,qDAAM,EAAE;AACtC,yBAAyB,OAAO,qDAAM,EAAE;AACxC,8BAA8B,OAAO,qDAAM,EAAE;AAC7C,6BAA6B,OAAO,qDAAM,EAAE;AAC5C,wBAAwB,OAAO,qDAAM,EAAE;AACvC,yBAAyB,OAAO,qDAAM,EAAE;AACxC,0BAA0B,OAAO,qDAAM,EAAE;AACzC,wBAAwB,OAAO,qDAAM,EAAE;AACvC,8BAA8B,OAAO,qDAAM,EAAE;AAC7C,iCAAiC,OAAO,qDAAM,EAAE;AAChD,yBAAyB,OAAO,qDAAM,EAAE;AACxC,yBAAyB,OAAO,qDAAM,EAAE;AACxC,0BAA0B,OAAO,qDAAM,EAAE;AACzC,4BAA4B,OAAO,qDAAM,EAAE;AAC3C,2BAA2B,OAAO,qDAAM,EAAE;AAC1C,yBAAyB,OAAO,qDAAM,EAAE;AACxC,oBAAoB,OAAO,qDAAM,EAAE;AACnC,sBAAsB,OAAO,qDAAM,EAAE;AACrC,sBAAsB,OAAO,qDAAM,EAAE;AACrC,6BAA6B,OAAO,qDAAM,EAAE;AAC5C,8BAA8B,OAAO,qDAAM,EAAE;AAC7C,4BAA4B,OAAO,qDAAM,EAAE;AAC3C,2BAA2B,OAAO,qDAAM,EAAE;AAC1C,kBAAkB,OAAO,qDAAM,EAAE;AACjC,0BAA0B,OAAO,qDAAM,EAAE;AACzC,uBAAuB,OAAO,qDAAM,EAAE;AACtC,4BAA4B,OAAO,qDAAM,EAAE;AAC3C;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA,SAAS,OAAO,uDAAQ;AACxB;AACA;AACA,iBAAiB,IAAI;AACrB;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,cAAc,WAAW;AACzB;;AAEA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;;AAEqF;AACrF;;;;;;;;AC9mBA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK,IAA0C;AAC/C,EAAE,iCAAO,EAAE,2DAAQ,EAAE,sDAAQ,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AACzC;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,qDAAqD;AACrD,gBAAgB;;AAEhB,kCAAkC;AAClC;AACA,8CAA8C;AAC9C,gBAAgB;;AAEhB;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2DAA2D;AAC3D,8EAA8E;AAC9E,kBAAkB;AAClB,sBAAsB;AACtB,sBAAsB;AACtB;;AAEA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;;AAEA;AACA;AACA;AACA;AACA;AACA,8DAA8D;;AAE9D,kCAAkC;AAClC;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF,iBAAiB;;AAEjB;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF,sDAAsD;AACtD,WAAW,yBAAyB,EAAE;;AAEtC;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW;;AAEX,gEAAgE;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;;;AAGA;;AAEA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;;AAEA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,oDAAoD;AACpD;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAmB;AAC/B;;AAEA;AACA;AACA;AACA,MAAM,uCAAuC;AAC7C,MAAM;AACN;AACA;AACA;AACA,eAAe,cAAc;AAC7B;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA,YAAY,uBAAuB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8FAA8F;;;AAG9F;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,sBAAsB;AAClC;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa;AACb;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;;AAEA,mBAAmB;AACnB;AACA;AACA,qCAAqC;AACrC;AACA;AACA,OAAO,WAAW,aAAa;AAC/B;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAqB;AAC/C;AACA,yBAAyB,yBAAyB;AAClD;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA,6BAA6B,EAAE;AAC/B;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,yBAAyB;;;AAGzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,yBAAyB;AACtC;AACA;;AAEA;AACA,gCAAgC,QAAQ;AACxC;;AAEA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,QAAQ;AACtC;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;;AAEA,YAAY,SAAS;AACrB;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;;;AAGA;AACA,qCAAqC;AACrC,sBAAsB;AACtB,sBAAsB;AACtB,wBAAwB;AACxB,wBAAwB;AACxB;AACA;;;AAGA;AACA,2BAA2B;AAC3B;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF,0BAA0B;AAC1B;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;;AAGA;AACA;AACA;;;AAGA,+BAA+B;AAC/B;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,EAAE;AACtC;AACA,SAAS,EAAE;AACX,+BAA+B;AAC/B,gCAAgC,kBAAkB;;AAElD;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB;AACzB;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA,0BAA0B;;AAE1B;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA;AACA,uDAAuD;AACvD;;AAEA,mDAAmD;AACnD;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,OAAO;;AAEP,0BAA0B;;AAE1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa;AACb;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;;AAEA,0CAA0C;AAC1C,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,+FAA+F;;AAE/F;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,EAAE;AACF,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,yBAAyB;AAC9B,KAAK,0BAA0B;AAC/B,KAAK,yBAAyB;AAC9B,KAAK,yBAAyB;AAC9B,KAAK,wBAAwB;AAC7B,KAAK,wBAAwB;AAC7B;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,8CAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sBAAsB,mBAAmB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,sBAAsB;AACtB,gBAAgB,qCAAqC;AACrD;AACA,sBAAsB;AACtB,gBAAgB,kBAAkB;AAClC;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAmB;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAmB;AAC/B;;AAEA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,sBAAsB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAmB;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;;AAEA,iBAAiB;;AAEjB;AACA,kBAAkB;;;AAGlB;AACA;AACA;AACA;AACA;;AAEA,YAAY,sBAAsB;AAClC;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA,cAAc;AACd,EAAE;;;AAGF;AACA;AACA,cAAc;AACd,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA,cAAc;AACd,EAAE;;;AAGF;AACA,sDAAsD;;AAEtD;AACA,iCAAiC,aAAa;;AAE9C,cAAc;AACd,EAAE;;;AAGF;;AAEA;AACA;AACA,iCAAiC,+BAA+B;;AAEhE,cAAc;AACd,EAAE;;;AAGF;AACA,qCAAqC;;AAErC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA,oBAAoB;;;AAGpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,kBAAkB;AAC/B;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,sBAAsB;AACtB;;AAEA;AACA;AACA,+BAA+B;AAC/B,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAA0B;;AAE1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,IAAI;AACJ,GAAG;;AAEH;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,KAAK;AACL,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA,uCAAuC;AACvC;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,KAAK;AACL,WAAW;AACX;AACA,GAAG;;AAEH,uBAAuB;AACvB;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA,gBAAgB;AAChB;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA,uBAAuB;;AAEvB;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB,QAAQ;AACjC;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;;AAEA,yDAAyD;AACzD;AACA,mBAAmB;AACnB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B,iEAAiE,sBAAsB;AACvF;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA,oCAAoC;AACpC,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,4BAA4B;AAC5B,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,uBAAuB;;AAEvB;AACA;AACA,iDAAiD;AACjD;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;;AAEf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;;AAEA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,8BAA8B;AAC9B,6BAA6B;AAC7B;AACA;AACA;AACA,mCAAmC;AACnC,mEAAmE;AACnE;AACA;AACA;;AAEA,+BAA+B;AAC/B,8BAA8B;AAC9B;AACA;AACA;AACA,oCAAoC;AACpC,kEAAkE;AAClE;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA,mCAAmC;;AAEnC;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B;;AAE7B;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA,0CAA0C;AAC1C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;;AAEA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,gEAAgE;;AAEhE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,2DAA2D;;AAE3D;;AAEA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,8DAA8D;AAC9D,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,qEAAqE;;AAErE;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,gEAAgE;;AAEhE;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,IAAI,iBAAiB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;;AAEA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,sBAAsB;AACtB;AACA;;;AAGA;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,6EAA6E;AAC7E,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;;AAEA,mCAAmC;;AAEnC;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;;AAEA;;AAEA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,mDAAmD;AACxE,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,uBAAuB;AACvB;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,sCAAsC;AACtC;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,4BAA4B;AAC5B,IAAI;AACJ;AACA;AACA;;AAEA,kBAAkB;;AAElB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,uBAAuB;AACvB;AACA;AACA,IAAI;AACJ,wBAAwB;AACxB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,sCAAsC;AACtC;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,yBAAyB;AACzB;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ,uBAAuB;AACvB,2BAA2B;AAC3B,yBAAyB;AACzB;AACA,IAAI;AACJ,wBAAwB;AACxB;AACA,IAAI;AACJ;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,uBAAuB;AACvB;AACA,IAAI;AACJ,wBAAwB;AACxB;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,qBAAqB;;AAErB;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,8DAA8D;AAC9D;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,0BAA0B;AAC1B,IAAI;AACJ,wBAAwB;AACxB;AACA;AACA,IAAI;AACJ;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,6BAA6B;AAC7B,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,eAAe;AACf;AACA;;AAEA,cAAc,eAAe;AAC7B;;AAEA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA,0BAA0B,6BAA6B,EAAE;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,uCAAuC;AAChE,yBAAyB,sCAAsC,EAAE;AACjE,wBAAwB,yCAAyC;AACjE,qBAAqB,mCAAmC;;AAExD;AACA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,0DAA0D;AAC1D;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,iDAAiD;AACjD;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA,mDAAmD;AACnD;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,eAAe;AACf,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC;AACjC;AACA;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA,EAAE;;;AAGF,iCAAiC;AACjC,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,yBAAyB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA,mDAAmD;;AAEnD;AACA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA,6CAA6C;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,cAAc,iBAAiB;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa;AACb,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,0DAA0D;;AAE1D;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,EAAE;;;AAGF;AACA,EAAE;;;AAGF;AACA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA,mCAAmC;AACnC,EAAE;;;AAGF;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,EAAE;;;AAGF,kCAAkC;AAClC;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,+BAA+B;AAC/B;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,EAAE;;;AAGF,kCAAkC;AAClC;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF,2BAA2B;AAC3B;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF,8BAA8B;AAC9B;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA,aAAa,wBAAwB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF,2BAA2B;AAC3B;AACA,EAAE;;;AAGF,uBAAuB;AACvB;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;;AAGD,uBAAuB;;;AAGvB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa,2BAA2B;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,yBAAyB;;AAEzB,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+CAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA;;AAEA,yDAAyD;AACzD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA,8BAA8B;AAC9B,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,UAAU;AACV,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA,oCAAoC;;AAEpC;AACA,wCAAwC;AACxC;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B;AAC9B;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,8BAA8B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,UAAU;AACV,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA,iBAAiB;AACjB;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,4DAA4D;AAC5D,2DAA2D;AAC3D,oFAAoF;AACpF;AACA;AACA,wBAAwB;AACxB,wBAAwB;;AAExB,eAAe,mBAAmB;AAClC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC;AAClC,iCAAiC;;AAEjC,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,2DAA2D;AAC3D,oFAAoF;AACpF;AACA;AACA,wBAAwB;AACxB;AACA,wBAAwB;;AAExB,eAAe,mBAAmB;AAClC;AACA;;AAEA,qBAAqB,cAAc;;AAEnC;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC,kCAAkC;;AAElC,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,gCAAgC;AAChC,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,6DAA6D;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,gCAAgC;AAChC,EAAE;;;AAGF;AACA;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,2EAA2E;AAC3E;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA,uCAAuC;AACvC;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,+DAA+D;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,gEAAgE;AAChE,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;;AAEA;AACA,kBAAkB,mBAAmB;AACrC,2BAA2B;AAC3B,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA,+CAA+C;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,+DAA+D;AAC/D,KAAK;AACL;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA,iEAAiE;;AAEjE;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,YAAY;AACZ,EAAE;;;AAGF;AACA,YAAY;AACZ,EAAE;;;AAGF;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,OAAO;AACb;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,OAAO;AACb;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,oEAAoE;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA,IAAI;;AAEJ;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA,oEAAoE;;AAEpE;AACA;AACA;AACA,GAAG;AACH;;AAEA,CAAC;;;AAGD;AACA;AACA,CAAC;AACD;AACA,CAAC;;;AAGD;AACA;AACA,CAAC;AACD;AACA,CAAC;;;AAGD;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;;;AAGD;AACA;AACA,CAAC;AACD;AACA,CAAC;;;AAGD;AACA,2DAA2D;AAC3D,CAAC;;;AAGD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uEAAuE;;AAEvE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU;AACV,EAAE;;;AAGF;AACA,0BAA0B,UAAU;AACpC,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,uCAAuC;AACvC;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,gDAAgD;AAChD,2BAA2B;AAC3B;AACA;;AAEA;AACA,yBAAyB;AACzB;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA,qDAAqD,SAAS;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,IAAI;AACJ;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;;AAEA,wCAAwC;;AAExC;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,kBAAkB;AAClB,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;;AAEA;;AAEA,8CAA8C;AAC9C,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,SAAS;AACT,4DAA4D;AAC5D;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA,mCAAmC;AACnC;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,8CAA8C;AAC9C,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF,uBAAuB;AACvB;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF,6BAA6B;AAC7B;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA,8BAA8B,aAAa;AAC3C;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,4CAA4C;;AAE5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;;AAEhD;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0BAA0B;AAC1B,6BAA6B;AAC7B;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AAEA;;AAEA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,oDAAoD;AACpD;;AAEA,2BAA2B;;AAE3B;AACA,EAAE;;;AAGF;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA,8BAA8B;;AAE9B;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB,yDAAyD;AACzD,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;;AAIF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iDAAiD;AACjD,wCAAwC;AACxC;AACA,IAAI;;AAEJ,cAAc,sBAAsB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qBAAqB;AACrB,yBAAyB;AACzB,0BAA0B;AAC1B;AACA,WAAW;AACX,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB,oCAAoC;AACpC,YAAY;AACZ;;AAEA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4BAA4B;;AAE5B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA,8DAA8D;AAC9D,6BAA6B;AAC7B;AACA;AACA,GAAG;;AAEH;AACA,6BAA6B;AAC7B,8CAA8C;AAC9C;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,eAAe;AACf;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF,wBAAwB;AACxB;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA,sDAAsD;AACtD;AACA;AACA,6CAA6C;AAC7C;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,qEAAqE;AACrE;AACA,GAAG;AACH;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,YAAY,4BAA4B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,4BAA4B;;AAE5B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;;AAEA,YAAY,iCAAiC;AAC7C;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,gEAAgE;;AAEhE,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;;AAEA,YAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mCAAmC;AAC/C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA,YAAY,wBAAwB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA,gDAAgD;AAChD,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,cAAc,oBAAoB;AAClC;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;;AAEA,aAAa,oBAAoB;AACjC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;;AAEA,aAAa,oBAAoB;AACjC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B;AAC5B,yCAAyC;AACzC;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA,cAAc,4BAA4B;AAC1C;AACA;AACA;;AAEA;;AAEA,qBAAqB;AACrB,8CAA8C;AAC9C;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;;AAEA,iBAAiB,4BAA4B;AAC7C;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uEAAuE;AACvE;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,oBAAoB;;AAEpB;AACA;AACA;AACA,4CAA4C;AAC5C,GAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,8BAA8B,UAAU;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA,4BAA4B;AAC5B;AACA;;;AAGA,wBAAwB;AACxB,UAAU;AACV;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uCAAuC;;;AAGvC;;;AAGA;AACA;AACA;;AAEA;AACA,mFAAmF;;AAEnF;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,+EAA+E;;AAE/E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,8CAA8C;;AAE9C;AACA;;AAEA;AACA,oBAAoB;AACpB;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,EAAE;;AAEF;AACA,yCAAyC;AACzC;AACA,2BAA2B;AAC3B,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,EAAE;;AAEF;AACA;AACA;AACA,0BAA0B;AAC1B;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA;;AAEA,YAAY,mBAAmB;AAC/B;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA,iBAAiB,oBAAoB;AACrC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,cAAc;AACjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,oBAAoB;AACpB;;AAEA;AACA,EAAE;;;AAGF;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,aAAa,2BAA2B;AACxC;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA,gCAAgC;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,oDAAoD;AACpD;;AAEA;AACA,EAAE;;;AAGF,mDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA,iDAAiD;AACjD;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,gDAAgD;AAChD;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,wCAAwC;AACxC;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,wBAAwB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,oBAAoB;AACjC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA,EAAE;;;AAGF;AACA;AACA;AACA,GAAG;;AAEH;AACA,mDAAmD;AACnD;AACA,EAAE;;;AAGF;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB;AACrB,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,sBAAsB;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA,sBAAsB;;AAEtB;;AAEA,0CAA0C;AAC1C,8BAA8B;;AAE9B;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qDAAqD;AACrD,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kDAAkD;AAClD,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA,uBAAuB;;AAEvB;AACA;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,kEAAkE;;AAElE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;;;AAGA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;;AAEA;AACA;AACA;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA4B;AAC5B;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;;;AAGA,uCAAuC;AACvC;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,aAAa,2BAA2B;AACxC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;AACA,iDAAiD;AACjD,GAAG;AACH,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF,uBAAuB;AACvB;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;;AAEA;;AAEA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC;AAChC;;AAEA;AACA,sCAAsC;AACtC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC;AACvC;AACA,8CAA8C;AAC9C;AACA;AACA,gCAAgC;AAChC;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,YAAY,sBAAsB;AAClC;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA,+CAA+C;AAC/C,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,0BAA0B;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA,qCAAqC;AACrC,sBAAsB;AACtB,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,sBAAsB;AACpC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA,CAAC;;;AAGD;AACA;;AAEA;AACA,kCAAkC;AAClC;AACA;AACA,gCAAgC;AAChC,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA,CAAC;;;AAGD;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA,mCAAmC;AACnC,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,0DAA0D;;AAE1D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;;AAEA;AACA,wCAAwC;AACxC;AACA;AACA,yCAAyC;AACzC,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA,mBAAmB;;;AAGnB;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,YAAY;AACZ,gBAAgB;AAChB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA,kDAAkD;AAClD;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC;;AAEpC;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,+CAA+C;AAC/C;AACA,qBAAqB;AACrB,sBAAsB;AACtB,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,cAAc,OAAO;AAClC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,sBAAsB,OAAO;AAC5C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;;AAEA;AACA,cAAc,mBAAmB;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,yBAAyB;AACtC;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,0CAA0C;AAC1C,EAAE;;;AAGF;AACA;AACA,mCAAmC;AACnC,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;;AAEA,YAAY,sBAAsB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B,wEAAwE;AACxE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH,wBAAwB;AACxB;;AAEA,CAAC;;AAED;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA,mBAAmB;;AAEnB;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,cAAc;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;;AAEH;AACA,eAAe,cAAc;AAC7B,gBAAgB,cAAc;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK,2BAA2B;AAChC,KAAK,4BAA4B;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK,2BAA2B;AAChC;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,yEAAyE;AACzE,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,0BAA0B;;AAE1B;AACA,EAAE;;;AAGF;AACA;AACA;AACA,mCAAmC;AACnC,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;;AAEA;AACA;AACA;;AAEA,eAAe;AACf;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA,eAAe,yBAAyB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,kCAAkC;AAClC,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,kBAAkB;AAC/B,gDAAgD;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe;AACf,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,cAAc;AACd,gBAAgB;AAChB,iBAAiB;AACjB,mBAAmB;AACnB;AACA,gBAAgB;AAChB,qBAAqB;AACrB,mBAAmB;AACnB;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8DAA8D;AAC9D;AACA;;AAEA;AACA,kCAAkC;;AAElC;AACA,cAAc,sBAAsB;AACpC;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB,kDAAkD;AAClD;AACA;;AAEA;AACA,gBAAgB,yBAAyB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;;AAEA,gCAAgC;AAChC,oCAAoC;AACpC,0CAA0C;AAC1C;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,IAAI;AACJ,EAAE;;;AAGF;AACA;AACA;AACA;AACA,mCAAmC;AACnC,YAAY;AACZ;;AAEA;AACA,mBAAmB;AACnB;AACA;AACA,+BAA+B;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA,6CAA6C;AAC7C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uDAAuD;AACvD;;AAEA,aAAa,iBAAiB;;AAE9B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,kFAAkF;AAClF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kCAAkC;;AAElC;AACA;AACA,sCAAsC;AACtC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC;AACtC;;AAEA,gBAAgB;;AAEhB;AACA;;AAEA,uDAAuD;;AAEvD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,oDAAoD;AACpD,EAAE;;;AAGF;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,uDAAuD;AACvD;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA,UAAU;AACV,EAAE;;;AAGF;AACA,UAAU;AACV,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA,2BAA2B;;;AAG3B;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO,6DAA6D;AACpE;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yDAAyD;AACzD,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA,sFAAsF;AACtF;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,4BAA4B;AAC3C;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA,oBAAoB;AACpB;AACA;AACA,IAAI;AACJ;AACA,EAAE;;;AAGF;AACA;AACA,0CAA0C;AAC1C,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,oBAAoB;;AAEpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,0CAA0C;AAC1C,qCAAqC;AACrC;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;;AAEA;;AAEA,cAAc,mBAAmB;AACjC;AACA;;AAEA,cAAc,mBAAmB;AACjC;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC;;AAEvC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA,YAAY,sBAAsB;AAClC;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,wCAAwC;AACxC,sCAAsC;AACtC,wDAAwD;AACxD,WAAW;AACX,YAAY;;AAEZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;;AAEA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,eAAe;AACzB;;AAEA;AACA,WAAW,iBAAiB;AAC5B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,iBAAiB;AAC3B;;AAEA,WAAW,gBAAgB;AAC3B;;AAEA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC;;AAEzC,WAAW,sBAAsB;AACjC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA,wBAAwB;AACxB;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,mBAAmB;;AAEnB,sCAAsC;;AAEtC;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;;AAEhD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC;AACvC,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,mBAAmB,SAAS;AAC3C;;AAEA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA,kBAAkB;AAClB,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD,4DAA4D;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,2CAA2C;AAC3C,4CAA4C;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;;AAER,cAAc,4BAA4B;AAC1C;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA,+BAA+B;AAC/B,4CAA4C;AAC5C;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC,wBAAwB;AACxB;;AAEA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;;AAEhB;AACA;AACA;;AAEA,uDAAuD;;AAEvD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,oDAAoD;AACpD,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA,UAAU;AACV,EAAE;;;AAGF;AACA,UAAU;AACV,EAAE;;;AAGF;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;;AAGA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO,2DAA2D;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA,YAAY,4BAA4B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE,WAAW;AACb,EAAE,cAAc;AAChB,EAAE,cAAc;AAChB,EAAE,cAAc;AAChB,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;;AAGF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0CAA0C;AAC1C,EAAE;;;AAGF;AACA,0BAA0B;AAC1B,EAAE;;;AAGF;AACA;AACA,EAAE;;;AAGF;AACA;AACA,oDAAoD;AACpD,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,6BAA6B;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;;AAEA,EAAE;;;AAGF;;AAEA;AACA;AACA;AACA;;AAEA,8DAA8D;;AAE9D;AACA;AACA;;AAEA,0CAA0C;AAC1C,gCAAgC;AAChC;AACA;AACA;;AAEA,EAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,6BAA6B;AACjD;;AAEA,iBAAiB;;AAEjB;AACA;;AAEA;;AAEA,eAAe,oBAAoB;AACnC,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA,qBAAqB;AACrB;;AAEA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,kCAAkC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,iCAAiC;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,UAAU;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,UAAU;AACtB;AACA;AACA;AACA;;AAEA;;AAEA,UAAU;AACV,CAAC,E;;;;;;;ACr4jBD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;ACvLtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AAC2C;AACC;AACI;AACE;AACH;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mBAAmB,KAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,aAAa;AACb,aAAa;AACb;AACA,eAAe,gBAAgB;AAC/B;AACA,eAAe,OAAO;AACtB;AACA,eAAe,qBAAqB;AACpC,eAAe,2BAA2B;AAC1C;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,YAAY,4EAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kEAAkE;AACzG;AACA;AACA;AACA;AACA,uCAAuC,yCAAyC;AAChF;AACA;AACA;AACA;AACA,uCAAuC,oDAAoD;AAC3F;AACA;AACA;AACA;AACA,2BAA2B,mEAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA,yBAAyB,wEAAQ;AACjC,2BAA2B,sEAAW;AACtC,iCAAiC,sEAAW;AAC5C;AACA;AACA;AACA;AACA,SAAS,iBAAiB,2BAA2B;AACrD;AACA;AACA;AACA,CAAC,CAAC,+DAAU;AACZ;;;;;;;;;ACxNA;AAAA;AAAA;AAC4D;AACrD,gBAAgB,iFAAmB;AAC1C;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,uBAAuB,SAAS;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,KAAK;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,mBAAO,CAAC,gDAAoB;;AAE/C;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA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","file":"incidencias.module.chunk.js","sourcesContent":["if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/inherits/inherits_browser.js\n// module id = ./node_modules/inherits/inherits_browser.js\n// module chunks = incidencias.module","import { Component, ElementRef, EventEmitter, Input, NgModule, NgZone, Output } from '@angular/core';\r\nimport $ from 'jquery';\r\nimport fullcalendar from 'fullcalendar';\r\n$.fn.fullCalendar = function(options) {\r\n\tvar args = Array.prototype.slice.call(arguments, 1); // for a possible method call\r\n\tvar res = this; // what this function will return (this jQuery object by default)\r\n\r\n\tthis.each(function(i, _element) { // loop each DOM element involved\r\n\t\tvar element = $(_element);\r\n\t\tvar calendar = element.data('fullCalendar'); // get the existing calendar object (if any)\r\n\t\tvar singleRes; // the returned value of this single method call\r\n\r\n\t\t// a method call\r\n\t\tif (typeof options === 'string') {\r\n\r\n\t\t\tif (options === 'getCalendar') {\r\n\t\t\t\tif (!i) { // first element only\r\n\t\t\t\t\tres = calendar;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (options === 'destroy') { // don't warn if no calendar object\r\n\t\t\t\tif (calendar) {\r\n\t\t\t\t\tcalendar.destroy();\r\n\t\t\t\t\telement.removeData('fullCalendar');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!calendar) {\r\n\t\t\t\tFC.warn(\"Attempting to call a FullCalendar method on an element with no calendar.\");\r\n\t\t\t}\r\n\t\t\telse if ($.isFunction(calendar[options])) {\r\n\t\t\t\tsingleRes = calendar[options].apply(calendar, args);\r\n\r\n\t\t\t\tif (!i) {\r\n\t\t\t\t\tres = singleRes; // record the first method call result\r\n\t\t\t\t}\r\n\t\t\t\tif (options === 'destroy') { // for the destroy method, must remove Calendar object data\r\n\t\t\t\t\telement.removeData('fullCalendar');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tFC.warn(\"'\" + options + \"' is an unknown FullCalendar method.\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t// a new calendar initialization\r\n\t\telse if (!calendar) { // don't initialize twice\r\n\t\t\tcalendar = new fullcalendar.Calendar(element, options);\r\n\t\t\telement.data('fullCalendar', calendar);\r\n\t\t\tcalendar.render();\r\n\t\t}\r\n\t});\r\n\r\n\treturn res;\r\n};\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n(function () {\r\n    /**\r\n     * @param {?} event\r\n     * @param {?} params\r\n     * @return {?}\r\n     */\r\n    function CustomEvent(event, params) {\r\n        params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n        var /** @type {?} */ evt = /** @type {?} */ (document.createEvent('CustomEvent'));\r\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n        return evt;\r\n    }\r\n    \r\n    CustomEvent.prototype = Event.prototype;\r\n    window.CustomEvent = /** @type {?} */ (CustomEvent);\r\n})();\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar CalendarComponent = /** @class */ (function () {\r\n    function CalendarComponent(element, zone) {\r\n        this.element = element;\r\n        this.zone = zone;\r\n        this._reRender = true;\r\n        // Notify when things change\r\n        this.eventsModelChange = new EventEmitter();\r\n        // Various events\r\n        this.eventDrop = new EventEmitter();\r\n        this.eventResize = new EventEmitter();\r\n        this.eventResizeStart = new EventEmitter();\r\n        this.eventResizeStop = new EventEmitter();\r\n        this.eventClick = new EventEmitter();\r\n        this.clickButton = new EventEmitter();\r\n        this.windowResize = new EventEmitter();\r\n        this.viewRender = new EventEmitter();\r\n        this.eventAfterRender = new EventEmitter();\r\n        this.eventAfterAllRender = new EventEmitter();\r\n        this.viewDestroy = new EventEmitter();\r\n        this.eventRender = new EventEmitter();\r\n        this.eventDestroy = new EventEmitter();\r\n        this.eventMouseOver = new EventEmitter();\r\n        this.eventMouseOut = new EventEmitter();\r\n        this.initialized = new EventEmitter();\r\n        this.select = new EventEmitter();\r\n        this.unselect = new EventEmitter();\r\n        this.dayClick = new EventEmitter();\r\n        this.navLinkDayClick = new EventEmitter();\r\n        this.navLinkWeekClick = new EventEmitter();\r\n        this.eventDragStart = new EventEmitter();\r\n        this.eventDragStop = new EventEmitter();\r\n        this.drop = new EventEmitter();\r\n        this.eventReceive = new EventEmitter();\r\n        this.dayRender = new EventEmitter();\r\n        this.resourceRender = new EventEmitter();\r\n    }\r\n    Object.defineProperty(CalendarComponent.prototype, \"eventsModel\", {\r\n        get: /**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            return this._eventsModel;\r\n        },\r\n        set: /**\r\n         * @param {?} value\r\n         * @return {?}\r\n         */\r\n        function (value) {\r\n            var _this = this;\r\n            this._eventsModel = value;\r\n            if (this._reRender) {\r\n                setTimeout(function () {\r\n                    _this.renderEvents(value);\r\n                }, 50);\r\n            }\r\n            else {\r\n                this._reRender = true;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.ngAfterViewInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.updaterOptions();\r\n            _this.zone.runOutsideAngular(function () {\r\n                $(_this.element.nativeElement).fullCalendar(_this.options);\r\n                _this._eventsModel = _this.options.events;\r\n                _this.eventsModelChange.next(_this.options.events);\r\n                _this.initialized.emit(true);\r\n                // Click listeners\r\n                var /** @type {?} */ elem = document.getElementsByTagName('ng-fullcalendar');\r\n                $('[class ^=\"fc\"][class *=\"button\"]').click(function (el) {\r\n                    var /** @type {?} */ classnames = el.currentTarget.className.split(' ');\r\n                    classnames.forEach(function (name) {\r\n                        if (name.indexOf('button') == name.length - 6) {\r\n                            name = name.replace(/fc|button|-/g, '');\r\n                            if (name != '') {\r\n                                // this.renderEvents(this._eventsModel);\r\n                                eventDispatch(name);\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n                /**\r\n                 * @param {?} buttonType\r\n                 * @return {?}\r\n                 */\r\n                function eventDispatch(buttonType) {\r\n                    var /** @type {?} */ data = $('ng-fullcalendar').fullCalendar('getDate');\r\n                    var /** @type {?} */ currentDetail = {\r\n                        buttonType: buttonType,\r\n                        data: data\r\n                    };\r\n                    var /** @type {?} */ widgetEvent = new CustomEvent('clickButton', {\r\n                        bubbles: true,\r\n                        detail: currentDetail\r\n                    });\r\n                    for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                        elem[i].dispatchEvent(widgetEvent);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.ngAfterContentChecked = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.ngAfterViewChecked = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.updateEventsBeforeResize = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var /** @type {?} */ events = this.fullCalendar('clientEvents');\r\n        this._reRender = false;\r\n        this.eventsModel = events;\r\n        this.eventsModelChange.next(events);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.updaterOptions = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        var /** @type {?} */ elem = document.getElementsByTagName('ng-fullcalendar');\r\n        this.options.eventDrop = function (event, duration, revertFunc) {\r\n            var /** @type {?} */ detail = { event: event, duration: duration, revertFunc: revertFunc };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventDrop', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            _this.updateEventsBeforeResize();\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.eventResize = function (event, duration, revertFunc) {\r\n            var /** @type {?} */ detail = { event: event, duration: duration, revertFunc: revertFunc };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventResize', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            _this.updateEventsBeforeResize();\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.eventResizeStart = function (event, jsEvent, ui, view) {\r\n            var /** @type {?} */ detail = {\r\n                event: event, jsEvent: jsEvent, ui: ui, view: view\r\n            };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventResizeStart', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventResizeStop = function (event, jsEvent, ui, view) {\r\n            var /** @type {?} */ detail = {\r\n                event: event, jsEvent: jsEvent, ui: ui, view: view\r\n            };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventResizeStop', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventRender = function (event, element, view) {\r\n            var /** @type {?} */ detail = { event: event, element: element, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventRender', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.eventDestroy = function (event, element, view) {\r\n            var /** @type {?} */ detail = { event: event, element: element, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventDestroy', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventAfterRender = function (event, element, view) {\r\n            var /** @type {?} */ detail = { event: event, element: element, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventAfterRender', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventClick = function (event, jsEvent, view) {\r\n            var /** @type {?} */ detail = { event: event, duration: null, jsEvent: jsEvent, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventClick', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.windowResize = function (view) {\r\n            var /** @type {?} */ detail = { view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('windowResize', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            if (elem && elem[0]) {\r\n                for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                    elem[i].dispatchEvent(widgetEvent);\r\n                }\r\n            }\r\n        };\r\n        this.options.viewRender = function (view, element) {\r\n            var /** @type {?} */ detail = { view: view, element: element };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('viewRender', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.viewDestroy = function (view, element) {\r\n            var /** @type {?} */ detail = { view: view, element: element };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('viewDestroy', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.select = function (start, end, jsEvent, view, resource) {\r\n            var /** @type {?} */ detail = { start: start, end: end, jsEvent: jsEvent, view: view, resource: resource };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('select', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.unselect = function (view, jsEvent) {\r\n            var /** @type {?} */ detail = { view: view, jsEvent: jsEvent };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('unselect', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.dayClick = function (date, jsEvent, view) {\r\n            var /** @type {?} */ detail = { date: date, jsEvent: jsEvent, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('dayClick', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.navLinkDayClick = function (date, jsEvent) {\r\n            var /** @type {?} */ detail = { date: date, jsEvent: jsEvent };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('navLinkDayClick', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.navLinkWeekClick = function (weekStart, jsEvent) {\r\n            var /** @type {?} */ detail = { weekStart: weekStart, jsEvent: jsEvent };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('navLinkWeekClick', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            for (var /** @type {?} */ i = 0; i < elem.length; i++) {\r\n                elem[i].dispatchEvent(widgetEvent);\r\n            }\r\n        };\r\n        this.options.eventDragStart = function (event, jsEvent, ui, view) {\r\n            var /** @type {?} */ detail = { event: event, jsEvent: jsEvent, ui: ui, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventDragStart', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventDragStop = function (event, jsEvent, ui, view) {\r\n            var /** @type {?} */ detail = { event: event, jsEvent: jsEvent, ui: ui, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventDragStop', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventMouseover = function (event, jsEvent, view) {\r\n            var /** @type {?} */ detail = { event: event, jsEvent: jsEvent, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventMouseOver', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventMouseout = function (event, jsEvent, view) {\r\n            var /** @type {?} */ detail = { event: event, jsEvent: jsEvent, view: view };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventMouseOut', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.drop = function (date, jsEvent, ui, resourceId) {\r\n            var /** @type {?} */ detail = { date: date, jsEvent: jsEvent, ui: ui, resourceId: resourceId };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('drop', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            // probably need to add an event - not handled!\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.eventReceive = function (event) {\r\n            var /** @type {?} */ detail = { event: event };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('eventReceive', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.dayRender = function (date, cell) {\r\n            var /** @type {?} */ detail = { date: date, cell: cell };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('dayRender', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n        this.options.resourceRender = function (resourceObj, labelTds, bodyTds) {\r\n            var /** @type {?} */ detail = { resourceObj: resourceObj, labelTds: labelTds, bodyTds: bodyTds };\r\n            var /** @type {?} */ widgetEvent = new CustomEvent('resourceRender', {\r\n                bubbles: true,\r\n                detail: detail\r\n            });\r\n            elem[0].dispatchEvent(widgetEvent);\r\n        };\r\n    };\r\n    /**\r\n     * @param {...?} args\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.fullCalendar = /**\r\n     * @param {...?} args\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!args) {\r\n            return;\r\n        }\r\n        switch (args.length) {\r\n            case 0:\r\n                return;\r\n            case 1:\r\n                return $(this.element.nativeElement).fullCalendar(args[0]);\r\n            case 2:\r\n                return $(this.element.nativeElement).fullCalendar(args[0], args[1]);\r\n            case 3:\r\n                return $(this.element.nativeElement).fullCalendar(args[0], args[1], args[2]);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.updateEvent = /**\r\n     * @param {?} event\r\n     * @return {?}\r\n     */\r\n    function (event) {\r\n        return $(this.element.nativeElement).fullCalendar('updateEvent', event);\r\n    };\r\n    /**\r\n     * @param {?} idOrFilter\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.clientEvents = /**\r\n     * @param {?} idOrFilter\r\n     * @return {?}\r\n     */\r\n    function (idOrFilter) {\r\n        return $(this.element.nativeElement).fullCalendar('clientEvents', idOrFilter);\r\n    };\r\n    /**\r\n     * @param {?} events\r\n     * @return {?}\r\n     */\r\n    CalendarComponent.prototype.renderEvents = /**\r\n     * @param {?} events\r\n     * @return {?}\r\n     */\r\n    function (events) {\r\n        $(this.element.nativeElement).fullCalendar('removeEvents');\r\n        if (events && events.length > 0) {\r\n            $(this.element.nativeElement).fullCalendar('renderEvents', events, true);\r\n            $(this.element.nativeElement).fullCalendar('rerenderEvents');\r\n        }\r\n    };\r\n    CalendarComponent.decorators = [\r\n        { type: Component, args: [{\r\n                    selector: 'ng-fullcalendar',\r\n                    template: '',\r\n                },] },\r\n    ];\r\n    /** @nocollapse */\r\n    CalendarComponent.ctorParameters = function () { return [\r\n        { type: ElementRef, },\r\n        { type: NgZone, },\r\n    ]; };\r\n    CalendarComponent.propDecorators = {\r\n        \"eventsModel\": [{ type: Input, args: ['eventsModel',] },],\r\n        \"eventsModelChange\": [{ type: Output },],\r\n        \"options\": [{ type: Input },],\r\n        \"eventDrop\": [{ type: Output },],\r\n        \"eventResize\": [{ type: Output },],\r\n        \"eventResizeStart\": [{ type: Output },],\r\n        \"eventResizeStop\": [{ type: Output },],\r\n        \"eventClick\": [{ type: Output },],\r\n        \"clickButton\": [{ type: Output },],\r\n        \"windowResize\": [{ type: Output },],\r\n        \"viewRender\": [{ type: Output },],\r\n        \"eventAfterRender\": [{ type: Output },],\r\n        \"eventAfterAllRender\": [{ type: Output },],\r\n        \"viewDestroy\": [{ type: Output },],\r\n        \"eventRender\": [{ type: Output },],\r\n        \"eventDestroy\": [{ type: Output },],\r\n        \"eventMouseOver\": [{ type: Output },],\r\n        \"eventMouseOut\": [{ type: Output },],\r\n        \"initialized\": [{ type: Output },],\r\n        \"select\": [{ type: Output },],\r\n        \"unselect\": [{ type: Output },],\r\n        \"dayClick\": [{ type: Output },],\r\n        \"navLinkDayClick\": [{ type: Output },],\r\n        \"navLinkWeekClick\": [{ type: Output },],\r\n        \"eventDragStart\": [{ type: Output },],\r\n        \"eventDragStop\": [{ type: Output },],\r\n        \"drop\": [{ type: Output },],\r\n        \"eventReceive\": [{ type: Output },],\r\n        \"dayRender\": [{ type: Output },],\r\n        \"resourceRender\": [{ type: Output },],\r\n    };\r\n    return CalendarComponent;\r\n}());\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar FullCalendarModule = /** @class */ (function () {\r\n    function FullCalendarModule() {\r\n    }\r\n    FullCalendarModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    declarations: [CalendarComponent],\r\n                    exports: [CalendarComponent],\r\n                },] },\r\n    ];\r\n    return FullCalendarModule;\r\n}());\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar ButtonClickModel = /** @class */ (function () {\r\n    function ButtonClickModel() {\r\n    }\r\n    return ButtonClickModel;\r\n}());\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar UpdateEventModel = /** @class */ (function () {\r\n    function UpdateEventModel() {\r\n    }\r\n    return UpdateEventModel;\r\n}());\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/**\r\n * Generated bundle index. Do not edit.\r\n */\r\n\r\nexport { FullCalendarModule, CalendarComponent, ButtonClickModel, UpdateEventModel };\r\n//# sourceMappingURL=ng-fullcalendar.es5.js.map\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/ng-fullcalendar/ng-fullcalendar.es5.js\n// module id = ./node_modules/ng-fullcalendar/ng-fullcalendar.es5.js\n// module chunks = incidencias.module","/*!\n * FullCalendar v3.6.1\n * Docs & License: https://fullcalendar.io/\n * (c) 2017 Adam Shaw\n */\n\n(function(factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine([ 'jquery', 'moment' ], factory);\n\t}\n\telse if (typeof exports === 'object') { // Node/CommonJS\n\t\tmodule.exports = factory(require('jquery'), require('moment'));\n\t}\n\telse {\n\t\tfactory(jQuery, moment);\n\t}\n})(function($, moment) {\n\n;;\n\nvar FC = $.fullCalendar = {\n\tversion: \"3.6.1\",\n\t// When introducing internal API incompatibilities (where fullcalendar plugins would break),\n\t// the minor version of the calendar should be upped (ex: 2.7.2 -> 2.8.0)\n\t// and the below integer should be incremented.\n\tinternalApiVersion: 11\n};\nvar fcViews = FC.views = {};\n\n\n$.fn.fullCalendar = function(options) {\n\tvar args = Array.prototype.slice.call(arguments, 1); // for a possible method call\n\tvar res = this; // what this function will return (this jQuery object by default)\n\n\tthis.each(function(i, _element) { // loop each DOM element involved\n\t\tvar element = $(_element);\n\t\tvar calendar = element.data('fullCalendar'); // get the existing calendar object (if any)\n\t\tvar singleRes; // the returned value of this single method call\n\n\t\t// a method call\n\t\tif (typeof options === 'string') {\n\n\t\t\tif (options === 'getCalendar') {\n\t\t\t\tif (!i) { // first element only\n\t\t\t\t\tres = calendar;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (options === 'destroy') { // don't warn if no calendar object\n\t\t\t\tif (calendar) {\n\t\t\t\t\tcalendar.destroy();\n\t\t\t\t\telement.removeData('fullCalendar');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!calendar) {\n\t\t\t\tFC.warn(\"Attempting to call a FullCalendar method on an element with no calendar.\");\n\t\t\t}\n\t\t\telse if ($.isFunction(calendar[options])) {\n\t\t\t\tsingleRes = calendar[options].apply(calendar, args);\n\n\t\t\t\tif (!i) {\n\t\t\t\t\tres = singleRes; // record the first method call result\n\t\t\t\t}\n\t\t\t\tif (options === 'destroy') { // for the destroy method, must remove Calendar object data\n\t\t\t\t\telement.removeData('fullCalendar');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tFC.warn(\"'\" + options + \"' is an unknown FullCalendar method.\");\n\t\t\t}\n\t\t}\n\t\t// a new calendar initialization\n\t\telse if (!calendar) { // don't initialize twice\n\t\t\tcalendar = new Calendar(element, options);\n\t\t\telement.data('fullCalendar', calendar);\n\t\t\tcalendar.render();\n\t\t}\n\t});\n\n\treturn res;\n};\n\n\nvar complexOptions = [ // names of options that are objects whose properties should be combined\n\t'header',\n\t'footer',\n\t'buttonText',\n\t'buttonIcons',\n\t'themeButtonIcons'\n];\n\n\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n\treturn mergeProps(optionObjs, complexOptions);\n}\n\n;;\n\n// exports\nFC.applyAll = applyAll;\nFC.debounce = debounce;\nFC.isInt = isInt;\nFC.htmlEscape = htmlEscape;\nFC.cssToStr = cssToStr;\nFC.proxy = proxy;\nFC.capitaliseFirstLetter = capitaliseFirstLetter;\n\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\n\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEls, scrollbarWidths) {\n\tif (scrollbarWidths.left) {\n\t\trowEls.css({\n\t\t\t'border-left-width': 1,\n\t\t\t'margin-left': scrollbarWidths.left - 1\n\t\t});\n\t}\n\tif (scrollbarWidths.right) {\n\t\trowEls.css({\n\t\t\t'border-right-width': 1,\n\t\t\t'margin-right': scrollbarWidths.right - 1\n\t\t});\n\t}\n}\n\n\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEls) {\n\trowEls.css({\n\t\t'margin-left': '',\n\t\t'margin-right': '',\n\t\t'border-left-width': '',\n\t\t'border-right-width': ''\n\t});\n}\n\n\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n\t$('body').addClass('fc-not-allowed');\n}\n\n\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n\t$('body').removeClass('fc-not-allowed');\n}\n\n\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and \n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n\n\t// *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n\t// and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n\n\tvar minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n\tvar minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n\tvar flexEls = []; // elements that are allowed to expand. array of DOM nodes\n\tvar flexOffsets = []; // amount of vertical space it takes up\n\tvar flexHeights = []; // actual css height\n\tvar usedHeight = 0;\n\n\tundistributeHeight(els); // give all elements their natural height\n\n\t// find elements that are below the recommended height (expandable).\n\t// important to query for heights in a single first pass (to avoid reflow oscillation).\n\tels.each(function(i, el) {\n\t\tvar minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n\t\tvar naturalOffset = $(el).outerHeight(true);\n\n\t\tif (naturalOffset < minOffset) {\n\t\t\tflexEls.push(el);\n\t\t\tflexOffsets.push(naturalOffset);\n\t\t\tflexHeights.push($(el).height());\n\t\t}\n\t\telse {\n\t\t\t// this element stretches past recommended height (non-expandable). mark the space as occupied.\n\t\t\tusedHeight += naturalOffset;\n\t\t}\n\t});\n\n\t// readjust the recommended height to only consider the height available to non-maxed-out rows.\n\tif (shouldRedistribute) {\n\t\tavailableHeight -= usedHeight;\n\t\tminOffset1 = Math.floor(availableHeight / flexEls.length);\n\t\tminOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n\t}\n\n\t// assign heights to all expandable elements\n\t$(flexEls).each(function(i, el) {\n\t\tvar minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n\t\tvar naturalOffset = flexOffsets[i];\n\t\tvar naturalHeight = flexHeights[i];\n\t\tvar newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n\n\t\tif (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n\t\t\t$(el).height(newHeight);\n\t\t}\n\t});\n}\n\n\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n\tels.height('');\n}\n\n\n// Given `els`, a jQuery set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n\tvar maxInnerWidth = 0;\n\n\tels.find('> *').each(function(i, innerEl) {\n\t\tvar innerWidth = $(innerEl).outerWidth();\n\t\tif (innerWidth > maxInnerWidth) {\n\t\t\tmaxInnerWidth = innerWidth;\n\t\t}\n\t});\n\n\tmaxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n\n\tels.width(maxInnerWidth);\n\n\treturn maxInnerWidth;\n}\n\n\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n\tvar both = outerEl.add(innerEl);\n\tvar diff;\n\n\t// effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n\tboth.css({\n\t\tposition: 'relative', // cause a reflow, which will force fresh dimension recalculation\n\t\tleft: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n\t});\n\tdiff = outerEl.outerHeight() - innerEl.outerHeight(); // grab the dimensions\n\tboth.css({ position: '', left: '' }); // undo hack\n\n\treturn diff;\n}\n\n\n/* Element Geom Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.getOuterRect = getOuterRect;\nFC.getClientRect = getClientRect;\nFC.getContentRect = getContentRect;\nFC.getScrollbarWidths = getScrollbarWidths;\n\n\n// borrowed from https://github.com/jquery/jquery-ui/blob/1.11.0/ui/core.js#L51\nfunction getScrollParent(el) {\n\tvar position = el.css('position'),\n\t\tscrollParent = el.parents().filter(function() {\n\t\t\tvar parent = $(this);\n\t\t\treturn (/(auto|scroll)/).test(\n\t\t\t\tparent.css('overflow') + parent.css('overflow-y') + parent.css('overflow-x')\n\t\t\t);\n\t\t}).eq(0);\n\n\treturn position === 'fixed' || !scrollParent.length ? $(el[0].ownerDocument || document) : scrollParent;\n}\n\n\n// Queries the outer bounding area of a jQuery element.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\nfunction getOuterRect(el, origin) {\n\tvar offset = el.offset();\n\tvar left = offset.left - (origin ? origin.left : 0);\n\tvar top = offset.top - (origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el.outerWidth(),\n\t\ttop: top,\n\t\tbottom: top + el.outerHeight()\n\t};\n}\n\n\n// Queries the area within the margin/border/scrollbars of a jQuery element. Does not go within the padding.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\n// WARNING: given element can't have borders\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\nfunction getClientRect(el, origin) {\n\tvar offset = el.offset();\n\tvar scrollbarWidths = getScrollbarWidths(el);\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + scrollbarWidths.left - (origin ? origin.left : 0);\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + scrollbarWidths.top - (origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el[0].clientWidth, // clientWidth includes padding but NOT scrollbars\n\t\ttop: top,\n\t\tbottom: top + el[0].clientHeight // clientHeight includes padding but NOT scrollbars\n\t};\n}\n\n\n// Queries the area within the margin/border/padding of a jQuery element. Assumed not to have scrollbars.\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\n// Origin is optional.\nfunction getContentRect(el, origin) {\n\tvar offset = el.offset(); // just outside of border, margin not included\n\tvar left = offset.left + getCssFloat(el, 'border-left-width') + getCssFloat(el, 'padding-left') -\n\t\t(origin ? origin.left : 0);\n\tvar top = offset.top + getCssFloat(el, 'border-top-width') + getCssFloat(el, 'padding-top') -\n\t\t(origin ? origin.top : 0);\n\n\treturn {\n\t\tleft: left,\n\t\tright: left + el.width(),\n\t\ttop: top,\n\t\tbottom: top + el.height()\n\t};\n}\n\n\n// Returns the computed left/right/top/bottom scrollbar widths for the given jQuery element.\n// WARNING: given element can't have borders (which will cause offsetWidth/offsetHeight to be larger).\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\nfunction getScrollbarWidths(el) {\n\tvar leftRightWidth = el[0].offsetWidth - el[0].clientWidth;\n\tvar bottomWidth = el[0].offsetHeight - el[0].clientHeight;\n\tvar widths;\n\n\tleftRightWidth = sanitizeScrollbarWidth(leftRightWidth);\n\tbottomWidth = sanitizeScrollbarWidth(bottomWidth);\n\n\twidths = { left: 0, right: 0, top: 0, bottom: bottomWidth };\n\n\tif (getIsLeftRtlScrollbars() && el.css('direction') == 'rtl') { // is the scrollbar on the left side?\n\t\twidths.left = leftRightWidth;\n\t}\n\telse {\n\t\twidths.right = leftRightWidth;\n\t}\n\n\treturn widths;\n}\n\n\n// The scrollbar width computations in getScrollbarWidths are sometimes flawed when it comes to\n// retina displays, rounding, and IE11. Massage them into a usable value.\nfunction sanitizeScrollbarWidth(width) {\n\twidth = Math.max(0, width); // no negatives\n\twidth = Math.round(width);\n\treturn width;\n}\n\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\n\nvar _isLeftRtlScrollbars = null;\n\nfunction getIsLeftRtlScrollbars() { // responsible for caching the computation\n\tif (_isLeftRtlScrollbars === null) {\n\t\t_isLeftRtlScrollbars = computeIsLeftRtlScrollbars();\n\t}\n\treturn _isLeftRtlScrollbars;\n}\n\nfunction computeIsLeftRtlScrollbars() { // creates an offscreen test element, then removes it\n\tvar el = $('<div><div/></div>')\n\t\t.css({\n\t\t\tposition: 'absolute',\n\t\t\ttop: -1000,\n\t\t\tleft: 0,\n\t\t\tborder: 0,\n\t\t\tpadding: 0,\n\t\t\toverflow: 'scroll',\n\t\t\tdirection: 'rtl'\n\t\t})\n\t\t.appendTo('body');\n\tvar innerEl = el.children();\n\tvar res = innerEl.offset().left > el.offset().left; // is the inner div shifted to accommodate a left scrollbar?\n\tel.remove();\n\treturn res;\n}\n\n\n// Retrieves a jQuery element's computed CSS value as a floating-point number.\n// If the queried value is non-numeric (ex: IE can return \"medium\" for border width), will just return zero.\nfunction getCssFloat(el, prop) {\n\treturn parseFloat(el.css(prop)) || 0;\n}\n\n\n/* Mouse / Touch Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.preventDefault = preventDefault;\n\n\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n\treturn ev.which == 1 && !ev.ctrlKey;\n}\n\n\nfunction getEvX(ev) {\n\tvar touches = ev.originalEvent.touches;\n\n\t// on mobile FF, pageX for touch events is present, but incorrect,\n\t// so, look at touch coordinates first.\n\tif (touches && touches.length) {\n\t\treturn touches[0].pageX;\n\t}\n\n\treturn ev.pageX;\n}\n\n\nfunction getEvY(ev) {\n\tvar touches = ev.originalEvent.touches;\n\n\t// on mobile FF, pageX for touch events is present, but incorrect,\n\t// so, look at touch coordinates first.\n\tif (touches && touches.length) {\n\t\treturn touches[0].pageY;\n\t}\n\n\treturn ev.pageY;\n}\n\n\nfunction getEvIsTouch(ev) {\n\treturn /^touch/.test(ev.type);\n}\n\n\nfunction preventSelection(el) {\n\tel.addClass('fc-unselectable')\n\t\t.on('selectstart', preventDefault);\n}\n\n\nfunction allowSelection(el) {\n\tel.removeClass('fc-unselectable')\n\t\t.off('selectstart', preventDefault);\n}\n\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n\tev.preventDefault();\n}\n\n\n/* General Geometry Utils\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.intersectRects = intersectRects;\n\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n\tvar res = {\n\t\tleft: Math.max(rect1.left, rect2.left),\n\t\tright: Math.min(rect1.right, rect2.right),\n\t\ttop: Math.max(rect1.top, rect2.top),\n\t\tbottom: Math.min(rect1.bottom, rect2.bottom)\n\t};\n\n\tif (res.left < res.right && res.top < res.bottom) {\n\t\treturn res;\n\t}\n\treturn false;\n}\n\n\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n\treturn {\n\t\tleft: Math.min(Math.max(point.left, rect.left), rect.right),\n\t\ttop: Math.min(Math.max(point.top, rect.top), rect.bottom)\n\t};\n}\n\n\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n\treturn {\n\t\tleft: (rect.left + rect.right) / 2,\n\t\ttop: (rect.top + rect.bottom) / 2\n\t};\n}\n\n\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n\treturn {\n\t\tleft: point1.left - point2.left,\n\t\ttop: point1.top - point2.top\n\t};\n}\n\n\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.parseFieldSpecs = parseFieldSpecs;\nFC.compareByFieldSpecs = compareByFieldSpecs;\nFC.compareByFieldSpec = compareByFieldSpec;\nFC.flexibleCompare = flexibleCompare;\n\n\nfunction parseFieldSpecs(input) {\n\tvar specs = [];\n\tvar tokens = [];\n\tvar i, token;\n\n\tif (typeof input === 'string') {\n\t\ttokens = input.split(/\\s*,\\s*/);\n\t}\n\telse if (typeof input === 'function') {\n\t\ttokens = [ input ];\n\t}\n\telse if ($.isArray(input)) {\n\t\ttokens = input;\n\t}\n\n\tfor (i = 0; i < tokens.length; i++) {\n\t\ttoken = tokens[i];\n\n\t\tif (typeof token === 'string') {\n\t\t\tspecs.push(\n\t\t\t\ttoken.charAt(0) == '-' ?\n\t\t\t\t\t{ field: token.substring(1), order: -1 } :\n\t\t\t\t\t{ field: token, order: 1 }\n\t\t\t);\n\t\t}\n\t\telse if (typeof token === 'function') {\n\t\t\tspecs.push({ func: token });\n\t\t}\n\t}\n\n\treturn specs;\n}\n\n\nfunction compareByFieldSpecs(obj1, obj2, fieldSpecs) {\n\tvar i;\n\tvar cmp;\n\n\tfor (i = 0; i < fieldSpecs.length; i++) {\n\t\tcmp = compareByFieldSpec(obj1, obj2, fieldSpecs[i]);\n\t\tif (cmp) {\n\t\t\treturn cmp;\n\t\t}\n\t}\n\n\treturn 0;\n}\n\n\nfunction compareByFieldSpec(obj1, obj2, fieldSpec) {\n\tif (fieldSpec.func) {\n\t\treturn fieldSpec.func(obj1, obj2);\n\t}\n\treturn flexibleCompare(obj1[fieldSpec.field], obj2[fieldSpec.field]) *\n\t\t(fieldSpec.order || 1);\n}\n\n\nfunction flexibleCompare(a, b) {\n\tif (!a && !b) {\n\t\treturn 0;\n\t}\n\tif (b == null) {\n\t\treturn -1;\n\t}\n\tif (a == null) {\n\t\treturn 1;\n\t}\n\tif ($.type(a) === 'string' || $.type(b) === 'string') {\n\t\treturn String(a).localeCompare(String(b));\n\t}\n\treturn a - b;\n}\n\n\n/* Date Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.computeGreatestUnit = computeGreatestUnit;\nFC.divideRangeByDuration = divideRangeByDuration;\nFC.divideDurationByDuration = divideDurationByDuration;\nFC.multiplyDuration = multiplyDuration;\nFC.durationHasTime = durationHasTime;\n\nvar dayIDs = [ 'sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat' ];\nvar unitsDesc = [ 'year', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond' ]; // descending\n\n\n// Diffs the two moments into a Duration where full-days are recorded first, then the remaining time.\n// Moments will have their timezones normalized.\nfunction diffDayTime(a, b) {\n\treturn moment.duration({\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days'),\n\t\tms: a.time() - b.time() // time-of-day from day start. disregards timezone\n\t});\n}\n\n\n// Diffs the two moments via their start-of-day (regardless of timezone). Produces whole-day durations.\nfunction diffDay(a, b) {\n\treturn moment.duration({\n\t\tdays: a.clone().stripTime().diff(b.clone().stripTime(), 'days')\n\t});\n}\n\n\n// Diffs two moments, producing a duration, made of a whole-unit-increment of the given unit. Uses rounding.\nfunction diffByUnit(a, b, unit) {\n\treturn moment.duration(\n\t\tMath.round(a.diff(b, unit, true)), // returnFloat=true\n\t\tunit\n\t);\n}\n\n\n// Computes the unit name of the largest whole-unit period of time.\n// For example, 48 hours will be \"days\" whereas 49 hours will be \"hours\".\n// Accepts start/end, a range object, or an original duration object.\nfunction computeGreatestUnit(start, end) {\n\tvar i, unit;\n\tvar val;\n\n\tfor (i = 0; i < unitsDesc.length; i++) {\n\t\tunit = unitsDesc[i];\n\t\tval = computeRangeAs(unit, start, end);\n\n\t\tif (val >= 1 && isInt(val)) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn unit; // will be \"milliseconds\" if nothing else matches\n}\n\n\n// like computeGreatestUnit, but has special abilities to interpret the source input for clues\nfunction computeDurationGreatestUnit(duration, durationInput) {\n\tvar unit = computeGreatestUnit(duration);\n\n\t// prevent days:7 from being interpreted as a week\n\tif (unit === 'week' && typeof durationInput === 'object' && durationInput.days) {\n\t\tunit = 'day';\n\t}\n\n\treturn unit;\n}\n\n\n// Computes the number of units (like \"hours\") in the given range.\n// Range can be a {start,end} object, separate start/end args, or a Duration.\n// Results are based on Moment's .as() and .diff() methods, so results can depend on internal handling\n// of month-diffing logic (which tends to vary from version to version).\nfunction computeRangeAs(unit, start, end) {\n\n\tif (end != null) { // given start, end\n\t\treturn end.diff(start, unit, true);\n\t}\n\telse if (moment.isDuration(start)) { // given duration\n\t\treturn start.as(unit);\n\t}\n\telse { // given { start, end } range object\n\t\treturn start.end.diff(start.start, unit, true);\n\t}\n}\n\n\n// Intelligently divides a range (specified by a start/end params) by a duration\nfunction divideRangeByDuration(start, end, dur) {\n\tvar months;\n\n\tif (durationHasTime(dur)) {\n\t\treturn (end - start) / dur;\n\t}\n\tmonths = dur.asMonths();\n\tif (Math.abs(months) >= 1 && isInt(months)) {\n\t\treturn end.diff(start, 'months', true) / months;\n\t}\n\treturn end.diff(start, 'days', true) / dur.asDays();\n}\n\n\n// Intelligently divides one duration by another\nfunction divideDurationByDuration(dur1, dur2) {\n\tvar months1, months2;\n\n\tif (durationHasTime(dur1) || durationHasTime(dur2)) {\n\t\treturn dur1 / dur2;\n\t}\n\tmonths1 = dur1.asMonths();\n\tmonths2 = dur2.asMonths();\n\tif (\n\t\tMath.abs(months1) >= 1 && isInt(months1) &&\n\t\tMath.abs(months2) >= 1 && isInt(months2)\n\t) {\n\t\treturn months1 / months2;\n\t}\n\treturn dur1.asDays() / dur2.asDays();\n}\n\n\n// Intelligently multiplies a duration by a number\nfunction multiplyDuration(dur, n) {\n\tvar months;\n\n\tif (durationHasTime(dur)) {\n\t\treturn moment.duration(dur * n);\n\t}\n\tmonths = dur.asMonths();\n\tif (Math.abs(months) >= 1 && isInt(months)) {\n\t\treturn moment.duration({ months: months * n });\n\t}\n\treturn moment.duration({ days: dur.asDays() * n });\n}\n\n\n// Returns a boolean about whether the given duration has any time parts (hours/minutes/seconds/ms)\nfunction durationHasTime(dur) {\n\treturn Boolean(dur.hours() || dur.minutes() || dur.seconds() || dur.milliseconds());\n}\n\n\nfunction isNativeDate(input) {\n\treturn  Object.prototype.toString.call(input) === '[object Date]' || input instanceof Date;\n}\n\n\n// Returns a boolean about whether the given input is a time string, like \"06:40:00\" or \"06:00\"\nfunction isTimeString(str) {\n\treturn typeof str === 'string' &&\n\t\t/^\\d+\\:\\d+(?:\\:\\d+\\.?(?:\\d{3})?)?$/.test(str);\n}\n\n\n/* Logging and Debug\n----------------------------------------------------------------------------------------------------------------------*/\n\nFC.log = function() {\n\tvar console = window.console;\n\n\tif (console && console.log) {\n\t\treturn console.log.apply(console, arguments);\n\t}\n};\n\nFC.warn = function() {\n\tvar console = window.console;\n\n\tif (console && console.warn) {\n\t\treturn console.warn.apply(console, arguments);\n\t}\n\telse {\n\t\treturn FC.log.apply(FC, arguments);\n\t}\n};\n\n\n/* General Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar hasOwnPropMethod = {}.hasOwnProperty;\n\n\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n\tvar dest = {};\n\tvar i, name;\n\tvar complexObjs;\n\tvar j, val;\n\tvar props;\n\n\tif (complexProps) {\n\t\tfor (i = 0; i < complexProps.length; i++) {\n\t\t\tname = complexProps[i];\n\t\t\tcomplexObjs = [];\n\n\t\t\t// collect the trailing object values, stopping when a non-object is discovered\n\t\t\tfor (j = propObjs.length - 1; j >= 0; j--) {\n\t\t\t\tval = propObjs[j][name];\n\n\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\tcomplexObjs.unshift(val);\n\t\t\t\t}\n\t\t\t\telse if (val !== undefined) {\n\t\t\t\t\tdest[name] = val; // if there were no objects, this value will be used\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if the trailing values were objects, use the merged value\n\t\t\tif (complexObjs.length) {\n\t\t\t\tdest[name] = mergeProps(complexObjs);\n\t\t\t}\n\t\t}\n\t}\n\n\t// copy values into the destination, going from last to first\n\tfor (i = propObjs.length - 1; i >= 0; i--) {\n\t\tprops = propObjs[i];\n\n\t\tfor (name in props) {\n\t\t\tif (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n\t\t\t\tdest[name] = props[name];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dest;\n}\n\n\nfunction copyOwnProps(src, dest) {\n\tfor (var name in src) {\n\t\tif (hasOwnProp(src, name)) {\n\t\t\tdest[name] = src[name];\n\t\t}\n\t}\n}\n\n\nfunction hasOwnProp(obj, name) {\n\treturn hasOwnPropMethod.call(obj, name);\n}\n\n\nfunction applyAll(functions, thisObj, args) {\n\tif ($.isFunction(functions)) {\n\t\tfunctions = [ functions ];\n\t}\n\tif (functions) {\n\t\tvar i;\n\t\tvar ret;\n\t\tfor (i=0; i<functions.length; i++) {\n\t\t\tret = functions[i].apply(thisObj, args) || ret;\n\t\t}\n\t\treturn ret;\n\t}\n}\n\n\nfunction removeMatching(array, testFunc) {\n\tvar removeCnt = 0;\n\tvar i = 0;\n\n\twhile (i < array.length) {\n\t\tif (testFunc(array[i])) { // truthy value means *remove*\n\t\t\tarray.splice(i, 1);\n\t\t\tremoveCnt++;\n\t\t}\n\t\telse {\n\t\t\ti++;\n\t\t}\n\t}\n\n\treturn removeCnt;\n}\n\n\nfunction removeExact(array, exactVal) {\n\tvar removeCnt = 0;\n\tvar i = 0;\n\n\twhile (i < array.length) {\n\t\tif (array[i] === exactVal) {\n\t\t\tarray.splice(i, 1);\n\t\t\tremoveCnt++;\n\t\t}\n\t\telse {\n\t\t\ti++;\n\t\t}\n\t}\n\n\treturn removeCnt;\n}\nFC.removeExact = removeExact;\n\n\nfunction isArraysEqual(a0, a1) {\n\tvar len = a0.length;\n\tvar i;\n\n\tif (len == null || len !== a1.length) { // not array? or not same length?\n\t\treturn false;\n\t}\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a0[i] !== a1[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n\n\nfunction firstDefined() {\n\tfor (var i=0; i<arguments.length; i++) {\n\t\tif (arguments[i] !== undefined) {\n\t\t\treturn arguments[i];\n\t\t}\n\t}\n}\n\n\nfunction htmlEscape(s) {\n\treturn (s + '').replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/'/g, '&#039;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/\\n/g, '<br />');\n}\n\n\nfunction stripHtmlEntities(text) {\n\treturn text.replace(/&.*?;/g, '');\n}\n\n\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n\tvar statements = [];\n\n\t$.each(cssProps, function(name, val) {\n\t\tif (val != null) {\n\t\t\tstatements.push(name + ':' + val);\n\t\t}\n\t});\n\n\treturn statements.join(';');\n}\n\n\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n\tvar parts = [];\n\n\t$.each(attrs, function(name, val) {\n\t\tif (val != null) {\n\t\t\tparts.push(name + '=\"' + htmlEscape(val) + '\"');\n\t\t}\n\t});\n\n\treturn parts.join(' ');\n}\n\n\nfunction capitaliseFirstLetter(str) {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nfunction compareNumbers(a, b) { // for .sort()\n\treturn a - b;\n}\n\n\nfunction isInt(n) {\n\treturn n % 1 === 0;\n}\n\n\n// Returns a method bound to the given object context.\n// Just like one of the jQuery.proxy signatures, but without the undesired behavior of treating the same method with\n// different contexts as identical when binding/unbinding events.\nfunction proxy(obj, methodName) {\n\tvar method = obj[methodName];\n\n\treturn function() {\n\t\treturn method.apply(obj, arguments);\n\t};\n}\n\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait, immediate) {\n\tvar timeout, args, context, timestamp, result;\n\n\tvar later = function() {\n\t\tvar last = +new Date() - timestamp;\n\t\tif (last < wait) {\n\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t}\n\t\telse {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tcontext = args = null;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn function() {\n\t\tcontext = this;\n\t\targs = arguments;\n\t\ttimestamp = +new Date();\n\t\tvar callNow = immediate && !timeout;\n\t\tif (!timeout) {\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t}\n\t\tif (callNow) {\n\t\t\tresult = func.apply(context, args);\n\t\t\tcontext = args = null;\n\t\t}\n\t\treturn result;\n\t};\n}\n\n;;\n\n/*\nGENERAL NOTE on moments throughout the *entire rest* of the codebase:\nAll moments are assumed to be ambiguously-zoned unless otherwise noted,\nwith the NOTABLE EXCEOPTION of start/end dates that live on *Event Objects*.\nAmbiguously-TIMED moments are assumed to be ambiguously-zoned by nature.\n*/\n\nvar ambigDateOfMonthRegex = /^\\s*\\d{4}-\\d\\d$/;\nvar ambigTimeOrZoneRegex =\n\t/^\\s*\\d{4}-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?)?$/;\nvar newMomentProto = moment.fn; // where we will attach our new methods\nvar oldMomentProto = $.extend({}, newMomentProto); // copy of original moment methods\n\n// tell momentjs to transfer these properties upon clone\nvar momentProperties = moment.momentProperties;\nmomentProperties.push('_fullCalendar');\nmomentProperties.push('_ambigTime');\nmomentProperties.push('_ambigZone');\n\n\n// Creating\n// -------------------------------------------------------------------------------------------------\n\n// Creates a new moment, similar to the vanilla moment(...) constructor, but with\n// extra features (ambiguous time, enhanced formatting). When given an existing moment,\n// it will function as a clone (and retain the zone of the moment). Anything else will\n// result in a moment in the local zone.\nFC.moment = function() {\n\treturn makeMoment(arguments);\n};\n\n// Sames as FC.moment, but forces the resulting moment to be in the UTC timezone.\nFC.moment.utc = function() {\n\tvar mom = makeMoment(arguments, true);\n\n\t// Force it into UTC because makeMoment doesn't guarantee it\n\t// (if given a pre-existing moment for example)\n\tif (mom.hasTime()) { // don't give ambiguously-timed moments a UTC zone\n\t\tmom.utc();\n\t}\n\n\treturn mom;\n};\n\n// Same as FC.moment, but when given an ISO8601 string, the timezone offset is preserved.\n// ISO8601 strings with no timezone offset will become ambiguously zoned.\nFC.moment.parseZone = function() {\n\treturn makeMoment(arguments, true, true);\n};\n\n// Builds an enhanced moment from args. When given an existing moment, it clones. When given a\n// native Date, or called with no arguments (the current time), the resulting moment will be local.\n// Anything else needs to be \"parsed\" (a string or an array), and will be affected by:\n//    parseAsUTC - if there is no zone information, should we parse the input in UTC?\n//    parseZone - if there is zone information, should we force the zone of the moment?\nfunction makeMoment(args, parseAsUTC, parseZone) {\n\tvar input = args[0];\n\tvar isSingleString = args.length == 1 && typeof input === 'string';\n\tvar isAmbigTime;\n\tvar isAmbigZone;\n\tvar ambigMatch;\n\tvar mom;\n\n\tif (moment.isMoment(input) || isNativeDate(input) || input === undefined) {\n\t\tmom = moment.apply(null, args);\n\t}\n\telse { // \"parsing\" is required\n\t\tisAmbigTime = false;\n\t\tisAmbigZone = false;\n\n\t\tif (isSingleString) {\n\t\t\tif (ambigDateOfMonthRegex.test(input)) {\n\t\t\t\t// accept strings like '2014-05', but convert to the first of the month\n\t\t\t\tinput += '-01';\n\t\t\t\targs = [ input ]; // for when we pass it on to moment's constructor\n\t\t\t\tisAmbigTime = true;\n\t\t\t\tisAmbigZone = true;\n\t\t\t}\n\t\t\telse if ((ambigMatch = ambigTimeOrZoneRegex.exec(input))) {\n\t\t\t\tisAmbigTime = !ambigMatch[5]; // no time part?\n\t\t\t\tisAmbigZone = true;\n\t\t\t}\n\t\t}\n\t\telse if ($.isArray(input)) {\n\t\t\t// arrays have no timezone information, so assume ambiguous zone\n\t\t\tisAmbigZone = true;\n\t\t}\n\t\t// otherwise, probably a string with a format\n\n\t\tif (parseAsUTC || isAmbigTime) {\n\t\t\tmom = moment.utc.apply(moment, args);\n\t\t}\n\t\telse {\n\t\t\tmom = moment.apply(null, args);\n\t\t}\n\n\t\tif (isAmbigTime) {\n\t\t\tmom._ambigTime = true;\n\t\t\tmom._ambigZone = true; // ambiguous time always means ambiguous zone\n\t\t}\n\t\telse if (parseZone) { // let's record the inputted zone somehow\n\t\t\tif (isAmbigZone) {\n\t\t\t\tmom._ambigZone = true;\n\t\t\t}\n\t\t\telse if (isSingleString) {\n\t\t\t\tmom.utcOffset(input); // if not a valid zone, will assign UTC\n\t\t\t}\n\t\t}\n\t}\n\n\tmom._fullCalendar = true; // flag for extended functionality\n\n\treturn mom;\n}\n\n\n// Week Number\n// -------------------------------------------------------------------------------------------------\n\n\n// Returns the week number, considering the locale's custom week number calcuation\n// `weeks` is an alias for `week`\nnewMomentProto.week = newMomentProto.weeks = function(input) {\n\tvar weekCalc = this._locale._fullCalendar_weekCalc;\n\n\tif (input == null && typeof weekCalc === 'function') { // custom function only works for getter\n\t\treturn weekCalc(this);\n\t}\n\telse if (weekCalc === 'ISO') {\n\t\treturn oldMomentProto.isoWeek.apply(this, arguments); // ISO getter/setter\n\t}\n\n\treturn oldMomentProto.week.apply(this, arguments); // local getter/setter\n};\n\n\n// Time-of-day\n// -------------------------------------------------------------------------------------------------\n\n// GETTER\n// Returns a Duration with the hours/minutes/seconds/ms values of the moment.\n// If the moment has an ambiguous time, a duration of 00:00 will be returned.\n//\n// SETTER\n// You can supply a Duration, a Moment, or a Duration-like argument.\n// When setting the time, and the moment has an ambiguous time, it then becomes unambiguous.\nnewMomentProto.time = function(time) {\n\n\t// Fallback to the original method (if there is one) if this moment wasn't created via FullCalendar.\n\t// `time` is a generic enough method name where this precaution is necessary to avoid collisions w/ other plugins.\n\tif (!this._fullCalendar) {\n\t\treturn oldMomentProto.time.apply(this, arguments);\n\t}\n\n\tif (time == null) { // getter\n\t\treturn moment.duration({\n\t\t\thours: this.hours(),\n\t\t\tminutes: this.minutes(),\n\t\t\tseconds: this.seconds(),\n\t\t\tmilliseconds: this.milliseconds()\n\t\t});\n\t}\n\telse { // setter\n\n\t\tthis._ambigTime = false; // mark that the moment now has a time\n\n\t\tif (!moment.isDuration(time) && !moment.isMoment(time)) {\n\t\t\ttime = moment.duration(time);\n\t\t}\n\n\t\t// The day value should cause overflow (so 24 hours becomes 00:00:00 of next day).\n\t\t// Only for Duration times, not Moment times.\n\t\tvar dayHours = 0;\n\t\tif (moment.isDuration(time)) {\n\t\t\tdayHours = Math.floor(time.asDays()) * 24;\n\t\t}\n\n\t\t// We need to set the individual fields.\n\t\t// Can't use startOf('day') then add duration. In case of DST at start of day.\n\t\treturn this.hours(dayHours + time.hours())\n\t\t\t.minutes(time.minutes())\n\t\t\t.seconds(time.seconds())\n\t\t\t.milliseconds(time.milliseconds());\n\t}\n};\n\n// Converts the moment to UTC, stripping out its time-of-day and timezone offset,\n// but preserving its YMD. A moment with a stripped time will display no time\n// nor timezone offset when .format() is called.\nnewMomentProto.stripTime = function() {\n\n\tif (!this._ambigTime) {\n\n\t\tthis.utc(true); // keepLocalTime=true (for keeping *date* value)\n\n\t\t// set time to zero\n\t\tthis.set({\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t\tseconds: 0,\n\t\t\tms: 0\n\t\t});\n\n\t\t// Mark the time as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\n\t\t// which clears all ambig flags.\n\t\tthis._ambigTime = true;\n\t\tthis._ambigZone = true; // if ambiguous time, also ambiguous timezone offset\n\t}\n\n\treturn this; // for chaining\n};\n\n// Returns if the moment has a non-ambiguous time (boolean)\nnewMomentProto.hasTime = function() {\n\treturn !this._ambigTime;\n};\n\n\n// Timezone\n// -------------------------------------------------------------------------------------------------\n\n// Converts the moment to UTC, stripping out its timezone offset, but preserving its\n// YMD and time-of-day. A moment with a stripped timezone offset will display no\n// timezone offset when .format() is called.\nnewMomentProto.stripZone = function() {\n\tvar wasAmbigTime;\n\n\tif (!this._ambigZone) {\n\n\t\twasAmbigTime = this._ambigTime;\n\n\t\tthis.utc(true); // keepLocalTime=true (for keeping date and time values)\n\n\t\t// the above call to .utc()/.utcOffset() unfortunately might clear the ambig flags, so restore\n\t\tthis._ambigTime = wasAmbigTime || false;\n\n\t\t// Mark the zone as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\n\t\t// which clears the ambig flags.\n\t\tthis._ambigZone = true;\n\t}\n\n\treturn this; // for chaining\n};\n\n// Returns of the moment has a non-ambiguous timezone offset (boolean)\nnewMomentProto.hasZone = function() {\n\treturn !this._ambigZone;\n};\n\n\n// implicitly marks a zone\nnewMomentProto.local = function(keepLocalTime) {\n\n\t// for when converting from ambiguously-zoned to local,\n\t// keep the time values when converting from UTC -> local\n\toldMomentProto.local.call(this, this._ambigZone || keepLocalTime);\n\n\t// ensure non-ambiguous\n\t// this probably already happened via local() -> utcOffset(), but don't rely on Moment's internals\n\tthis._ambigTime = false;\n\tthis._ambigZone = false;\n\n\treturn this; // for chaining\n};\n\n\n// implicitly marks a zone\nnewMomentProto.utc = function(keepLocalTime) {\n\n\toldMomentProto.utc.call(this, keepLocalTime);\n\n\t// ensure non-ambiguous\n\t// this probably already happened via utc() -> utcOffset(), but don't rely on Moment's internals\n\tthis._ambigTime = false;\n\tthis._ambigZone = false;\n\n\treturn this;\n};\n\n\n// implicitly marks a zone (will probably get called upon .utc() and .local())\nnewMomentProto.utcOffset = function(tzo) {\n\n\tif (tzo != null) { // setter\n\t\t// these assignments needs to happen before the original zone method is called.\n\t\t// I forget why, something to do with a browser crash.\n\t\tthis._ambigTime = false;\n\t\tthis._ambigZone = false;\n\t}\n\n\treturn oldMomentProto.utcOffset.apply(this, arguments);\n};\n\n\n// Formatting\n// -------------------------------------------------------------------------------------------------\n\nnewMomentProto.format = function() {\n\n\tif (this._fullCalendar && arguments[0]) { // an enhanced moment? and a format string provided?\n\t\treturn formatDate(this, arguments[0]); // our extended formatting\n\t}\n\tif (this._ambigTime) {\n\t\treturn oldMomentFormat(englishMoment(this), 'YYYY-MM-DD');\n\t}\n\tif (this._ambigZone) {\n\t\treturn oldMomentFormat(englishMoment(this), 'YYYY-MM-DD[T]HH:mm:ss');\n\t}\n\tif (this._fullCalendar) { // enhanced non-ambig moment?\n\t\t// moment.format() doesn't ensure english, but we want to.\n\t\treturn oldMomentFormat(englishMoment(this));\n\t}\n\n\treturn oldMomentProto.format.apply(this, arguments);\n};\n\nnewMomentProto.toISOString = function() {\n\n\tif (this._ambigTime) {\n\t\treturn oldMomentFormat(englishMoment(this), 'YYYY-MM-DD');\n\t}\n\tif (this._ambigZone) {\n\t\treturn oldMomentFormat(englishMoment(this), 'YYYY-MM-DD[T]HH:mm:ss');\n\t}\n\tif (this._fullCalendar) { // enhanced non-ambig moment?\n\t\t// depending on browser, moment might not output english. ensure english.\n\t\t// https://github.com/moment/moment/blob/2.18.1/src/lib/moment/format.js#L22\n\t\treturn oldMomentProto.toISOString.apply(englishMoment(this), arguments);\n\t}\n\n\treturn oldMomentProto.toISOString.apply(this, arguments);\n};\n\nfunction englishMoment(mom) {\n\tif (mom.locale() !== 'en') {\n\t\treturn mom.clone().locale('en');\n\t}\n\treturn mom;\n}\n\n;;\n(function() {\n\n// exports\nFC.formatDate = formatDate;\nFC.formatRange = formatRange;\nFC.oldMomentFormat = oldMomentFormat;\nFC.queryMostGranularFormatUnit = queryMostGranularFormatUnit;\n\n\n// Config\n// ---------------------------------------------------------------------------------------------------------------------\n\n/*\nInserted between chunks in the fake (\"intermediate\") formatting string.\nImportant that it passes as whitespace (\\s) because moment often identifies non-standalone months\nvia a regexp with an \\s.\n*/\nvar PART_SEPARATOR = '\\u000b'; // vertical tab\n\n/*\nInserted as the first character of a literal-text chunk to indicate that the literal text is not actually literal text,\nbut rather, a \"special\" token that has custom rendering (see specialTokens map).\n*/\nvar SPECIAL_TOKEN_MARKER = '\\u001f'; // information separator 1\n\n/*\nInserted at the beginning and end of a span of text that must have non-zero numeric characters.\nHandling of these markers is done in a post-processing step at the very end of text rendering.\n*/\nvar MAYBE_MARKER = '\\u001e'; // information separator 2\nvar MAYBE_REGEXP = new RegExp(MAYBE_MARKER + '([^' + MAYBE_MARKER + ']*)' + MAYBE_MARKER, 'g'); // must be global\n\n/*\nAddition formatting tokens we want recognized\n*/\nvar specialTokens = {\n\tt: function(date) { // \"a\" or \"p\"\n\t\treturn oldMomentFormat(date, 'a').charAt(0);\n\t},\n\tT: function(date) { // \"A\" or \"P\"\n\t\treturn oldMomentFormat(date, 'A').charAt(0);\n\t}\n};\n\n/*\nThe first characters of formatting tokens for units that are 1 day or larger.\n`value` is for ranking relative size (lower means bigger).\n`unit` is a normalized unit, used for comparing moments.\n*/\nvar largeTokenMap = {\n\tY: { value: 1, unit: 'year' },\n\tM: { value: 2, unit: 'month' },\n\tW: { value: 3, unit: 'week' }, // ISO week\n\tw: { value: 3, unit: 'week' }, // local week\n\tD: { value: 4, unit: 'day' }, // day of month\n\td: { value: 4, unit: 'day' } // day of week\n};\n\n\n// Single Date Formatting\n// ---------------------------------------------------------------------------------------------------------------------\n\n/*\nFormats `date` with a Moment formatting string, but allow our non-zero areas and special token\n*/\nfunction formatDate(date, formatStr) {\n\treturn renderFakeFormatString(\n\t\tgetParsedFormatString(formatStr).fakeFormatString,\n\t\tdate\n\t);\n}\n\n/*\nCall this if you want Moment's original format method to be used\n*/\nfunction oldMomentFormat(mom, formatStr) {\n\treturn oldMomentProto.format.call(mom, formatStr); // oldMomentProto defined in moment-ext.js\n}\n\n\n// Date Range Formatting\n// -------------------------------------------------------------------------------------------------\n// TODO: make it work with timezone offset\n\n/*\nUsing a formatting string meant for a single date, generate a range string, like\n\"Sep 2 - 9 2013\", that intelligently inserts a separator where the dates differ.\nIf the dates are the same as far as the format string is concerned, just return a single\nrendering of one date, without any separator.\n*/\nfunction formatRange(date1, date2, formatStr, separator, isRTL) {\n\tvar localeData;\n\n\tdate1 = FC.moment.parseZone(date1);\n\tdate2 = FC.moment.parseZone(date2);\n\n\tlocaleData = date1.localeData();\n\n\t// Expand localized format strings, like \"LL\" -> \"MMMM D YYYY\".\n\t// BTW, this is not important for `formatDate` because it is impossible to put custom tokens\n\t// or non-zero areas in Moment's localized format strings.\n\tformatStr = localeData.longDateFormat(formatStr) || formatStr;\n\n\treturn renderParsedFormat(\n\t\tgetParsedFormatString(formatStr),\n\t\tdate1,\n\t\tdate2,\n\t\tseparator || ' - ',\n\t\tisRTL\n\t);\n}\n\n/*\nRenders a range with an already-parsed format string.\n*/\nfunction renderParsedFormat(parsedFormat, date1, date2, separator, isRTL) {\n\tvar sameUnits = parsedFormat.sameUnits;\n\tvar unzonedDate1 = date1.clone().stripZone(); // for same-unit comparisons\n\tvar unzonedDate2 = date2.clone().stripZone(); // \"\n\n\tvar renderedParts1 = renderFakeFormatStringParts(parsedFormat.fakeFormatString, date1);\n\tvar renderedParts2 = renderFakeFormatStringParts(parsedFormat.fakeFormatString, date2);\n\n\tvar leftI;\n\tvar leftStr = '';\n\tvar rightI;\n\tvar rightStr = '';\n\tvar middleI;\n\tvar middleStr1 = '';\n\tvar middleStr2 = '';\n\tvar middleStr = '';\n\n\t// Start at the leftmost side of the formatting string and continue until you hit a token\n\t// that is not the same between dates.\n\tfor (\n\t\tleftI = 0;\n\t\tleftI < sameUnits.length && (!sameUnits[leftI] || unzonedDate1.isSame(unzonedDate2, sameUnits[leftI]));\n\t\tleftI++\n\t) {\n\t\tleftStr += renderedParts1[leftI];\n\t}\n\n\t// Similarly, start at the rightmost side of the formatting string and move left\n\tfor (\n\t\trightI = sameUnits.length - 1;\n\t\trightI > leftI && (!sameUnits[rightI] || unzonedDate1.isSame(unzonedDate2, sameUnits[rightI]));\n\t\trightI--\n\t) {\n\t\t// If current chunk is on the boundary of unique date-content, and is a special-case\n\t\t// date-formatting postfix character, then don't consume it. Consider it unique date-content.\n\t\t// TODO: make configurable\n\t\tif (rightI - 1 === leftI && renderedParts1[rightI] === '.') {\n\t\t\tbreak;\n\t\t}\n\n\t\trightStr = renderedParts1[rightI] + rightStr;\n\t}\n\n\t// The area in the middle is different for both of the dates.\n\t// Collect them distinctly so we can jam them together later.\n\tfor (middleI = leftI; middleI <= rightI; middleI++) {\n\t\tmiddleStr1 += renderedParts1[middleI];\n\t\tmiddleStr2 += renderedParts2[middleI];\n\t}\n\n\tif (middleStr1 || middleStr2) {\n\t\tif (isRTL) {\n\t\t\tmiddleStr = middleStr2 + separator + middleStr1;\n\t\t}\n\t\telse {\n\t\t\tmiddleStr = middleStr1 + separator + middleStr2;\n\t\t}\n\t}\n\n\treturn processMaybeMarkers(\n\t\tleftStr + middleStr + rightStr\n\t);\n}\n\n\n// Format String Parsing\n// ---------------------------------------------------------------------------------------------------------------------\n\nvar parsedFormatStrCache = {};\n\n/*\nReturns a parsed format string, leveraging a cache.\n*/\nfunction getParsedFormatString(formatStr) {\n\treturn parsedFormatStrCache[formatStr] ||\n\t\t(parsedFormatStrCache[formatStr] = parseFormatString(formatStr));\n}\n\n/*\nParses a format string into the following:\n- fakeFormatString: a momentJS formatting string, littered with special control characters that get post-processed.\n- sameUnits: for every part in fakeFormatString, if the part is a token, the value will be a unit string (like \"day\"),\n  that indicates how similar a range's start & end must be in order to share the same formatted text.\n  If not a token, then the value is null.\n  Always a flat array (not nested liked \"chunks\").\n*/\nfunction parseFormatString(formatStr) {\n\tvar chunks = chunkFormatString(formatStr);\n\t\n\treturn {\n\t\tfakeFormatString: buildFakeFormatString(chunks),\n\t\tsameUnits: buildSameUnits(chunks)\n\t};\n}\n\n/*\nBreak the formatting string into an array of chunks.\nA 'maybe' chunk will have nested chunks.\n*/\nfunction chunkFormatString(formatStr) {\n\tvar chunks = [];\n\tvar match;\n\n\t// TODO: more descrimination\n\t// \\4 is a backreference to the first character of a multi-character set.\n\tvar chunker = /\\[([^\\]]*)\\]|\\(([^\\)]*)\\)|(LTS|LT|(\\w)\\4*o?)|([^\\w\\[\\(]+)/g;\n\n\twhile ((match = chunker.exec(formatStr))) {\n\t\tif (match[1]) { // a literal string inside [ ... ]\n\t\t\tchunks.push.apply(chunks, // append\n\t\t\t\tsplitStringLiteral(match[1])\n\t\t\t);\n\t\t}\n\t\telse if (match[2]) { // non-zero formatting inside ( ... )\n\t\t\tchunks.push({ maybe: chunkFormatString(match[2]) });\n\t\t}\n\t\telse if (match[3]) { // a formatting token\n\t\t\tchunks.push({ token: match[3] });\n\t\t}\n\t\telse if (match[5]) { // an unenclosed literal string\n\t\t\tchunks.push.apply(chunks, // append\n\t\t\t\tsplitStringLiteral(match[5])\n\t\t\t);\n\t\t}\n\t}\n\n\treturn chunks;\n}\n\n/*\nPotentially splits a literal-text string into multiple parts. For special cases.\n*/\nfunction splitStringLiteral(s) {\n\tif (s === '. ') {\n\t\treturn [ '.', ' ' ]; // for locales with periods bound to the end of each year/month/date\n\t}\n\telse {\n\t\treturn [ s ];\n\t}\n}\n\n/*\nGiven chunks parsed from a real format string, generate a fake (aka \"intermediate\") format string with special control\ncharacters that will eventually be given to moment for formatting, and then post-processed.\n*/\nfunction buildFakeFormatString(chunks) {\n\tvar parts = [];\n\tvar i, chunk;\n\n\tfor (i = 0; i < chunks.length; i++) {\n\t\tchunk = chunks[i];\n\n\t\tif (typeof chunk === 'string') {\n\t\t\tparts.push('[' + chunk + ']');\n\t\t}\n\t\telse if (chunk.token) {\n\t\t\tif (chunk.token in specialTokens) {\n\t\t\t\tparts.push(\n\t\t\t\t\tSPECIAL_TOKEN_MARKER + // useful during post-processing\n\t\t\t\t\t'[' + chunk.token + ']' // preserve as literal text\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tparts.push(chunk.token); // unprotected text implies a format string\n\t\t\t}\n\t\t}\n\t\telse if (chunk.maybe) {\n\t\t\tparts.push(\n\t\t\t\tMAYBE_MARKER + // useful during post-processing\n\t\t\t\tbuildFakeFormatString(chunk.maybe) +\n\t\t\t\tMAYBE_MARKER\n\t\t\t);\n\t\t}\n\t}\n\n\treturn parts.join(PART_SEPARATOR);\n}\n\n/*\nGiven parsed chunks from a real formatting string, generates an array of unit strings (like \"day\") that indicate\nin which regard two dates must be similar in order to share range formatting text.\nThe `chunks` can be nested (because of \"maybe\" chunks), however, the returned array will be flat.\n*/\nfunction buildSameUnits(chunks) {\n\tvar units = [];\n\tvar i, chunk;\n\tvar tokenInfo;\n\n\tfor (i = 0; i < chunks.length; i++) {\n\t\tchunk = chunks[i];\n\n\t\tif (chunk.token) {\n\t\t\ttokenInfo = largeTokenMap[chunk.token.charAt(0)];\n\t\t\tunits.push(tokenInfo ? tokenInfo.unit : 'second'); // default to a very strict same-second\n\t\t}\n\t\telse if (chunk.maybe) {\n\t\t\tunits.push.apply(units, // append\n\t\t\t\tbuildSameUnits(chunk.maybe)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tunits.push(null);\n\t\t}\n\t}\n\n\treturn units;\n}\n\n\n// Rendering to text\n// ---------------------------------------------------------------------------------------------------------------------\n\n/*\nFormats a date with a fake format string, post-processes the control characters, then returns.\n*/\nfunction renderFakeFormatString(fakeFormatString, date) {\n\treturn processMaybeMarkers(\n\t\trenderFakeFormatStringParts(fakeFormatString, date).join('')\n\t);\n}\n\n/*\nFormats a date into parts that will have been post-processed, EXCEPT for the \"maybe\" markers.\n*/\nfunction renderFakeFormatStringParts(fakeFormatString, date) {\n\tvar parts = [];\n\tvar fakeRender = oldMomentFormat(date, fakeFormatString);\n\tvar fakeParts = fakeRender.split(PART_SEPARATOR);\n\tvar i, fakePart;\n\n\tfor (i = 0; i < fakeParts.length; i++) {\n\t\tfakePart = fakeParts[i];\n\n\t\tif (fakePart.charAt(0) === SPECIAL_TOKEN_MARKER) {\n\t\t\tparts.push(\n\t\t\t\t// the literal string IS the token's name.\n\t\t\t\t// call special token's registered function.\n\t\t\t\tspecialTokens[fakePart.substring(1)](date)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tparts.push(fakePart);\n\t\t}\n\t}\n\n\treturn parts;\n}\n\n/*\nAccepts an almost-finally-formatted string and processes the \"maybe\" control characters, returning a new string.\n*/\nfunction processMaybeMarkers(s) {\n\treturn s.replace(MAYBE_REGEXP, function(m0, m1) { // regex assumed to have 'g' flag\n\t\tif (m1.match(/[1-9]/)) { // any non-zero numeric characters?\n\t\t\treturn m1;\n\t\t}\n\t\telse {\n\t\t\treturn '';\n\t\t}\n\t});\n}\n\n\n// Misc Utils\n// -------------------------------------------------------------------------------------------------\n\n/*\nReturns a unit string, either 'year', 'month', 'day', or null for the most granular formatting token in the string.\n*/\nfunction queryMostGranularFormatUnit(formatStr) {\n\tvar chunks = chunkFormatString(formatStr);\n\tvar i, chunk;\n\tvar candidate;\n\tvar best;\n\n\tfor (i = 0; i < chunks.length; i++) {\n\t\tchunk = chunks[i];\n\n\t\tif (chunk.token) {\n\t\t\tcandidate = largeTokenMap[chunk.token.charAt(0)];\n\t\t\tif (candidate) {\n\t\t\t\tif (!best || candidate.value > best.value) {\n\t\t\t\t\tbest = candidate;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (best) {\n\t\treturn best.unit;\n\t}\n\n\treturn null;\n};\n\n})();\n\n// quick local references\nvar formatDate = FC.formatDate;\nvar formatRange = FC.formatRange;\nvar oldMomentFormat = FC.oldMomentFormat;\n\n;;\n\nFC.Class = Class; // export\n\n// Class that all other classes will inherit from\nfunction Class() { }\n\n\n// Called on a class to create a subclass.\n// Last argument contains instance methods. Any argument before the last are considered mixins.\nClass.extend = function() {\n\tvar members = {};\n\tvar i;\n\n\tfor (i = 0; i < arguments.length; i++) {\n\t\tcopyOwnProps(arguments[i], members);\n\t}\n\n\treturn extendClass(this, members);\n};\n\n\n// Adds new member variables/methods to the class's prototype.\n// Can be called with another class, or a plain object hash containing new members.\nClass.mixin = function(members) {\n\tcopyOwnProps(members, this.prototype);\n};\n\n\nfunction extendClass(superClass, members) {\n\tvar subClass;\n\n\t// ensure a constructor for the subclass, forwarding all arguments to the super-constructor if it doesn't exist\n\tif (hasOwnProp(members, 'constructor')) {\n\t\tsubClass = members.constructor;\n\t}\n\tif (typeof subClass !== 'function') {\n\t\tsubClass = members.constructor = function() {\n\t\t\tsuperClass.apply(this, arguments);\n\t\t};\n\t}\n\n\t// build the base prototype for the subclass, which is an new object chained to the superclass's prototype\n\tsubClass.prototype = Object.create(superClass.prototype);\n\n\t// copy each member variable/method onto the the subclass's prototype\n\tcopyOwnProps(members, subClass.prototype);\n\n\t// copy over all class variables/methods to the subclass, such as `extend` and `mixin`\n\tcopyOwnProps(superClass, subClass);\n\n\treturn subClass;\n}\n\n;;\n\nvar EmitterMixin = FC.EmitterMixin = {\n\n\t// jQuery-ification via $(this) allows a non-DOM object to have\n\t// the same event handling capabilities (including namespaces).\n\n\n\ton: function(types, handler) {\n\t\t$(this).on(types, this._prepareIntercept(handler));\n\t\treturn this; // for chaining\n\t},\n\n\n\tone: function(types, handler) {\n\t\t$(this).one(types, this._prepareIntercept(handler));\n\t\treturn this; // for chaining\n\t},\n\n\n\t_prepareIntercept: function(handler) {\n\t\t// handlers are always called with an \"event\" object as their first param.\n\t\t// sneak the `this` context and arguments into the extra parameter object\n\t\t// and forward them on to the original handler.\n\t\tvar intercept = function(ev, extra) {\n\t\t\treturn handler.apply(\n\t\t\t\textra.context || this,\n\t\t\t\textra.args || []\n\t\t\t);\n\t\t};\n\n\t\t// mimick jQuery's internal \"proxy\" system (risky, I know)\n\t\t// causing all functions with the same .guid to appear to be the same.\n\t\t// https://github.com/jquery/jquery/blob/2.2.4/src/core.js#L448\n\t\t// this is needed for calling .off with the original non-intercept handler.\n\t\tif (!handler.guid) {\n\t\t\thandler.guid = $.guid++;\n\t\t}\n\t\tintercept.guid = handler.guid;\n\n\t\treturn intercept;\n\t},\n\n\n\toff: function(types, handler) {\n\t\t$(this).off(types, handler);\n\n\t\treturn this; // for chaining\n\t},\n\n\n\ttrigger: function(types) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1); // arguments after the first\n\n\t\t// pass in \"extra\" info to the intercept\n\t\t$(this).triggerHandler(types, { args: args });\n\n\t\treturn this; // for chaining\n\t},\n\n\n\ttriggerWith: function(types, context, args) {\n\n\t\t// `triggerHandler` is less reliant on the DOM compared to `trigger`.\n\t\t// pass in \"extra\" info to the intercept.\n\t\t$(this).triggerHandler(types, { context: context, args: args });\n\n\t\treturn this; // for chaining\n\t},\n\n\n\thasHandlers: function(type) {\n\t\tvar hash = $._data(this, 'events'); // http://blog.jquery.com/2012/08/09/jquery-1-8-released/\n\n\t\treturn hash && hash[type] && hash[type].length > 0;\n\t}\n\n};\n\n;;\n\n/*\nUtility methods for easily listening to events on another object,\nand more importantly, easily unlistening from them.\n*/\nvar ListenerMixin = FC.ListenerMixin = (function() {\n\tvar guid = 0;\n\tvar ListenerMixin = {\n\n\t\tlistenerId: null,\n\n\t\t/*\n\t\tGiven an `other` object that has on/off methods, bind the given `callback` to an event by the given name.\n\t\tThe `callback` will be called with the `this` context of the object that .listenTo is being called on.\n\t\tCan be called:\n\t\t\t.listenTo(other, eventName, callback)\n\t\tOR\n\t\t\t.listenTo(other, {\n\t\t\t\teventName1: callback1,\n\t\t\t\teventName2: callback2\n\t\t\t})\n\t\t*/\n\t\tlistenTo: function(other, arg, callback) {\n\t\t\tif (typeof arg === 'object') { // given dictionary of callbacks\n\t\t\t\tfor (var eventName in arg) {\n\t\t\t\t\tif (arg.hasOwnProperty(eventName)) {\n\t\t\t\t\t\tthis.listenTo(other, eventName, arg[eventName]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof arg === 'string') {\n\t\t\t\tother.on(\n\t\t\t\t\targ + '.' + this.getListenerNamespace(), // use event namespacing to identify this object\n\t\t\t\t\t$.proxy(callback, this) // always use `this` context\n\t\t\t\t\t\t// the usually-undesired jQuery guid behavior doesn't matter,\n\t\t\t\t\t\t// because we always unbind via namespace\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\tCauses the current object to stop listening to events on the `other` object.\n\t\t`eventName` is optional. If omitted, will stop listening to ALL events on `other`.\n\t\t*/\n\t\tstopListeningTo: function(other, eventName) {\n\t\t\tother.off((eventName || '') + '.' + this.getListenerNamespace());\n\t\t},\n\n\t\t/*\n\t\tReturns a string, unique to this object, to be used for event namespacing\n\t\t*/\n\t\tgetListenerNamespace: function() {\n\t\t\tif (this.listenerId == null) {\n\t\t\t\tthis.listenerId = guid++;\n\t\t\t}\n\t\t\treturn '_listener' + this.listenerId;\n\t\t}\n\n\t};\n\treturn ListenerMixin;\n})();\n;;\n\nvar ParsableModelMixin = {\n\n\tstandardPropMap: {}, // will be cloned by defineStandardProps\n\n\n\t/*\n\tReturns true/false for success.\n\tMeant to be only called ONCE, at object creation.\n\t*/\n\tapplyProps: function(rawProps) {\n\t\tvar standardPropMap = this.standardPropMap;\n\t\tvar manualProps = {};\n\t\tvar miscProps = {};\n\t\tvar propName;\n\n\t\tfor (propName in rawProps) {\n\t\t\tif (standardPropMap[propName] === true) { // copy verbatim\n\t\t\t\tthis[propName] = rawProps[propName];\n\t\t\t}\n\t\t\telse if (standardPropMap[propName] === false) {\n\t\t\t\tmanualProps[propName] = rawProps[propName];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmiscProps[propName] = rawProps[propName];\n\t\t\t}\n\t\t}\n\n\t\tthis.applyMiscProps(miscProps);\n\n\t\treturn this.applyManualStandardProps(manualProps);\n\t},\n\n\n\t/*\n\tIf subclasses override, they must call this supermethod and return the boolean response.\n\tMeant to be only called ONCE, at object creation.\n\t*/\n\tapplyManualStandardProps: function(rawProps) {\n\t\treturn true;\n\t},\n\n\n\t/*\n\tCan be called even after initial object creation.\n\t*/\n\tapplyMiscProps: function(rawProps) {\n\t\t// subclasses can implement\n\t},\n\n\n\t/*\n\tTODO: why is this a method when defineStandardProps is static\n\t*/\n\tisStandardProp: function(propName) {\n\t\treturn propName in this.standardPropMap;\n\t}\n\n};\n\n\n/*\nTODO: devise a better system\n*/\nvar ParsableModelMixin_defineStandardProps = function(propDefs) {\n\tvar proto = this.prototype;\n\n\tif (!proto.hasOwnProperty('standardPropMap')) {\n\t\tproto.standardPropMap = Object.create(proto.standardPropMap);\n\t}\n\n\tcopyOwnProps(propDefs, proto.standardPropMap);\n};\n\n\n/*\nTODO: devise a better system\n*/\nvar ParsableModelMixin_copyVerbatimStandardProps = function(src, dest) {\n\tvar map = this.prototype.standardPropMap;\n\tvar propName;\n\n\tfor (propName in map) {\n\t\tif (\n\t\t\tsrc[propName] != null && // in the src object?\n\t\t\tmap[propName] === true // false means \"copy verbatim\"\n\t\t) {\n\t\t\tdest[propName] = src[propName];\n\t\t}\n\t}\n};\n\n;;\n\nvar Model = Class.extend(EmitterMixin, ListenerMixin, {\n\n\t_props: null,\n\t_watchers: null,\n\t_globalWatchArgs: {}, // mutation protection in Model.watch\n\n\tconstructor: function() {\n\t\tthis._watchers = {};\n\t\tthis._props = {};\n\t\tthis.applyGlobalWatchers();\n\t\tthis.constructed();\n\t},\n\n\t// useful for monkeypatching. TODO: BaseClass?\n\tconstructed: function() {\n\t},\n\n\tapplyGlobalWatchers: function() {\n\t\tvar map = this._globalWatchArgs;\n\t\tvar name;\n\n\t\tfor (name in map) {\n\t\t\tthis.watch.apply(this, map[name]);\n\t\t}\n\t},\n\n\thas: function(name) {\n\t\treturn name in this._props;\n\t},\n\n\tget: function(name) {\n\t\tif (name === undefined) {\n\t\t\treturn this._props;\n\t\t}\n\n\t\treturn this._props[name];\n\t},\n\n\tset: function(name, val) {\n\t\tvar newProps;\n\n\t\tif (typeof name === 'string') {\n\t\t\tnewProps = {};\n\t\t\tnewProps[name] = val === undefined ? null : val;\n\t\t}\n\t\telse {\n\t\t\tnewProps = name;\n\t\t}\n\n\t\tthis.setProps(newProps);\n\t},\n\n\treset: function(newProps) {\n\t\tvar oldProps = this._props;\n\t\tvar changeset = {}; // will have undefined's to signal unsets\n\t\tvar name;\n\n\t\tfor (name in oldProps) {\n\t\t\tchangeset[name] = undefined;\n\t\t}\n\n\t\tfor (name in newProps) {\n\t\t\tchangeset[name] = newProps[name];\n\t\t}\n\n\t\tthis.setProps(changeset);\n\t},\n\n\tunset: function(name) { // accepts a string or array of strings\n\t\tvar newProps = {};\n\t\tvar names;\n\t\tvar i;\n\n\t\tif (typeof name === 'string') {\n\t\t\tnames = [ name ];\n\t\t}\n\t\telse {\n\t\t\tnames = name;\n\t\t}\n\n\t\tfor (i = 0; i < names.length; i++) {\n\t\t\tnewProps[names[i]] = undefined;\n\t\t}\n\n\t\tthis.setProps(newProps);\n\t},\n\n\tsetProps: function(newProps) {\n\t\tvar changedProps = {};\n\t\tvar changedCnt = 0;\n\t\tvar name, val;\n\n\t\tfor (name in newProps) {\n\t\t\tval = newProps[name];\n\n\t\t\t// a change in value?\n\t\t\t// if an object, don't check equality, because might have been mutated internally.\n\t\t\t// TODO: eventually enforce immutability.\n\t\t\tif (\n\t\t\t\ttypeof val === 'object' ||\n\t\t\t\tval !== this._props[name]\n\t\t\t) {\n\t\t\t\tchangedProps[name] = val;\n\t\t\t\tchangedCnt++;\n\t\t\t}\n\t\t}\n\n\t\tif (changedCnt) {\n\n\t\t\tthis.trigger('before:batchChange', changedProps);\n\n\t\t\tfor (name in changedProps) {\n\t\t\t\tval = changedProps[name];\n\n\t\t\t\tthis.trigger('before:change', name, val);\n\t\t\t\tthis.trigger('before:change:' + name, val);\n\t\t\t}\n\n\t\t\tfor (name in changedProps) {\n\t\t\t\tval = changedProps[name];\n\n\t\t\t\tif (val === undefined) {\n\t\t\t\t\tdelete this._props[name];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis._props[name] = val;\n\t\t\t\t}\n\n\t\t\t\tthis.trigger('change:' + name, val);\n\t\t\t\tthis.trigger('change', name, val);\n\t\t\t}\n\n\t\t\tthis.trigger('batchChange', changedProps);\n\t\t}\n\t},\n\n\twatch: function(name, depList, startFunc, stopFunc) {\n\t\tvar _this = this;\n\n\t\tthis.unwatch(name);\n\n\t\tthis._watchers[name] = this._watchDeps(depList, function(deps) {\n\t\t\tvar res = startFunc.call(_this, deps);\n\n\t\t\tif (res && res.then) {\n\t\t\t\t_this.unset(name); // put in an unset state while resolving\n\t\t\t\tres.then(function(val) {\n\t\t\t\t\t_this.set(name, val);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_this.set(name, res);\n\t\t\t}\n\t\t}, function(deps) {\n\t\t\t_this.unset(name);\n\n\t\t\tif (stopFunc) {\n\t\t\t\tstopFunc.call(_this, deps);\n\t\t\t}\n\t\t});\n\t},\n\n\tunwatch: function(name) {\n\t\tvar watcher = this._watchers[name];\n\n\t\tif (watcher) {\n\t\t\tdelete this._watchers[name];\n\t\t\twatcher.teardown();\n\t\t}\n\t},\n\n\t_watchDeps: function(depList, startFunc, stopFunc) {\n\t\tvar _this = this;\n\t\tvar queuedChangeCnt = 0;\n\t\tvar depCnt = depList.length;\n\t\tvar satisfyCnt = 0;\n\t\tvar values = {}; // what's passed as the `deps` arguments\n\t\tvar bindTuples = []; // array of [ eventName, handlerFunc ] arrays\n\t\tvar isCallingStop = false;\n\n\t\tfunction onBeforeDepChange(depName, val, isOptional) {\n\t\t\tqueuedChangeCnt++;\n\t\t\tif (queuedChangeCnt === 1) { // first change to cause a \"stop\" ?\n\t\t\t\tif (satisfyCnt === depCnt) { // all deps previously satisfied?\n\t\t\t\t\tisCallingStop = true;\n\t\t\t\t\tstopFunc(values);\n\t\t\t\t\tisCallingStop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction onDepChange(depName, val, isOptional) {\n\n\t\t\tif (val === undefined) { // unsetting a value?\n\n\t\t\t\t// required dependency that was previously set?\n\t\t\t\tif (!isOptional && values[depName] !== undefined) {\n\t\t\t\t\tsatisfyCnt--;\n\t\t\t\t}\n\n\t\t\t\tdelete values[depName];\n\t\t\t}\n\t\t\telse { // setting a value?\n\n\t\t\t\t// required dependency that was previously unset?\n\t\t\t\tif (!isOptional && values[depName] === undefined) {\n\t\t\t\t\tsatisfyCnt++;\n\t\t\t\t}\n\n\t\t\t\tvalues[depName] = val;\n\t\t\t}\n\n\t\t\tqueuedChangeCnt--;\n\t\t\tif (!queuedChangeCnt) { // last change to cause a \"start\"?\n\n\t\t\t\t// now finally satisfied or satisfied all along?\n\t\t\t\tif (satisfyCnt === depCnt) {\n\n\t\t\t\t\t// if the stopFunc initiated another value change, ignore it.\n\t\t\t\t\t// it will be processed by another change event anyway.\n\t\t\t\t\tif (!isCallingStop) {\n\t\t\t\t\t\tstartFunc(values);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// intercept for .on() that remembers handlers\n\t\tfunction bind(eventName, handler) {\n\t\t\t_this.on(eventName, handler);\n\t\t\tbindTuples.push([ eventName, handler ]);\n\t\t}\n\n\t\t// listen to dependency changes\n\t\tdepList.forEach(function(depName) {\n\t\t\tvar isOptional = false;\n\n\t\t\tif (depName.charAt(0) === '?') { // TODO: more DRY\n\t\t\t\tdepName = depName.substring(1);\n\t\t\t\tisOptional = true;\n\t\t\t}\n\n\t\t\tbind('before:change:' + depName, function(val) {\n\t\t\t\tonBeforeDepChange(depName, val, isOptional);\n\t\t\t});\n\n\t\t\tbind('change:' + depName, function(val) {\n\t\t\t\tonDepChange(depName, val, isOptional);\n\t\t\t});\n\t\t});\n\n\t\t// process current dependency values\n\t\tdepList.forEach(function(depName) {\n\t\t\tvar isOptional = false;\n\n\t\t\tif (depName.charAt(0) === '?') { // TODO: more DRY\n\t\t\t\tdepName = depName.substring(1);\n\t\t\t\tisOptional = true;\n\t\t\t}\n\n\t\t\tif (_this.has(depName)) {\n\t\t\t\tvalues[depName] = _this.get(depName);\n\t\t\t\tsatisfyCnt++;\n\t\t\t}\n\t\t\telse if (isOptional) {\n\t\t\t\tsatisfyCnt++;\n\t\t\t}\n\t\t});\n\n\t\t// initially satisfied\n\t\tif (satisfyCnt === depCnt) {\n\t\t\tstartFunc(values);\n\t\t}\n\n\t\treturn {\n\t\t\tteardown: function() {\n\t\t\t\t// remove all handlers\n\t\t\t\tfor (var i = 0; i < bindTuples.length; i++) {\n\t\t\t\t\t_this.off(bindTuples[i][0], bindTuples[i][1]);\n\t\t\t\t}\n\t\t\t\tbindTuples = null;\n\n\t\t\t\t// was satisfied, so call stopFunc\n\t\t\t\tif (satisfyCnt === depCnt) {\n\t\t\t\t\tstopFunc();\n\t\t\t\t}\n\t\t\t},\n\t\t\tflash: function() {\n\t\t\t\tif (satisfyCnt === depCnt) {\n\t\t\t\t\tstopFunc();\n\t\t\t\t\tstartFunc(values);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\n\tflash: function(name) {\n\t\tvar watcher = this._watchers[name];\n\n\t\tif (watcher) {\n\t\t\twatcher.flash();\n\t\t}\n\t}\n\n});\n\n\nModel.watch = function(name /* , depList, startFunc, stopFunc */) {\n\n\t// subclasses should make a masked-copy of the superclass's map\n\t// TODO: write test\n\tif (!this.prototype.hasOwnProperty('_globalWatchArgs')) {\n\t\tthis.prototype._globalWatchArgs = Object.create(this.prototype._globalWatchArgs);\n\t}\n\n\tthis.prototype._globalWatchArgs[name] = arguments;\n};\n\n\nFC.Model = Model;\n\n\n;;\n\nvar Promise = {\n\n\tconstruct: function(executor) {\n\t\tvar deferred = $.Deferred();\n\t\tvar promise = deferred.promise();\n\n\t\tif (typeof executor === 'function') {\n\t\t\texecutor(\n\t\t\t\tfunction(val) { // resolve\n\t\t\t\t\tdeferred.resolve(val);\n\t\t\t\t\tattachImmediatelyResolvingThen(promise, val);\n\t\t\t\t},\n\t\t\t\tfunction() { // reject\n\t\t\t\t\tdeferred.reject();\n\t\t\t\t\tattachImmediatelyRejectingThen(promise);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn promise;\n\t},\n\n\tresolve: function(val) {\n\t\tvar deferred = $.Deferred().resolve(val);\n\t\tvar promise = deferred.promise();\n\n\t\tattachImmediatelyResolvingThen(promise, val);\n\n\t\treturn promise;\n\t},\n\n\treject: function() {\n\t\tvar deferred = $.Deferred().reject();\n\t\tvar promise = deferred.promise();\n\n\t\tattachImmediatelyRejectingThen(promise);\n\n\t\treturn promise;\n\t}\n\n};\n\n\nfunction attachImmediatelyResolvingThen(promise, val) {\n\tpromise.then = function(onResolve) {\n\t\tif (typeof onResolve === 'function') {\n\t\t\treturn Promise.resolve(onResolve(val));\n\t\t}\n\t\treturn promise;\n\t};\n}\n\n\nfunction attachImmediatelyRejectingThen(promise) {\n\tpromise.then = function(onResolve, onReject) {\n\t\tif (typeof onReject === 'function') {\n\t\t\tonReject();\n\t\t}\n\t\treturn promise;\n\t};\n}\n\n\nFC.Promise = Promise;\n\n;;\n\nvar TaskQueue = Class.extend(EmitterMixin, {\n\n\tq: null,\n\tisPaused: false,\n\tisRunning: false,\n\n\n\tconstructor: function() {\n\t\tthis.q = [];\n\t},\n\n\n\tqueue: function(/* taskFunc, taskFunc... */) {\n\t\tthis.q.push.apply(this.q, arguments); // append\n\t\tthis.tryStart();\n\t},\n\n\n\tpause: function() {\n\t\tthis.isPaused = true;\n\t},\n\n\n\tresume: function() {\n\t\tthis.isPaused = false;\n\t\tthis.tryStart();\n\t},\n\n\n\tgetIsIdle: function() {\n\t\treturn !this.isRunning && !this.isPaused;\n\t},\n\n\n\ttryStart: function() {\n\t\tif (!this.isRunning && this.canRunNext()) {\n\t\t\tthis.isRunning = true;\n\t\t\tthis.trigger('start');\n\t\t\tthis.runRemaining();\n\t\t}\n\t},\n\n\n\tcanRunNext: function() {\n\t\treturn !this.isPaused && this.q.length;\n\t},\n\n\n\trunRemaining: function() { // assumes at least one task in queue. does not check canRunNext for first task.\n\t\tvar _this = this;\n\t\tvar task;\n\t\tvar res;\n\n\t\tdo {\n\t\t\ttask = this.q.shift(); // always freshly reference q. might have been reassigned.\n\t\t\tres = this.runTask(task);\n\n\t\t\tif (res && res.then) {\n\t\t\t\tres.then(function() { // jshint ignore:line\n\t\t\t\t\tif (_this.canRunNext()) {\n\t\t\t\t\t\t_this.runRemaining();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn; // prevent marking as stopped\n\t\t\t}\n\t\t} while (this.canRunNext());\n\n\t\tthis.trigger('stop'); // not really a 'stop' ... more of a 'drained'\n\t\tthis.isRunning = false;\n\n\t\t// if 'stop' handler added more tasks.... TODO: write test for this\n\t\tthis.tryStart();\n\t},\n\n\n\trunTask: function(task) {\n\t\treturn task(); // task *is* the function, but subclasses can change the format of a task\n\t}\n\n});\n\nFC.TaskQueue = TaskQueue;\n\n;;\n\nvar RenderQueue = TaskQueue.extend({\n\n\twaitsByNamespace: null,\n\twaitNamespace: null,\n\twaitId: null,\n\n\n\tconstructor: function(waitsByNamespace) {\n\t\tTaskQueue.call(this); // super-constructor\n\n\t\tthis.waitsByNamespace = waitsByNamespace || {};\n\t},\n\n\n\tqueue: function(taskFunc, namespace, type) {\n\t\tvar task = {\n\t\t\tfunc: taskFunc,\n\t\t\tnamespace: namespace,\n\t\t\ttype: type\n\t\t};\n\t\tvar waitMs;\n\n\t\tif (namespace) {\n\t\t\twaitMs = this.waitsByNamespace[namespace];\n\t\t}\n\n\t\tif (this.waitNamespace) {\n\t\t\tif (namespace === this.waitNamespace && waitMs != null) {\n\t\t\t\tthis.delayWait(waitMs);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.clearWait();\n\t\t\t\tthis.tryStart();\n\t\t\t}\n\t\t}\n\n\t\tif (this.compoundTask(task)) { // appended to queue?\n\n\t\t\tif (!this.waitNamespace && waitMs != null) {\n\t\t\t\tthis.startWait(namespace, waitMs);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.tryStart();\n\t\t\t}\n\t\t}\n\t},\n\n\n\tstartWait: function(namespace, waitMs) {\n\t\tthis.waitNamespace = namespace;\n\t\tthis.spawnWait(waitMs);\n\t},\n\n\n\tdelayWait: function(waitMs) {\n\t\tclearTimeout(this.waitId);\n\t\tthis.spawnWait(waitMs);\n\t},\n\n\n\tspawnWait: function(waitMs) {\n\t\tvar _this = this;\n\n\t\tthis.waitId = setTimeout(function() {\n\t\t\t_this.waitNamespace = null;\n\t\t\t_this.tryStart();\n\t\t}, waitMs);\n\t},\n\n\n\tclearWait: function() {\n\t\tif (this.waitNamespace) {\n\t\t\tclearTimeout(this.waitId);\n\t\t\tthis.waitId = null;\n\t\t\tthis.waitNamespace = null;\n\t\t}\n\t},\n\n\n\tcanRunNext: function() {\n\t\tif (!TaskQueue.prototype.canRunNext.apply(this, arguments)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// waiting for a certain namespace to stop receiving tasks?\n\t\tif (this.waitNamespace) {\n\n\t\t\t// if there was a different namespace task in the meantime,\n\t\t\t// that forces all previously-waiting tasks to suddenly execute.\n\t\t\t// TODO: find a way to do this in constant time.\n\t\t\tfor (var q = this.q, i = 0; i < q.length; i++) {\n\t\t\t\tif (q[i].namespace !== this.waitNamespace) {\n\t\t\t\t\treturn true; // allow execution\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\n\trunTask: function(task) {\n\t\ttask.func();\n\t},\n\n\n\tcompoundTask: function(newTask) {\n\t\tvar q = this.q;\n\t\tvar shouldAppend = true;\n\t\tvar i, task;\n\n\t\tif (newTask.namespace && newTask.type === 'destroy') {\n\n\t\t\t// remove all init/add/remove ops with same namespace, regardless of order\n\t\t\tfor (i = q.length - 1; i >= 0; i--) {\n\t\t\t\ttask = q[i];\n\n\t\t\t\tswitch (task.type) {\n\t\t\t\t\tcase 'init':\n\t\t\t\t\t\tshouldAppend = false; // jshint ignore:line\n\t\t\t\t\t\t// the latest destroy is cancelled out by not doing the init\n\t\t\t\t\t\t// and fallthrough....\n\t\t\t\t\tcase 'add':\n\t\t\t\t\tcase 'remove':\n\t\t\t\t\t\tq.splice(i, 1); // remove task\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (shouldAppend) {\n\t\t\tq.push(newTask);\n\t\t}\n\n\t\treturn shouldAppend;\n\t}\n\n});\n\nFC.RenderQueue = RenderQueue;\n\n;;\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n\t- className (string)\n\t- content (HTML string or jQuery element set)\n\t- parentEl\n\t- top\n\t- left\n\t- right (the x coord of where the right edge should be. not a \"CSS\" right)\n\t- autoHide (boolean)\n\t- show (callback)\n\t- hide (callback)\n*/\n\nvar Popover = Class.extend(ListenerMixin, {\n\n\tisHidden: true,\n\toptions: null,\n\tel: null, // the container element for the popover. generated by this object\n\tmargin: 10, // the space required between the popover and the edges of the scroll container\n\n\n\tconstructor: function(options) {\n\t\tthis.options = options || {};\n\t},\n\n\n\t// Shows the popover on the specified position. Renders it if not already\n\tshow: function() {\n\t\tif (this.isHidden) {\n\t\t\tif (!this.el) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\tthis.el.show();\n\t\t\tthis.position();\n\t\t\tthis.isHidden = false;\n\t\t\tthis.trigger('show');\n\t\t}\n\t},\n\n\n\t// Hides the popover, through CSS, but does not remove it from the DOM\n\thide: function() {\n\t\tif (!this.isHidden) {\n\t\t\tthis.el.hide();\n\t\t\tthis.isHidden = true;\n\t\t\tthis.trigger('hide');\n\t\t}\n\t},\n\n\n\t// Creates `this.el` and renders content inside of it\n\trender: function() {\n\t\tvar _this = this;\n\t\tvar options = this.options;\n\n\t\tthis.el = $('<div class=\"fc-popover\"/>')\n\t\t\t.addClass(options.className || '')\n\t\t\t.css({\n\t\t\t\t// position initially to the top left to avoid creating scrollbars\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t})\n\t\t\t.append(options.content)\n\t\t\t.appendTo(options.parentEl);\n\n\t\t// when a click happens on anything inside with a 'fc-close' className, hide the popover\n\t\tthis.el.on('click', '.fc-close', function() {\n\t\t\t_this.hide();\n\t\t});\n\n\t\tif (options.autoHide) {\n\t\t\tthis.listenTo($(document), 'mousedown', this.documentMousedown);\n\t\t}\n\t},\n\n\n\t// Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\tdocumentMousedown: function(ev) {\n\t\t// only hide the popover if the click happened outside the popover\n\t\tif (this.el && !$(ev.target).closest(this.el).length) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\n\t// Hides and unregisters any handlers\n\tremoveElement: function() {\n\t\tthis.hide();\n\n\t\tif (this.el) {\n\t\t\tthis.el.remove();\n\t\t\tthis.el = null;\n\t\t}\n\n\t\tthis.stopListeningTo($(document), 'mousedown');\n\t},\n\n\n\t// Positions the popover optimally, using the top/left/right options\n\tposition: function() {\n\t\tvar options = this.options;\n\t\tvar origin = this.el.offsetParent().offset();\n\t\tvar width = this.el.outerWidth();\n\t\tvar height = this.el.outerHeight();\n\t\tvar windowEl = $(window);\n\t\tvar viewportEl = getScrollParent(this.el);\n\t\tvar viewportTop;\n\t\tvar viewportLeft;\n\t\tvar viewportOffset;\n\t\tvar top; // the \"position\" (not \"offset\") values for the popover\n\t\tvar left; //\n\n\t\t// compute top and left\n\t\ttop = options.top || 0;\n\t\tif (options.left !== undefined) {\n\t\t\tleft = options.left;\n\t\t}\n\t\telse if (options.right !== undefined) {\n\t\t\tleft = options.right - width; // derive the left value from the right value\n\t\t}\n\t\telse {\n\t\t\tleft = 0;\n\t\t}\n\n\t\tif (viewportEl.is(window) || viewportEl.is(document)) { // normalize getScrollParent's result\n\t\t\tviewportEl = windowEl;\n\t\t\tviewportTop = 0; // the window is always at the top left\n\t\t\tviewportLeft = 0; // (and .offset() won't work if called here)\n\t\t}\n\t\telse {\n\t\t\tviewportOffset = viewportEl.offset();\n\t\t\tviewportTop = viewportOffset.top;\n\t\t\tviewportLeft = viewportOffset.left;\n\t\t}\n\n\t\t// if the window is scrolled, it causes the visible area to be further down\n\t\tviewportTop += windowEl.scrollTop();\n\t\tviewportLeft += windowEl.scrollLeft();\n\n\t\t// constrain to the view port. if constrained by two edges, give precedence to top/left\n\t\tif (options.viewportConstrain !== false) {\n\t\t\ttop = Math.min(top, viewportTop + viewportEl.outerHeight() - height - this.margin);\n\t\t\ttop = Math.max(top, viewportTop + this.margin);\n\t\t\tleft = Math.min(left, viewportLeft + viewportEl.outerWidth() - width - this.margin);\n\t\t\tleft = Math.max(left, viewportLeft + this.margin);\n\t\t}\n\n\t\tthis.el.css({\n\t\t\ttop: top - origin.top,\n\t\t\tleft: left - origin.left\n\t\t});\n\t},\n\n\n\t// Triggers a callback. Calls a function in the option hash of the same name.\n\t// Arguments beyond the first `name` are forwarded on.\n\t// TODO: better code reuse for this. Repeat code\n\ttrigger: function(name) {\n\t\tif (this.options[name]) {\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n});\n\n;;\n\n/*\nA cache for the left/right/top/bottom/width/height values for one or more elements.\nWorks with both offset (from topleft document) and position (from offsetParent).\n\noptions:\n- els\n- isHorizontal\n- isVertical\n*/\nvar CoordCache = FC.CoordCache = Class.extend({\n\n\tels: null, // jQuery set (assumed to be siblings)\n\tforcedOffsetParentEl: null, // options can override the natural offsetParent\n\torigin: null, // {left,top} position of offsetParent of els\n\tboundingRect: null, // constrain cordinates to this rectangle. {left,right,top,bottom} or null\n\tisHorizontal: false, // whether to query for left/right/width\n\tisVertical: false, // whether to query for top/bottom/height\n\n\t// arrays of coordinates (offsets from topleft of document)\n\tlefts: null,\n\trights: null,\n\ttops: null,\n\tbottoms: null,\n\n\n\tconstructor: function(options) {\n\t\tthis.els = $(options.els);\n\t\tthis.isHorizontal = options.isHorizontal;\n\t\tthis.isVertical = options.isVertical;\n\t\tthis.forcedOffsetParentEl = options.offsetParent ? $(options.offsetParent) : null;\n\t},\n\n\n\t// Queries the els for coordinates and stores them.\n\t// Call this method before using and of the get* methods below.\n\tbuild: function() {\n\t\tvar offsetParentEl = this.forcedOffsetParentEl;\n\t\tif (!offsetParentEl && this.els.length > 0) {\n\t\t\toffsetParentEl = this.els.eq(0).offsetParent();\n\t\t}\n\n\t\tthis.origin = offsetParentEl ?\n\t\t\toffsetParentEl.offset() :\n\t\t\tnull;\n\n\t\tthis.boundingRect = this.queryBoundingRect();\n\n\t\tif (this.isHorizontal) {\n\t\t\tthis.buildElHorizontals();\n\t\t}\n\t\tif (this.isVertical) {\n\t\t\tthis.buildElVerticals();\n\t\t}\n\t},\n\n\n\t// Destroys all internal data about coordinates, freeing memory\n\tclear: function() {\n\t\tthis.origin = null;\n\t\tthis.boundingRect = null;\n\t\tthis.lefts = null;\n\t\tthis.rights = null;\n\t\tthis.tops = null;\n\t\tthis.bottoms = null;\n\t},\n\n\n\t// When called, if coord caches aren't built, builds them\n\tensureBuilt: function() {\n\t\tif (!this.origin) {\n\t\t\tthis.build();\n\t\t}\n\t},\n\n\n\t// Populates the left/right internal coordinate arrays\n\tbuildElHorizontals: function() {\n\t\tvar lefts = [];\n\t\tvar rights = [];\n\n\t\tthis.els.each(function(i, node) {\n\t\t\tvar el = $(node);\n\t\t\tvar left = el.offset().left;\n\t\t\tvar width = el.outerWidth();\n\n\t\t\tlefts.push(left);\n\t\t\trights.push(left + width);\n\t\t});\n\n\t\tthis.lefts = lefts;\n\t\tthis.rights = rights;\n\t},\n\n\n\t// Populates the top/bottom internal coordinate arrays\n\tbuildElVerticals: function() {\n\t\tvar tops = [];\n\t\tvar bottoms = [];\n\n\t\tthis.els.each(function(i, node) {\n\t\t\tvar el = $(node);\n\t\t\tvar top = el.offset().top;\n\t\t\tvar height = el.outerHeight();\n\n\t\t\ttops.push(top);\n\t\t\tbottoms.push(top + height);\n\t\t});\n\n\t\tthis.tops = tops;\n\t\tthis.bottoms = bottoms;\n\t},\n\n\n\t// Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n\t// If no intersection is made, returns undefined.\n\tgetHorizontalIndex: function(leftOffset) {\n\t\tthis.ensureBuilt();\n\n\t\tvar lefts = this.lefts;\n\t\tvar rights = this.rights;\n\t\tvar len = lefts.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (leftOffset >= lefts[i] && leftOffset < rights[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Given a top offset (from document top), returns the index of the el that it vertically intersects.\n\t// If no intersection is made, returns undefined.\n\tgetVerticalIndex: function(topOffset) {\n\t\tthis.ensureBuilt();\n\n\t\tvar tops = this.tops;\n\t\tvar bottoms = this.bottoms;\n\t\tvar len = tops.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (topOffset >= tops[i] && topOffset < bottoms[i]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Gets the left offset (from document left) of the element at the given index\n\tgetLeftOffset: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.lefts[leftIndex];\n\t},\n\n\n\t// Gets the left position (from offsetParent left) of the element at the given index\n\tgetLeftPosition: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.lefts[leftIndex] - this.origin.left;\n\t},\n\n\n\t// Gets the right offset (from document left) of the element at the given index.\n\t// This value is NOT relative to the document's right edge, like the CSS concept of \"right\" would be.\n\tgetRightOffset: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex];\n\t},\n\n\n\t// Gets the right position (from offsetParent left) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's right edge, like the CSS concept of \"right\" would be.\n\tgetRightPosition: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex] - this.origin.left;\n\t},\n\n\n\t// Gets the width of the element at the given index\n\tgetWidth: function(leftIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.rights[leftIndex] - this.lefts[leftIndex];\n\t},\n\n\n\t// Gets the top offset (from document top) of the element at the given index\n\tgetTopOffset: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.tops[topIndex];\n\t},\n\n\n\t// Gets the top position (from offsetParent top) of the element at the given position\n\tgetTopPosition: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.tops[topIndex] - this.origin.top;\n\t},\n\n\t// Gets the bottom offset (from the document top) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\n\tgetBottomOffset: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex];\n\t},\n\n\n\t// Gets the bottom position (from the offsetParent top) of the element at the given index.\n\t// This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\n\tgetBottomPosition: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex] - this.origin.top;\n\t},\n\n\n\t// Gets the height of the element at the given index\n\tgetHeight: function(topIndex) {\n\t\tthis.ensureBuilt();\n\t\treturn this.bottoms[topIndex] - this.tops[topIndex];\n\t},\n\n\n\t// Bounding Rect\n\t// TODO: decouple this from CoordCache\n\n\t// Compute and return what the elements' bounding rectangle is, from the user's perspective.\n\t// Right now, only returns a rectangle if constrained by an overflow:scroll element.\n\t// Returns null if there are no elements\n\tqueryBoundingRect: function() {\n\t\tvar scrollParentEl;\n\n\t\tif (this.els.length > 0) {\n\t\t\tscrollParentEl = getScrollParent(this.els.eq(0));\n\n\t\t\tif (!scrollParentEl.is(document)) {\n\t\t\t\treturn getClientRect(scrollParentEl);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tisPointInBounds: function(leftOffset, topOffset) {\n\t\treturn this.isLeftInBounds(leftOffset) && this.isTopInBounds(topOffset);\n\t},\n\n\tisLeftInBounds: function(leftOffset) {\n\t\treturn !this.boundingRect || (leftOffset >= this.boundingRect.left && leftOffset < this.boundingRect.right);\n\t},\n\n\tisTopInBounds: function(topOffset) {\n\t\treturn !this.boundingRect || (topOffset >= this.boundingRect.top && topOffset < this.boundingRect.bottom);\n\t}\n\n});\n\n;;\n\n/* Tracks a drag's mouse movement, firing various handlers\n----------------------------------------------------------------------------------------------------------------------*/\n// TODO: use Emitter\n\nvar DragListener = FC.DragListener = Class.extend(ListenerMixin, {\n\n\toptions: null,\n\tsubjectEl: null,\n\n\t// coordinates of the initial mousedown\n\toriginX: null,\n\toriginY: null,\n\n\t// the wrapping element that scrolls, or MIGHT scroll if there's overflow.\n\t// TODO: do this for wrappers that have overflow:hidden as well.\n\tscrollEl: null,\n\n\tisInteracting: false,\n\tisDistanceSurpassed: false,\n\tisDelayEnded: false,\n\tisDragging: false,\n\tisTouch: false,\n\tisGeneric: false, // initiated by 'dragstart' (jqui)\n\n\tdelay: null,\n\tdelayTimeoutId: null,\n\tminDistance: null,\n\n\tshouldCancelTouchScroll: true,\n\tscrollAlwaysKills: false,\n\n\n\tconstructor: function(options) {\n\t\tthis.options = options || {};\n\t},\n\n\n\t// Interaction (high-level)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tstartInteraction: function(ev, extraOptions) {\n\n\t\tif (ev.type === 'mousedown') {\n\t\t\tif (GlobalEmitter.get().shouldIgnoreMouse()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (!isPrimaryMouseButton(ev)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tev.preventDefault(); // prevents native selection in most browsers\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isInteracting) {\n\n\t\t\t// process options\n\t\t\textraOptions = extraOptions || {};\n\t\t\tthis.delay = firstDefined(extraOptions.delay, this.options.delay, 0);\n\t\t\tthis.minDistance = firstDefined(extraOptions.distance, this.options.distance, 0);\n\t\t\tthis.subjectEl = this.options.subjectEl;\n\n\t\t\tpreventSelection($('body'));\n\n\t\t\tthis.isInteracting = true;\n\t\t\tthis.isTouch = getEvIsTouch(ev);\n\t\t\tthis.isGeneric = ev.type === 'dragstart';\n\t\t\tthis.isDelayEnded = false;\n\t\t\tthis.isDistanceSurpassed = false;\n\n\t\t\tthis.originX = getEvX(ev);\n\t\t\tthis.originY = getEvY(ev);\n\t\t\tthis.scrollEl = getScrollParent($(ev.target));\n\n\t\t\tthis.bindHandlers();\n\t\t\tthis.initAutoScroll();\n\t\t\tthis.handleInteractionStart(ev);\n\t\t\tthis.startDelay(ev);\n\n\t\t\tif (!this.minDistance) {\n\t\t\t\tthis.handleDistanceSurpassed(ev);\n\t\t\t}\n\t\t}\n\t},\n\n\n\thandleInteractionStart: function(ev) {\n\t\tthis.trigger('interactionStart', ev);\n\t},\n\n\n\tendInteraction: function(ev, isCancelled) {\n\t\tif (this.isInteracting) {\n\t\t\tthis.endDrag(ev);\n\n\t\t\tif (this.delayTimeoutId) {\n\t\t\t\tclearTimeout(this.delayTimeoutId);\n\t\t\t\tthis.delayTimeoutId = null;\n\t\t\t}\n\n\t\t\tthis.destroyAutoScroll();\n\t\t\tthis.unbindHandlers();\n\n\t\t\tthis.isInteracting = false;\n\t\t\tthis.handleInteractionEnd(ev, isCancelled);\n\n\t\t\tallowSelection($('body'));\n\t\t}\n\t},\n\n\n\thandleInteractionEnd: function(ev, isCancelled) {\n\t\tthis.trigger('interactionEnd', ev, isCancelled || false);\n\t},\n\n\n\t// Binding To DOM\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindHandlers: function() {\n\t\t// some browsers (Safari in iOS 10) don't allow preventDefault on touch events that are bound after touchstart,\n\t\t// so listen to the GlobalEmitter singleton, which is always bound, instead of the document directly.\n\t\tvar globalEmitter = GlobalEmitter.get();\n\n\t\tif (this.isGeneric) {\n\t\t\tthis.listenTo($(document), { // might only work on iOS because of GlobalEmitter's bind :(\n\t\t\t\tdrag: this.handleMove,\n\t\t\t\tdragstop: this.endInteraction\n\t\t\t});\n\t\t}\n\t\telse if (this.isTouch) {\n\t\t\tthis.listenTo(globalEmitter, {\n\t\t\t\ttouchmove: this.handleTouchMove,\n\t\t\t\ttouchend: this.endInteraction,\n\t\t\t\tscroll: this.handleTouchScroll\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.listenTo(globalEmitter, {\n\t\t\t\tmousemove: this.handleMouseMove,\n\t\t\t\tmouseup: this.endInteraction\n\t\t\t});\n\t\t}\n\n\t\tthis.listenTo(globalEmitter, {\n\t\t\tselectstart: preventDefault, // don't allow selection while dragging\n\t\t\tcontextmenu: preventDefault // long taps would open menu on Chrome dev tools\n\t\t});\n\t},\n\n\n\tunbindHandlers: function() {\n\t\tthis.stopListeningTo(GlobalEmitter.get());\n\t\tthis.stopListeningTo($(document)); // for isGeneric\n\t},\n\n\n\t// Drag (high-level)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// extraOptions ignored if drag already started\n\tstartDrag: function(ev, extraOptions) {\n\t\tthis.startInteraction(ev, extraOptions); // ensure interaction began\n\n\t\tif (!this.isDragging) {\n\t\t\tthis.isDragging = true;\n\t\t\tthis.handleDragStart(ev);\n\t\t}\n\t},\n\n\n\thandleDragStart: function(ev) {\n\t\tthis.trigger('dragStart', ev);\n\t},\n\n\n\thandleMove: function(ev) {\n\t\tvar dx = getEvX(ev) - this.originX;\n\t\tvar dy = getEvY(ev) - this.originY;\n\t\tvar minDistance = this.minDistance;\n\t\tvar distanceSq; // current distance from the origin, squared\n\n\t\tif (!this.isDistanceSurpassed) {\n\t\t\tdistanceSq = dx * dx + dy * dy;\n\t\t\tif (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n\t\t\t\tthis.handleDistanceSurpassed(ev);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDragging) {\n\t\t\tthis.handleDrag(dx, dy, ev);\n\t\t}\n\t},\n\n\n\t// Called while the mouse is being moved and when we know a legitimate drag is taking place\n\thandleDrag: function(dx, dy, ev) {\n\t\tthis.trigger('drag', dx, dy, ev);\n\t\tthis.updateAutoScroll(ev); // will possibly cause scrolling\n\t},\n\n\n\tendDrag: function(ev) {\n\t\tif (this.isDragging) {\n\t\t\tthis.isDragging = false;\n\t\t\tthis.handleDragEnd(ev);\n\t\t}\n\t},\n\n\n\thandleDragEnd: function(ev) {\n\t\tthis.trigger('dragEnd', ev);\n\t},\n\n\n\t// Delay\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tstartDelay: function(initialEv) {\n\t\tvar _this = this;\n\n\t\tif (this.delay) {\n\t\t\tthis.delayTimeoutId = setTimeout(function() {\n\t\t\t\t_this.handleDelayEnd(initialEv);\n\t\t\t}, this.delay);\n\t\t}\n\t\telse {\n\t\t\tthis.handleDelayEnd(initialEv);\n\t\t}\n\t},\n\n\n\thandleDelayEnd: function(initialEv) {\n\t\tthis.isDelayEnded = true;\n\n\t\tif (this.isDistanceSurpassed) {\n\t\t\tthis.startDrag(initialEv);\n\t\t}\n\t},\n\n\n\t// Distance\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleDistanceSurpassed: function(ev) {\n\t\tthis.isDistanceSurpassed = true;\n\n\t\tif (this.isDelayEnded) {\n\t\t\tthis.startDrag(ev);\n\t\t}\n\t},\n\n\n\t// Mouse / Touch\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleTouchMove: function(ev) {\n\n\t\t// prevent inertia and touchmove-scrolling while dragging\n\t\tif (this.isDragging && this.shouldCancelTouchScroll) {\n\t\t\tev.preventDefault();\n\t\t}\n\n\t\tthis.handleMove(ev);\n\t},\n\n\n\thandleMouseMove: function(ev) {\n\t\tthis.handleMove(ev);\n\t},\n\n\n\t// Scrolling (unrelated to auto-scroll)\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\thandleTouchScroll: function(ev) {\n\t\t// if the drag is being initiated by touch, but a scroll happens before\n\t\t// the drag-initiating delay is over, cancel the drag\n\t\tif (!this.isDragging || this.scrollAlwaysKills) {\n\t\t\tthis.endInteraction(ev, true); // isCancelled=true\n\t\t}\n\t},\n\n\n\t// Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Triggers a callback. Calls a function in the option hash of the same name.\n\t// Arguments beyond the first `name` are forwarded on.\n\ttrigger: function(name) {\n\t\tif (this.options[name]) {\n\t\t\tthis.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t\t// makes _methods callable by event name. TODO: kill this\n\t\tif (this['_' + name]) {\n\t\t\tthis['_' + name].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n\n\n});\n\n;;\n/*\nthis.scrollEl is set in DragListener\n*/\nDragListener.mixin({\n\n\tisAutoScroll: false,\n\n\tscrollBounds: null, // { top, bottom, left, right }\n\tscrollTopVel: null, // pixels per second\n\tscrollLeftVel: null, // pixels per second\n\tscrollIntervalId: null, // ID of setTimeout for scrolling animation loop\n\n\t// defaults\n\tscrollSensitivity: 30, // pixels from edge for scrolling to start\n\tscrollSpeed: 200, // pixels per second, at maximum speed\n\tscrollIntervalMs: 50, // millisecond wait between scroll increment\n\n\n\tinitAutoScroll: function() {\n\t\tvar scrollEl = this.scrollEl;\n\n\t\tthis.isAutoScroll =\n\t\t\tthis.options.scroll &&\n\t\t\tscrollEl &&\n\t\t\t!scrollEl.is(window) &&\n\t\t\t!scrollEl.is(document);\n\n\t\tif (this.isAutoScroll) {\n\t\t\t// debounce makes sure rapid calls don't happen\n\t\t\tthis.listenTo(scrollEl, 'scroll', debounce(this.handleDebouncedScroll, 100));\n\t\t}\n\t},\n\n\n\tdestroyAutoScroll: function() {\n\t\tthis.endAutoScroll(); // kill any animation loop\n\n\t\t// remove the scroll handler if there is a scrollEl\n\t\tif (this.isAutoScroll) {\n\t\t\tthis.stopListeningTo(this.scrollEl, 'scroll'); // will probably get removed by unbindHandlers too :(\n\t\t}\n\t},\n\n\n\t// Computes and stores the bounding rectangle of scrollEl\n\tcomputeScrollBounds: function() {\n\t\tif (this.isAutoScroll) {\n\t\t\tthis.scrollBounds = getOuterRect(this.scrollEl);\n\t\t\t// TODO: use getClientRect in future. but prevents auto scrolling when on top of scrollbars\n\t\t}\n\t},\n\n\n\t// Called when the dragging is in progress and scrolling should be updated\n\tupdateAutoScroll: function(ev) {\n\t\tvar sensitivity = this.scrollSensitivity;\n\t\tvar bounds = this.scrollBounds;\n\t\tvar topCloseness, bottomCloseness;\n\t\tvar leftCloseness, rightCloseness;\n\t\tvar topVel = 0;\n\t\tvar leftVel = 0;\n\n\t\tif (bounds) { // only scroll if scrollEl exists\n\n\t\t\t// compute closeness to edges. valid range is from 0.0 - 1.0\n\t\t\ttopCloseness = (sensitivity - (getEvY(ev) - bounds.top)) / sensitivity;\n\t\t\tbottomCloseness = (sensitivity - (bounds.bottom - getEvY(ev))) / sensitivity;\n\t\t\tleftCloseness = (sensitivity - (getEvX(ev) - bounds.left)) / sensitivity;\n\t\t\trightCloseness = (sensitivity - (bounds.right - getEvX(ev))) / sensitivity;\n\n\t\t\t// translate vertical closeness into velocity.\n\t\t\t// mouse must be completely in bounds for velocity to happen.\n\t\t\tif (topCloseness >= 0 && topCloseness <= 1) {\n\t\t\t\ttopVel = topCloseness * this.scrollSpeed * -1; // negative. for scrolling up\n\t\t\t}\n\t\t\telse if (bottomCloseness >= 0 && bottomCloseness <= 1) {\n\t\t\t\ttopVel = bottomCloseness * this.scrollSpeed;\n\t\t\t}\n\n\t\t\t// translate horizontal closeness into velocity\n\t\t\tif (leftCloseness >= 0 && leftCloseness <= 1) {\n\t\t\t\tleftVel = leftCloseness * this.scrollSpeed * -1; // negative. for scrolling left\n\t\t\t}\n\t\t\telse if (rightCloseness >= 0 && rightCloseness <= 1) {\n\t\t\t\tleftVel = rightCloseness * this.scrollSpeed;\n\t\t\t}\n\t\t}\n\n\t\tthis.setScrollVel(topVel, leftVel);\n\t},\n\n\n\t// Sets the speed-of-scrolling for the scrollEl\n\tsetScrollVel: function(topVel, leftVel) {\n\n\t\tthis.scrollTopVel = topVel;\n\t\tthis.scrollLeftVel = leftVel;\n\n\t\tthis.constrainScrollVel(); // massages into realistic values\n\n\t\t// if there is non-zero velocity, and an animation loop hasn't already started, then START\n\t\tif ((this.scrollTopVel || this.scrollLeftVel) && !this.scrollIntervalId) {\n\t\t\tthis.scrollIntervalId = setInterval(\n\t\t\t\tproxy(this, 'scrollIntervalFunc'), // scope to `this`\n\t\t\t\tthis.scrollIntervalMs\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Forces scrollTopVel and scrollLeftVel to be zero if scrolling has already gone all the way\n\tconstrainScrollVel: function() {\n\t\tvar el = this.scrollEl;\n\n\t\tif (this.scrollTopVel < 0) { // scrolling up?\n\t\t\tif (el.scrollTop() <= 0) { // already scrolled all the way up?\n\t\t\t\tthis.scrollTopVel = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.scrollTopVel > 0) { // scrolling down?\n\t\t\tif (el.scrollTop() + el[0].clientHeight >= el[0].scrollHeight) { // already scrolled all the way down?\n\t\t\t\tthis.scrollTopVel = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (this.scrollLeftVel < 0) { // scrolling left?\n\t\t\tif (el.scrollLeft() <= 0) { // already scrolled all the left?\n\t\t\t\tthis.scrollLeftVel = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.scrollLeftVel > 0) { // scrolling right?\n\t\t\tif (el.scrollLeft() + el[0].clientWidth >= el[0].scrollWidth) { // already scrolled all the way right?\n\t\t\t\tthis.scrollLeftVel = 0;\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// This function gets called during every iteration of the scrolling animation loop\n\tscrollIntervalFunc: function() {\n\t\tvar el = this.scrollEl;\n\t\tvar frac = this.scrollIntervalMs / 1000; // considering animation frequency, what the vel should be mult'd by\n\n\t\t// change the value of scrollEl's scroll\n\t\tif (this.scrollTopVel) {\n\t\t\tel.scrollTop(el.scrollTop() + this.scrollTopVel * frac);\n\t\t}\n\t\tif (this.scrollLeftVel) {\n\t\t\tel.scrollLeft(el.scrollLeft() + this.scrollLeftVel * frac);\n\t\t}\n\n\t\tthis.constrainScrollVel(); // since the scroll values changed, recompute the velocities\n\n\t\t// if scrolled all the way, which causes the vels to be zero, stop the animation loop\n\t\tif (!this.scrollTopVel && !this.scrollLeftVel) {\n\t\t\tthis.endAutoScroll();\n\t\t}\n\t},\n\n\n\t// Kills any existing scrolling animation loop\n\tendAutoScroll: function() {\n\t\tif (this.scrollIntervalId) {\n\t\t\tclearInterval(this.scrollIntervalId);\n\t\t\tthis.scrollIntervalId = null;\n\n\t\t\tthis.handleScrollEnd();\n\t\t}\n\t},\n\n\n\t// Get called when the scrollEl is scrolled (NOTE: this is delayed via debounce)\n\thandleDebouncedScroll: function() {\n\t\t// recompute all coordinates, but *only* if this is *not* part of our scrolling animation\n\t\tif (!this.scrollIntervalId) {\n\t\t\tthis.handleScrollEnd();\n\t\t}\n\t},\n\n\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\n\thandleScrollEnd: function() {\n\t}\n\n});\n;;\n\n/* Tracks mouse movements over a component and raises events about which hit the mouse is over.\n------------------------------------------------------------------------------------------------------------------------\noptions:\n- subjectEl\n- subjectCenter\n*/\n\nvar HitDragListener = DragListener.extend({\n\n\tcomponent: null, // converts coordinates to hits\n\t\t// methods: hitsNeeded, hitsNotNeeded, queryHit\n\n\torigHit: null, // the hit the mouse was over when listening started\n\thit: null, // the hit the mouse is over\n\tcoordAdjust: null, // delta that will be added to the mouse coordinates when computing collisions\n\n\n\tconstructor: function(component, options) {\n\t\tDragListener.call(this, options); // call the super-constructor\n\n\t\tthis.component = component;\n\t},\n\n\n\t// Called when drag listening starts (but a real drag has not necessarily began).\n\t// ev might be undefined if dragging was started manually.\n\thandleInteractionStart: function(ev) {\n\t\tvar subjectEl = this.subjectEl;\n\t\tvar subjectRect;\n\t\tvar origPoint;\n\t\tvar point;\n\n\t\tthis.component.hitsNeeded();\n\t\tthis.computeScrollBounds(); // for autoscroll\n\n\t\tif (ev) {\n\t\t\torigPoint = { left: getEvX(ev), top: getEvY(ev) };\n\t\t\tpoint = origPoint;\n\n\t\t\t// constrain the point to bounds of the element being dragged\n\t\t\tif (subjectEl) {\n\t\t\t\tsubjectRect = getOuterRect(subjectEl); // used for centering as well\n\t\t\t\tpoint = constrainPoint(point, subjectRect);\n\t\t\t}\n\n\t\t\tthis.origHit = this.queryHit(point.left, point.top);\n\n\t\t\t// treat the center of the subject as the collision point?\n\t\t\tif (subjectEl && this.options.subjectCenter) {\n\n\t\t\t\t// only consider the area the subject overlaps the hit. best for large subjects.\n\t\t\t\t// TODO: skip this if hit didn't supply left/right/top/bottom\n\t\t\t\tif (this.origHit) {\n\t\t\t\t\tsubjectRect = intersectRects(this.origHit, subjectRect) ||\n\t\t\t\t\t\tsubjectRect; // in case there is no intersection\n\t\t\t\t}\n\n\t\t\t\tpoint = getRectCenter(subjectRect);\n\t\t\t}\n\n\t\t\tthis.coordAdjust = diffPoints(point, origPoint); // point - origPoint\n\t\t}\n\t\telse {\n\t\t\tthis.origHit = null;\n\t\t\tthis.coordAdjust = null;\n\t\t}\n\n\t\t// call the super-method. do it after origHit has been computed\n\t\tDragListener.prototype.handleInteractionStart.apply(this, arguments);\n\t},\n\n\n\t// Called when the actual drag has started\n\thandleDragStart: function(ev) {\n\t\tvar hit;\n\n\t\tDragListener.prototype.handleDragStart.apply(this, arguments); // call the super-method\n\n\t\t// might be different from this.origHit if the min-distance is large\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\n\n\t\t// report the initial hit the mouse is over\n\t\t// especially important if no min-distance and drag starts immediately\n\t\tif (hit) {\n\t\t\tthis.handleHitOver(hit);\n\t\t}\n\t},\n\n\n\t// Called when the drag moves\n\thandleDrag: function(dx, dy, ev) {\n\t\tvar hit;\n\n\t\tDragListener.prototype.handleDrag.apply(this, arguments); // call the super-method\n\n\t\thit = this.queryHit(getEvX(ev), getEvY(ev));\n\n\t\tif (!isHitsEqual(hit, this.hit)) { // a different hit than before?\n\t\t\tif (this.hit) {\n\t\t\t\tthis.handleHitOut();\n\t\t\t}\n\t\t\tif (hit) {\n\t\t\t\tthis.handleHitOver(hit);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Called when dragging has been stopped\n\thandleDragEnd: function() {\n\t\tthis.handleHitDone();\n\t\tDragListener.prototype.handleDragEnd.apply(this, arguments); // call the super-method\n\t},\n\n\n\t// Called when a the mouse has just moved over a new hit\n\thandleHitOver: function(hit) {\n\t\tvar isOrig = isHitsEqual(hit, this.origHit);\n\n\t\tthis.hit = hit;\n\n\t\tthis.trigger('hitOver', this.hit, isOrig, this.origHit);\n\t},\n\n\n\t// Called when the mouse has just moved out of a hit\n\thandleHitOut: function() {\n\t\tif (this.hit) {\n\t\t\tthis.trigger('hitOut', this.hit);\n\t\t\tthis.handleHitDone();\n\t\t\tthis.hit = null;\n\t\t}\n\t},\n\n\n\t// Called after a hitOut. Also called before a dragStop\n\thandleHitDone: function() {\n\t\tif (this.hit) {\n\t\t\tthis.trigger('hitDone', this.hit);\n\t\t}\n\t},\n\n\n\t// Called when the interaction ends, whether there was a real drag or not\n\thandleInteractionEnd: function() {\n\t\tDragListener.prototype.handleInteractionEnd.apply(this, arguments); // call the super-method\n\n\t\tthis.origHit = null;\n\t\tthis.hit = null;\n\n\t\tthis.component.hitsNotNeeded();\n\t},\n\n\n\t// Called when scrolling has stopped, whether through auto scroll, or the user scrolling\n\thandleScrollEnd: function() {\n\t\tDragListener.prototype.handleScrollEnd.apply(this, arguments); // call the super-method\n\n\t\t// hits' absolute positions will be in new places after a user's scroll.\n\t\t// HACK for recomputing.\n\t\tif (this.isDragging) {\n\t\t\tthis.component.releaseHits();\n\t\t\tthis.component.prepareHits();\n\t\t}\n\t},\n\n\n\t// Gets the hit underneath the coordinates for the given mouse event\n\tqueryHit: function(left, top) {\n\n\t\tif (this.coordAdjust) {\n\t\t\tleft += this.coordAdjust.left;\n\t\t\ttop += this.coordAdjust.top;\n\t\t}\n\n\t\treturn this.component.queryHit(left, top);\n\t}\n\n});\n\n\n// Returns `true` if the hits are identically equal. `false` otherwise. Must be from the same component.\n// Two null values will be considered equal, as two \"out of the component\" states are the same.\nfunction isHitsEqual(hit0, hit1) {\n\n\tif (!hit0 && !hit1) {\n\t\treturn true;\n\t}\n\n\tif (hit0 && hit1) {\n\t\treturn hit0.component === hit1.component &&\n\t\t\tisHitPropsWithin(hit0, hit1) &&\n\t\t\tisHitPropsWithin(hit1, hit0); // ensures all props are identical\n\t}\n\n\treturn false;\n}\n\n\n// Returns true if all of subHit's non-standard properties are within superHit\nfunction isHitPropsWithin(subHit, superHit) {\n\tfor (var propName in subHit) {\n\t\tif (!/^(component|left|right|top|bottom)$/.test(propName)) {\n\t\t\tif (subHit[propName] !== superHit[propName]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\n;;\n\n/*\nListens to document and window-level user-interaction events, like touch events and mouse events,\nand fires these events as-is to whoever is observing a GlobalEmitter.\nBest when used as a singleton via GlobalEmitter.get()\n\nNormalizes mouse/touch events. For examples:\n- ignores the the simulated mouse events that happen after a quick tap: mousemove+mousedown+mouseup+click\n- compensates for various buggy scenarios where a touchend does not fire\n*/\n\nFC.touchMouseIgnoreWait = 500;\n\nvar GlobalEmitter = Class.extend(ListenerMixin, EmitterMixin, {\n\n\tisTouching: false,\n\tmouseIgnoreDepth: 0,\n\thandleScrollProxy: null,\n\n\n\tbind: function() {\n\t\tvar _this = this;\n\n\t\tthis.listenTo($(document), {\n\t\t\ttouchstart: this.handleTouchStart,\n\t\t\ttouchcancel: this.handleTouchCancel,\n\t\t\ttouchend: this.handleTouchEnd,\n\t\t\tmousedown: this.handleMouseDown,\n\t\t\tmousemove: this.handleMouseMove,\n\t\t\tmouseup: this.handleMouseUp,\n\t\t\tclick: this.handleClick,\n\t\t\tselectstart: this.handleSelectStart,\n\t\t\tcontextmenu: this.handleContextMenu\n\t\t});\n\n\t\t// because we need to call preventDefault\n\t\t// because https://www.chromestatus.com/features/5093566007214080\n\t\t// TODO: investigate performance because this is a global handler\n\t\twindow.addEventListener(\n\t\t\t'touchmove',\n\t\t\tthis.handleTouchMoveProxy = function(ev) {\n\t\t\t\t_this.handleTouchMove($.Event(ev));\n\t\t\t},\n\t\t\t{ passive: false } // allows preventDefault()\n\t\t);\n\n\t\t// attach a handler to get called when ANY scroll action happens on the page.\n\t\t// this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n\t\t// http://stackoverflow.com/a/32954565/96342\n\t\twindow.addEventListener(\n\t\t\t'scroll',\n\t\t\tthis.handleScrollProxy = function(ev) {\n\t\t\t\t_this.handleScroll($.Event(ev));\n\t\t\t},\n\t\t\ttrue // useCapture\n\t\t);\n\t},\n\n\tunbind: function() {\n\t\tthis.stopListeningTo($(document));\n\n\t\twindow.removeEventListener(\n\t\t\t'touchmove',\n\t\t\tthis.handleTouchMoveProxy\n\t\t);\n\n\t\twindow.removeEventListener(\n\t\t\t'scroll',\n\t\t\tthis.handleScrollProxy,\n\t\t\ttrue // useCapture\n\t\t);\n\t},\n\n\n\t// Touch Handlers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\thandleTouchStart: function(ev) {\n\n\t\t// if a previous touch interaction never ended with a touchend, then implicitly end it,\n\t\t// but since a new touch interaction is about to begin, don't start the mouse ignore period.\n\t\tthis.stopTouch(ev, true); // skipMouseIgnore=true\n\n\t\tthis.isTouching = true;\n\t\tthis.trigger('touchstart', ev);\n\t},\n\n\thandleTouchMove: function(ev) {\n\t\tif (this.isTouching) {\n\t\t\tthis.trigger('touchmove', ev);\n\t\t}\n\t},\n\n\thandleTouchCancel: function(ev) {\n\t\tif (this.isTouching) {\n\t\t\tthis.trigger('touchcancel', ev);\n\n\t\t\t// Have touchcancel fire an artificial touchend. That way, handlers won't need to listen to both.\n\t\t\t// If touchend fires later, it won't have any effect b/c isTouching will be false.\n\t\t\tthis.stopTouch(ev);\n\t\t}\n\t},\n\n\thandleTouchEnd: function(ev) {\n\t\tthis.stopTouch(ev);\n\t},\n\n\n\t// Mouse Handlers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\thandleMouseDown: function(ev) {\n\t\tif (!this.shouldIgnoreMouse()) {\n\t\t\tthis.trigger('mousedown', ev);\n\t\t}\n\t},\n\n\thandleMouseMove: function(ev) {\n\t\tif (!this.shouldIgnoreMouse()) {\n\t\t\tthis.trigger('mousemove', ev);\n\t\t}\n\t},\n\n\thandleMouseUp: function(ev) {\n\t\tif (!this.shouldIgnoreMouse()) {\n\t\t\tthis.trigger('mouseup', ev);\n\t\t}\n\t},\n\n\thandleClick: function(ev) {\n\t\tif (!this.shouldIgnoreMouse()) {\n\t\t\tthis.trigger('click', ev);\n\t\t}\n\t},\n\n\n\t// Misc Handlers\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\thandleSelectStart: function(ev) {\n\t\tthis.trigger('selectstart', ev);\n\t},\n\n\thandleContextMenu: function(ev) {\n\t\tthis.trigger('contextmenu', ev);\n\t},\n\n\thandleScroll: function(ev) {\n\t\tthis.trigger('scroll', ev);\n\t},\n\n\n\t// Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\tstopTouch: function(ev, skipMouseIgnore) {\n\t\tif (this.isTouching) {\n\t\t\tthis.isTouching = false;\n\t\t\tthis.trigger('touchend', ev);\n\n\t\t\tif (!skipMouseIgnore) {\n\t\t\t\tthis.startTouchMouseIgnore();\n\t\t\t}\n\t\t}\n\t},\n\n\tstartTouchMouseIgnore: function() {\n\t\tvar _this = this;\n\t\tvar wait = FC.touchMouseIgnoreWait;\n\n\t\tif (wait) {\n\t\t\tthis.mouseIgnoreDepth++;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.mouseIgnoreDepth--;\n\t\t\t}, wait);\n\t\t}\n\t},\n\n\tshouldIgnoreMouse: function() {\n\t\treturn this.isTouching || Boolean(this.mouseIgnoreDepth);\n\t}\n\n});\n\n\n// Singleton\n// ---------------------------------------------------------------------------------------------------------------------\n\n(function() {\n\tvar globalEmitter = null;\n\tvar neededCount = 0;\n\n\n\t// gets the singleton\n\tGlobalEmitter.get = function() {\n\n\t\tif (!globalEmitter) {\n\t\t\tglobalEmitter = new GlobalEmitter();\n\t\t\tglobalEmitter.bind();\n\t\t}\n\n\t\treturn globalEmitter;\n\t};\n\n\n\t// called when an object knows it will need a GlobalEmitter in the near future.\n\tGlobalEmitter.needed = function() {\n\t\tGlobalEmitter.get(); // ensures globalEmitter\n\t\tneededCount++;\n\t};\n\n\n\t// called when the object that originally called needed() doesn't need a GlobalEmitter anymore.\n\tGlobalEmitter.unneeded = function() {\n\t\tneededCount--;\n\n\t\tif (!neededCount) { // nobody else needs it\n\t\t\tglobalEmitter.unbind();\n\t\t\tglobalEmitter = null;\n\t\t}\n\t};\n\n})();\n\n;;\n\n/* Creates a clone of an element and lets it track the mouse as it moves\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar MouseFollower = Class.extend(ListenerMixin, {\n\n\toptions: null,\n\n\tsourceEl: null, // the element that will be cloned and made to look like it is dragging\n\tel: null, // the clone of `sourceEl` that will track the mouse\n\tparentEl: null, // the element that `el` (the clone) will be attached to\n\n\t// the initial position of el, relative to the offset parent. made to match the initial offset of sourceEl\n\ttop0: null,\n\tleft0: null,\n\n\t// the absolute coordinates of the initiating touch/mouse action\n\ty0: null,\n\tx0: null,\n\n\t// the number of pixels the mouse has moved from its initial position\n\ttopDelta: null,\n\tleftDelta: null,\n\n\tisFollowing: false,\n\tisHidden: false,\n\tisAnimating: false, // doing the revert animation?\n\n\tconstructor: function(sourceEl, options) {\n\t\tthis.options = options = options || {};\n\t\tthis.sourceEl = sourceEl;\n\t\tthis.parentEl = options.parentEl ? $(options.parentEl) : sourceEl.parent(); // default to sourceEl's parent\n\t},\n\n\n\t// Causes the element to start following the mouse\n\tstart: function(ev) {\n\t\tif (!this.isFollowing) {\n\t\t\tthis.isFollowing = true;\n\n\t\t\tthis.y0 = getEvY(ev);\n\t\t\tthis.x0 = getEvX(ev);\n\t\t\tthis.topDelta = 0;\n\t\t\tthis.leftDelta = 0;\n\n\t\t\tif (!this.isHidden) {\n\t\t\t\tthis.updatePosition();\n\t\t\t}\n\n\t\t\tif (getEvIsTouch(ev)) {\n\t\t\t\tthis.listenTo($(document), 'touchmove', this.handleMove);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.listenTo($(document), 'mousemove', this.handleMove);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Causes the element to stop following the mouse. If shouldRevert is true, will animate back to original position.\n\t// `callback` gets invoked when the animation is complete. If no animation, it is invoked immediately.\n\tstop: function(shouldRevert, callback) {\n\t\tvar _this = this;\n\t\tvar revertDuration = this.options.revertDuration;\n\n\t\tfunction complete() { // might be called by .animate(), which might change `this` context\n\t\t\t_this.isAnimating = false;\n\t\t\t_this.removeElement();\n\n\t\t\t_this.top0 = _this.left0 = null; // reset state for future updatePosition calls\n\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\n\t\tif (this.isFollowing && !this.isAnimating) { // disallow more than one stop animation at a time\n\t\t\tthis.isFollowing = false;\n\n\t\t\tthis.stopListeningTo($(document));\n\n\t\t\tif (shouldRevert && revertDuration && !this.isHidden) { // do a revert animation?\n\t\t\t\tthis.isAnimating = true;\n\t\t\t\tthis.el.animate({\n\t\t\t\t\ttop: this.top0,\n\t\t\t\t\tleft: this.left0\n\t\t\t\t}, {\n\t\t\t\t\tduration: revertDuration,\n\t\t\t\t\tcomplete: complete\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Gets the tracking element. Create it if necessary\n\tgetEl: function() {\n\t\tvar el = this.el;\n\n\t\tif (!el) {\n\t\t\tel = this.el = this.sourceEl.clone()\n\t\t\t\t.addClass(this.options.additionalClass || '')\n\t\t\t\t.css({\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tvisibility: '', // in case original element was hidden (commonly through hideEvents())\n\t\t\t\t\tdisplay: this.isHidden ? 'none' : '', // for when initially hidden\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tright: 'auto', // erase and set width instead\n\t\t\t\t\tbottom: 'auto', // erase and set height instead\n\t\t\t\t\twidth: this.sourceEl.width(), // explicit height in case there was a 'right' value\n\t\t\t\t\theight: this.sourceEl.height(), // explicit width in case there was a 'bottom' value\n\t\t\t\t\topacity: this.options.opacity || '',\n\t\t\t\t\tzIndex: this.options.zIndex\n\t\t\t\t});\n\n\t\t\t// we don't want long taps or any mouse interaction causing selection/menus.\n\t\t\t// would use preventSelection(), but that prevents selectstart, causing problems.\n\t\t\tel.addClass('fc-unselectable');\n\n\t\t\tel.appendTo(this.parentEl);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\n\t// Removes the tracking element if it has already been created\n\tremoveElement: function() {\n\t\tif (this.el) {\n\t\t\tthis.el.remove();\n\t\t\tthis.el = null;\n\t\t}\n\t},\n\n\n\t// Update the CSS position of the tracking element\n\tupdatePosition: function() {\n\t\tvar sourceOffset;\n\t\tvar origin;\n\n\t\tthis.getEl(); // ensure this.el\n\n\t\t// make sure origin info was computed\n\t\tif (this.top0 === null) {\n\t\t\tsourceOffset = this.sourceEl.offset();\n\t\t\torigin = this.el.offsetParent().offset();\n\t\t\tthis.top0 = sourceOffset.top - origin.top;\n\t\t\tthis.left0 = sourceOffset.left - origin.left;\n\t\t}\n\n\t\tthis.el.css({\n\t\t\ttop: this.top0 + this.topDelta,\n\t\t\tleft: this.left0 + this.leftDelta\n\t\t});\n\t},\n\n\n\t// Gets called when the user moves the mouse\n\thandleMove: function(ev) {\n\t\tthis.topDelta = getEvY(ev) - this.y0;\n\t\tthis.leftDelta = getEvX(ev) - this.x0;\n\n\t\tif (!this.isHidden) {\n\t\t\tthis.updatePosition();\n\t\t}\n\t},\n\n\n\t// Temporarily makes the tracking element invisible. Can be called before following starts\n\thide: function() {\n\t\tif (!this.isHidden) {\n\t\t\tthis.isHidden = true;\n\t\t\tif (this.el) {\n\t\t\t\tthis.el.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Show the tracking element after it has been temporarily hidden\n\tshow: function() {\n\t\tif (this.isHidden) {\n\t\t\tthis.isHidden = false;\n\t\t\tthis.updatePosition();\n\t\t\tthis.getEl().show();\n\t\t}\n\t}\n\n});\n\n;;\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar Scroller = FC.Scroller = Class.extend({\n\n\tel: null, // the guaranteed outer element\n\tscrollEl: null, // the element with the scrollbars\n\toverflowX: null,\n\toverflowY: null,\n\n\n\tconstructor: function(options) {\n\t\toptions = options || {};\n\t\tthis.overflowX = options.overflowX || options.overflow || 'auto';\n\t\tthis.overflowY = options.overflowY || options.overflow || 'auto';\n\t},\n\n\n\trender: function() {\n\t\tthis.el = this.renderEl();\n\t\tthis.applyOverflow();\n\t},\n\n\n\trenderEl: function() {\n\t\treturn (this.scrollEl = $('<div class=\"fc-scroller\"></div>'));\n\t},\n\n\n\t// sets to natural height, unlocks overflow\n\tclear: function() {\n\t\tthis.setHeight('auto');\n\t\tthis.applyOverflow();\n\t},\n\n\n\tdestroy: function() {\n\t\tthis.el.remove();\n\t},\n\n\n\t// Overflow\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tapplyOverflow: function() {\n\t\tthis.scrollEl.css({\n\t\t\t'overflow-x': this.overflowX,\n\t\t\t'overflow-y': this.overflowY\n\t\t});\n\t},\n\n\n\t// Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n\t// Useful for preserving scrollbar widths regardless of future resizes.\n\t// Can pass in scrollbarWidths for optimization.\n\tlockOverflow: function(scrollbarWidths) {\n\t\tvar overflowX = this.overflowX;\n\t\tvar overflowY = this.overflowY;\n\n\t\tscrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n\n\t\tif (overflowX === 'auto') {\n\t\t\toverflowX = (\n\t\t\t\t\tscrollbarWidths.top || scrollbarWidths.bottom || // horizontal scrollbars?\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\n\t\t\t\t\tthis.scrollEl[0].scrollWidth - 1 > this.scrollEl[0].clientWidth\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\n\t\t\t\t) ? 'scroll' : 'hidden';\n\t\t}\n\n\t\tif (overflowY === 'auto') {\n\t\t\toverflowY = (\n\t\t\t\t\tscrollbarWidths.left || scrollbarWidths.right || // vertical scrollbars?\n\t\t\t\t\t// OR scrolling pane with massless scrollbars?\n\t\t\t\t\tthis.scrollEl[0].scrollHeight - 1 > this.scrollEl[0].clientHeight\n\t\t\t\t\t\t// subtract 1 because of IE off-by-one issue\n\t\t\t\t) ? 'scroll' : 'hidden';\n\t\t}\n\n\t\tthis.scrollEl.css({ 'overflow-x': overflowX, 'overflow-y': overflowY });\n\t},\n\n\n\t// Getters / Setters\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetHeight: function(height) {\n\t\tthis.scrollEl.height(height);\n\t},\n\n\n\tgetScrollTop: function() {\n\t\treturn this.scrollEl.scrollTop();\n\t},\n\n\n\tsetScrollTop: function(top) {\n\t\tthis.scrollEl.scrollTop(top);\n\t},\n\n\n\tgetClientWidth: function() {\n\t\treturn this.scrollEl[0].clientWidth;\n\t},\n\n\n\tgetClientHeight: function() {\n\t\treturn this.scrollEl[0].clientHeight;\n\t},\n\n\n\tgetScrollbarWidths: function() {\n\t\treturn getScrollbarWidths(this.scrollEl);\n\t}\n\n});\n\n;;\nfunction Iterator(items) {\n    this.items = items || [];\n}\n\n\n/* Calls a method on every item passing the arguments through */\nIterator.prototype.proxyCall = function(methodName) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var results = [];\n\n    this.items.forEach(function(item) {\n        results.push(item[methodName].apply(item, args));\n    });\n\n    return results;\n};\n\n;;\n\nvar Interaction = Class.extend({\n\n\tview: null,\n\tcomponent: null,\n\n\n\tconstructor: function(component) {\n\t\tthis.view = component._getView();\n\t\tthis.component = component;\n\t},\n\n\n\topt: function(name) {\n\t\treturn this.view.opt(name);\n\t},\n\n\n\tend: function() {\n\t\t// subclasses can implement\n\t}\n\n});\n\n;;\n\nvar DateClicking = Interaction.extend({\n\n\tdragListener: null,\n\n\n\t/*\n\tcomponent must implement:\n\t\t- bindDateHandlerToEl\n\t\t- getSafeHitFootprint\n\t\t- getHitEl\n\t*/\n\tconstructor: function(component) {\n\t\tInteraction.call(this, component);\n\n\t\tthis.dragListener = this.buildDragListener();\n\t},\n\n\n\tend: function() {\n\t\tthis.dragListener.endInteraction();\n\t},\n\n\n\tbindToEl: function(el) {\n\t\tvar component = this.component;\n\t\tvar dragListener = this.dragListener;\n\n\t\tcomponent.bindDateHandlerToEl(el, 'mousedown', function(ev) {\n\t\t\tif (!component.shouldIgnoreMouse()) {\n\t\t\t\tdragListener.startInteraction(ev);\n\t\t\t}\n\t\t});\n\n\t\tcomponent.bindDateHandlerToEl(el, 'touchstart', function(ev) {\n\t\t\tif (!component.shouldIgnoreTouch()) {\n\t\t\t\tdragListener.startInteraction(ev);\n\t\t\t}\n\t\t});\n\t},\n\n\n\t// Creates a listener that tracks the user's drag across day elements, for day clicking.\n\tbuildDragListener: function() {\n\t\tvar _this = this;\n\t\tvar component = this.component;\n\t\tvar dayClickHit; // null if invalid dayClick\n\n\t\tvar dragListener = new HitDragListener(component, {\n\t\t\tscroll: this.opt('dragScroll'),\n\t\t\tinteractionStart: function() {\n\t\t\t\tdayClickHit = dragListener.origHit;\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\t// if user dragged to another cell at any point, it can no longer be a dayClick\n\t\t\t\tif (!isOrig) {\n\t\t\t\t\tdayClickHit = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tdayClickHit = null;\n\t\t\t},\n\t\t\tinteractionEnd: function(ev, isCancelled) {\n\t\t\t\tvar componentFootprint;\n\n\t\t\t\tif (!isCancelled && dayClickHit) {\n\t\t\t\t\tcomponentFootprint = component.getSafeHitFootprint(dayClickHit);\n\n\t\t\t\t\tif (componentFootprint) {\n\t\t\t\t\t\t_this.view.triggerDayClick(componentFootprint, component.getHitEl(dayClickHit), ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// because dragListener won't be called with any time delay, \"dragging\" will begin immediately,\n\t\t// which will kill any touchmoving/scrolling. Prevent this.\n\t\tdragListener.shouldCancelTouchScroll = false;\n\n\t\tdragListener.scrollAlwaysKills = true;\n\n\t\treturn dragListener;\n\t}\n\n});\n\n;;\n\nvar DateSelecting = FC.DateSelecting = Interaction.extend({\n\n\tdragListener: null,\n\n\n\t/*\n\tcomponent must implement:\n\t\t- bindDateHandlerToEl\n\t\t- getSafeHitFootprint\n\t\t- renderHighlight\n\t\t- unrenderHighlight\n\t*/\n\tconstructor: function(component) {\n\t\tInteraction.call(this, component);\n\n\t\tthis.dragListener = this.buildDragListener();\n\t},\n\n\n\tend: function() {\n\t\tthis.dragListener.endInteraction();\n\t},\n\n\n\tgetDelay: function() {\n\t\tvar delay = this.opt('selectLongPressDelay');\n\n\t\tif (delay == null) {\n\t\t\tdelay = this.opt('longPressDelay'); // fallback\n\t\t}\n\n\t\treturn delay;\n\t},\n\n\n\tbindToEl: function(el) {\n\t\tvar _this = this;\n\t\tvar component = this.component;\n\t\tvar dragListener = this.dragListener;\n\n\t\tcomponent.bindDateHandlerToEl(el, 'mousedown', function(ev) {\n\t\t\tif (_this.opt('selectable') && !component.shouldIgnoreMouse()) {\n\t\t\t\tdragListener.startInteraction(ev, {\n\t\t\t\t\tdistance: _this.opt('selectMinDistance')\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tcomponent.bindDateHandlerToEl(el, 'touchstart', function(ev) {\n\t\t\tif (_this.opt('selectable') && !component.shouldIgnoreTouch()) {\n\t\t\t\tdragListener.startInteraction(ev, {\n\t\t\t\t\tdelay: _this.getDelay()\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tpreventSelection(el);\n\t},\n\n\n\t// Creates a listener that tracks the user's drag across day elements, for day selecting.\n\tbuildDragListener: function() {\n\t\tvar _this = this;\n\t\tvar component = this.component;\n\t\tvar selectionFootprint; // null if invalid selection\n\n\t\tvar dragListener = new HitDragListener(component, {\n\t\t\tscroll: this.opt('dragScroll'),\n\t\t\tinteractionStart: function() {\n\t\t\t\tselectionFootprint = null;\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\t_this.view.unselect(ev); // since we could be rendering a new selection, we want to clear any old one\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar origHitFootprint;\n\t\t\t\tvar hitFootprint;\n\n\t\t\t\tif (origHit) { // click needs to have started on a hit\n\n\t\t\t\t\torigHitFootprint = component.getSafeHitFootprint(origHit);\n\t\t\t\t\thitFootprint = component.getSafeHitFootprint(hit);\n\n\t\t\t\t\tif (origHitFootprint && hitFootprint) {\n\t\t\t\t\t\tselectionFootprint = _this.computeSelection(origHitFootprint, hitFootprint);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tselectionFootprint = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (selectionFootprint) {\n\t\t\t\t\t\tcomponent.renderSelectionFootprint(selectionFootprint);\n\t\t\t\t\t}\n\t\t\t\t\telse if (selectionFootprint === false) {\n\t\t\t\t\t\tdisableCursor();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tselectionFootprint = null;\n\t\t\t\tcomponent.unrenderSelection();\n\t\t\t},\n\t\t\thitDone: function() { // called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev, isCancelled) {\n\t\t\t\tif (!isCancelled && selectionFootprint) {\n\t\t\t\t\t// the selection will already have been rendered. just report it\n\t\t\t\t\t_this.view.reportSelection(selectionFootprint, ev);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Given the first and last date-spans of a selection, returns another date-span object.\n\t// Subclasses can override and provide additional data in the span object. Will be passed to renderSelectionFootprint().\n\t// Will return false if the selection is invalid and this should be indicated to the user.\n\t// Will return null/undefined if a selection invalid but no error should be reported.\n\tcomputeSelection: function(footprint0, footprint1) {\n\t\tvar wholeFootprint = this.computeSelectionFootprint(footprint0, footprint1);\n\n\t\tif (wholeFootprint && !this.isSelectionFootprintAllowed(wholeFootprint)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn wholeFootprint;\n\t},\n\n\n\t// Given two spans, must return the combination of the two.\n\t// TODO: do this separation of concerns (combining VS validation) for event dnd/resize too.\n\t// Assumes both footprints are non-open-ended.\n\tcomputeSelectionFootprint: function(footprint0, footprint1) {\n\t\tvar ms = [\n\t\t\tfootprint0.unzonedRange.startMs,\n\t\t\tfootprint0.unzonedRange.endMs,\n\t\t\tfootprint1.unzonedRange.startMs,\n\t\t\tfootprint1.unzonedRange.endMs\n\t\t];\n\n\t\tms.sort(compareNumbers);\n\n\t\treturn new ComponentFootprint(\n\t\t\tnew UnzonedRange(ms[0], ms[3]),\n\t\t\tfootprint0.isAllDay\n\t\t);\n\t},\n\n\n\tisSelectionFootprintAllowed: function(componentFootprint) {\n\t\treturn this.component.dateProfile.validUnzonedRange.containsRange(componentFootprint.unzonedRange) &&\n\t\t\tthis.view.calendar.isSelectionFootprintAllowed(componentFootprint);\n\t}\n\n});\n\n;;\n\nvar EventDragging = FC.EventDragging = Interaction.extend({\n\n\teventPointing: null,\n\tdragListener: null,\n\tisDragging: false,\n\n\n\t/*\n\tcomponent implements:\n\t\t- bindSegHandlerToEl\n\t\t- publiclyTrigger\n\t\t- diffDates\n\t\t- eventRangesToEventFootprints\n\t\t- isEventInstanceGroupAllowed\n\t*/\n\tconstructor: function(component, eventPointing) {\n\t\tInteraction.call(this, component);\n\n\t\tthis.eventPointing = eventPointing;\n\t},\n\n\n\tend: function() {\n\t\tif (this.dragListener) {\n\t\t\tthis.dragListener.endInteraction();\n\t\t}\n\t},\n\n\n\tgetSelectionDelay: function() {\n\t\tvar delay = this.opt('eventLongPressDelay');\n\n\t\tif (delay == null) {\n\t\t\tdelay = this.opt('longPressDelay'); // fallback\n\t\t}\n\n\t\treturn delay;\n\t},\n\n\n\tbindToEl: function(el) {\n\t\tvar component = this.component;\n\n\t\tcomponent.bindSegHandlerToEl(el, 'mousedown', this.handleMousedown.bind(this));\n\t\tcomponent.bindSegHandlerToEl(el, 'touchstart', this.handleTouchStart.bind(this));\n\t},\n\n\n\thandleMousedown: function(seg, ev) {\n\t\tif (this.component.canStartDrag(seg, ev)) {\n\t\t\tthis.buildDragListener(seg).startInteraction(ev, { distance: 5 });\n\t\t}\n\t},\n\n\n\thandleTouchStart: function(seg, ev) {\n\t\tvar component = this.component;\n\t\tvar settings = {\n\t\t\tdelay: this.view.isEventDefSelected(seg.footprint.eventDef) ? // already selected?\n\t\t\t\t0 : this.getSelectionDelay()\n\t\t};\n\n\t\tif (component.canStartDrag(seg, ev)) {\n\t\t\tthis.buildDragListener(seg).startInteraction(ev, settings);\n\t\t}\n\t\telse if (component.canStartSelection(seg, ev)) {\n\t\t\tthis.buildSelectListener(seg).startInteraction(ev, settings);\n\t\t}\n\t},\n\n\n\t// seg isn't draggable, but let's use a generic DragListener\n\t// simply for the delay, so it can be selected.\n\t// Has side effect of setting/unsetting `dragListener`\n\tbuildSelectListener: function(seg) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar eventDef = seg.footprint.eventDef;\n\t\tvar eventInstance = seg.footprint.eventInstance; // null for inverse-background events\n\n\t\tif (this.dragListener) {\n\t\t\treturn this.dragListener;\n\t\t}\n\n\t\tvar dragListener = this.dragListener = new DragListener({\n\t\t\tdragStart: function(ev) {\n\t\t\t\tif (\n\t\t\t\t\tdragListener.isTouch &&\n\t\t\t\t\t!view.isEventDefSelected(eventDef) &&\n\t\t\t\t\teventInstance\n\t\t\t\t) {\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\n\t\t\t\t\tview.selectEventInstance(eventInstance);\n\t\t\t\t}\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\t_this.dragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Builds a listener that will track user-dragging on an event segment.\n\t// Generic enough to work with any type of Grid.\n\t// Has side effect of setting/unsetting `dragListener`\n\tbuildDragListener: function(seg) {\n\t\tvar _this = this;\n\t\tvar component = this.component;\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar eventManager = calendar.eventManager;\n\t\tvar el = seg.el;\n\t\tvar eventDef = seg.footprint.eventDef;\n\t\tvar eventInstance = seg.footprint.eventInstance; // null for inverse-background events\n\t\tvar isDragging;\n\t\tvar mouseFollower; // A clone of the original element that will move with the mouse\n\t\tvar eventDefMutation;\n\n\t\tif (this.dragListener) {\n\t\t\treturn this.dragListener;\n\t\t}\n\n\t\t// Tracks mouse movement over the *view's* coordinate map. Allows dragging and dropping between subcomponents\n\t\t// of the view.\n\t\tvar dragListener = this.dragListener = new HitDragListener(view, {\n\t\t\tscroll: this.opt('dragScroll'),\n\t\t\tsubjectEl: el,\n\t\t\tsubjectCenter: true,\n\t\t\tinteractionStart: function(ev) {\n\t\t\t\tseg.component = component; // for renderDrag\n\t\t\t\tisDragging = false;\n\t\t\t\tmouseFollower = new MouseFollower(seg.el, {\n\t\t\t\t\tadditionalClass: 'fc-dragging',\n\t\t\t\t\tparentEl: view.el,\n\t\t\t\t\topacity: dragListener.isTouch ? null : _this.opt('dragOpacity'),\n\t\t\t\t\trevertDuration: _this.opt('dragRevertDuration'),\n\t\t\t\t\tzIndex: 2 // one above the .fc-view\n\t\t\t\t});\n\t\t\t\tmouseFollower.hide(); // don't show until we know this is a real drag\n\t\t\t\tmouseFollower.start(ev);\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\tif (\n\t\t\t\t\tdragListener.isTouch &&\n\t\t\t\t\t!view.isEventDefSelected(eventDef) &&\n\t\t\t\t\teventInstance\n\t\t\t\t) {\n\t\t\t\t\t// if not previously selected, will fire after a delay. then, select the event\n\t\t\t\t\tview.selectEventInstance(eventInstance);\n\t\t\t\t}\n\t\t\t\tisDragging = true;\n\n\t\t\t\t// ensure a mouseout on the manipulated event has been reported\n\t\t\t\t_this.eventPointing.handleMouseout(seg, ev);\n\n\t\t\t\t_this.segDragStart(seg, ev);\n\t\t\t\tview.hideEventsWithId(seg.footprint.eventDef.id);\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar isAllowed = true;\n\t\t\t\tvar origFootprint;\n\t\t\t\tvar footprint;\n\t\t\t\tvar mutatedEventInstanceGroup;\n\n\t\t\t\t// starting hit could be forced (DayGrid.limit)\n\t\t\t\tif (seg.hit) {\n\t\t\t\t\torigHit = seg.hit;\n\t\t\t\t}\n\n\t\t\t\t// hit might not belong to this grid, so query origin grid\n\t\t\t\torigFootprint = origHit.component.getSafeHitFootprint(origHit);\n\t\t\t\tfootprint = hit.component.getSafeHitFootprint(hit);\n\n\t\t\t\tif (origFootprint && footprint) {\n\t\t\t\t\teventDefMutation = _this.computeEventDropMutation(origFootprint, footprint, eventDef);\n\n\t\t\t\t\tif (eventDefMutation) {\n\t\t\t\t\t\tmutatedEventInstanceGroup = eventManager.buildMutatedEventInstanceGroup(\n\t\t\t\t\t\t\teventDef.id,\n\t\t\t\t\t\t\teventDefMutation\n\t\t\t\t\t\t);\n\t\t\t\t\t\tisAllowed = component.isEventInstanceGroupAllowed(mutatedEventInstanceGroup);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tisAllowed = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tisAllowed = false;\n\t\t\t\t}\n\n\t\t\t\tif (!isAllowed) {\n\t\t\t\t\teventDefMutation = null;\n\t\t\t\t\tdisableCursor();\n\t\t\t\t}\n\n\t\t\t\t// if a valid drop location, have the subclass render a visual indication\n\t\t\t\tif (\n\t\t\t\t\teventDefMutation &&\n\t\t\t\t\tview.renderDrag( // truthy if rendered something\n\t\t\t\t\t\tcomponent.eventRangesToEventFootprints(\n\t\t\t\t\t\t\tmutatedEventInstanceGroup.sliceRenderRanges(component.dateProfile.renderUnzonedRange, calendar)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tseg,\n\t\t\t\t\t\tdragListener.isTouch\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tmouseFollower.hide(); // if the subclass is already using a mock event \"helper\", hide our own\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmouseFollower.show(); // otherwise, have the helper follow the mouse (no snapping)\n\t\t\t\t}\n\n\t\t\t\tif (isOrig) {\n\t\t\t\t\t// needs to have moved hits to be a valid drop\n\t\t\t\t\teventDefMutation = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tview.unrenderDrag(seg); // unrender whatever was done in renderDrag\n\t\t\t\tmouseFollower.show(); // show in case we are moving out of all hits\n\t\t\t\teventDefMutation = null;\n\t\t\t},\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tdelete seg.component; // prevent side effects\n\n\t\t\t\t// do revert animation if hasn't changed. calls a callback when finished (whether animation or not)\n\t\t\t\tmouseFollower.stop(!eventDefMutation, function() {\n\t\t\t\t\tif (isDragging) {\n\t\t\t\t\t\tview.unrenderDrag(seg);\n\t\t\t\t\t\t_this.segDragStop(seg, ev);\n\t\t\t\t\t}\n\n\t\t\t\t\tview.showEventsWithId(seg.footprint.eventDef.id);\n\n\t\t\t\t\tif (eventDefMutation) {\n\t\t\t\t\t\t// no need to re-show original, will rerender all anyways. esp important if eventRenderWait\n\t\t\t\t\t\tview.reportEventDrop(eventInstance, eventDefMutation, el, ev);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t_this.dragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Called before event segment dragging starts\n\tsegDragStart: function(seg, ev) {\n\t\tthis.isDragging = true;\n\t\tthis.component.publiclyTrigger('eventDragStart', {\n\t\t\tcontext: seg.el[0],\n\t\t\targs: [\n\t\t\t\tseg.footprint.getEventLegacy(),\n\t\t\t\tev,\n\t\t\t\t{}, // jqui dummy\n\t\t\t\tthis.view\n\t\t\t]\n\t\t});\n\t},\n\n\n\t// Called after event segment dragging stops\n\tsegDragStop: function(seg, ev) {\n\t\tthis.isDragging = false;\n\t\tthis.component.publiclyTrigger('eventDragStop', {\n\t\t\tcontext: seg.el[0],\n\t\t\targs: [\n\t\t\t\tseg.footprint.getEventLegacy(),\n\t\t\t\tev,\n\t\t\t\t{}, // jqui dummy\n\t\t\t\tthis.view\n\t\t\t]\n\t\t});\n\t},\n\n\n\t// DOES NOT consider overlap/constraint\n\tcomputeEventDropMutation: function(startFootprint, endFootprint, eventDef) {\n\t\tvar eventDefMutation = new EventDefMutation();\n\n\t\teventDefMutation.setDateMutation(\n\t\t\tthis.computeEventDateMutation(startFootprint, endFootprint)\n\t\t);\n\n\t\treturn eventDefMutation;\n\t},\n\n\n\tcomputeEventDateMutation: function(startFootprint, endFootprint) {\n\t\tvar date0 = startFootprint.unzonedRange.getStart();\n\t\tvar date1 = endFootprint.unzonedRange.getStart();\n\t\tvar clearEnd = false;\n\t\tvar forceTimed = false;\n\t\tvar forceAllDay = false;\n\t\tvar dateDelta;\n\t\tvar dateMutation;\n\n\t\tif (startFootprint.isAllDay !== endFootprint.isAllDay) {\n\t\t\tclearEnd = true;\n\n\t\t\tif (endFootprint.isAllDay) {\n\t\t\t\tforceAllDay = true;\n\t\t\t\tdate0.stripTime();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tforceTimed = true;\n\t\t\t}\n\t\t}\n\n\t\tdateDelta = this.component.diffDates(date1, date0);\n\n\t\tdateMutation = new EventDefDateMutation();\n\t\tdateMutation.clearEnd = clearEnd;\n\t\tdateMutation.forceTimed = forceTimed;\n\t\tdateMutation.forceAllDay = forceAllDay;\n\t\tdateMutation.setDateDelta(dateDelta);\n\n\t\treturn dateMutation;\n\t}\n\n});\n\n;;\n\nvar EventResizing = FC.EventResizing = Interaction.extend({\n\n\teventPointing: null,\n\tdragListener: null,\n\tisResizing: false,\n\n\n\t/*\n\tcomponent impements:\n\t\t- bindSegHandlerToEl\n\t\t- publiclyTrigger\n\t\t- diffDates\n\t\t- eventRangesToEventFootprints\n\t\t- isEventInstanceGroupAllowed\n\t\t- getSafeHitFootprint\n\t*/\n\n\n\tconstructor: function(component, eventPointing) {\n\t\tInteraction.call(this, component);\n\n\t\tthis.eventPointing = eventPointing;\n\t},\n\n\n\tend: function() {\n\t\tif (this.dragListener) {\n\t\t\tthis.dragListener.endInteraction();\n\t\t}\n\t},\n\n\n\tbindToEl: function(el) {\n\t\tvar component = this.component;\n\n\t\tcomponent.bindSegHandlerToEl(el, 'mousedown', this.handleMouseDown.bind(this));\n\t\tcomponent.bindSegHandlerToEl(el, 'touchstart', this.handleTouchStart.bind(this));\n\t},\n\n\n\thandleMouseDown: function(seg, ev) {\n\t\tif (this.component.canStartResize(seg, ev)) {\n\t\t\tthis.buildDragListener(seg, $(ev.target).is('.fc-start-resizer'))\n\t\t\t\t.startInteraction(ev, { distance: 5 });\n\t\t}\n\t},\n\n\n\thandleTouchStart: function(seg, ev) {\n\t\tif (this.component.canStartResize(seg, ev)) {\n\t\t\tthis.buildDragListener(seg, $(ev.target).is('.fc-start-resizer'))\n\t\t\t\t.startInteraction(ev);\n\t\t}\n\t},\n\n\n\t// Creates a listener that tracks the user as they resize an event segment.\n\t// Generic enough to work with any type of Grid.\n\tbuildDragListener: function(seg, isStart) {\n\t\tvar _this = this;\n\t\tvar component = this.component;\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar eventManager = calendar.eventManager;\n\t\tvar el = seg.el;\n\t\tvar eventDef = seg.footprint.eventDef;\n\t\tvar eventInstance = seg.footprint.eventInstance;\n\t\tvar isDragging;\n\t\tvar resizeMutation; // zoned event date properties. falsy if invalid resize\n\n\t\t// Tracks mouse movement over the *grid's* coordinate map\n\t\tvar dragListener = this.dragListener = new HitDragListener(component, {\n\t\t\tscroll: this.opt('dragScroll'),\n\t\t\tsubjectEl: el,\n\t\t\tinteractionStart: function() {\n\t\t\t\tisDragging = false;\n\t\t\t},\n\t\t\tdragStart: function(ev) {\n\t\t\t\tisDragging = true;\n\n\t\t\t\t// ensure a mouseout on the manipulated event has been reported\n\t\t\t\t_this.eventPointing.handleMouseout(seg, ev);\n\n\t\t\t\t_this.segResizeStart(seg, ev);\n\t\t\t},\n\t\t\thitOver: function(hit, isOrig, origHit) {\n\t\t\t\tvar isAllowed = true;\n\t\t\t\tvar origHitFootprint = component.getSafeHitFootprint(origHit);\n\t\t\t\tvar hitFootprint = component.getSafeHitFootprint(hit);\n\t\t\t\tvar mutatedEventInstanceGroup;\n\n\t\t\t\tif (origHitFootprint && hitFootprint) {\n\t\t\t\t\tresizeMutation = isStart ?\n\t\t\t\t\t\t_this.computeEventStartResizeMutation(origHitFootprint, hitFootprint, seg.footprint) :\n\t\t\t\t\t\t_this.computeEventEndResizeMutation(origHitFootprint, hitFootprint, seg.footprint);\n\n\t\t\t\t\tif (resizeMutation) {\n\t\t\t\t\t\tmutatedEventInstanceGroup = eventManager.buildMutatedEventInstanceGroup(\n\t\t\t\t\t\t\teventDef.id,\n\t\t\t\t\t\t\tresizeMutation\n\t\t\t\t\t\t);\n\t\t\t\t\t\tisAllowed = component.isEventInstanceGroupAllowed(mutatedEventInstanceGroup);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tisAllowed = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tisAllowed = false;\n\t\t\t\t}\n\n\t\t\t\tif (!isAllowed) {\n\t\t\t\t\tresizeMutation = null;\n\t\t\t\t\tdisableCursor();\n\t\t\t\t}\n\t\t\t\telse if (resizeMutation.isEmpty()) {\n\t\t\t\t\t// no change. (FYI, event dates might have zones)\n\t\t\t\t\tresizeMutation = null;\n\t\t\t\t}\n\n\t\t\t\tif (resizeMutation) {\n\t\t\t\t\tview.hideEventsWithId(seg.footprint.eventDef.id);\n\t\t\t\t\tview.renderEventResize(\n\t\t\t\t\t\tcomponent.eventRangesToEventFootprints(\n\t\t\t\t\t\t\tmutatedEventInstanceGroup.sliceRenderRanges(component.dateProfile.renderUnzonedRange, calendar)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tseg\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() { // called before mouse moves to a different hit OR moved out of all hits\n\t\t\t\tresizeMutation = null;\n\t\t\t},\n\t\t\thitDone: function() { // resets the rendering to show the original event\n\t\t\t\tview.unrenderEventResize(seg);\n\t\t\t\tview.showEventsWithId(seg.footprint.eventDef.id);\n\t\t\t\tenableCursor();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\t\t\t\tif (isDragging) {\n\t\t\t\t\t_this.segResizeStop(seg, ev);\n\t\t\t\t}\n\n\t\t\t\tif (resizeMutation) { // valid date to resize to?\n\t\t\t\t\t// no need to re-show original, will rerender all anyways. esp important if eventRenderWait\n\t\t\t\t\tview.reportEventResize(eventInstance, resizeMutation, el, ev);\n\t\t\t\t}\n\n\t\t\t\t_this.dragListener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn dragListener;\n\t},\n\n\n\t// Called before event segment resizing starts\n\tsegResizeStart: function(seg, ev) {\n\t\tthis.isResizing = true;\n\t\tthis.component.publiclyTrigger('eventResizeStart', {\n\t\t\tcontext: seg.el[0],\n\t\t\targs: [\n\t\t\t\tseg.footprint.getEventLegacy(),\n\t\t\t\tev,\n\t\t\t\t{}, // jqui dummy\n\t\t\t\tthis.view\n\t\t\t]\n\t\t});\n\t},\n\n\n\t// Called after event segment resizing stops\n\tsegResizeStop: function(seg, ev) {\n\t\tthis.isResizing = false;\n\t\tthis.component.publiclyTrigger('eventResizeStop', {\n\t\t\tcontext: seg.el[0],\n\t\t\targs: [\n\t\t\t\tseg.footprint.getEventLegacy(),\n\t\t\t\tev,\n\t\t\t\t{}, // jqui dummy\n\t\t\t\tthis.view\n\t\t\t]\n\t\t});\n\t},\n\n\n\t// Returns new date-information for an event segment being resized from its start\n\tcomputeEventStartResizeMutation: function(startFootprint, endFootprint, origEventFootprint) {\n\t\tvar origRange = origEventFootprint.componentFootprint.unzonedRange;\n\t\tvar startDelta = this.component.diffDates(\n\t\t\tendFootprint.unzonedRange.getStart(),\n\t\t\tstartFootprint.unzonedRange.getStart()\n\t\t);\n\t\tvar dateMutation;\n\t\tvar eventDefMutation;\n\n\t\tif (origRange.getStart().add(startDelta) < origRange.getEnd()) {\n\n\t\t\tdateMutation = new EventDefDateMutation();\n\t\t\tdateMutation.setStartDelta(startDelta);\n\n\t\t\teventDefMutation = new EventDefMutation();\n\t\t\teventDefMutation.setDateMutation(dateMutation);\n\n\t\t\treturn eventDefMutation;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\n\t// Returns new date-information for an event segment being resized from its end\n\tcomputeEventEndResizeMutation: function(startFootprint, endFootprint, origEventFootprint) {\n\t\tvar origRange = origEventFootprint.componentFootprint.unzonedRange;\n\t\tvar endDelta = this.component.diffDates(\n\t\t\tendFootprint.unzonedRange.getEnd(),\n\t\t\tstartFootprint.unzonedRange.getEnd()\n\t\t);\n\t\tvar dateMutation;\n\t\tvar eventDefMutation;\n\n\t\tif (origRange.getEnd().add(endDelta) > origRange.getStart()) {\n\n\t\t\tdateMutation = new EventDefDateMutation();\n\t\t\tdateMutation.setEndDelta(endDelta);\n\n\t\t\teventDefMutation = new EventDefMutation();\n\t\t\teventDefMutation.setDateMutation(dateMutation);\n\n\t\t\treturn eventDefMutation;\n\t\t}\n\n\t\treturn false;\n\t}\n\n});\n\n;;\n\nvar ExternalDropping = FC.ExternalDropping = Interaction.extend(ListenerMixin, {\n\n\tdragListener: null,\n\tisDragging: false, // jqui-dragging an external element? boolean\n\n\n\t/*\n\tcomponent impements:\n\t\t- eventRangesToEventFootprints\n\t\t- isEventInstanceGroupAllowed\n\t\t- isExternalInstanceGroupAllowed\n\t\t- renderDrag\n\t\t- unrenderDrag\n\t*/\n\n\n\tend: function() {\n\t\tif (this.dragListener) {\n\t\t\tthis.dragListener.endInteraction();\n\t\t}\n\t},\n\n\n\tbindToDocument: function() {\n\t\tthis.listenTo($(document), {\n\t\t\tdragstart: this.handleDragStart, // jqui\n\t\t\tsortstart: this.handleDragStart // jqui\n\t\t});\n\t},\n\n\n\tunbindFromDocument: function() {\n\t\tthis.stopListeningTo($(document));\n\t},\n\n\n\t// Called when a jQuery UI drag is initiated anywhere in the DOM\n\thandleDragStart: function(ev, ui) {\n\t\tvar el;\n\t\tvar accept;\n\n\t\tif (this.opt('droppable')) { // only listen if this setting is on\n\t\t\tel = $((ui ? ui.item : null) || ev.target);\n\n\t\t\t// Test that the dragged element passes the dropAccept selector or filter function.\n\t\t\t// FYI, the default is \"*\" (matches all)\n\t\t\taccept = this.opt('dropAccept');\n\t\t\tif ($.isFunction(accept) ? accept.call(el[0], el) : el.is(accept)) {\n\t\t\t\tif (!this.isDragging) { // prevent double-listening if fired twice\n\t\t\t\t\tthis.listenToExternalDrag(el, ev, ui);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Called when a jQuery UI drag starts and it needs to be monitored for dropping\n\tlistenToExternalDrag: function(el, ev, ui) {\n\t\tvar _this = this;\n\t\tvar component = this.component;\n\t\tvar view = this.view;\n\t\tvar meta = getDraggedElMeta(el); // extra data about event drop, including possible event to create\n\t\tvar singleEventDef; // a null value signals an unsuccessful drag\n\n\t\t// listener that tracks mouse movement over date-associated pixel regions\n\t\tvar dragListener = _this.dragListener = new HitDragListener(component, {\n\t\t\tinteractionStart: function() {\n\t\t\t\t_this.isDragging = true;\n\t\t\t},\n\t\t\thitOver: function(hit) {\n\t\t\t\tvar isAllowed = true;\n\t\t\t\tvar hitFootprint = hit.component.getSafeHitFootprint(hit); // hit might not belong to this grid\n\t\t\t\tvar mutatedEventInstanceGroup;\n\n\t\t\t\tif (hitFootprint) {\n\t\t\t\t\tsingleEventDef = _this.computeExternalDrop(hitFootprint, meta);\n\n\t\t\t\t\tif (singleEventDef) {\n\t\t\t\t\t\tmutatedEventInstanceGroup = new EventInstanceGroup(\n\t\t\t\t\t\t\tsingleEventDef.buildInstances()\n\t\t\t\t\t\t);\n\t\t\t\t\t\tisAllowed = meta.eventProps ? // isEvent?\n\t\t\t\t\t\t\tcomponent.isEventInstanceGroupAllowed(mutatedEventInstanceGroup) :\n\t\t\t\t\t\t\tcomponent.isExternalInstanceGroupAllowed(mutatedEventInstanceGroup);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tisAllowed = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tisAllowed = false;\n\t\t\t\t}\n\n\t\t\t\tif (!isAllowed) {\n\t\t\t\t\tsingleEventDef = null;\n\t\t\t\t\tdisableCursor();\n\t\t\t\t}\n\n\t\t\t\tif (singleEventDef) {\n\t\t\t\t\tcomponent.renderDrag( // called without a seg parameter\n\t\t\t\t\t\tcomponent.eventRangesToEventFootprints(\n\t\t\t\t\t\t\tmutatedEventInstanceGroup.sliceRenderRanges(component.dateProfile.renderUnzonedRange, view.calendar)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\thitOut: function() {\n\t\t\t\tsingleEventDef = null; // signal unsuccessful\n\t\t\t},\n\t\t\thitDone: function() { // Called after a hitOut OR before a dragEnd\n\t\t\t\tenableCursor();\n\t\t\t\tcomponent.unrenderDrag();\n\t\t\t},\n\t\t\tinteractionEnd: function(ev) {\n\n\t\t\t\tif (singleEventDef) { // element was dropped on a valid hit\n\t\t\t\t\tview.reportExternalDrop(\n\t\t\t\t\t\tsingleEventDef,\n\t\t\t\t\t\tBoolean(meta.eventProps), // isEvent\n\t\t\t\t\t\tBoolean(meta.stick), // isSticky\n\t\t\t\t\t\tel, ev, ui\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t_this.isDragging = false;\n\t\t\t\t_this.dragListener = null;\n\t\t\t}\n\t\t});\n\n\t\tdragListener.startDrag(ev); // start listening immediately\n\t},\n\n\n\t// Given a hit to be dropped upon, and misc data associated with the jqui drag (guaranteed to be a plain object),\n\t// returns the zoned start/end dates for the event that would result from the hypothetical drop. end might be null.\n\t// Returning a null value signals an invalid drop hit.\n\t// DOES NOT consider overlap/constraint.\n\t// Assumes both footprints are non-open-ended.\n\tcomputeExternalDrop: function(componentFootprint, meta) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar start = FC.moment.utc(componentFootprint.unzonedRange.startMs).stripZone();\n\t\tvar end;\n\t\tvar eventDef;\n\n\t\tif (componentFootprint.isAllDay) {\n\t\t\t// if dropped on an all-day span, and element's metadata specified a time, set it\n\t\t\tif (meta.startTime) {\n\t\t\t\tstart.time(meta.startTime);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstart.stripTime();\n\t\t\t}\n\t\t}\n\n\t\tif (meta.duration) {\n\t\t\tend = start.clone().add(meta.duration);\n\t\t}\n\n\t\tstart = calendar.applyTimezone(start);\n\n\t\tif (end) {\n\t\t\tend = calendar.applyTimezone(end);\n\t\t}\n\n\t\teventDef = SingleEventDef.parse(\n\t\t\t$.extend({}, meta.eventProps, {\n\t\t\t\tstart: start,\n\t\t\t\tend: end\n\t\t\t}),\n\t\t\tnew EventSource(calendar)\n\t\t);\n\n\t\treturn eventDef;\n\t}\n\n});\n\n\n/* External-Dragging-Element Data\n----------------------------------------------------------------------------------------------------------------------*/\n\n// Require all HTML5 data-* attributes used by FullCalendar to have this prefix.\n// A value of '' will query attributes like data-event. A value of 'fc' will query attributes like data-fc-event.\nFC.dataAttrPrefix = '';\n\n// Given a jQuery element that might represent a dragged FullCalendar event, returns an intermediate data structure\n// to be used for Event Object creation.\n// A defined `.eventProps`, even when empty, indicates that an event should be created.\nfunction getDraggedElMeta(el) {\n\tvar prefix = FC.dataAttrPrefix;\n\tvar eventProps; // properties for creating the event, not related to date/time\n\tvar startTime; // a Duration\n\tvar duration;\n\tvar stick;\n\n\tif (prefix) { prefix += '-'; }\n\teventProps = el.data(prefix + 'event') || null;\n\n\tif (eventProps) {\n\t\tif (typeof eventProps === 'object') {\n\t\t\teventProps = $.extend({}, eventProps); // make a copy\n\t\t}\n\t\telse { // something like 1 or true. still signal event creation\n\t\t\teventProps = {};\n\t\t}\n\n\t\t// pluck special-cased date/time properties\n\t\tstartTime = eventProps.start;\n\t\tif (startTime == null) { startTime = eventProps.time; } // accept 'time' as well\n\t\tduration = eventProps.duration;\n\t\tstick = eventProps.stick;\n\t\tdelete eventProps.start;\n\t\tdelete eventProps.time;\n\t\tdelete eventProps.duration;\n\t\tdelete eventProps.stick;\n\t}\n\n\t// fallback to standalone attribute values for each of the date/time properties\n\tif (startTime == null) { startTime = el.data(prefix + 'start'); }\n\tif (startTime == null) { startTime = el.data(prefix + 'time'); } // accept 'time' as well\n\tif (duration == null) { duration = el.data(prefix + 'duration'); }\n\tif (stick == null) { stick = el.data(prefix + 'stick'); }\n\n\t// massage into correct data types\n\tstartTime = startTime != null ? moment.duration(startTime) : null;\n\tduration = duration != null ? moment.duration(duration) : null;\n\tstick = Boolean(stick);\n\n\treturn { eventProps: eventProps, startTime: startTime, duration: duration, stick: stick };\n}\n\n;;\n\nvar EventPointing = FC.EventPointing = Interaction.extend({\n\n\tmousedOverSeg: null, // the segment object the user's mouse is over. null if over nothing\n\n\n\t/*\n\tcomponent must implement:\n\t\t- publiclyTrigger\n\t*/\n\n\n\tbindToEl: function(el) {\n\t\tvar component = this.component;\n\n\t\tcomponent.bindSegHandlerToEl(el, 'click', this.handleClick.bind(this));\n\t\tcomponent.bindSegHandlerToEl(el, 'mouseenter', this.handleMouseover.bind(this));\n\t\tcomponent.bindSegHandlerToEl(el, 'mouseleave', this.handleMouseout.bind(this));\n\t},\n\n\n\thandleClick: function(seg, ev) {\n\t\tvar res = this.component.publiclyTrigger('eventClick', { // can return `false` to cancel\n\t\t\tcontext: seg.el[0],\n\t\t\targs: [ seg.footprint.getEventLegacy(), ev, this.view ]\n\t\t});\n\n\t\tif (res === false) {\n\t\t\tev.preventDefault();\n\t\t}\n\t},\n\n\n\t// Updates internal state and triggers handlers for when an event element is moused over\n\thandleMouseover: function(seg, ev) {\n\t\tif (\n\t\t\t!GlobalEmitter.get().shouldIgnoreMouse() &&\n\t\t\t!this.mousedOverSeg\n\t\t) {\n\t\t\tthis.mousedOverSeg = seg;\n\n\t\t\t// TODO: move to EventSelecting's responsibility\n\t\t\tif (this.view.isEventDefResizable(seg.footprint.eventDef)) {\n\t\t\t\tseg.el.addClass('fc-allow-mouse-resize');\n\t\t\t}\n\n\t\t\tthis.component.publiclyTrigger('eventMouseover', {\n\t\t\t\tcontext: seg.el[0],\n\t\t\t\targs: [ seg.footprint.getEventLegacy(), ev, this.view ]\n\t\t\t});\n\t\t}\n\t},\n\n\n\t// Updates internal state and triggers handlers for when an event element is moused out.\n\t// Can be given no arguments, in which case it will mouseout the segment that was previously moused over.\n\thandleMouseout: function(seg, ev) {\n\t\tif (this.mousedOverSeg) {\n\t\t\tthis.mousedOverSeg = null;\n\n\t\t\t// TODO: move to EventSelecting's responsibility\n\t\t\tif (this.view.isEventDefResizable(seg.footprint.eventDef)) {\n\t\t\t\tseg.el.removeClass('fc-allow-mouse-resize');\n\t\t\t}\n\n\t\t\tthis.component.publiclyTrigger('eventMouseout', {\n\t\t\t\tcontext: seg.el[0],\n\t\t\t\targs: [\n\t\t\t\t\tseg.footprint.getEventLegacy(),\n\t\t\t\t\tev || {}, // if given no arg, make a mock mouse event\n\t\t\t\t\tthis.view\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t},\n\n\n\tend: function() {\n\t\tif (this.mousedOverSeg) {\n\t\t\tthis.handleMouseout(this.mousedOverSeg);\n\t\t}\n\t}\n\n});\n\n;;\n\nvar StandardInteractionsMixin = FC.StandardInteractionsMixin = {\n\tdateClickingClass: DateClicking,\n\tdateSelectingClass: DateSelecting,\n\teventPointingClass: EventPointing,\n\teventDraggingClass: EventDragging,\n\teventResizingClass: EventResizing,\n\texternalDroppingClass: ExternalDropping\n};\n\n;;\n\nvar EventRenderer = FC.EventRenderer = Class.extend({\n\n\tview: null,\n\tcomponent: null,\n\tfillRenderer: null, // might remain null\n\n\tfgSegs: null,\n\tbgSegs: null,\n\n\t// derived from options\n\teventTimeFormat: null,\n\tdisplayEventTime: null,\n\tdisplayEventEnd: null,\n\n\n\tconstructor: function(component, fillRenderer) { // fillRenderer is optional\n\t\tthis.view = component._getView();\n\t\tthis.component = component;\n\t\tthis.fillRenderer = fillRenderer;\n\t},\n\n\n\topt: function(name) {\n\t\treturn this.view.opt(name);\n\t},\n\n\n\t// Updates values that rely on options and also relate to range\n\trangeUpdated: function() {\n\t\tvar displayEventTime;\n\t\tvar displayEventEnd;\n\n\t\tthis.eventTimeFormat =\n\t\t\tthis.opt('eventTimeFormat') ||\n\t\t\tthis.opt('timeFormat') || // deprecated\n\t\t\tthis.computeEventTimeFormat();\n\n\t\tdisplayEventTime = this.opt('displayEventTime');\n\t\tif (displayEventTime == null) {\n\t\t\tdisplayEventTime = this.computeDisplayEventTime(); // might be based off of range\n\t\t}\n\n\t\tdisplayEventEnd = this.opt('displayEventEnd');\n\t\tif (displayEventEnd == null) {\n\t\t\tdisplayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n\t\t}\n\n\t\tthis.displayEventTime = displayEventTime;\n\t\tthis.displayEventEnd = displayEventEnd;\n\t},\n\n\n\trender: function(eventsPayload) {\n\t\tvar dateProfile = this.component._getDateProfile();\n\t\tvar eventDefId;\n\t\tvar instanceGroup;\n\t\tvar eventRanges;\n\t\tvar bgRanges = [];\n\t\tvar fgRanges = [];\n\n\t\tfor (eventDefId in eventsPayload) {\n\t\t\tinstanceGroup = eventsPayload[eventDefId];\n\n\t\t\teventRanges = instanceGroup.sliceRenderRanges(\n\t\t\t\tdateProfile.activeUnzonedRange\n\t\t\t);\n\n\t\t\tif (instanceGroup.getEventDef().hasBgRendering()) {\n\t\t\t\tbgRanges.push.apply(bgRanges, eventRanges);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfgRanges.push.apply(fgRanges, eventRanges);\n\t\t\t}\n\t\t}\n\n\t\tthis.renderBgRanges(bgRanges);\n\t\tthis.renderFgRanges(fgRanges);\n\t},\n\n\n\tunrender: function() {\n\t\tthis.unrenderBgRanges();\n\t\tthis.unrenderFgRanges();\n\t},\n\n\n\trenderFgRanges: function(eventRanges) {\n\t\tvar eventFootprints = this.component.eventRangesToEventFootprints(eventRanges);\n\t\tvar segs = this.component.eventFootprintsToSegs(eventFootprints);\n\n\t\t// render an `.el` on each seg\n\t\t// returns a subset of the segs. segs that were actually rendered\n\t\tsegs = this.renderFgSegEls(segs);\n\n\t\tif (this.renderFgSegs(segs) !== false) { // no failure?\n\t\t\tthis.fgSegs = segs;\n\t\t}\n\t},\n\n\n\tunrenderFgRanges: function() {\n\t\tthis.unrenderFgSegs(this.fgSegs || []);\n\t\tthis.fgSegs = null;\n\t},\n\n\n\trenderBgRanges: function(eventRanges) {\n\t\tvar eventFootprints = this.component.eventRangesToEventFootprints(eventRanges);\n\t\tvar segs = this.component.eventFootprintsToSegs(eventFootprints);\n\n\t\tif (this.renderBgSegs(segs) !== false) { // no failure?\n\t\t\tthis.bgSegs = segs;\n\t\t}\n\t},\n\n\n\tunrenderBgRanges: function() {\n\t\tthis.unrenderBgSegs();\n\t\tthis.bgSegs = null;\n\t},\n\n\n\tgetSegs: function() {\n\t\treturn (this.bgSegs || []).concat(this.fgSegs || []);\n\t},\n\n\n\t// Renders foreground event segments onto the grid\n\trenderFgSegs: function(segs) {\n\t\t// subclasses must implement\n\t\t// segs already has rendered els, and has been filtered.\n\n\t\treturn false; // signal failure if not implemented\n\t},\n\n\n\t// Unrenders all currently rendered foreground segments\n\tunrenderFgSegs: function(segs) {\n\t\t// subclasses must implement\n\t},\n\n\n\trenderBgSegs: function(segs) {\n\t\tvar _this = this;\n\n\t\tif (this.fillRenderer) {\n\t\t\tthis.fillRenderer.renderSegs('bgEvent', segs, {\n\t\t\t\tgetClasses: function(seg) {\n\t\t\t\t\treturn _this.getBgClasses(seg.footprint.eventDef);\n\t\t\t\t},\n\t\t\t\tgetCss: function(seg) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'background-color': _this.getBgColor(seg.footprint.eventDef)\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tfilterEl: function(seg, el) {\n\t\t\t\t\treturn _this.filterEventRenderEl(seg.footprint, el);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn false; // signal failure if no fillRenderer\n\t\t}\n\t},\n\n\n\tunrenderBgSegs: function() {\n\t\tif (this.fillRenderer) {\n\t\t\tthis.fillRenderer.unrender('bgEvent');\n\t\t}\n\t},\n\n\n\t// Renders and assigns an `el` property for each foreground event segment.\n\t// Only returns segments that successfully rendered.\n\trenderFgSegEls: function(segs, disableResizing) {\n\t\tvar _this = this;\n\t\tvar hasEventRenderHandlers = this.view.hasPublicHandlers('eventRender');\n\t\tvar html = '';\n\t\tvar renderedSegs = [];\n\t\tvar i;\n\n\t\tif (segs.length) { // don't build an empty html string\n\n\t\t\t// build a large concatenation of event segment HTML\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tthis.beforeFgSegHtml(segs[i]);\n\t\t\t\thtml += this.fgSegHtml(segs[i], disableResizing);\n\t\t\t}\n\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\n\t\t\t// Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n\t\t\t$(html).each(function(i, node) {\n\t\t\t\tvar seg = segs[i];\n\t\t\t\tvar el = $(node);\n\n\t\t\t\tif (hasEventRenderHandlers) { // optimization\n\t\t\t\t\tel = _this.filterEventRenderEl(seg.footprint, el);\n\t\t\t\t}\n\n\t\t\t\tif (el) {\n\t\t\t\t\tel.data('fc-seg', seg); // used by handlers\n\t\t\t\t\tseg.el = el;\n\t\t\t\t\trenderedSegs.push(seg);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn renderedSegs;\n\t},\n\n\n\tbeforeFgSegHtml: function(seg) { // hack\n\t},\n\n\n\t// Generates the HTML for the default rendering of a foreground event segment. Used by renderFgSegEls()\n\tfgSegHtml: function(seg, disableResizing) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Generic utility for generating the HTML classNames for an event segment's element\n\tgetSegClasses: function(seg, isDraggable, isResizable) {\n\t\tvar classes = [\n\t\t\t'fc-event',\n\t\t\tseg.isStart ? 'fc-start' : 'fc-not-start',\n\t\t\tseg.isEnd ? 'fc-end' : 'fc-not-end'\n\t\t].concat(this.getClasses(seg.footprint.eventDef));\n\n\t\tif (isDraggable) {\n\t\t\tclasses.push('fc-draggable');\n\t\t}\n\t\tif (isResizable) {\n\t\t\tclasses.push('fc-resizable');\n\t\t}\n\n\t\t// event is currently selected? attach a className.\n\t\tif (this.view.isEventDefSelected(seg.footprint.eventDef)) {\n\t\t\tclasses.push('fc-selected');\n\t\t}\n\n\t\treturn classes;\n\t},\n\n\n\t// Given an event and the default element used for rendering, returns the element that should actually be used.\n\t// Basically runs events and elements through the eventRender hook.\n\tfilterEventRenderEl: function(eventFootprint, el) {\n\t\tvar legacy = eventFootprint.getEventLegacy();\n\n\t\tvar custom = this.view.publiclyTrigger('eventRender', {\n\t\t\tcontext: legacy,\n\t\t\targs: [ legacy, el, this.view ]\n\t\t});\n\n\t\tif (custom === false) { // means don't render at all\n\t\t\tel = null;\n\t\t}\n\t\telse if (custom && custom !== true) {\n\t\t\tel = $(custom);\n\t\t}\n\n\t\treturn el;\n\t},\n\n\n\t// Compute the text that should be displayed on an event's element.\n\t// `range` can be the Event object itself, or something range-like, with at least a `start`.\n\t// If event times are disabled, or the event has no time, will return a blank string.\n\t// If not specified, formatStr will default to the eventTimeFormat setting,\n\t// and displayEnd will default to the displayEventEnd setting.\n\tgetTimeText: function(eventFootprint, formatStr, displayEnd) {\n\t\treturn this._getTimeText(\n\t\t\teventFootprint.eventInstance.dateProfile.start,\n\t\t\teventFootprint.eventInstance.dateProfile.end,\n\t\t\teventFootprint.componentFootprint.isAllDay,\n\t\t\tformatStr,\n\t\t\tdisplayEnd\n\t\t);\n\t},\n\n\n\t_getTimeText: function(start, end, isAllDay, formatStr, displayEnd) {\n\t\tif (formatStr == null) {\n\t\t\tformatStr = this.eventTimeFormat;\n\t\t}\n\n\t\tif (displayEnd == null) {\n\t\t\tdisplayEnd = this.displayEventEnd;\n\t\t}\n\n\t\tif (this.displayEventTime && !isAllDay) {\n\t\t\tif (displayEnd && end) {\n\t\t\t\treturn this.view.formatRange(\n\t\t\t\t\t{ start: start, end: end },\n\t\t\t\t\tfalse, // allDay\n\t\t\t\t\tformatStr\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn start.format(formatStr);\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.opt('smallTimeFormat');\n\t},\n\n\n\tcomputeDisplayEventTime: function() {\n\t\treturn true;\n\t},\n\n\n\tcomputeDisplayEventEnd: function() {\n\t\treturn true;\n\t},\n\n\n\tgetBgClasses: function(eventDef) {\n\t\tvar classNames = this.getClasses(eventDef);\n\t\tclassNames.push('fc-bgevent');\n\t\treturn classNames;\n\t},\n\n\n\tgetClasses: function(eventDef) {\n\t\tvar objs = this.getStylingObjs(eventDef);\n\t\tvar i;\n\t\tvar classNames = [];\n\n\t\tfor (i = 0; i < objs.length; i++) {\n\t\t\tclassNames.push.apply( // append\n\t\t\t\tclassNames,\n\t\t\t\tobjs[i].eventClassName || objs[i].className || []\n\t\t\t);\n\t\t}\n\n\t\treturn classNames;\n\t},\n\n\n\t// Utility for generating event skin-related CSS properties\n\tgetSkinCss: function(eventDef) {\n\t\treturn {\n\t\t\t'background-color': this.getBgColor(eventDef),\n\t\t\t'border-color': this.getBorderColor(eventDef),\n\t\t\tcolor: this.getTextColor(eventDef)\n\t\t};\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetBgColor: function(eventDef) {\n\t\tvar objs = this.getStylingObjs(eventDef);\n\t\tvar i;\n\t\tvar val;\n\n\t\tfor (i = 0; i < objs.length && !val; i++) {\n\t\t\tval = objs[i].eventBackgroundColor || objs[i].eventColor ||\n\t\t\t\tobjs[i].backgroundColor || objs[i].color;\n\t\t}\n\n\t\tif (!val) {\n\t\t\tval = this.opt('eventBackgroundColor') || this.opt('eventColor');\n\t\t}\n\n\t\treturn val;\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetBorderColor: function(eventDef) {\n\t\tvar objs = this.getStylingObjs(eventDef);\n\t\tvar i;\n\t\tvar val;\n\n\t\tfor (i = 0; i < objs.length && !val; i++) {\n\t\t\tval = objs[i].eventBorderColor || objs[i].eventColor ||\n\t\t\t\tobjs[i].borderColor || objs[i].color;\n\t\t}\n\n\t\tif (!val) {\n\t\t\tval = this.opt('eventBorderColor') || this.opt('eventColor');\n\t\t}\n\n\t\treturn val;\n\t},\n\n\n\t// Queries for caller-specified color, then falls back to default\n\tgetTextColor: function(eventDef) {\n\t\tvar objs = this.getStylingObjs(eventDef);\n\t\tvar i;\n\t\tvar val;\n\n\t\tfor (i = 0; i < objs.length && !val; i++) {\n\t\t\tval = objs[i].eventTextColor ||\n\t\t\t\tobjs[i].textColor;\n\t\t}\n\n\t\tif (!val) {\n\t\t\tval = this.opt('eventTextColor');\n\t\t}\n\n\t\treturn val;\n\t},\n\n\n\tgetStylingObjs: function(eventDef) {\n\t\tvar objs = this.getFallbackStylingObjs(eventDef);\n\t\tobjs.unshift(eventDef);\n\t\treturn objs;\n\t},\n\n\n\tgetFallbackStylingObjs: function(eventDef) {\n\t\treturn [ eventDef.source ];\n\t},\n\n\n\tsortEventSegs: function(segs) {\n\t\tsegs.sort(proxy(this, 'compareEventSegs'));\n\t},\n\n\n\t// A cmp function for determining which segments should take visual priority\n\tcompareEventSegs: function(seg1, seg2) {\n\t\tvar f1 = seg1.footprint.componentFootprint;\n\t\tvar r1 = f1.unzonedRange;\n\t\tvar f2 = seg2.footprint.componentFootprint;\n\t\tvar r2 = f2.unzonedRange;\n\n\t\treturn r1.startMs - r2.startMs || // earlier events go first\n\t\t\t(r2.endMs - r2.startMs) - (r1.endMs - r1.startMs) || // tie? longer events go first\n\t\t\tf2.isAllDay - f1.isAllDay || // tie? put all-day events first (booleans cast to 0/1)\n\t\t\tcompareByFieldSpecs(\n\t\t\t\tseg1.footprint.eventDef,\n\t\t\t\tseg2.footprint.eventDef,\n\t\t\t\tthis.view.eventOrderSpecs\n\t\t\t);\n\t}\n\n});\n\n;;\n\nvar BusinessHourRenderer = FC.BusinessHourRenderer = Class.extend({\n\n\tcomponent: null,\n\tfillRenderer: null,\n\tsegs: null,\n\n\n\t/*\n\tcomponent implements:\n\t\t- eventRangesToEventFootprints\n\t\t- eventFootprintsToSegs\n\t*/\n\tconstructor: function(component, fillRenderer) {\n\t\tthis.component = component;\n\t\tthis.fillRenderer = fillRenderer;\n\t},\n\n\n\trender: function(businessHourGenerator) {\n\t\tvar component = this.component;\n\t\tvar unzonedRange = component._getDateProfile().activeUnzonedRange;\n\n\t\tvar eventInstanceGroup = businessHourGenerator.buildEventInstanceGroup(\n\t\t\tcomponent.hasAllDayBusinessHours,\n\t\t\tunzonedRange\n\t\t);\n\n\t\tvar eventFootprints = eventInstanceGroup ?\n\t\t\tcomponent.eventRangesToEventFootprints(\n\t\t\t\teventInstanceGroup.sliceRenderRanges(unzonedRange)\n\t\t\t) :\n\t\t\t[];\n\n\t\tthis.renderEventFootprints(eventFootprints);\n\t},\n\n\n\trenderEventFootprints: function(eventFootprints) {\n\t\tvar segs = this.component.eventFootprintsToSegs(eventFootprints);\n\n\t\tthis.renderSegs(segs);\n\t\tthis.segs = segs;\n\t},\n\n\n\trenderSegs: function(segs) {\n\t\tif (this.fillRenderer) {\n\t\t\tthis.fillRenderer.renderSegs('businessHours', segs, {\n\t\t\t\tgetClasses: function(seg) {\n\t\t\t\t\treturn [ 'fc-nonbusiness', 'fc-bgevent' ];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\n\tunrender: function() {\n\t\tif (this.fillRenderer) {\n\t\t\tthis.fillRenderer.unrender('businessHours');\n\t\t}\n\n\t\tthis.segs = null;\n\t},\n\n\n\tgetSegs: function() {\n\t\treturn this.segs || [];\n\t}\n\n});\n\n;;\n\nvar FillRenderer = FC.FillRenderer = Class.extend({ // use for highlight, background events, business hours\n\n\tfillSegTag: 'div',\n\tcomponent: null,\n\telsByFill: null, // a hash of jQuery element sets used for rendering each fill. Keyed by fill name.\n\n\n\tconstructor: function(component) {\n\t\tthis.component = component;\n\t\tthis.elsByFill = {};\n\t},\n\n\n\trenderFootprint: function(type, componentFootprint, props) {\n\t\tthis.renderSegs(\n\t\t\ttype,\n\t\t\tthis.component.componentFootprintToSegs(componentFootprint),\n\t\t\tprops\n\t\t);\n\t},\n\n\n\trenderSegs: function(type, segs, props) {\n\t\tvar els;\n\n\t\tsegs = this.buildSegEls(type, segs, props); // assignes `.el` to each seg. returns successfully rendered segs\n\t\tels = this.attachSegEls(type, segs);\n\n\t\tif (els) {\n\t\t\tthis.reportEls(type, els);\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Unrenders a specific type of fill that is currently rendered on the grid\n\tunrender: function(type) {\n\t\tvar el = this.elsByFill[type];\n\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t\tdelete this.elsByFill[type];\n\t\t}\n\t},\n\n\n\t// Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n\t// Only returns segments that successfully rendered.\n\tbuildSegEls: function(type, segs, props) {\n\t\tvar _this = this;\n\t\tvar html = '';\n\t\tvar renderedSegs = [];\n\t\tvar i;\n\n\t\tif (segs.length) {\n\n\t\t\t// build a large concatenation of segment HTML\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\thtml += this.buildSegHtml(type, segs[i], props);\n\t\t\t}\n\n\t\t\t// Grab individual elements from the combined HTML string. Use each as the default rendering.\n\t\t\t// Then, compute the 'el' for each segment.\n\t\t\t$(html).each(function(i, node) {\n\t\t\t\tvar seg = segs[i];\n\t\t\t\tvar el = $(node);\n\n\t\t\t\t// allow custom filter methods per-type\n\t\t\t\tif (props.filterEl) {\n\t\t\t\t\tel = props.filterEl(seg, el);\n\t\t\t\t}\n\n\t\t\t\tif (el) { // custom filters did not cancel the render\n\t\t\t\t\tel = $(el); // allow custom filter to return raw DOM node\n\n\t\t\t\t\t// correct element type? (would be bad if a non-TD were inserted into a table for example)\n\t\t\t\t\tif (el.is(_this.fillSegTag)) {\n\t\t\t\t\t\tseg.el = el;\n\t\t\t\t\t\trenderedSegs.push(seg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn renderedSegs;\n\t},\n\n\n\t// Builds the HTML needed for one fill segment. Generic enough to work with different types.\n\tbuildSegHtml: function(type, seg, props) {\n\t\t// custom hooks per-type\n\t\tvar classes = props.getClasses ? props.getClasses(seg) : [];\n\t\tvar css = cssToStr(props.getCss ? props.getCss(seg) : {});\n\n\t\treturn '<' + this.fillSegTag +\n\t\t\t(classes.length ? ' class=\"' + classes.join(' ') + '\"' : '') +\n\t\t\t(css ? ' style=\"' + css + '\"' : '') +\n\t\t\t' />';\n\t},\n\n\n\t// Should return wrapping DOM structure\n\tattachSegEls: function(type, segs) {\n\t\t// subclasses must implement\n\t},\n\n\n\treportEls: function(type, nodes) {\n\t\tif (this.elsByFill[type]) {\n\t\t\tthis.elsByFill[type] = this.elsByFill[type].add(nodes);\n\t\t}\n\t\telse {\n\t\t\tthis.elsByFill[type] = $(nodes);\n\t\t}\n\t}\n\n});\n\n;;\n\nvar HelperRenderer = FC.HelperRenderer = Class.extend({\n\n\tview: null,\n\tcomponent: null,\n\teventRenderer: null,\n\thelperEls: null,\n\n\n\tconstructor: function(component, eventRenderer) {\n\t\tthis.view = component._getView();\n\t\tthis.component = component;\n\t\tthis.eventRenderer = eventRenderer;\n\t},\n\n\n\trenderComponentFootprint: function(componentFootprint) {\n\t\tthis.renderEventFootprints([\n\t\t\tthis.fabricateEventFootprint(componentFootprint)\n\t\t]);\n\t},\n\n\n\trenderEventDraggingFootprints: function(eventFootprints, sourceSeg, isTouch) {\n\t\tthis.renderEventFootprints(\n\t\t\teventFootprints,\n\t\t\tsourceSeg,\n\t\t\t'fc-dragging',\n\t\t\tisTouch ? null : this.view.opt('dragOpacity')\n\t\t);\n\t},\n\n\n\trenderEventResizingFootprints: function(eventFootprints, sourceSeg, isTouch) {\n\t\tthis.renderEventFootprints(\n\t\t\teventFootprints,\n\t\t\tsourceSeg,\n\t\t\t'fc-resizing'\n\t\t);\n\t},\n\n\n\trenderEventFootprints: function(eventFootprints, sourceSeg, extraClassNames, opacity) {\n\t\tvar segs = this.component.eventFootprintsToSegs(eventFootprints);\n\t\tvar classNames = 'fc-helper ' + (extraClassNames || '');\n\t\tvar i;\n\n\t\t// assigns each seg's el and returns a subset of segs that were rendered\n\t\tsegs = this.eventRenderer.renderFgSegEls(segs);\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegs[i].el.addClass(classNames);\n\t\t}\n\n\t\tif (opacity != null) {\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tsegs[i].el.css('opacity', opacity);\n\t\t\t}\n\t\t}\n\n\t\tthis.helperEls = this.renderSegs(segs, sourceSeg);\n\t},\n\n\n\t/*\n\tMust return all mock event elements\n\t*/\n\trenderSegs: function(segs, sourceSeg) {\n\t\t// Subclasses must implement\n\t},\n\n\n\tunrender: function() {\n\t\tif (this.helperEls) {\n\t\t\tthis.helperEls.remove();\n\t\t\tthis.helperEls = null;\n\t\t}\n\t},\n\n\n\tfabricateEventFootprint: function(componentFootprint) {\n\t\tvar calendar = this.view.calendar;\n\t\tvar eventDateProfile = calendar.footprintToDateProfile(componentFootprint);\n\t\tvar dummyEvent = new SingleEventDef(new EventSource(calendar));\n\t\tvar dummyInstance;\n\n\t\tdummyEvent.dateProfile = eventDateProfile;\n\t\tdummyInstance = dummyEvent.buildInstance();\n\n\t\treturn new EventFootprint(componentFootprint, dummyEvent, dummyInstance);\n\t}\n\n});\n\n;;\n\nvar Component = Model.extend({\n\n\tel: null,\n\n\n\tsetElement: function(el) {\n\t\tthis.el = el;\n\t\tthis.bindGlobalHandlers();\n\t\tthis.renderSkeleton();\n\t\tthis.set('isInDom', true);\n\t},\n\n\n\tremoveElement: function() {\n\t\tthis.unset('isInDom');\n\t\tthis.unrenderSkeleton();\n\t\tthis.unbindGlobalHandlers();\n\n\t\tthis.el.remove();\n\t\t// NOTE: don't null-out this.el in case the View was destroyed within an API callback.\n\t\t// We don't null-out the View's other jQuery element references upon destroy,\n\t\t//  so we shouldn't kill this.el either.\n\t},\n\n\n\tbindGlobalHandlers: function() {\n\t},\n\n\n\tunbindGlobalHandlers: function() {\n\t},\n\n\n\t/*\n\tNOTE: Can't have a `render` method. Read the deprecation notice in View::executeDateRender\n\t*/\n\n\n\t// Renders the basic structure of the view before any content is rendered\n\trenderSkeleton: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Unrenders the basic structure of the view\n\tunrenderSkeleton: function() {\n\t\t// subclasses should implement\n\t}\n\n});\n\n;;\n\nvar DateComponent = FC.DateComponent = Component.extend({\n\n\tuid: null,\n\tchildrenByUid: null,\n\tisRTL: false, // frequently accessed options\n\tnextDayThreshold: null, // \"\n\tdateProfile: null, // hack\n\n\teventRendererClass: null,\n\thelperRendererClass: null,\n\tbusinessHourRendererClass: null,\n\tfillRendererClass: null,\n\n\teventRenderer: null,\n\thelperRenderer: null,\n\tbusinessHourRenderer: null,\n\tfillRenderer: null,\n\n\thitsNeededDepth: 0, // necessary because multiple callers might need the same hits\n\n\thasAllDayBusinessHours: false, // TODO: unify with largeUnit and isTimeScale?\n\n\tisDatesRendered: false,\n\n\n\tconstructor: function() {\n\t\tComponent.call(this);\n\n\t\tthis.uid = String(DateComponent.guid++);\n\t\tthis.childrenByUid = {};\n\n\t\tthis.nextDayThreshold = moment.duration(this.opt('nextDayThreshold'));\n\t\tthis.isRTL = this.opt('isRTL');\n\n\t\tif (this.fillRendererClass) {\n\t\t\tthis.fillRenderer = new this.fillRendererClass(this);\n\t\t}\n\n\t\tif (this.eventRendererClass) { // fillRenderer is optional -----v\n\t\t\tthis.eventRenderer = new this.eventRendererClass(this, this.fillRenderer);\n\t\t}\n\n\t\tif (this.helperRendererClass && this.eventRenderer) {\n\t\t\tthis.helperRenderer = new this.helperRendererClass(this, this.eventRenderer);\n\t\t}\n\n\t\tif (this.businessHourRendererClass && this.fillRenderer) {\n\t\t\tthis.businessHourRenderer = new this.businessHourRendererClass(this, this.fillRenderer);\n\t\t}\n\t},\n\n\n\taddChild: function(child) {\n\t\tif (!this.childrenByUid[child.uid]) {\n\t\t\tthis.childrenByUid[child.uid] = child;\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\n\tremoveChild: function(child) {\n\t\tif (this.childrenByUid[child.uid]) {\n\t\t\tdelete this.childrenByUid[child.uid];\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\n\t// TODO: only do if isInDom?\n\t// TODO: make part of Component, along with children/batch-render system?\n\tupdateSize: function(totalHeight, isAuto, isResize) {\n\t\tthis.callChildren('updateSize', arguments);\n\t},\n\n\n\t// Options\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\topt: function(name) {\n\t\treturn this._getView().opt(name); // default implementation\n\t},\n\n\n\tpubliclyTrigger: function(/**/) {\n\t\tvar calendar = this._getCalendar();\n\n\t\treturn calendar.publiclyTrigger.apply(calendar, arguments);\n\t},\n\n\n\thasPublicHandlers: function(/**/) {\n\t\tvar calendar = this._getCalendar();\n\n\t\treturn calendar.hasPublicHandlers.apply(calendar, arguments);\n\t},\n\n\n\t// Date\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\texecuteDateRender: function(dateProfile) {\n\t\tthis.dateProfile = dateProfile; // for rendering\n\t\tthis.renderDates(dateProfile);\n\t\tthis.isDatesRendered = true;\n\t\tthis.callChildren('executeDateRender', arguments);\n\t},\n\n\n\texecuteDateUnrender: function() { // wrapper\n\t\tthis.callChildren('executeDateUnrender', arguments);\n\t\tthis.dateProfile = null;\n\t\tthis.unrenderDates();\n\t\tthis.isDatesRendered = false;\n\t},\n\n\n\t// date-cell content only\n\trenderDates: function(dateProfile) {\n\t\t// subclasses should implement\n\t},\n\n\n\t// date-cell content only\n\tunrenderDates: function() {\n\t\t// subclasses should override\n\t},\n\n\n\t// Now-Indicator\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Returns a string unit, like 'second' or 'minute' that defined how often the current time indicator\n\t// should be refreshed. If something falsy is returned, no time indicator is rendered at all.\n\tgetNowIndicatorUnit: function() {\n\t\t// subclasses should implement\n\t},\n\n\n\t// Renders a current time indicator at the given datetime\n\trenderNowIndicator: function(date) {\n\t\tthis.callChildren('renderNowIndicator', arguments);\n\t},\n\n\n\t// Undoes the rendering actions from renderNowIndicator\n\tunrenderNowIndicator: function() {\n\t\tthis.callChildren('unrenderNowIndicator', arguments);\n\t},\n\n\n\t// Business Hours\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\trenderBusinessHours: function(businessHourGenerator) {\n\t\tif (this.businessHourRenderer) {\n\t\t\tthis.businessHourRenderer.render(businessHourGenerator);\n\t\t}\n\n\t\tthis.callChildren('renderBusinessHours', arguments);\n\t},\n\n\n\t// Unrenders previously-rendered business-hours\n\tunrenderBusinessHours: function() {\n\t\tthis.callChildren('unrenderBusinessHours', arguments);\n\n\t\tif (this.businessHourRenderer) {\n\t\t\tthis.businessHourRenderer.unrender();\n\t\t}\n\t},\n\n\n\t// Event Displaying\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\texecuteEventRender: function(eventsPayload) {\n\t\tif (this.eventRenderer) {\n\t\t\tthis.eventRenderer.rangeUpdated(); // poorly named now\n\t\t\tthis.eventRenderer.render(eventsPayload);\n\t\t}\n\t\telse if (this.renderEvents) { // legacy\n\t\t\tthis.renderEvents(convertEventsPayloadToLegacyArray(eventsPayload));\n\t\t}\n\n\t\tthis.callChildren('executeEventRender', arguments);\n\t},\n\n\n\texecuteEventUnrender: function() {\n\t\tthis.callChildren('executeEventUnrender', arguments);\n\n\t\tif (this.eventRenderer) {\n\t\t\tthis.eventRenderer.unrender();\n\t\t}\n\t\telse if (this.destroyEvents) { // legacy\n\t\t\tthis.destroyEvents();\n\t\t}\n\t},\n\n\n\tgetBusinessHourSegs: function() { // recursive\n\t\tvar segs = this.getOwnBusinessHourSegs();\n\n\t\tthis.iterChildren(function(child) {\n\t\t\tsegs.push.apply(segs, child.getBusinessHourSegs());\n\t\t});\n\n\t\treturn segs;\n\t},\n\n\n\tgetOwnBusinessHourSegs: function() {\n\t\tif (this.businessHourRenderer) {\n\t\t\treturn this.businessHourRenderer.getSegs();\n\t\t}\n\n\t\treturn [];\n\t},\n\n\n\tgetEventSegs: function() { // recursive\n\t\tvar segs = this.getOwnEventSegs();\n\n\t\tthis.iterChildren(function(child) {\n\t\t\tsegs.push.apply(segs, child.getEventSegs());\n\t\t});\n\n\t\treturn segs;\n\t},\n\n\n\tgetOwnEventSegs: function() { // just for itself\n\t\tif (this.eventRenderer) {\n\t\t\treturn this.eventRenderer.getSegs();\n\t\t}\n\n\t\treturn [];\n\t},\n\n\n\t// Event Rendering Triggering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\ttriggerAfterEventsRendered: function() {\n\t\tthis.triggerAfterEventSegsRendered(\n\t\t\tthis.getEventSegs()\n\t\t);\n\n\t\tthis.publiclyTrigger('eventAfterAllRender', {\n\t\t\tcontext: this,\n\t\t\targs: [ this ]\n\t\t});\n\t},\n\n\n\ttriggerAfterEventSegsRendered: function(segs) {\n\t\tvar _this = this;\n\n\t\t// an optimization, because getEventLegacy is expensive\n\t\tif (this.hasPublicHandlers('eventAfterRender')) {\n\t\t\tsegs.forEach(function(seg) {\n\t\t\t\tvar legacy;\n\n\t\t\t\tif (seg.el) { // necessary?\n\t\t\t\t\tlegacy = seg.footprint.getEventLegacy();\n\n\t\t\t\t\t_this.publiclyTrigger('eventAfterRender', {\n\t\t\t\t\t\tcontext: legacy,\n\t\t\t\t\t\targs: [ legacy, seg.el, _this ]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\n\ttriggerBeforeEventsDestroyed: function() {\n\t\tthis.triggerBeforeEventSegsDestroyed(\n\t\t\tthis.getEventSegs()\n\t\t);\n\t},\n\n\n\ttriggerBeforeEventSegsDestroyed: function(segs) {\n\t\tvar _this = this;\n\n\t\tif (this.hasPublicHandlers('eventDestroy')) {\n\t\t\tsegs.forEach(function(seg) {\n\t\t\t\tvar legacy;\n\n\t\t\t\tif (seg.el) { // necessary?\n\t\t\t\t\tlegacy = seg.footprint.getEventLegacy();\n\n\t\t\t\t\t_this.publiclyTrigger('eventDestroy', {\n\t\t\t\t\t\tcontext: legacy,\n\t\t\t\t\t\targs: [ legacy, seg.el, _this ]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\n\t// Event Rendering Utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Hides all rendered event segments linked to the given event\n\t// RECURSIVE with subcomponents\n\tshowEventsWithId: function(eventDefId) {\n\n\t\tthis.getEventSegs().forEach(function(seg) {\n\t\t\tif (\n\t\t\t\tseg.footprint.eventDef.id === eventDefId &&\n\t\t\t\tseg.el // necessary?\n\t\t\t) {\n\t\t\t\tseg.el.css('visibility', '');\n\t\t\t}\n\t\t});\n\n\t\tthis.callChildren('showEventsWithId', arguments);\n\t},\n\n\n\t// Shows all rendered event segments linked to the given event\n\t// RECURSIVE with subcomponents\n\thideEventsWithId: function(eventDefId) {\n\n\t\tthis.getEventSegs().forEach(function(seg) {\n\t\t\tif (\n\t\t\t\tseg.footprint.eventDef.id === eventDefId &&\n\t\t\t\tseg.el // necessary?\n\t\t\t) {\n\t\t\t\tseg.el.css('visibility', 'hidden');\n\t\t\t}\n\t\t});\n\n\t\tthis.callChildren('hideEventsWithId', arguments);\n\t},\n\n\n\t// Drag-n-Drop Rendering (for both events and external elements)\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Renders a visual indication of a event or external-element drag over the given drop zone.\n\t// If an external-element, seg will be `null`.\n\t// Must return elements used for any mock events.\n\trenderDrag: function(eventFootprints, seg, isTouch) {\n\t\tvar renderedHelper = false;\n\n\t\tthis.iterChildren(function(child) {\n\t\t\tif (child.renderDrag(eventFootprints, seg, isTouch)) {\n\t\t\t\trenderedHelper = true;\n\t\t\t}\n\t\t});\n\n\t\treturn renderedHelper;\n\t},\n\n\n\t// Unrenders a visual indication of an event or external-element being dragged.\n\tunrenderDrag: function() {\n\t\tthis.callChildren('unrenderDrag', arguments);\n\t},\n\n\n\t// Event Resizing\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Renders a visual indication of an event being resized.\n\trenderEventResize: function(eventFootprints, seg, isTouch) {\n\t\tthis.callChildren('renderEventResize', arguments);\n\t},\n\n\n\t// Unrenders a visual indication of an event being resized.\n\tunrenderEventResize: function() {\n\t\tthis.callChildren('unrenderEventResize', arguments);\n\t},\n\n\n\t// Selection\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Renders a visual indication of the selection\n\t// TODO: rename to `renderSelection` after legacy is gone\n\trenderSelectionFootprint: function(componentFootprint) {\n\t\tthis.renderHighlight(componentFootprint);\n\n\t\tthis.callChildren('renderSelectionFootprint', arguments);\n\t},\n\n\n\t// Unrenders a visual indication of selection\n\tunrenderSelection: function() {\n\t\tthis.unrenderHighlight();\n\n\t\tthis.callChildren('unrenderSelection', arguments);\n\t},\n\n\n\t// Highlight\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Renders an emphasis on the given date range. Given a span (unzoned start/end and other misc data)\n\trenderHighlight: function(componentFootprint) {\n\t\tif (this.fillRenderer) {\n\t\t\tthis.fillRenderer.renderFootprint(\n\t\t\t\t'highlight',\n\t\t\t\tcomponentFootprint,\n\t\t\t\t{\n\t\t\t\t\tgetClasses: function() {\n\t\t\t\t\t\treturn [ 'fc-highlight' ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis.callChildren('renderHighlight', arguments);\n\t},\n\n\n\t// Unrenders the emphasis on a date range\n\tunrenderHighlight: function() {\n\t\tif (this.fillRenderer) {\n\t\t\tthis.fillRenderer.unrender('highlight');\n\t\t}\n\n\t\tthis.callChildren('unrenderHighlight', arguments);\n\t},\n\n\n\t// Hit Areas\n\t// ---------------------------------------------------------------------------------------------------------------\n\t// just because all DateComponents support this interface\n\t// doesn't mean they need to have their own internal coord system. they can defer to sub-components.\n\n\n\thitsNeeded: function() {\n\t\tif (!(this.hitsNeededDepth++)) {\n\t\t\tthis.prepareHits();\n\t\t}\n\n\t\tthis.callChildren('hitsNeeded', arguments);\n\t},\n\n\n\thitsNotNeeded: function() {\n\t\tif (this.hitsNeededDepth && !(--this.hitsNeededDepth)) {\n\t\t\tthis.releaseHits();\n\t\t}\n\n\t\tthis.callChildren('hitsNotNeeded', arguments);\n\t},\n\n\n\tprepareHits: function() {\n\t\t// subclasses can implement\n\t},\n\n\n\treleaseHits: function() {\n\t\t// subclasses can implement\n\t},\n\n\n\t// Given coordinates from the topleft of the document, return data about the date-related area underneath.\n\t// Can return an object with arbitrary properties (although top/right/left/bottom are encouraged).\n\t// Must have a `grid` property, a reference to this current grid. TODO: avoid this\n\t// The returned object will be processed by getHitFootprint and getHitEl.\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tvar childrenByUid = this.childrenByUid;\n\t\tvar uid;\n\t\tvar hit;\n\n\t\tfor (uid in childrenByUid) {\n\t\t\thit = childrenByUid[uid].queryHit(leftOffset, topOffset);\n\n\t\t\tif (hit) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn hit;\n\t},\n\n\n\tgetSafeHitFootprint: function(hit) {\n\t\tvar footprint = this.getHitFootprint(hit);\n\n\t\tif (!this.dateProfile.activeUnzonedRange.containsRange(footprint.unzonedRange)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn footprint;\n\t},\n\n\n\tgetHitFootprint: function(hit) {\n\t},\n\n\n\t// Given position-level information about a date-related area within the grid,\n\t// should return a jQuery element that best represents it. passed to dayClick callback.\n\tgetHitEl: function(hit) {\n\t},\n\n\n\t/* Converting eventRange -> eventFootprint\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\teventRangesToEventFootprints: function(eventRanges) {\n\t\tvar eventFootprints = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < eventRanges.length; i++) {\n\t\t\teventFootprints.push.apply( // append\n\t\t\t\teventFootprints,\n\t\t\t\tthis.eventRangeToEventFootprints(eventRanges[i])\n\t\t\t);\n\t\t}\n\n\t\treturn eventFootprints;\n\t},\n\n\n\teventRangeToEventFootprints: function(eventRange) {\n\t\treturn [ eventRangeToEventFootprint(eventRange) ];\n\t},\n\n\n\t/* Converting componentFootprint/eventFootprint -> segs\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\teventFootprintsToSegs: function(eventFootprints) {\n\t\tvar segs = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\tsegs.push.apply(segs,\n\t\t\t\tthis.eventFootprintToSegs(eventFootprints[i])\n\t\t\t);\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Given an event's span (unzoned start/end and other misc data), and the event itself,\n\t// slices into segments and attaches event-derived properties to them.\n\t// eventSpan - { start, end, isStart, isEnd, otherthings... }\n\teventFootprintToSegs: function(eventFootprint) {\n\t\tvar unzonedRange = eventFootprint.componentFootprint.unzonedRange;\n\t\tvar segs;\n\t\tvar i, seg;\n\n\t\tsegs = this.componentFootprintToSegs(eventFootprint.componentFootprint);\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\n\t\t\tif (!unzonedRange.isStart) {\n\t\t\t\tseg.isStart = false;\n\t\t\t}\n\t\t\tif (!unzonedRange.isEnd) {\n\t\t\t\tseg.isEnd = false;\n\t\t\t}\n\n\t\t\tseg.footprint = eventFootprint;\n\t\t\t// TODO: rename to seg.eventFootprint\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\tcomponentFootprintToSegs: function(componentFootprint) {\n\t\treturn [];\n\t},\n\n\n\t// Utils\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\tcallChildren: function(methodName, args) {\n\t\tthis.iterChildren(function(child) {\n\t\t\tchild[methodName].apply(child, args);\n\t\t});\n\t},\n\n\n\titerChildren: function(func) {\n\t\tvar childrenByUid = this.childrenByUid;\n\t\tvar uid;\n\n\t\tfor (uid in childrenByUid) {\n\t\t\tfunc(childrenByUid[uid]);\n\t\t}\n\t},\n\n\n\t_getCalendar: function() { // TODO: strip out. move to generic parent.\n\t\treturn this.calendar || this.view.calendar;\n\t},\n\n\n\t_getView: function() { // TODO: strip out. move to generic parent.\n\t\treturn this.view;\n\t},\n\n\n\t_getDateProfile: function() {\n\t\treturn this._getView().get('dateProfile');\n\t}\n\n});\n\n\nDateComponent.guid = 0; // TODO: better system for this?\n\n\n// legacy\n\nfunction convertEventsPayloadToLegacyArray(eventsPayload) {\n\tvar eventDefId;\n\tvar eventInstances;\n\tvar legacyEvents = [];\n\tvar i;\n\n\tfor (eventDefId in eventsPayload) {\n\t\teventInstances = eventsPayload[eventDefId].eventInstances;\n\n\t\tfor (i = 0; i < eventInstances.length; i++) {\n\t\t\tlegacyEvents.push(\n\t\t\t\teventInstances[i].toLegacy()\n\t\t\t);\n\t\t}\n\t}\n\n\treturn legacyEvents;\n}\n\n;;\n\nDateComponent.mixin({\n\n\t// Generates HTML for an anchor to another view into the calendar.\n\t// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n\t// `gotoOptions` can either be a moment input, or an object with the form:\n\t// { date, type, forceOff }\n\t// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n\t// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\n\tbuildGotoAnchorHtml: function(gotoOptions, attrs, innerHtml) {\n\t\tvar date, type, forceOff;\n\t\tvar finalOptions;\n\n\t\tif ($.isPlainObject(gotoOptions)) {\n\t\t\tdate = gotoOptions.date;\n\t\t\ttype = gotoOptions.type;\n\t\t\tforceOff = gotoOptions.forceOff;\n\t\t}\n\t\telse {\n\t\t\tdate = gotoOptions; // a single moment input\n\t\t}\n\t\tdate = FC.moment(date); // if a string, parse it\n\n\t\tfinalOptions = { // for serialization into the link\n\t\t\tdate: date.format('YYYY-MM-DD'),\n\t\t\ttype: type || 'day'\n\t\t};\n\n\t\tif (typeof attrs === 'string') {\n\t\t\tinnerHtml = attrs;\n\t\t\tattrs = null;\n\t\t}\n\n\t\tattrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n\t\tinnerHtml = innerHtml || '';\n\n\t\tif (!forceOff && this.opt('navLinks')) {\n\t\t\treturn '<a' + attrs +\n\t\t\t\t' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n\t\t\t\tinnerHtml +\n\t\t\t\t'</a>';\n\t\t}\n\t\telse {\n\t\t\treturn '<span' + attrs + '>' +\n\t\t\t\tinnerHtml +\n\t\t\t\t'</span>';\n\t\t}\n\t},\n\n\n\tgetAllDayHtml: function() {\n\t\treturn this.opt('allDayHtml') || htmlEscape(this.opt('allDayText'));\n\t},\n\n\n\t// Computes HTML classNames for a single-day element\n\tgetDayClasses: function(date, noThemeHighlight) {\n\t\tvar view = this._getView();\n\t\tvar classes = [];\n\t\tvar today;\n\n\t\tif (!this.dateProfile.activeUnzonedRange.containsDate(date)) {\n\t\t\tclasses.push('fc-disabled-day'); // TODO: jQuery UI theme?\n\t\t}\n\t\telse {\n\t\t\tclasses.push('fc-' + dayIDs[date.day()]);\n\n\t\t\tif (view.isDateInOtherMonth(date, this.dateProfile)) { // TODO: use DateComponent subclass somehow\n\t\t\t\tclasses.push('fc-other-month');\n\t\t\t}\n\n\t\t\ttoday = view.calendar.getNow();\n\n\t\t\tif (date.isSame(today, 'day')) {\n\t\t\t\tclasses.push('fc-today');\n\n\t\t\t\tif (noThemeHighlight !== true) {\n\t\t\t\t\tclasses.push(view.calendar.theme.getClass('today'));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (date < today) {\n\t\t\t\tclasses.push('fc-past');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclasses.push('fc-future');\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t},\n\n\n\t// Utility for formatting a range. Accepts a range object, formatting string, and optional separator.\n\t// Displays all-day ranges naturally, with an inclusive end. Takes the current isRTL into account.\n\t// The timezones of the dates within `range` will be respected.\n\tformatRange: function(range, isAllDay, formatStr, separator) {\n\t\tvar end = range.end;\n\n\t\tif (isAllDay) {\n\t\t\tend = end.clone().subtract(1); // convert to inclusive. last ms of previous day\n\t\t}\n\n\t\treturn formatRange(range.start, end, formatStr, separator, this.isRTL);\n\t},\n\n\n\t// Compute the number of the give units in the \"current\" range.\n\t// Will return a floating-point number. Won't round.\n\tcurrentRangeAs: function(unit) {\n\t\treturn this._getDateProfile().currentUnzonedRange.as(unit);\n\t},\n\n\n\t// Returns the date range of the full days the given range visually appears to occupy.\n\t// Returns a plain object with start/end, NOT an UnzonedRange!\n\tcomputeDayRange: function(unzonedRange) {\n\t\tvar calendar = this._getCalendar();\n\t\tvar startDay = calendar.msToUtcMoment(unzonedRange.startMs, true); // the beginning of the day the range starts\n\t\tvar end = calendar.msToUtcMoment(unzonedRange.endMs);\n\t\tvar endTimeMS = +end.time(); // # of milliseconds into `endDay`\n\t\tvar endDay = end.clone().stripTime(); // the beginning of the day the range exclusively ends\n\n\t\t// If the end time is actually inclusively part of the next day and is equal to or\n\t\t// beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n\t\t// Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n\t\tif (endTimeMS && endTimeMS >= this.nextDayThreshold) {\n\t\t\tendDay.add(1, 'days');\n\t\t}\n\n\t\t// If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n\t\tif (endDay <= startDay) {\n\t\t\tendDay = startDay.clone().add(1, 'days');\n\t\t}\n\n\t\treturn { start: startDay, end: endDay };\n\t},\n\n\n\t// Does the given range visually appear to occupy more than one day?\n\tisMultiDayRange: function(unzonedRange) {\n\t\tvar dayRange = this.computeDayRange(unzonedRange);\n\n\t\treturn dayRange.end.diff(dayRange.start, 'days') > 1;\n\t}\n\n});\n\n;;\n\nvar InteractiveDateComponent = FC.InteractiveDateComponent = DateComponent.extend({\n\n\tdateClickingClass: null,\n\tdateSelectingClass: null,\n\teventPointingClass: null,\n\teventDraggingClass: null,\n\teventResizingClass: null,\n\texternalDroppingClass: null,\n\n\tdateClicking: null,\n\tdateSelecting: null,\n\teventPointing: null,\n\teventDragging: null,\n\teventResizing: null,\n\texternalDropping: null,\n\n\t// self-config, overridable by subclasses\n\tsegSelector: '.fc-event-container > *', // what constitutes an event element?\n\n\t// if defined, holds the unit identified (ex: \"year\" or \"month\") that determines the level of granularity\n\t// of the date areas. if not defined, assumes to be day and time granularity.\n\t// TODO: port isTimeScale into same system?\n\tlargeUnit: null,\n\n\n\tconstructor: function() {\n\t\tDateComponent.call(this);\n\n\t\tif (this.dateSelectingClass) {\n\t\t\tthis.dateClicking = new this.dateClickingClass(this);\n\t\t}\n\n\t\tif (this.dateSelectingClass) {\n\t\t\tthis.dateSelecting = new this.dateSelectingClass(this);\n\t\t}\n\n\t\tif (this.eventPointingClass) {\n\t\t\tthis.eventPointing = new this.eventPointingClass(this);\n\t\t}\n\n\t\tif (this.eventDraggingClass && this.eventPointing) {\n\t\t\tthis.eventDragging = new this.eventDraggingClass(this, this.eventPointing);\n\t\t}\n\n\t\tif (this.eventResizingClass && this.eventPointing) {\n\t\t\tthis.eventResizing = new this.eventResizingClass(this, this.eventPointing);\n\t\t}\n\n\t\tif (this.externalDroppingClass) {\n\t\t\tthis.externalDropping = new this.externalDroppingClass(this);\n\t\t}\n\t},\n\n\n\t// Sets the container element that the view should render inside of, does global DOM-related initializations,\n\t// and renders all the non-date-related content inside.\n\tsetElement: function(el) {\n\t\tDateComponent.prototype.setElement.apply(this, arguments);\n\n\t\tif (this.dateClicking) {\n\t\t\tthis.dateClicking.bindToEl(el);\n\t\t}\n\n\t\tif (this.dateSelecting) {\n\t\t\tthis.dateSelecting.bindToEl(el);\n\t\t}\n\n\t\tthis.bindAllSegHandlersToEl(el);\n\t},\n\n\n\tunrender: function() {\n\t\tthis.endInteractions();\n\n\t\tDateComponent.prototype.unrender.apply(this, arguments);\n\t},\n\n\n\texecuteEventUnrender: function() {\n\t\tthis.endInteractions();\n\n\t\tDateComponent.prototype.executeEventUnrender.apply(this, arguments);\n\t},\n\n\n\tbindGlobalHandlers: function() {\n\t\tDateComponent.prototype.bindGlobalHandlers.apply(this, arguments);\n\n\t\tif (this.externalDropping) {\n\t\t\tthis.externalDropping.bindToDocument();\n\t\t}\n\t},\n\n\n\tunbindGlobalHandlers: function() {\n\t\tDateComponent.prototype.unbindGlobalHandlers.apply(this, arguments);\n\n\t\tif (this.externalDropping) {\n\t\t\tthis.externalDropping.unbindFromDocument();\n\t\t}\n\t},\n\n\n\tbindDateHandlerToEl: function(el, name, handler) {\n\t\tvar _this = this;\n\n\t\t// attach a handler to the grid's root element.\n\t\t// jQuery will take care of unregistering them when removeElement gets called.\n\t\tthis.el.on(name, function(ev) {\n\t\t\tif (\n\t\t\t\t!$(ev.target).is(\n\t\t\t\t\t_this.segSelector + ',' + // directly on an event element\n\t\t\t\t\t_this.segSelector + ' *,' + // within an event element\n\t\t\t\t\t'.fc-more,' + // a \"more..\" link\n\t\t\t\t\t'a[data-goto]' // a clickable nav link\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn handler.call(_this, ev);\n\t\t\t}\n\t\t});\n\t},\n\n\n\tbindAllSegHandlersToEl: function(el) {\n\t\t[\n\t\t\tthis.eventPointing,\n\t\t\tthis.eventDragging,\n\t\t\tthis.eventResizing\n\t\t].forEach(function(eventInteraction) {\n\t\t\tif (eventInteraction) {\n\t\t\t\teventInteraction.bindToEl(el);\n\t\t\t}\n\t\t});\n\t},\n\n\n\tbindSegHandlerToEl: function(el, name, handler) {\n\t\tvar _this = this;\n\n\t\tel.on(name, this.segSelector, function(ev) {\n\t\t\tvar seg = $(this).data('fc-seg'); // grab segment data. put there by View::renderEventsPayload\n\n\t\t\tif (seg && !_this.shouldIgnoreEventPointing()) {\n\t\t\t\treturn handler.call(_this, seg, ev); // context will be the Grid\n\t\t\t}\n\t\t});\n\t},\n\n\n\tshouldIgnoreMouse: function() {\n\t\t// HACK\n\t\t// This will still work even though bindDateHandlerToEl doesn't use GlobalEmitter.\n\t\treturn GlobalEmitter.get().shouldIgnoreMouse();\n\t},\n\n\n\tshouldIgnoreTouch: function() {\n\t\tvar view = this._getView();\n\n\t\t// On iOS (and Android?) when a new selection is initiated overtop another selection,\n\t\t// the touchend never fires because the elements gets removed mid-touch-interaction (my theory).\n\t\t// HACK: simply don't allow this to happen.\n\t\t// ALSO: prevent selection when an *event* is already raised.\n\t\treturn view.isSelected || view.selectedEvent;\n\t},\n\n\n\tshouldIgnoreEventPointing: function() {\n\t\t// only call the handlers if there is not a drag/resize in progress\n\t\treturn (this.eventDragging && this.eventDragging.isDragging) ||\n\t\t\t(this.eventResizing && this.eventResizing.isResizing);\n\t},\n\n\n\tcanStartSelection: function(seg, ev) {\n\t\treturn getEvIsTouch(ev) &&\n\t\t\t!this.canStartResize(seg, ev) &&\n\t\t\t(this.isEventDefDraggable(seg.footprint.eventDef) ||\n\t\t\t this.isEventDefResizable(seg.footprint.eventDef));\n\t},\n\n\n\tcanStartDrag: function(seg, ev) {\n\t\treturn !this.canStartResize(seg, ev) &&\n\t\t\tthis.isEventDefDraggable(seg.footprint.eventDef);\n\t},\n\n\n\tcanStartResize: function(seg, ev) {\n\t\tvar view = this._getView();\n\t\tvar eventDef = seg.footprint.eventDef;\n\n\t\treturn (!getEvIsTouch(ev) || view.isEventDefSelected(eventDef)) &&\n\t\t\tthis.isEventDefResizable(eventDef) &&\n\t\t\t$(ev.target).is('.fc-resizer');\n\t},\n\n\n\t// Kills all in-progress dragging.\n\t// Useful for when public API methods that result in re-rendering are invoked during a drag.\n\t// Also useful for when touch devices misbehave and don't fire their touchend.\n\tendInteractions: function() {\n\t\t[\n\t\t\tthis.dateClicking,\n\t\t\tthis.dateSelecting,\n\t\t\tthis.eventPointing,\n\t\t\tthis.eventDragging,\n\t\t\tthis.eventResizing\n\t\t].forEach(function(interaction) {\n\t\t\tif (interaction) {\n\t\t\t\tinteraction.end();\n\t\t\t}\n\t\t});\n\t},\n\n\n\t// Event Drag-n-Drop\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Computes if the given event is allowed to be dragged by the user\n\tisEventDefDraggable: function(eventDef) {\n\t\treturn this.isEventDefStartEditable(eventDef);\n\t},\n\n\n\tisEventDefStartEditable: function(eventDef) {\n\t\tvar isEditable = eventDef.isStartExplicitlyEditable();\n\n\t\tif (isEditable == null) {\n\t\t\tisEditable = this.opt('eventStartEditable');\n\n\t\t\tif (isEditable == null) {\n\t\t\t\tisEditable = this.isEventDefGenerallyEditable(eventDef);\n\t\t\t}\n\t\t}\n\n\t\treturn isEditable;\n\t},\n\n\n\tisEventDefGenerallyEditable: function(eventDef) {\n\t\tvar isEditable = eventDef.isExplicitlyEditable();\n\n\t\tif (isEditable == null) {\n\t\t\tisEditable = this.opt('editable');\n\t\t}\n\n\t\treturn isEditable;\n\t},\n\n\n\t// Event Resizing\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Computes if the given event is allowed to be resized from its starting edge\n\tisEventDefResizableFromStart: function(eventDef) {\n\t\treturn this.opt('eventResizableFromStart') && this.isEventDefResizable(eventDef);\n\t},\n\n\n\t// Computes if the given event is allowed to be resized from its ending edge\n\tisEventDefResizableFromEnd: function(eventDef) {\n\t\treturn this.isEventDefResizable(eventDef);\n\t},\n\n\n\t// Computes if the given event is allowed to be resized by the user at all\n\tisEventDefResizable: function(eventDef) {\n\t\tvar isResizable = eventDef.isDurationExplicitlyEditable();\n\n\t\tif (isResizable == null) {\n\t\t\tisResizable = this.opt('eventDurationEditable');\n\n\t\t\tif (isResizable == null) {\n\t\t\t\tisResizable = this.isEventDefGenerallyEditable(eventDef);\n\t\t\t}\n\t\t}\n\t\treturn isResizable;\n\t},\n\n\n\t// Event Mutation / Constraints\n\t// ---------------------------------------------------------------------------------------------------------------\n\n\n\t// Diffs the two dates, returning a duration, based on granularity of the grid\n\t// TODO: port isTimeScale into this system?\n\tdiffDates: function(a, b) {\n\t\tif (this.largeUnit) {\n\t\t\treturn diffByUnit(a, b, this.largeUnit);\n\t\t}\n\t\telse {\n\t\t\treturn diffDayTime(a, b);\n\t\t}\n\t},\n\n\n\t// is it allowed, in relation to the view's validRange?\n\t// NOTE: very similar to isExternalInstanceGroupAllowed\n\tisEventInstanceGroupAllowed: function(eventInstanceGroup) {\n\t\tvar view = this._getView();\n\t\tvar dateProfile = this.dateProfile;\n\t\tvar eventFootprints = this.eventRangesToEventFootprints(eventInstanceGroup.getAllEventRanges());\n\t\tvar i;\n\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\t// TODO: just use getAllEventRanges directly\n\t\t\tif (!dateProfile.validUnzonedRange.containsRange(eventFootprints[i].componentFootprint.unzonedRange)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn view.calendar.isEventInstanceGroupAllowed(eventInstanceGroup);\n\t},\n\n\n\t// NOTE: very similar to isEventInstanceGroupAllowed\n\t// when it's a completely anonymous external drag, no event.\n\tisExternalInstanceGroupAllowed: function(eventInstanceGroup) {\n\t\tvar view = this._getView();\n\t\tvar dateProfile = this.dateProfile;\n\t\tvar eventFootprints = this.eventRangesToEventFootprints(eventInstanceGroup.getAllEventRanges());\n\t\tvar i;\n\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\tif (!dateProfile.validUnzonedRange.containsRange(eventFootprints[i].componentFootprint.unzonedRange)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\t// treat it as a selection\n\t\t\t// TODO: pass in eventInstanceGroup instead\n\t\t\t//  because we don't want calendar's constraint system to depend on a component's\n\t\t\t//  determination of footprints.\n\t\t\tif (!view.calendar.isSelectionFootprintAllowed(eventFootprints[i].componentFootprint)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n});\n\n;;\n\n/*\nA set of rendering and date-related methods for a visual component comprised of one or more rows of day columns.\nPrerequisite: the object being mixed into needs to be a *Grid*\n*/\nvar DayTableMixin = FC.DayTableMixin = {\n\n\tbreakOnWeeks: false, // should create a new row for each week?\n\tdayDates: null, // whole-day dates for each column. left to right\n\tdayIndices: null, // for each day from start, the offset\n\tdaysPerRow: null,\n\trowCnt: null,\n\tcolCnt: null,\n\tcolHeadFormat: null,\n\n\n\t// Populates internal variables used for date calculation and rendering\n\tupdateDayTable: function() {\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar date = calendar.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs, true);\n\t\tvar end = calendar.msToUtcMoment(this.dateProfile.renderUnzonedRange.endMs, true);\n\t\tvar dayIndex = -1;\n\t\tvar dayIndices = [];\n\t\tvar dayDates = [];\n\t\tvar daysPerRow;\n\t\tvar firstDay;\n\t\tvar rowCnt;\n\n\t\twhile (date.isBefore(end)) { // loop each day from start to end\n\t\t\tif (view.isHiddenDay(date)) {\n\t\t\t\tdayIndices.push(dayIndex + 0.5); // mark that it's between indices\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdayIndex++;\n\t\t\t\tdayIndices.push(dayIndex);\n\t\t\t\tdayDates.push(date.clone());\n\t\t\t}\n\t\t\tdate.add(1, 'days');\n\t\t}\n\n\t\tif (this.breakOnWeeks) {\n\t\t\t// count columns until the day-of-week repeats\n\t\t\tfirstDay = dayDates[0].day();\n\t\t\tfor (daysPerRow = 1; daysPerRow < dayDates.length; daysPerRow++) {\n\t\t\t\tif (dayDates[daysPerRow].day() == firstDay) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\trowCnt = Math.ceil(dayDates.length / daysPerRow);\n\t\t}\n\t\telse {\n\t\t\trowCnt = 1;\n\t\t\tdaysPerRow = dayDates.length;\n\t\t}\n\n\t\tthis.dayDates = dayDates;\n\t\tthis.dayIndices = dayIndices;\n\t\tthis.daysPerRow = daysPerRow;\n\t\tthis.rowCnt = rowCnt;\n\n\t\tthis.updateDayTableCols();\n\t},\n\n\n\t// Computes and assigned the colCnt property and updates any options that may be computed from it\n\tupdateDayTableCols: function() {\n\t\tthis.colCnt = this.computeColCnt();\n\t\tthis.colHeadFormat = this.opt('columnFormat') || this.computeColHeadFormat();\n\t},\n\n\n\t// Determines how many columns there should be in the table\n\tcomputeColCnt: function() {\n\t\treturn this.daysPerRow;\n\t},\n\n\n\t// Computes the ambiguously-timed moment for the given cell\n\tgetCellDate: function(row, col) {\n\t\treturn this.dayDates[\n\t\t\t\tthis.getCellDayIndex(row, col)\n\t\t\t].clone();\n\t},\n\n\n\t// Computes the ambiguously-timed date range for the given cell\n\tgetCellRange: function(row, col) {\n\t\tvar start = this.getCellDate(row, col);\n\t\tvar end = start.clone().add(1, 'days');\n\n\t\treturn { start: start, end: end };\n\t},\n\n\n\t// Returns the number of day cells, chronologically, from the first of the grid (0-based)\n\tgetCellDayIndex: function(row, col) {\n\t\treturn row * this.daysPerRow + this.getColDayIndex(col);\n\t},\n\n\n\t// Returns the numner of day cells, chronologically, from the first cell in *any given row*\n\tgetColDayIndex: function(col) {\n\t\tif (this.isRTL) {\n\t\t\treturn this.colCnt - 1 - col;\n\t\t}\n\t\telse {\n\t\t\treturn col;\n\t\t}\n\t},\n\n\n\t// Given a date, returns its chronolocial cell-index from the first cell of the grid.\n\t// If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n\t// If before the first offset, returns a negative number.\n\t// If after the last offset, returns an offset past the last cell offset.\n\t// Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n\tgetDateDayIndex: function(date) {\n\t\tvar dayIndices = this.dayIndices;\n\t\tvar dayOffset = date.diff(this.dayDates[0], 'days');\n\n\t\tif (dayOffset < 0) {\n\t\t\treturn dayIndices[0] - 1;\n\t\t}\n\t\telse if (dayOffset >= dayIndices.length) {\n\t\t\treturn dayIndices[dayIndices.length - 1] + 1;\n\t\t}\n\t\telse {\n\t\t\treturn dayIndices[dayOffset];\n\t\t}\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes a default column header formatting string if `colFormat` is not explicitly defined\n\tcomputeColHeadFormat: function() {\n\t\t// if more than one week row, or if there are a lot of columns with not much space,\n\t\t// put just the day numbers will be in each cell\n\t\tif (this.rowCnt > 1 || this.colCnt > 10) {\n\t\t\treturn 'ddd'; // \"Sat\"\n\t\t}\n\t\t// multiple days, so full single date string WON'T be in title text\n\t\telse if (this.colCnt > 1) {\n\t\t\treturn this.opt('dayOfMonthFormat'); // \"Sat 12/10\"\n\t\t}\n\t\t// single day, so full single date string will probably be in title text\n\t\telse {\n\t\t\treturn 'dddd'; // \"Saturday\"\n\t\t}\n\t},\n\n\n\t/* Slicing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Slices up a date range into a segment for every week-row it intersects with\n\tsliceRangeByRow: function(unzonedRange) {\n\t\tvar daysPerRow = this.daysPerRow;\n\t\tvar normalRange = this.view.computeDayRange(unzonedRange); // make whole-day range, considering nextDayThreshold\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\n\t\tvar segs = [];\n\t\tvar row;\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\n\n\t\tfor (row = 0; row < this.rowCnt; row++) {\n\t\t\trowFirst = row * daysPerRow;\n\t\t\trowLast = rowFirst + daysPerRow - 1;\n\n\t\t\t// intersect segment's offset range with the row's\n\t\t\tsegFirst = Math.max(rangeFirst, rowFirst);\n\t\t\tsegLast = Math.min(rangeLast, rowLast);\n\n\t\t\t// deal with in-between indices\n\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\n\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\n\n\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\n\t\t\t\tsegs.push({\n\t\t\t\t\trow: row,\n\n\t\t\t\t\t// normalize to start of row\n\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\n\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\n\n\t\t\t\t\t// must be matching integers to be the segment's start/end\n\t\t\t\t\tisStart: segFirst === rangeFirst,\n\t\t\t\t\tisEnd: segLast === rangeLast\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t// Slices up a date range into a segment for every day-cell it intersects with.\n\t// TODO: make more DRY with sliceRangeByRow somehow.\n\tsliceRangeByDay: function(unzonedRange) {\n\t\tvar daysPerRow = this.daysPerRow;\n\t\tvar normalRange = this.view.computeDayRange(unzonedRange); // make whole-day range, considering nextDayThreshold\n\t\tvar rangeFirst = this.getDateDayIndex(normalRange.start); // inclusive first index\n\t\tvar rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')); // inclusive last index\n\t\tvar segs = [];\n\t\tvar row;\n\t\tvar rowFirst, rowLast; // inclusive day-index range for current row\n\t\tvar i;\n\t\tvar segFirst, segLast; // inclusive day-index range for segment\n\n\t\tfor (row = 0; row < this.rowCnt; row++) {\n\t\t\trowFirst = row * daysPerRow;\n\t\t\trowLast = rowFirst + daysPerRow - 1;\n\n\t\t\tfor (i = rowFirst; i <= rowLast; i++) {\n\n\t\t\t\t// intersect segment's offset range with the row's\n\t\t\t\tsegFirst = Math.max(rangeFirst, i);\n\t\t\t\tsegLast = Math.min(rangeLast, i);\n\n\t\t\t\t// deal with in-between indices\n\t\t\t\tsegFirst = Math.ceil(segFirst); // in-between starts round to next cell\n\t\t\t\tsegLast = Math.floor(segLast); // in-between ends round to prev cell\n\n\t\t\t\tif (segFirst <= segLast) { // was there any intersection with the current row?\n\t\t\t\t\tsegs.push({\n\t\t\t\t\t\trow: row,\n\n\t\t\t\t\t\t// normalize to start of row\n\t\t\t\t\t\tfirstRowDayIndex: segFirst - rowFirst,\n\t\t\t\t\t\tlastRowDayIndex: segLast - rowFirst,\n\n\t\t\t\t\t\t// must be matching integers to be the segment's start/end\n\t\t\t\t\t\tisStart: segFirst === rangeFirst,\n\t\t\t\t\t\tisEnd: segLast === rangeLast\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Header Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderHeadHtml: function() {\n\t\tvar theme = this.view.calendar.theme;\n\n\t\treturn '' +\n\t\t\t'<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\n\t\t\t\t'<table class=\"' + theme.getClass('tableGrid') + '\">' +\n\t\t\t\t\t'<thead>' +\n\t\t\t\t\t\tthis.renderHeadTrHtml() +\n\t\t\t\t\t'</thead>' +\n\t\t\t\t'</table>' +\n\t\t\t'</div>';\n\t},\n\n\n\trenderHeadIntroHtml: function() {\n\t\treturn this.renderIntroHtml(); // fall back to generic\n\t},\n\n\n\trenderHeadTrHtml: function() {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderHeadIntroHtml()) +\n\t\t\t\tthis.renderHeadDateCellsHtml() +\n\t\t\t\t(this.isRTL ? this.renderHeadIntroHtml() : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderHeadDateCellsHtml: function() {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(0, col);\n\t\t\thtmls.push(this.renderHeadDateCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\t// TODO: when internalApiVersion, accept an object for HTML attributes\n\t// (colspan should be no different)\n\trenderHeadDateCellHtml: function(date, colspan, otherAttrs) {\n\t\tvar view = this.view;\n\t\tvar isDateValid = this.dateProfile.activeUnzonedRange.containsDate(date); // TODO: called too frequently. cache somehow.\n\t\tvar classNames = [\n\t\t\t'fc-day-header',\n\t\t\tview.calendar.theme.getClass('widgetHeader')\n\t\t];\n\t\tvar innerHtml = htmlEscape(date.format(this.colHeadFormat));\n\n\t\t// if only one row of days, the classNames on the header can represent the specific days beneath\n\t\tif (this.rowCnt === 1) {\n\t\t\tclassNames = classNames.concat(\n\t\t\t\t// includes the day-of-week class\n\t\t\t\t// noThemeHighlight=true (don't highlight the header)\n\t\t\t\tthis.getDayClasses(date, true)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tclassNames.push('fc-' + dayIDs[date.day()]); // only add the day-of-week class\n\t\t}\n\n\t\treturn '' +\n            '<th class=\"' + classNames.join(' ') + '\"' +\n\t\t\t\t((isDateValid && this.rowCnt) === 1 ?\n\t\t\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t(colspan > 1 ?\n\t\t\t\t\t' colspan=\"' + colspan + '\"' :\n\t\t\t\t\t'') +\n\t\t\t\t(otherAttrs ?\n\t\t\t\t\t' ' + otherAttrs :\n\t\t\t\t\t'') +\n\t\t\t\t'>' +\n\t\t\t\t(isDateValid ?\n\t\t\t\t\t// don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n\t\t\t\t\tview.buildGotoAnchorHtml(\n\t\t\t\t\t\t{ date: date, forceOff: this.rowCnt > 1 || this.colCnt === 1 },\n\t\t\t\t\t\tinnerHtml\n\t\t\t\t\t) :\n\t\t\t\t\t// if not valid, display text, but no link\n\t\t\t\t\tinnerHtml\n\t\t\t\t) +\n\t\t\t'</th>';\n\t},\n\n\n\t/* Background Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderBgTrHtml: function(row) {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderBgIntroHtml(row)) +\n\t\t\t\tthis.renderBgCellsHtml(row) +\n\t\t\t\t(this.isRTL ? this.renderBgIntroHtml(row) : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderBgIntroHtml: function(row) {\n\t\treturn this.renderIntroHtml(); // fall back to generic\n\t},\n\n\n\trenderBgCellsHtml: function(row) {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(row, col);\n\t\t\thtmls.push(this.renderBgCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\trenderBgCellHtml: function(date, otherAttrs) {\n\t\tvar view = this.view;\n\t\tvar isDateValid = this.dateProfile.activeUnzonedRange.containsDate(date); // TODO: called too frequently. cache somehow.\n\t\tvar classes = this.getDayClasses(date);\n\n\t\tclasses.unshift('fc-day', view.calendar.theme.getClass('widgetContent'));\n\n\t\treturn '<td class=\"' + classes.join(' ') + '\"' +\n\t\t\t(isDateValid ?\n\t\t\t\t' data-date=\"' + date.format('YYYY-MM-DD') + '\"' : // if date has a time, won't format it\n\t\t\t\t'') +\n\t\t\t(otherAttrs ?\n\t\t\t\t' ' + otherAttrs :\n\t\t\t\t'') +\n\t\t\t'></td>';\n\t},\n\n\n\t/* Generic\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Generates the default HTML intro for any row. User classes should override\n\trenderIntroHtml: function() {\n\t},\n\n\n\t// TODO: a generic method for dealing with <tr>, RTL, intro\n\t// when increment internalApiVersion\n\t// wrapTr (scheduler)\n\n\n\t/* Utils\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Applies the generic \"intro\" and \"outro\" HTML to the given cells.\n\t// Intro means the leftmost cell when the calendar is LTR and the rightmost cell when RTL. Vice-versa for outro.\n\tbookendCells: function(trEl) {\n\t\tvar introHtml = this.renderIntroHtml();\n\n\t\tif (introHtml) {\n\t\t\tif (this.isRTL) {\n\t\t\t\ttrEl.append(introHtml);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttrEl.prepend(introHtml);\n\t\t\t}\n\t\t}\n\t}\n\n};\n\n;;\n\n/* An abstract class from which other views inherit from\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar View = FC.View = InteractiveDateComponent.extend({\n\n\ttype: null, // subclass' view name (string)\n\tname: null, // deprecated. use `type` instead\n\ttitle: null, // the text that will be displayed in the header's title\n\n\tcalendar: null, // owner Calendar object\n\tviewSpec: null,\n\toptions: null, // hash containing all options. already merged with view-specific-options\n\n\trenderQueue: null,\n\tbatchRenderDepth: 0,\n\tqueuedScroll: null,\n\n\tisSelected: false, // boolean whether a range of time is user-selected or not\n\tselectedEventInstance: null,\n\n\teventOrderSpecs: null, // criteria for ordering events when they have same date/time\n\n\t// for date utils, computed from options\n\tisHiddenDayHash: null,\n\n\t// now indicator\n\tisNowIndicatorRendered: null,\n\tinitialNowDate: null, // result first getNow call\n\tinitialNowQueriedMs: null, // ms time the getNow was called\n\tnowIndicatorTimeoutID: null, // for refresh timing of now indicator\n\tnowIndicatorIntervalID: null, // \"\n\n\tconstructor: function(calendar, viewSpec) {\n\t\tthis.calendar = calendar;\n\t\tthis.viewSpec = viewSpec;\n\n\t\t// shortcuts\n\t\tthis.type = viewSpec.type;\n\t\tthis.options = viewSpec.options;\n\n\t\t// .name is deprecated\n\t\tthis.name = this.type;\n\n\t\tInteractiveDateComponent.call(this);\n\n\t\tthis.initRenderQueue();\n\t\tthis.initHiddenDays();\n\t\tthis.bindBaseRenderHandlers();\n\t\tthis.eventOrderSpecs = parseFieldSpecs(this.opt('eventOrder'));\n\n\t\t// legacy\n\t\tif (this.initialize) {\n\t\t\tthis.initialize();\n\t\t}\n\t},\n\n\n\t_getView: function() {\n\t\treturn this;\n\t},\n\n\n\t// Retrieves an option with the given name\n\topt: function(name) {\n\t\treturn this.options[name];\n\t},\n\n\n\t/* Render Queue\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tinitRenderQueue: function() {\n\t\tthis.renderQueue = new RenderQueue({\n\t\t\tevent: this.opt('eventRenderWait')\n\t\t});\n\n\t\tthis.renderQueue.on('start', this.onRenderQueueStart.bind(this));\n\t\tthis.renderQueue.on('stop', this.onRenderQueueStop.bind(this));\n\n\t\tthis.on('before:change', this.startBatchRender);\n\t\tthis.on('change', this.stopBatchRender);\n\t},\n\n\n\tonRenderQueueStart: function() {\n\t\tthis.calendar.freezeContentHeight();\n\t\tthis.addScroll(this.queryScroll());\n\t},\n\n\n\tonRenderQueueStop: function() {\n\t\tif (this.calendar.updateViewSize()) { // success?\n\t\t\tthis.popScroll();\n\t\t}\n\t\tthis.calendar.thawContentHeight();\n\t},\n\n\n\tstartBatchRender: function() {\n\t\tif (!(this.batchRenderDepth++)) {\n\t\t\tthis.renderQueue.pause();\n\t\t}\n\t},\n\n\n\tstopBatchRender: function() {\n\t\tif (!(--this.batchRenderDepth)) {\n\t\t\tthis.renderQueue.resume();\n\t\t}\n\t},\n\n\n\trequestRender: function(func, namespace, actionType) {\n\t\tthis.renderQueue.queue(func, namespace, actionType);\n\t},\n\n\n\t// given func will auto-bind to `this`\n\twhenSizeUpdated: function(func) {\n\t\tif (this.renderQueue.isRunning) {\n\t\t\tthis.renderQueue.one('stop', func.bind(this));\n\t\t}\n\t\telse {\n\t\t\tfunc.call(this);\n\t\t}\n\t},\n\n\n\t/* Title and Date Formatting\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes what the title at the top of the calendar should be for this view\n\tcomputeTitle: function(dateProfile) {\n\t\tvar unzonedRange;\n\n\t\t// for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n\t\tif (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n\t\t\tunzonedRange = dateProfile.currentUnzonedRange;\n\t\t}\n\t\telse { // for day units or smaller, use the actual day range\n\t\t\tunzonedRange = dateProfile.activeUnzonedRange;\n\t\t}\n\n\t\treturn this.formatRange(\n\t\t\t{\n\t\t\t\tstart: this.calendar.msToMoment(unzonedRange.startMs, dateProfile.isRangeAllDay),\n\t\t\t\tend: this.calendar.msToMoment(unzonedRange.endMs, dateProfile.isRangeAllDay)\n\t\t\t},\n\t\t\tdateProfile.isRangeAllDay,\n\t\t\tthis.opt('titleFormat') || this.computeTitleFormat(dateProfile),\n\t\t\tthis.opt('titleRangeSeparator')\n\t\t);\n\t},\n\n\n\t// Generates the format string that should be used to generate the title for the current date range.\n\t// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\n\tcomputeTitleFormat: function(dateProfile) {\n\t\tvar currentRangeUnit = dateProfile.currentRangeUnit;\n\n\t\tif (currentRangeUnit == 'year') {\n\t\t\treturn 'YYYY';\n\t\t}\n\t\telse if (currentRangeUnit == 'month') {\n\t\t\treturn this.opt('monthYearFormat'); // like \"September 2014\"\n\t\t}\n\t\telse if (dateProfile.currentUnzonedRange.as('days') > 1) {\n\t\t\treturn 'll'; // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n\t\t}\n\t\telse {\n\t\t\treturn 'LL'; // one day. longer, like \"September 9 2014\"\n\t\t}\n\t},\n\n\n\t// Date Setting/Unsetting\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetDate: function(date) {\n\t\tvar currentDateProfile = this.get('dateProfile');\n\t\tvar newDateProfile = this.buildDateProfile(date, null, true); // forceToValid=true\n\n\t\tif (\n\t\t\t!currentDateProfile ||\n\t\t\t!currentDateProfile.activeUnzonedRange.equals(newDateProfile.activeUnzonedRange)\n\t\t) {\n\t\t\tthis.set('dateProfile', newDateProfile);\n\t\t}\n\t},\n\n\n\tunsetDate: function() {\n\t\tthis.unset('dateProfile');\n\t},\n\n\n\t// Event Data\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tfetchInitialEvents: function(dateProfile) {\n\t\tvar calendar = this.calendar;\n\t\tvar forceAllDay = dateProfile.isRangeAllDay && !this.usesMinMaxTime;\n\n\t\treturn calendar.requestEvents(\n\t\t\tcalendar.msToMoment(dateProfile.activeUnzonedRange.startMs, forceAllDay),\n\t\t\tcalendar.msToMoment(dateProfile.activeUnzonedRange.endMs, forceAllDay)\n\t\t);\n\t},\n\n\n\tbindEventChanges: function() {\n\t\tthis.listenTo(this.calendar, 'eventsReset', this.resetEvents); // TODO: make this a real event\n\t},\n\n\n\tunbindEventChanges: function() {\n\t\tthis.stopListeningTo(this.calendar, 'eventsReset');\n\t},\n\n\n\tsetEvents: function(eventsPayload) {\n\t\tthis.set('currentEvents', eventsPayload);\n\t\tthis.set('hasEvents', true);\n\t},\n\n\n\tunsetEvents: function() {\n\t\tthis.unset('currentEvents');\n\t\tthis.unset('hasEvents');\n\t},\n\n\n\tresetEvents: function(eventsPayload) {\n\t\tthis.startBatchRender();\n\t\tthis.unsetEvents();\n\t\tthis.setEvents(eventsPayload);\n\t\tthis.stopBatchRender();\n\t},\n\n\n\t// Date High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trequestDateRender: function(dateProfile) {\n\t\tvar _this = this;\n\n\t\tthis.requestRender(function() {\n\t\t\t_this.executeDateRender(dateProfile);\n\t\t}, 'date', 'init');\n\t},\n\n\n\trequestDateUnrender: function() {\n\t\tvar _this = this;\n\n\t\tthis.requestRender(function() {\n\t\t\t_this.executeDateUnrender();\n\t\t}, 'date', 'destroy');\n\t},\n\n\n\t// if dateProfile not specified, uses current\n\texecuteDateRender: function(dateProfile) {\n\t\tDateComponent.prototype.executeDateRender.apply(this, arguments);\n\n\t\tif (this.render) {\n\t\t\tthis.render(); // TODO: deprecate\n\t\t}\n\n\t\tthis.trigger('datesRendered');\n\t\tthis.addScroll({ isDateInit: true });\n\t\tthis.startNowIndicator(); // shouldn't render yet because updateSize will be called soon\n\t},\n\n\n\texecuteDateUnrender: function() {\n\t\tthis.unselect();\n\t\tthis.stopNowIndicator();\n\t\tthis.trigger('before:datesUnrendered');\n\n\t\tif (this.destroy) {\n\t\t\tthis.destroy(); // TODO: deprecate\n\t\t}\n\n\t\tDateComponent.prototype.executeDateUnrender.apply(this, arguments);\n\t},\n\n\n\t// \"Base\" rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindBaseRenderHandlers: function() {\n\t\tvar _this = this;\n\n\t\tthis.on('datesRendered', function() {\n\t\t\t_this.whenSizeUpdated(\n\t\t\t\t_this.triggerViewRender\n\t\t\t);\n\t\t});\n\n\t\tthis.on('before:datesUnrendered', function() {\n\t\t\t_this.triggerViewDestroy();\n\t\t});\n\t},\n\n\n\ttriggerViewRender: function() {\n\t\tthis.publiclyTrigger('viewRender', {\n\t\t\tcontext: this,\n\t\t\targs: [ this, this.el ]\n\t\t});\n\t},\n\n\n\ttriggerViewDestroy: function() {\n\t\tthis.publiclyTrigger('viewDestroy', {\n\t\t\tcontext: this,\n\t\t\targs: [ this, this.el ]\n\t\t});\n\t},\n\n\n\t// Event High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trequestEventsRender: function(eventsPayload) {\n\t\tvar _this = this;\n\n\t\tthis.requestRender(function() {\n\t\t\t_this.executeEventRender(eventsPayload);\n\t\t\t_this.whenSizeUpdated(\n\t\t\t\t_this.triggerAfterEventsRendered\n\t\t\t);\n\t\t}, 'event', 'init');\n\t},\n\n\n\trequestEventsUnrender: function() {\n\t\tvar _this = this;\n\n\t\tthis.requestRender(function() {\n\t\t\t_this.triggerBeforeEventsDestroyed();\n\t\t\t_this.executeEventUnrender();\n\t\t}, 'event', 'destroy');\n\t},\n\n\n\t// Business Hour High-level Rendering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trequestBusinessHoursRender: function(businessHourGenerator) {\n\t\tvar _this = this;\n\n\t\tthis.requestRender(function() {\n\t\t\t_this.renderBusinessHours(businessHourGenerator);\n\t\t}, 'businessHours', 'init');\n\t},\n\n\trequestBusinessHoursUnrender: function() {\n\t\tvar _this = this;\n\n\t\tthis.requestRender(function() {\n\t\t\t_this.unrenderBusinessHours();\n\t\t}, 'businessHours', 'destroy');\n\t},\n\n\n\t// Misc view rendering utils\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Binds DOM handlers to elements that reside outside the view container, such as the document\n\tbindGlobalHandlers: function() {\n\t\tInteractiveDateComponent.prototype.bindGlobalHandlers.apply(this, arguments);\n\n\t\tthis.listenTo(GlobalEmitter.get(), {\n\t\t\ttouchstart: this.processUnselect,\n\t\t\tmousedown: this.handleDocumentMousedown\n\t\t});\n\t},\n\n\n\t// Unbinds DOM handlers from elements that reside outside the view container\n\tunbindGlobalHandlers: function() {\n\t\tInteractiveDateComponent.prototype.unbindGlobalHandlers.apply(this, arguments);\n\n\t\tthis.stopListeningTo(GlobalEmitter.get());\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Immediately render the current time indicator and begins re-rendering it at an interval,\n\t// which is defined by this.getNowIndicatorUnit().\n\t// TODO: somehow do this for the current whole day's background too\n\tstartNowIndicator: function() {\n\t\tvar _this = this;\n\t\tvar unit;\n\t\tvar update;\n\t\tvar delay; // ms wait value\n\n\t\tif (this.opt('nowIndicator')) {\n\t\t\tunit = this.getNowIndicatorUnit();\n\t\t\tif (unit) {\n\t\t\t\tupdate = proxy(this, 'updateNowIndicator'); // bind to `this`\n\n\t\t\t\tthis.initialNowDate = this.calendar.getNow();\n\t\t\t\tthis.initialNowQueriedMs = +new Date();\n\n\t\t\t\t// wait until the beginning of the next interval\n\t\t\t\tdelay = this.initialNowDate.clone().startOf(unit).add(1, unit) - this.initialNowDate;\n\t\t\t\tthis.nowIndicatorTimeoutID = setTimeout(function() {\n\t\t\t\t\t_this.nowIndicatorTimeoutID = null;\n\t\t\t\t\tupdate();\n\t\t\t\t\tdelay = +moment.duration(1, unit);\n\t\t\t\t\tdelay = Math.max(100, delay); // prevent too frequent\n\t\t\t\t\t_this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n\t\t\t\t}, delay);\n\t\t\t}\n\n\t\t\t// rendering will be initiated in updateSize\n\t\t}\n\t},\n\n\n\t// rerenders the now indicator, computing the new current time from the amount of time that has passed\n\t// since the initial getNow call.\n\tupdateNowIndicator: function() {\n\t\tif (\n\t\t\tthis.isDatesRendered &&\n\t\t\tthis.initialNowDate // activated before?\n\t\t) {\n\t\t\tthis.unrenderNowIndicator(); // won't unrender if unnecessary\n\t\t\tthis.renderNowIndicator(\n\t\t\t\tthis.initialNowDate.clone().add(new Date() - this.initialNowQueriedMs) // add ms\n\t\t\t);\n\t\t\tthis.isNowIndicatorRendered = true;\n\t\t}\n\t},\n\n\n\t// Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n\t// Won't cause side effects if indicator isn't rendered.\n\tstopNowIndicator: function() {\n\t\tif (this.isNowIndicatorRendered) {\n\n\t\t\tif (this.nowIndicatorTimeoutID) {\n\t\t\t\tclearTimeout(this.nowIndicatorTimeoutID);\n\t\t\t\tthis.nowIndicatorTimeoutID = null;\n\t\t\t}\n\t\t\tif (this.nowIndicatorIntervalID) {\n\t\t\t\tclearTimeout(this.nowIndicatorIntervalID);\n\t\t\t\tthis.nowIndicatorIntervalID = null;\n\t\t\t}\n\n\t\t\tthis.unrenderNowIndicator();\n\t\t\tthis.isNowIndicatorRendered = false;\n\t\t}\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tupdateSize: function(totalHeight, isAuto, isResize) {\n\n\t\tif (this.setHeight) { // for legacy API\n\t\t\tthis.setHeight(totalHeight, isAuto);\n\t\t}\n\t\telse {\n\t\t\tInteractiveDateComponent.prototype.updateSize.apply(this, arguments);\n\t\t}\n\n\t\tthis.updateNowIndicator();\n\t},\n\n\n\t/* Scroller\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\taddScroll: function(scroll) {\n\t\tvar queuedScroll = this.queuedScroll || (this.queuedScroll = {});\n\n\t\t$.extend(queuedScroll, scroll);\n\t},\n\n\n\tpopScroll: function() {\n\t\tthis.applyQueuedScroll();\n\t\tthis.queuedScroll = null;\n\t},\n\n\n\tapplyQueuedScroll: function() {\n\t\tif (this.queuedScroll) {\n\t\t\tthis.applyScroll(this.queuedScroll);\n\t\t}\n\t},\n\n\n\tqueryScroll: function() {\n\t\tvar scroll = {};\n\n\t\tif (this.isDatesRendered) {\n\t\t\t$.extend(scroll, this.queryDateScroll());\n\t\t}\n\n\t\treturn scroll;\n\t},\n\n\n\tapplyScroll: function(scroll) {\n\t\tif (scroll.isDateInit && this.isDatesRendered) {\n\t\t\t$.extend(scroll, this.computeInitialDateScroll());\n\t\t}\n\n\t\tif (this.isDatesRendered) {\n\t\t\tthis.applyDateScroll(scroll);\n\t\t}\n\t},\n\n\n\tcomputeInitialDateScroll: function() {\n\t\treturn {}; // subclasses must implement\n\t},\n\n\n\tqueryDateScroll: function() {\n\t\treturn {}; // subclasses must implement\n\t},\n\n\n\tapplyDateScroll: function(scroll) {\n\t\t; // subclasses must implement\n\t},\n\n\n\t/* Event Drag-n-Drop\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\treportEventDrop: function(eventInstance, eventMutation, el, ev) {\n\t\tvar eventManager = this.calendar.eventManager;\n\t\tvar undoFunc = eventManager.mutateEventsWithId(\n\t\t\teventInstance.def.id,\n\t\t\teventMutation,\n\t\t\tthis.calendar\n\t\t);\n\t\tvar dateMutation = eventMutation.dateMutation;\n\n\t\t// update the EventInstance, for handlers\n\t\tif (dateMutation) {\n\t\t\teventInstance.dateProfile = dateMutation.buildNewDateProfile(\n\t\t\t\teventInstance.dateProfile,\n\t\t\t\tthis.calendar\n\t\t\t);\n\t\t}\n\n\t\tthis.triggerEventDrop(\n\t\t\teventInstance,\n\t\t\t// a drop doesn't necessarily mean a date mutation (ex: resource change)\n\t\t\t(dateMutation && dateMutation.dateDelta) || moment.duration(),\n\t\t\tundoFunc,\n\t\t\tel, ev\n\t\t);\n\t},\n\n\n\t// Triggers event-drop handlers that have subscribed via the API\n\ttriggerEventDrop: function(eventInstance, dateDelta, undoFunc, el, ev) {\n\t\tthis.publiclyTrigger('eventDrop', {\n\t\t\tcontext: el[0],\n\t\t\targs: [\n\t\t\t\teventInstance.toLegacy(),\n\t\t\t\tdateDelta,\n\t\t\t\tundoFunc,\n\t\t\t\tev,\n\t\t\t\t{}, // {} = jqui dummy\n\t\t\t\tthis\n\t\t\t]\n\t\t});\n\t},\n\n\n\t/* External Element Drag-n-Drop\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Must be called when an external element, via jQuery UI, has been dropped onto the calendar.\n\t// `meta` is the parsed data that has been embedded into the dragging event.\n\t// `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\n\treportExternalDrop: function(singleEventDef, isEvent, isSticky, el, ev, ui) {\n\n\t\tif (isEvent) {\n\t\t\tthis.calendar.eventManager.addEventDef(singleEventDef, isSticky);\n\t\t}\n\n\t\tthis.triggerExternalDrop(singleEventDef, isEvent, el, ev, ui);\n\t},\n\n\n\t// Triggers external-drop handlers that have subscribed via the API\n\ttriggerExternalDrop: function(singleEventDef, isEvent, el, ev, ui) {\n\n\t\t// trigger 'drop' regardless of whether element represents an event\n\t\tthis.publiclyTrigger('drop', {\n\t\t\tcontext: el[0],\n\t\t\targs: [\n\t\t\t\tsingleEventDef.dateProfile.start.clone(),\n\t\t\t\tev,\n\t\t\t\tui,\n\t\t\t\tthis\n\t\t\t]\n\t\t});\n\n\t\tif (isEvent) {\n\t\t\t// signal an external event landed\n\t\t\tthis.publiclyTrigger('eventReceive', {\n\t\t\t\tcontext: this,\n\t\t\t\targs: [\n\t\t\t\t\tsingleEventDef.buildInstance().toLegacy(),\n\t\t\t\t\tthis\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t},\n\n\n\t/* Event Resizing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Must be called when an event in the view has been resized to a new length\n\treportEventResize: function(eventInstance, eventMutation, el, ev) {\n\t\tvar eventManager = this.calendar.eventManager;\n\t\tvar undoFunc = eventManager.mutateEventsWithId(\n\t\t\teventInstance.def.id,\n\t\t\teventMutation,\n\t\t\tthis.calendar\n\t\t);\n\n\t\t// update the EventInstance, for handlers\n\t\teventInstance.dateProfile = eventMutation.dateMutation.buildNewDateProfile(\n\t\t\teventInstance.dateProfile,\n\t\t\tthis.calendar\n\t\t);\n\n\t\tthis.triggerEventResize(\n\t\t\teventInstance,\n\t\t\teventMutation.dateMutation.endDelta,\n\t\t\tundoFunc,\n\t\t\tel, ev\n\t\t);\n\t},\n\n\n\t// Triggers event-resize handlers that have subscribed via the API\n\ttriggerEventResize: function(eventInstance, durationDelta, undoFunc, el, ev) {\n\t\tthis.publiclyTrigger('eventResize', {\n\t\t\tcontext: el[0],\n\t\t\targs: [\n\t\t\t\teventInstance.toLegacy(),\n\t\t\t\tdurationDelta,\n\t\t\t\tundoFunc,\n\t\t\t\tev,\n\t\t\t\t{}, // {} = jqui dummy\n\t\t\t\tthis\n\t\t\t]\n\t\t});\n\t},\n\n\n\t/* Selection (time range)\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Selects a date span on the view. `start` and `end` are both Moments.\n\t// `ev` is the native mouse event that begin the interaction.\n\tselect: function(footprint, ev) {\n\t\tthis.unselect(ev);\n\t\tthis.renderSelectionFootprint(footprint);\n\t\tthis.reportSelection(footprint, ev);\n\t},\n\n\n\trenderSelectionFootprint: function(footprint, ev) {\n\t\tif (this.renderSelection) { // legacy method in custom view classes\n\t\t\tthis.renderSelection(\n\t\t\t\tfootprint.toLegacy(this.calendar)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tInteractiveDateComponent.prototype.renderSelectionFootprint.apply(this, arguments);\n\t\t}\n\t},\n\n\n\t// Called when a new selection is made. Updates internal state and triggers handlers.\n\treportSelection: function(footprint, ev) {\n\t\tthis.isSelected = true;\n\t\tthis.triggerSelect(footprint, ev);\n\t},\n\n\n\t// Triggers handlers to 'select'\n\ttriggerSelect: function(footprint, ev) {\n\t\tvar dateProfile = this.calendar.footprintToDateProfile(footprint); // abuse of \"Event\"DateProfile?\n\n\t\tthis.publiclyTrigger('select', {\n\t\t\tcontext: this,\n\t\t\targs: [\n\t\t\t\tdateProfile.start,\n\t\t\t\tdateProfile.end,\n\t\t\t\tev,\n\t\t\t\tthis\n\t\t\t]\n\t\t});\n\t},\n\n\n\t// Undoes a selection. updates in the internal state and triggers handlers.\n\t// `ev` is the native mouse event that began the interaction.\n\tunselect: function(ev) {\n\t\tif (this.isSelected) {\n\t\t\tthis.isSelected = false;\n\t\t\tif (this.destroySelection) {\n\t\t\t\tthis.destroySelection(); // TODO: deprecate\n\t\t\t}\n\t\t\tthis.unrenderSelection();\n\t\t\tthis.publiclyTrigger('unselect', {\n\t\t\t\tcontext: this,\n\t\t\t\targs: [ ev, this ]\n\t\t\t});\n\t\t}\n\t},\n\n\n\t/* Event Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tselectEventInstance: function(eventInstance) {\n\t\tif (\n\t\t\t!this.selectedEventInstance ||\n\t\t\tthis.selectedEventInstance !== eventInstance\n\t\t) {\n\t\t\tthis.unselectEventInstance();\n\n\t\t\tthis.getEventSegs().forEach(function(seg) {\n\t\t\t\tif (\n\t\t\t\t\tseg.footprint.eventInstance === eventInstance &&\n\t\t\t\t\tseg.el // necessary?\n\t\t\t\t) {\n\t\t\t\t\tseg.el.addClass('fc-selected');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.selectedEventInstance = eventInstance;\n\t\t}\n\t},\n\n\n\tunselectEventInstance: function() {\n\t\tif (this.selectedEventInstance) {\n\n\t\t\tthis.getEventSegs().forEach(function(seg) {\n\t\t\t\tif (seg.el) { // necessary?\n\t\t\t\t\tseg.el.removeClass('fc-selected');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.selectedEventInstance = null;\n\t\t}\n\t},\n\n\n\tisEventDefSelected: function(eventDef) {\n\t\t// event references might change on refetchEvents(), while selectedEventInstance doesn't,\n\t\t// so compare IDs\n\t\treturn this.selectedEventInstance && this.selectedEventInstance.def.id === eventDef.id;\n\t},\n\n\n\t/* Mouse / Touch Unselecting (time range & event unselection)\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// TODO: move consistently to down/start or up/end?\n\t// TODO: don't kill previous selection if touch scrolling\n\n\n\thandleDocumentMousedown: function(ev) {\n\t\tif (isPrimaryMouseButton(ev)) {\n\t\t\tthis.processUnselect(ev);\n\t\t}\n\t},\n\n\n\tprocessUnselect: function(ev) {\n\t\tthis.processRangeUnselect(ev);\n\t\tthis.processEventUnselect(ev);\n\t},\n\n\n\tprocessRangeUnselect: function(ev) {\n\t\tvar ignore;\n\n\t\t// is there a time-range selection?\n\t\tif (this.isSelected && this.opt('unselectAuto')) {\n\t\t\t// only unselect if the clicked element is not identical to or inside of an 'unselectCancel' element\n\t\t\tignore = this.opt('unselectCancel');\n\t\t\tif (!ignore || !$(ev.target).closest(ignore).length) {\n\t\t\t\tthis.unselect(ev);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tprocessEventUnselect: function(ev) {\n\t\tif (this.selectedEventInstance) {\n\t\t\tif (!$(ev.target).closest('.fc-selected').length) {\n\t\t\t\tthis.unselectEventInstance();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/* Triggers\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\ttriggerBaseRendered: function() {\n\t\tthis.publiclyTrigger('viewRender', {\n\t\t\tcontext: this,\n\t\t\targs: [ this, this.el ]\n\t\t});\n\t},\n\n\n\ttriggerBaseUnrendered: function() {\n\t\tthis.publiclyTrigger('viewDestroy', {\n\t\t\tcontext: this,\n\t\t\targs: [ this, this.el ]\n\t\t});\n\t},\n\n\n\t// Triggers handlers to 'dayClick'\n\t// Span has start/end of the clicked area. Only the start is useful.\n\ttriggerDayClick: function(footprint, dayEl, ev) {\n\t\tvar dateProfile = this.calendar.footprintToDateProfile(footprint); // abuse of \"Event\"DateProfile?\n\n\t\tthis.publiclyTrigger('dayClick', {\n\t\t\tcontext: dayEl,\n\t\t\targs: [ dateProfile.start, ev, this ]\n\t\t});\n\t}\n\n});\n\n\nView.watch('displayingDates', [ 'isInDom', 'dateProfile' ], function(deps) {\n\tthis.requestDateRender(deps.dateProfile);\n}, function() {\n\tthis.requestDateUnrender();\n});\n\n\nView.watch('displayingBusinessHours', [ 'displayingDates', 'businessHourGenerator' ], function(deps) {\n\tthis.requestBusinessHoursRender(deps.businessHourGenerator);\n}, function() {\n\tthis.requestBusinessHoursUnrender();\n});\n\n\nView.watch('initialEvents', [ 'dateProfile' ], function(deps) {\n\treturn this.fetchInitialEvents(deps.dateProfile);\n});\n\n\nView.watch('bindingEvents', [ 'initialEvents' ], function(deps) {\n\tthis.setEvents(deps.initialEvents);\n\tthis.bindEventChanges();\n}, function() {\n\tthis.unbindEventChanges();\n\tthis.unsetEvents();\n});\n\n\nView.watch('displayingEvents', [ 'displayingDates', 'hasEvents' ], function() {\n\tthis.requestEventsRender(this.get('currentEvents'));\n}, function() {\n\tthis.requestEventsUnrender();\n});\n\n\nView.watch('title', [ 'dateProfile' ], function(deps) {\n\treturn (this.title = this.computeTitle(deps.dateProfile)); // assign to View for legacy reasons\n});\n\n\nView.watch('legacyDateProps', [ 'dateProfile' ], function(deps) {\n\tvar calendar = this.calendar;\n\tvar dateProfile = deps.dateProfile;\n\n\t// DEPRECATED, but we need to keep it updated...\n\tthis.start = calendar.msToMoment(dateProfile.activeUnzonedRange.startMs, dateProfile.isRangeAllDay);\n\tthis.end = calendar.msToMoment(dateProfile.activeUnzonedRange.endMs, dateProfile.isRangeAllDay);\n\tthis.intervalStart = calendar.msToMoment(dateProfile.currentUnzonedRange.startMs, dateProfile.isRangeAllDay);\n\tthis.intervalEnd = calendar.msToMoment(dateProfile.currentUnzonedRange.endMs, dateProfile.isRangeAllDay);\n});\n\n;;\n\nView.mixin({\n\n\tusesMinMaxTime: false, // whether minTime/maxTime will affect the activeUnzonedRange. Views must opt-in.\n\n\t// DEPRECATED\n\tstart: null, // use activeUnzonedRange\n\tend: null, // use activeUnzonedRange\n\tintervalStart: null, // use currentUnzonedRange\n\tintervalEnd: null, // use currentUnzonedRange\n\n\n\t/* Date Range Computation\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n\tbuildPrevDateProfile: function(date) {\n\t\tvar dateProfile = this.get('dateProfile');\n\t\tvar prevDate = date.clone().startOf(dateProfile.currentRangeUnit)\n\t\t\t.subtract(dateProfile.dateIncrement);\n\n\t\treturn this.buildDateProfile(prevDate, -1);\n\t},\n\n\n\t// Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n\tbuildNextDateProfile: function(date) {\n\t\tvar dateProfile = this.get('dateProfile');\n\t\tvar nextDate = date.clone().startOf(dateProfile.currentRangeUnit)\n\t\t\t.add(dateProfile.dateIncrement);\n\n\t\treturn this.buildDateProfile(nextDate, 1);\n\t},\n\n\n\t// Builds a structure holding dates/ranges for rendering around the given date.\n\t// Optional direction param indicates whether the date is being incremented/decremented\n\t// from its previous value. decremented = -1, incremented = 1 (default).\n\tbuildDateProfile: function(date, direction, forceToValid) {\n\t\tvar isDateAllDay = !date.hasTime();\n\t\tvar validUnzonedRange;\n\t\tvar minTime = null;\n\t\tvar maxTime = null;\n\t\tvar currentInfo;\n\t\tvar isRangeAllDay;\n\t\tvar renderUnzonedRange;\n\t\tvar activeUnzonedRange;\n\t\tvar isValid;\n\n\t\tvalidUnzonedRange = this.buildValidRange();\n\t\tvalidUnzonedRange = this.trimHiddenDays(validUnzonedRange);\n\n\t\tif (forceToValid) {\n\t\t\tdate = this.calendar.msToUtcMoment(\n\t\t\t\tvalidUnzonedRange.constrainDate(date), // returns MS\n\t\t\t\tisDateAllDay\n\t\t\t);\n\t\t}\n\n\t\tcurrentInfo = this.buildCurrentRangeInfo(date, direction);\n\t\tisRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n\t\trenderUnzonedRange = this.buildRenderRange(\n\t\t\tthis.trimHiddenDays(currentInfo.unzonedRange),\n\t\t\tcurrentInfo.unit,\n\t\t\tisRangeAllDay\n\t\t);\n\t\trenderUnzonedRange = this.trimHiddenDays(renderUnzonedRange);\n\t\tactiveUnzonedRange = renderUnzonedRange.clone();\n\n\t\tif (!this.opt('showNonCurrentDates')) {\n\t\t\tactiveUnzonedRange = activeUnzonedRange.intersect(currentInfo.unzonedRange);\n\t\t}\n\n\t\tminTime = moment.duration(this.opt('minTime'));\n\t\tmaxTime = moment.duration(this.opt('maxTime'));\n\t\tactiveUnzonedRange = this.adjustActiveRange(activeUnzonedRange, minTime, maxTime);\n\t\tactiveUnzonedRange = activeUnzonedRange.intersect(validUnzonedRange); // might return null\n\n\t\tif (activeUnzonedRange) {\n\t\t\tdate = this.calendar.msToUtcMoment(\n\t\t\t\tactiveUnzonedRange.constrainDate(date), // returns MS\n\t\t\t\tisDateAllDay\n\t\t\t);\n\t\t}\n\n\t\t// it's invalid if the originally requested date is not contained,\n\t\t// or if the range is completely outside of the valid range.\n\t\tisValid = currentInfo.unzonedRange.intersectsWith(validUnzonedRange);\n\n\t\treturn {\n\t\t\t// constraint for where prev/next operations can go and where events can be dragged/resized to.\n\t\t\t// an object with optional start and end properties.\n\t\t\tvalidUnzonedRange: validUnzonedRange,\n\n\t\t\t// range the view is formally responsible for.\n\t\t\t// for example, a month view might have 1st-31st, excluding padded dates\n\t\t\tcurrentUnzonedRange: currentInfo.unzonedRange,\n\n\t\t\t// name of largest unit being displayed, like \"month\" or \"week\"\n\t\t\tcurrentRangeUnit: currentInfo.unit,\n\n\t\t\tisRangeAllDay: isRangeAllDay,\n\n\t\t\t// dates that display events and accept drag-n-drop\n\t\t\t// will be `null` if no dates accept events\n\t\t\tactiveUnzonedRange: activeUnzonedRange,\n\n\t\t\t// date range with a rendered skeleton\n\t\t\t// includes not-active days that need some sort of DOM\n\t\t\trenderUnzonedRange: renderUnzonedRange,\n\n\t\t\t// Duration object that denotes the first visible time of any given day\n\t\t\tminTime: minTime,\n\n\t\t\t// Duration object that denotes the exclusive visible end time of any given day\n\t\t\tmaxTime: maxTime,\n\n\t\t\tisValid: isValid,\n\n\t\t\tdate: date,\n\n\t\t\t// how far the current date will move for a prev/next operation\n\t\t\tdateIncrement: this.buildDateIncrement(currentInfo.duration)\n\t\t\t\t// pass a fallback (might be null) ^\n\t\t};\n\t},\n\n\n\t// Builds an object with optional start/end properties.\n\t// Indicates the minimum/maximum dates to display.\n\t// not responsible for trimming hidden days.\n\tbuildValidRange: function() {\n\t\treturn this.getUnzonedRangeOption('validRange', this.calendar.getNow()) ||\n\t\t\tnew UnzonedRange(); // completely open-ended\n\t},\n\n\n\t// Builds a structure with info about the \"current\" range, the range that is\n\t// highlighted as being the current month for example.\n\t// See buildDateProfile for a description of `direction`.\n\t// Guaranteed to have `range` and `unit` properties. `duration` is optional.\n\t// TODO: accept a MS-time instead of a moment `date`?\n\tbuildCurrentRangeInfo: function(date, direction) {\n\t\tvar duration = null;\n\t\tvar unit = null;\n\t\tvar unzonedRange = null;\n\t\tvar dayCount;\n\n\t\tif (this.viewSpec.duration) {\n\t\t\tduration = this.viewSpec.duration;\n\t\t\tunit = this.viewSpec.durationUnit;\n\t\t\tunzonedRange = this.buildRangeFromDuration(date, direction, duration, unit);\n\t\t}\n\t\telse if ((dayCount = this.opt('dayCount'))) {\n\t\t\tunit = 'day';\n\t\t\tunzonedRange = this.buildRangeFromDayCount(date, direction, dayCount);\n\t\t}\n\t\telse if ((unzonedRange = this.buildCustomVisibleRange(date))) {\n\t\t\tunit = computeGreatestUnit(unzonedRange.getStart(), unzonedRange.getEnd());\n\t\t}\n\t\telse {\n\t\t\tduration = this.getFallbackDuration();\n\t\t\tunit = computeGreatestUnit(duration);\n\t\t\tunzonedRange = this.buildRangeFromDuration(date, direction, duration, unit);\n\t\t}\n\n\t\treturn { duration: duration, unit: unit, unzonedRange: unzonedRange };\n\t},\n\n\n\tgetFallbackDuration: function() {\n\t\treturn moment.duration({ days: 1 });\n\t},\n\n\n\t// Returns a new activeUnzonedRange to have time values (un-ambiguate)\n\t// minTime or maxTime causes the range to expand.\n\tadjustActiveRange: function(unzonedRange, minTime, maxTime) {\n\t\tvar start = unzonedRange.getStart();\n\t\tvar end = unzonedRange.getEnd();\n\n\t\tif (this.usesMinMaxTime) {\n\n\t\t\tif (minTime < 0) {\n\t\t\t\tstart.time(0).add(minTime);\n\t\t\t}\n\n\t\t\tif (maxTime > 24 * 60 * 60 * 1000) { // beyond 24 hours?\n\t\t\t\tend.time(maxTime - (24 * 60 * 60 * 1000));\n\t\t\t}\n\t\t}\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\t// Builds the \"current\" range when it is specified as an explicit duration.\n\t// `unit` is the already-computed computeGreatestUnit value of duration.\n\t// TODO: accept a MS-time instead of a moment `date`?\n\tbuildRangeFromDuration: function(date, direction, duration, unit) {\n\t\tvar alignment = this.opt('dateAlignment');\n\t\tvar start = date.clone();\n\t\tvar end;\n\t\tvar dateIncrementInput;\n\t\tvar dateIncrementDuration;\n\n\t\t// if the view displays a single day or smaller\n\t\tif (duration.as('days') <= 1) {\n\t\t\tif (this.isHiddenDay(start)) {\n\t\t\t\tstart = this.skipHiddenDays(start, direction);\n\t\t\t\tstart.startOf('day');\n\t\t\t}\n\t\t}\n\n\t\t// compute what the alignment should be\n\t\tif (!alignment) {\n\t\t\tdateIncrementInput = this.opt('dateIncrement');\n\n\t\t\tif (dateIncrementInput) {\n\t\t\t\tdateIncrementDuration = moment.duration(dateIncrementInput);\n\n\t\t\t\t// use the smaller of the two units\n\t\t\t\tif (dateIncrementDuration < duration) {\n\t\t\t\t\talignment = computeDurationGreatestUnit(dateIncrementDuration, dateIncrementInput);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\talignment = unit;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\talignment = unit;\n\t\t\t}\n\t\t}\n\n\t\tstart.startOf(alignment);\n\t\tend = start.clone().add(duration);\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\t// Builds the \"current\" range when a dayCount is specified.\n\t// TODO: accept a MS-time instead of a moment `date`?\n\tbuildRangeFromDayCount: function(date, direction, dayCount) {\n\t\tvar customAlignment = this.opt('dateAlignment');\n\t\tvar runningCount = 0;\n\t\tvar start = date.clone();\n\t\tvar end;\n\n\t\tif (customAlignment) {\n\t\t\tstart.startOf(customAlignment);\n\t\t}\n\n\t\tstart.startOf('day');\n\t\tstart = this.skipHiddenDays(start, direction);\n\n\t\tend = start.clone();\n\t\tdo {\n\t\t\tend.add(1, 'day');\n\t\t\tif (!this.isHiddenDay(end)) {\n\t\t\t\trunningCount++;\n\t\t\t}\n\t\t} while (runningCount < dayCount);\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\t// Builds a normalized range object for the \"visible\" range,\n\t// which is a way to define the currentUnzonedRange and activeUnzonedRange at the same time.\n\t// TODO: accept a MS-time instead of a moment `date`?\n\tbuildCustomVisibleRange: function(date) {\n\t\tvar visibleUnzonedRange = this.getUnzonedRangeOption(\n\t\t\t'visibleRange',\n\t\t\tthis.calendar.applyTimezone(date) // correct zone. also generates new obj that avoids mutations\n\t\t);\n\n\t\tif (visibleUnzonedRange && (visibleUnzonedRange.startMs === null || visibleUnzonedRange.endMs === null)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn visibleUnzonedRange;\n\t},\n\n\n\t// Computes the range that will represent the element/cells for *rendering*,\n\t// but which may have voided days/times.\n\t// not responsible for trimming hidden days.\n\tbuildRenderRange: function(currentUnzonedRange, currentRangeUnit, isRangeAllDay) {\n\t\treturn currentUnzonedRange.clone();\n\t},\n\n\n\t// Compute the duration value that should be added/substracted to the current date\n\t// when a prev/next operation happens.\n\tbuildDateIncrement: function(fallback) {\n\t\tvar dateIncrementInput = this.opt('dateIncrement');\n\t\tvar customAlignment;\n\n\t\tif (dateIncrementInput) {\n\t\t\treturn moment.duration(dateIncrementInput);\n\t\t}\n\t\telse if ((customAlignment = this.opt('dateAlignment'))) {\n\t\t\treturn moment.duration(1, customAlignment);\n\t\t}\n\t\telse if (fallback) {\n\t\t\treturn fallback;\n\t\t}\n\t\telse {\n\t\t\treturn moment.duration({ days: 1 });\n\t\t}\n\t},\n\n\n\t// Remove days from the beginning and end of the range that are computed as hidden.\n\ttrimHiddenDays: function(inputUnzonedRange) {\n\t\tvar start = inputUnzonedRange.getStart();\n\t\tvar end = inputUnzonedRange.getEnd();\n\n\t\tif (start) {\n\t\t\tstart = this.skipHiddenDays(start);\n\t\t}\n\n\t\tif (end) {\n\t\t\tend = this.skipHiddenDays(end, -1, true);\n\t\t}\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\t// For DateComponent::getDayClasses\n\tisDateInOtherMonth: function(date, dateProfile) {\n\t\treturn false;\n\t},\n\n\n\t// Arguments after name will be forwarded to a hypothetical function value\n\t// WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n\t// Always clone your objects if you fear mutation.\n\tgetUnzonedRangeOption: function(name) {\n\t\tvar val = this.opt(name);\n\n\t\tif (typeof val === 'function') {\n\t\t\tval = val.apply(\n\t\t\t\tnull,\n\t\t\t\tArray.prototype.slice.call(arguments, 1)\n\t\t\t);\n\t\t}\n\n\t\tif (val) {\n\t\t\treturn this.calendar.parseUnzonedRange(val);\n\t\t}\n\t},\n\n\n\t/* Hidden Days\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Initializes internal variables related to calculating hidden days-of-week\n\tinitHiddenDays: function() {\n\t\tvar hiddenDays = this.opt('hiddenDays') || []; // array of day-of-week indices that are hidden\n\t\tvar isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n\t\tvar dayCnt = 0;\n\t\tvar i;\n\n\t\tif (this.opt('weekends') === false) {\n\t\t\thiddenDays.push(0, 6); // 0=sunday, 6=saturday\n\t\t}\n\n\t\tfor (i = 0; i < 7; i++) {\n\t\t\tif (\n\t\t\t\t!(isHiddenDayHash[i] = $.inArray(i, hiddenDays) !== -1)\n\t\t\t) {\n\t\t\t\tdayCnt++;\n\t\t\t}\n\t\t}\n\n\t\tif (!dayCnt) {\n\t\t\tthrow 'invalid hiddenDays'; // all days were hidden? bad.\n\t\t}\n\n\t\tthis.isHiddenDayHash = isHiddenDayHash;\n\t},\n\n\n\t// Is the current day hidden?\n\t// `day` is a day-of-week index (0-6), or a Moment\n\tisHiddenDay: function(day) {\n\t\tif (moment.isMoment(day)) {\n\t\t\tday = day.day();\n\t\t}\n\t\treturn this.isHiddenDayHash[day];\n\t},\n\n\n\t// Incrementing the current day until it is no longer a hidden day, returning a copy.\n\t// DOES NOT CONSIDER validUnzonedRange!\n\t// If the initial value of `date` is not a hidden day, don't do anything.\n\t// Pass `isExclusive` as `true` if you are dealing with an end date.\n\t// `inc` defaults to `1` (increment one day forward each time)\n\tskipHiddenDays: function(date, inc, isExclusive) {\n\t\tvar out = date.clone();\n\t\tinc = inc || 1;\n\t\twhile (\n\t\t\tthis.isHiddenDayHash[(out.day() + (isExclusive ? inc : 0) + 7) % 7]\n\t\t) {\n\t\t\tout.add(inc, 'days');\n\t\t}\n\t\treturn out;\n\t}\n\n});\n\n;;\n\n/* Toolbar with buttons and title\n----------------------------------------------------------------------------------------------------------------------*/\n\nfunction Toolbar(calendar, toolbarOptions) {\n\tvar t = this;\n\n\t// exports\n\tt.setToolbarOptions = setToolbarOptions;\n\tt.render = render;\n\tt.removeElement = removeElement;\n\tt.updateTitle = updateTitle;\n\tt.activateButton = activateButton;\n\tt.deactivateButton = deactivateButton;\n\tt.disableButton = disableButton;\n\tt.enableButton = enableButton;\n\tt.getViewsWithButtons = getViewsWithButtons;\n\tt.el = null; // mirrors local `el`\n\n\t// locals\n\tvar el;\n\tvar viewsWithButtons = [];\n\n\t// method to update toolbar-specific options, not calendar-wide options\n\tfunction setToolbarOptions(newToolbarOptions) {\n\t\ttoolbarOptions = newToolbarOptions;\n\t}\n\n\t// can be called repeatedly and will rerender\n\tfunction render() {\n\t\tvar sections = toolbarOptions.layout;\n\n\t\tif (sections) {\n\t\t\tif (!el) {\n\t\t\t\tel = this.el = $(\"<div class='fc-toolbar \"+ toolbarOptions.extraClasses + \"'/>\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tel.empty();\n\t\t\t}\n\t\t\tel.append(renderSection('left'))\n\t\t\t\t.append(renderSection('right'))\n\t\t\t\t.append(renderSection('center'))\n\t\t\t\t.append('<div class=\"fc-clear\"/>');\n\t\t}\n\t\telse {\n\t\t\tremoveElement();\n\t\t}\n\t}\n\n\n\tfunction removeElement() {\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t\tel = t.el = null;\n\t\t}\n\t}\n\n\n\tfunction renderSection(position) {\n\t\tvar theme = calendar.theme;\n\t\tvar sectionEl = $('<div class=\"fc-' + position + '\"/>');\n\t\tvar buttonStr = toolbarOptions.layout[position];\n\t\tvar calendarCustomButtons = calendar.opt('customButtons') || {};\n\t\tvar calendarButtonTextOverrides = calendar.overrides.buttonText || {};\n\t\tvar calendarButtonText = calendar.opt('buttonText') || {};\n\n\t\tif (buttonStr) {\n\t\t\t$.each(buttonStr.split(' '), function(i) {\n\t\t\t\tvar groupChildren = $();\n\t\t\t\tvar isOnlyButtons = true;\n\t\t\t\tvar groupEl;\n\n\t\t\t\t$.each(this.split(','), function(j, buttonName) {\n\t\t\t\t\tvar customButtonProps;\n\t\t\t\t\tvar viewSpec;\n\t\t\t\t\tvar buttonClick;\n\t\t\t\t\tvar buttonIcon; // only one of these will be set\n\t\t\t\t\tvar buttonText; // \"\n\t\t\t\t\tvar buttonInnerHtml;\n\t\t\t\t\tvar buttonClasses;\n\t\t\t\t\tvar buttonEl;\n\n\t\t\t\t\tif (buttonName == 'title') {\n\t\t\t\t\t\tgroupChildren = groupChildren.add($('<h2>&nbsp;</h2>')); // we always want it to take up height\n\t\t\t\t\t\tisOnlyButtons = false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\n\t\t\t\t\t\tif ((customButtonProps = calendarCustomButtons[buttonName])) {\n\t\t\t\t\t\t\tbuttonClick = function(ev) {\n\t\t\t\t\t\t\t\tif (customButtonProps.click) {\n\t\t\t\t\t\t\t\t\tcustomButtonProps.click.call(buttonEl[0], ev);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t(buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n\t\t\t\t\t\t\t(buttonIcon = theme.getIconClass(buttonName)) ||\n\t\t\t\t\t\t\t(buttonText = customButtonProps.text); // jshint ignore:line\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if ((viewSpec = calendar.getViewSpec(buttonName))) {\n\t\t\t\t\t\t\tviewsWithButtons.push(buttonName);\n\t\t\t\t\t\t\tbuttonClick = function() {\n\t\t\t\t\t\t\t\tcalendar.changeView(buttonName);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t(buttonText = viewSpec.buttonTextOverride) ||\n\t\t\t\t\t\t\t(buttonIcon = theme.getIconClass(buttonName)) ||\n\t\t\t\t\t\t\t(buttonText = viewSpec.buttonTextDefault); // jshint ignore:line\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (calendar[buttonName]) { // a calendar method\n\t\t\t\t\t\t\tbuttonClick = function() {\n\t\t\t\t\t\t\t\tcalendar[buttonName]();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t(buttonText = calendarButtonTextOverrides[buttonName]) ||\n\t\t\t\t\t\t\t(buttonIcon = theme.getIconClass(buttonName)) ||\n\t\t\t\t\t\t\t(buttonText = calendarButtonText[buttonName]); // jshint ignore:line\n\t\t\t\t\t\t\t//            ^ everything else is considered default\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (buttonClick) {\n\n\t\t\t\t\t\t\tbuttonClasses = [\n\t\t\t\t\t\t\t\t'fc-' + buttonName + '-button',\n\t\t\t\t\t\t\t\ttheme.getClass('button'),\n\t\t\t\t\t\t\t\ttheme.getClass('stateDefault')\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tif (buttonText) {\n\t\t\t\t\t\t\t\tbuttonInnerHtml = htmlEscape(buttonText);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (buttonIcon) {\n\t\t\t\t\t\t\t\tbuttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbuttonEl = $( // type=\"button\" so that it doesn't submit a form\n\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\">' +\n\t\t\t\t\t\t\t\t\tbuttonInnerHtml +\n\t\t\t\t\t\t\t\t'</button>'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.click(function(ev) {\n\t\t\t\t\t\t\t\t\t// don't process clicks for disabled buttons\n\t\t\t\t\t\t\t\t\tif (!buttonEl.hasClass(theme.getClass('stateDisabled'))) {\n\n\t\t\t\t\t\t\t\t\t\tbuttonClick(ev);\n\n\t\t\t\t\t\t\t\t\t\t// after the click action, if the button becomes the \"active\" tab, or disabled,\n\t\t\t\t\t\t\t\t\t\t// it should never have a hover class, so remove it now.\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tbuttonEl.hasClass(theme.getClass('stateActive')) ||\n\t\t\t\t\t\t\t\t\t\t\tbuttonEl.hasClass(theme.getClass('stateDisabled'))\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tbuttonEl.removeClass(theme.getClass('stateHover'));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.mousedown(function() {\n\t\t\t\t\t\t\t\t\t// the *down* effect (mouse pressed in).\n\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\n\t\t\t\t\t\t\t\t\tbuttonEl\n\t\t\t\t\t\t\t\t\t\t.not('.' + theme.getClass('stateActive'))\n\t\t\t\t\t\t\t\t\t\t.not('.' + theme.getClass('stateDisabled'))\n\t\t\t\t\t\t\t\t\t\t.addClass(theme.getClass('stateDown'));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.mouseup(function() {\n\t\t\t\t\t\t\t\t\t// undo the *down* effect\n\t\t\t\t\t\t\t\t\tbuttonEl.removeClass(theme.getClass('stateDown'));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.hover(\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t// the *hover* effect.\n\t\t\t\t\t\t\t\t\t\t// only on buttons that are not the \"active\" tab, or disabled\n\t\t\t\t\t\t\t\t\t\tbuttonEl\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + theme.getClass('stateActive'))\n\t\t\t\t\t\t\t\t\t\t\t.not('.' + theme.getClass('stateDisabled'))\n\t\t\t\t\t\t\t\t\t\t\t.addClass(theme.getClass('stateHover'));\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\t// undo the *hover* effect\n\t\t\t\t\t\t\t\t\t\tbuttonEl\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(theme.getClass('stateHover'))\n\t\t\t\t\t\t\t\t\t\t\t.removeClass(theme.getClass('stateDown')); // if mouseleave happens before mouseup\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tgroupChildren = groupChildren.add(buttonEl);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (isOnlyButtons) {\n\t\t\t\t\tgroupChildren\n\t\t\t\t\t\t.first().addClass(theme.getClass('cornerLeft')).end()\n\t\t\t\t\t\t.last().addClass(theme.getClass('cornerRight')).end();\n\t\t\t\t}\n\n\t\t\t\tif (groupChildren.length > 1) {\n\t\t\t\t\tgroupEl = $('<div/>');\n\t\t\t\t\tif (isOnlyButtons) {\n\t\t\t\t\t\tgroupEl.addClass(theme.getClass('buttonGroup'));\n\t\t\t\t\t}\n\t\t\t\t\tgroupEl.append(groupChildren);\n\t\t\t\t\tsectionEl.append(groupEl);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsectionEl.append(groupChildren); // 1 or 0 children\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn sectionEl;\n\t}\n\n\n\tfunction updateTitle(text) {\n\t\tif (el) {\n\t\t\tel.find('h2').text(text);\n\t\t}\n\t}\n\n\n\tfunction activateButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.addClass(calendar.theme.getClass('stateActive'));\n\t\t}\n\t}\n\n\n\tfunction deactivateButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.removeClass(calendar.theme.getClass('stateActive'));\n\t\t}\n\t}\n\n\n\tfunction disableButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.prop('disabled', true)\n\t\t\t\t.addClass(calendar.theme.getClass('stateDisabled'));\n\t\t}\n\t}\n\n\n\tfunction enableButton(buttonName) {\n\t\tif (el) {\n\t\t\tel.find('.fc-' + buttonName + '-button')\n\t\t\t\t.prop('disabled', false)\n\t\t\t\t.removeClass(calendar.theme.getClass('stateDisabled'));\n\t\t}\n\t}\n\n\n\tfunction getViewsWithButtons() {\n\t\treturn viewsWithButtons;\n\t}\n\n}\n\n;;\n\nvar Calendar = FC.Calendar = Class.extend(EmitterMixin, ListenerMixin, {\n\n\tview: null, // current View object\n\tviewsByType: null, // holds all instantiated view instances, current or not\n\tcurrentDate: null, // unzoned moment. private (public API should use getDate instead)\n\ttheme: null,\n\tbusinessHourGenerator: null,\n\tloadingLevel: 0, // number of simultaneous loading tasks\n\n\n\tconstructor: function(el, overrides) {\n\n\t\t// declare the current calendar instance relies on GlobalEmitter. needed for garbage collection.\n\t\t// unneeded() is called in destroy.\n\t\tGlobalEmitter.needed();\n\n\t\tthis.el = el;\n\t\tthis.viewsByType = {};\n\t\tthis.viewSpecCache = {};\n\n\t\tthis.initOptionsInternals(overrides);\n\t\tthis.initMomentInternals(); // needs to happen after options hash initialized\n\t\tthis.initCurrentDate();\n\t\tthis.initEventManager();\n\n\t\tthis.constructed();\n\t},\n\n\n\t// useful for monkeypatching. TODO: BaseClass?\n\tconstructed: function() {\n\t},\n\n\n\t// Public API\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tgetView: function() {\n\t\treturn this.view;\n\t},\n\n\n\tpubliclyTrigger: function(name, triggerInfo) {\n\t\tvar optHandler = this.opt(name);\n\t\tvar context;\n\t\tvar args;\n\n\t\tif ($.isPlainObject(triggerInfo)) {\n\t\t\tcontext = triggerInfo.context;\n\t\t\targs = triggerInfo.args;\n\t\t}\n\t\telse if ($.isArray(triggerInfo)) {\n\t\t\targs = triggerInfo;\n\t\t}\n\n\t\tif (context == null) {\n\t\t\tcontext = this.el[0]; // fallback context\n\t\t}\n\n\t\tif (!args) {\n\t\t\targs = [];\n\t\t}\n\n\t\tthis.triggerWith(name, context, args); // Emitter's method\n\n\t\tif (optHandler) {\n\t\t\treturn optHandler.apply(context, args);\n\t\t}\n\t},\n\n\n\thasPublicHandlers: function(name) {\n\t\treturn this.hasHandlers(name) ||\n\t\t\tthis.opt(name); // handler specified in options\n\t},\n\n\n\t// View\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Given a view name for a custom view or a standard view, creates a ready-to-go View object\n\tinstantiateView: function(viewType) {\n\t\tvar spec = this.getViewSpec(viewType);\n\n\t\treturn new spec['class'](this, spec);\n\t},\n\n\n\t// Returns a boolean about whether the view is okay to instantiate at some point\n\tisValidViewType: function(viewType) {\n\t\treturn Boolean(this.getViewSpec(viewType));\n\t},\n\n\n\tchangeView: function(viewName, dateOrRange) {\n\n\t\tif (dateOrRange) {\n\n\t\t\tif (dateOrRange.start && dateOrRange.end) { // a range\n\t\t\t\tthis.recordOptionOverrides({ // will not rerender\n\t\t\t\t\tvisibleRange: dateOrRange\n\t\t\t\t});\n\t\t\t}\n\t\t\telse { // a date\n\t\t\t\tthis.currentDate = this.moment(dateOrRange).stripZone(); // just like gotoDate\n\t\t\t}\n\t\t}\n\n\t\tthis.renderView(viewName);\n\t},\n\n\n\t// Forces navigation to a view for the given date.\n\t// `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n\tzoomTo: function(newDate, viewType) {\n\t\tvar spec;\n\n\t\tviewType = viewType || 'day'; // day is default zoom\n\t\tspec = this.getViewSpec(viewType) || this.getUnitViewSpec(viewType);\n\n\t\tthis.currentDate = newDate.clone();\n\t\tthis.renderView(spec ? spec.type : null);\n\t},\n\n\n\t// Current Date\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tinitCurrentDate: function() {\n\t\tvar defaultDateInput = this.opt('defaultDate');\n\n\t\t// compute the initial ambig-timezone date\n\t\tif (defaultDateInput != null) {\n\t\t\tthis.currentDate = this.moment(defaultDateInput).stripZone();\n\t\t}\n\t\telse {\n\t\t\tthis.currentDate = this.getNow(); // getNow already returns unzoned\n\t\t}\n\t},\n\n\n\tprev: function() {\n\t\tvar prevInfo = this.view.buildPrevDateProfile(this.currentDate);\n\n\t\tif (prevInfo.isValid) {\n\t\t\tthis.currentDate = prevInfo.date;\n\t\t\tthis.renderView();\n\t\t}\n\t},\n\n\n\tnext: function() {\n\t\tvar nextInfo = this.view.buildNextDateProfile(this.currentDate);\n\n\t\tif (nextInfo.isValid) {\n\t\t\tthis.currentDate = nextInfo.date;\n\t\t\tthis.renderView();\n\t\t}\n\t},\n\n\n\tprevYear: function() {\n\t\tthis.currentDate.add(-1, 'years');\n\t\tthis.renderView();\n\t},\n\n\n\tnextYear: function() {\n\t\tthis.currentDate.add(1, 'years');\n\t\tthis.renderView();\n\t},\n\n\n\ttoday: function() {\n\t\tthis.currentDate = this.getNow(); // should deny like prev/next?\n\t\tthis.renderView();\n\t},\n\n\n\tgotoDate: function(zonedDateInput) {\n\t\tthis.currentDate = this.moment(zonedDateInput).stripZone();\n\t\tthis.renderView();\n\t},\n\n\n\tincrementDate: function(delta) {\n\t\tthis.currentDate.add(moment.duration(delta));\n\t\tthis.renderView();\n\t},\n\n\n\t// for external API\n\tgetDate: function() {\n\t\treturn this.applyTimezone(this.currentDate); // infuse the calendar's timezone\n\t},\n\n\n\t// Loading Triggering\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Should be called when any type of async data fetching begins\n\tpushLoading: function() {\n\t\tif (!(this.loadingLevel++)) {\n\t\t\tthis.publiclyTrigger('loading', [ true, this.view ]);\n\t\t}\n\t},\n\n\n\t// Should be called when any type of async data fetching completes\n\tpopLoading: function() {\n\t\tif (!(--this.loadingLevel)) {\n\t\t\tthis.publiclyTrigger('loading', [ false, this.view ]);\n\t\t}\n\t},\n\n\n\t// Selection\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// this public method receives start/end dates in any format, with any timezone\n\tselect: function(zonedStartInput, zonedEndInput) {\n\t\tthis.view.select(\n\t\t\tthis.buildSelectFootprint.apply(this, arguments)\n\t\t);\n\t},\n\n\n\tunselect: function() { // safe to be called before renderView\n\t\tif (this.view) {\n\t\t\tthis.view.unselect();\n\t\t}\n\t},\n\n\n\t// Given arguments to the select method in the API, returns a span (unzoned start/end and other info)\n\tbuildSelectFootprint: function(zonedStartInput, zonedEndInput) {\n\t\tvar start = this.moment(zonedStartInput).stripZone();\n\t\tvar end;\n\n\t\tif (zonedEndInput) {\n\t\t\tend = this.moment(zonedEndInput).stripZone();\n\t\t}\n\t\telse if (start.hasTime()) {\n\t\t\tend = start.clone().add(this.defaultTimedEventDuration);\n\t\t}\n\t\telse {\n\t\t\tend = start.clone().add(this.defaultAllDayEventDuration);\n\t\t}\n\n\t\treturn new ComponentFootprint(\n\t\t\tnew UnzonedRange(start, end),\n\t\t\t!start.hasTime()\n\t\t);\n\t},\n\n\n\t// Misc\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// will return `null` if invalid range\n\tparseUnzonedRange: function(rangeInput) {\n\t\tvar start = null;\n\t\tvar end = null;\n\n\t\tif (rangeInput.start) {\n\t\t\tstart = this.moment(rangeInput.start).stripZone();\n\t\t}\n\n\t\tif (rangeInput.end) {\n\t\t\tend = this.moment(rangeInput.end).stripZone();\n\t\t}\n\n\t\tif (!start && !end) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (start && end && end.isBefore(start)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\trerenderEvents: function() { // API method. destroys old events if previously rendered.\n\t\tthis.view.flash('displayingEvents');\n\t},\n\n\n\tinitEventManager: function() {\n\t\tvar _this = this;\n\t\tvar eventManager = new EventManager(this);\n\t\tvar rawSources = this.opt('eventSources') || [];\n\t\tvar singleRawSource = this.opt('events');\n\n\t\tthis.eventManager = eventManager;\n\n\t\tif (singleRawSource) {\n\t\t\trawSources.unshift(singleRawSource);\n\t\t}\n\n\t\teventManager.on('release', function(eventsPayload) {\n\t\t\t_this.trigger('eventsReset', eventsPayload);\n\t\t});\n\n\t\teventManager.freeze();\n\n\t\trawSources.forEach(function(rawSource) {\n\t\t\tvar source = EventSourceParser.parse(rawSource, _this);\n\n\t\t\tif (source) {\n\t\t\t\teventManager.addSource(source);\n\t\t\t}\n\t\t});\n\n\t\teventManager.thaw();\n\t},\n\n\n\trequestEvents: function(start, end) {\n\t\treturn this.eventManager.requestEvents(\n\t\t\tstart,\n\t\t\tend,\n\t\t\tthis.opt('timezone'),\n\t\t\t!this.opt('lazyFetching')\n\t\t);\n\t}\n\n});\n\n;;\n/*\nOptions binding/triggering system.\n*/\nCalendar.mixin({\n\n\tdirDefaults: null, // option defaults related to LTR or RTL\n\tlocaleDefaults: null, // option defaults related to current locale\n\toverrides: null, // option overrides given to the fullCalendar constructor\n\tdynamicOverrides: null, // options set with dynamic setter method. higher precedence than view overrides.\n\toptionsModel: null, // all defaults combined with overrides\n\n\n\tinitOptionsInternals: function(overrides) {\n\t\tthis.overrides = $.extend({}, overrides); // make a copy\n\t\tthis.dynamicOverrides = {};\n\t\tthis.optionsModel = new Model();\n\n\t\tthis.populateOptionsHash();\n\t},\n\n\n\t// public getter/setter\n\toption: function(name, value) {\n\t\tvar newOptionHash;\n\n\t\tif (typeof name === 'string') {\n\t\t\tif (value === undefined) { // getter\n\t\t\t\treturn this.optionsModel.get(name);\n\t\t\t}\n\t\t\telse { // setter for individual option\n\t\t\t\tnewOptionHash = {};\n\t\t\t\tnewOptionHash[name] = value;\n\t\t\t\tthis.setOptions(newOptionHash);\n\t\t\t}\n\t\t}\n\t\telse if (typeof name === 'object') { // compound setter with object input\n\t\t\tthis.setOptions(name);\n\t\t}\n\t},\n\n\n\t// private getter\n\topt: function(name) {\n\t\treturn this.optionsModel.get(name);\n\t},\n\n\n\tsetOptions: function(newOptionHash) {\n\t\tvar optionCnt = 0;\n\t\tvar optionName;\n\n\t\tthis.recordOptionOverrides(newOptionHash); // will trigger optionsModel watchers\n\n\t\tfor (optionName in newOptionHash) {\n\t\t\toptionCnt++;\n\t\t}\n\n\t\t// special-case handling of single option change.\n\t\t// if only one option change, `optionName` will be its name.\n\t\tif (optionCnt === 1) {\n\t\t\tif (optionName === 'height' || optionName === 'contentHeight' || optionName === 'aspectRatio') {\n\t\t\t\tthis.updateViewSize(true); // isResize=true\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (optionName === 'defaultDate') {\n\t\t\t\treturn; // can't change date this way. use gotoDate instead\n\t\t\t}\n\t\t\telse if (optionName === 'businessHours') {\n\t\t\t\treturn; // optionsModel already reacts to this\n\t\t\t}\n\t\t\telse if (optionName === 'timezone') {\n\t\t\t\tthis.view.flash('initialEvents');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// catch-all. rerender the header and footer and rebuild/rerender the current view\n\t\tthis.renderHeader();\n\t\tthis.renderFooter();\n\n\t\t// even non-current views will be affected by this option change. do before rerender\n\t\t// TODO: detangle\n\t\tthis.viewsByType = {};\n\n\t\tthis.reinitView();\n\t},\n\n\n\t// Computes the flattened options hash for the calendar and assigns to `this.options`.\n\t// Assumes this.overrides and this.dynamicOverrides have already been initialized.\n\tpopulateOptionsHash: function() {\n\t\tvar locale, localeDefaults;\n\t\tvar isRTL, dirDefaults;\n\t\tvar rawOptions;\n\n\t\tlocale = firstDefined( // explicit locale option given?\n\t\t\tthis.dynamicOverrides.locale,\n\t\t\tthis.overrides.locale\n\t\t);\n\t\tlocaleDefaults = localeOptionHash[locale];\n\t\tif (!localeDefaults) { // explicit locale option not given or invalid?\n\t\t\tlocale = Calendar.defaults.locale;\n\t\t\tlocaleDefaults = localeOptionHash[locale] || {};\n\t\t}\n\n\t\tisRTL = firstDefined( // based on options computed so far, is direction RTL?\n\t\t\tthis.dynamicOverrides.isRTL,\n\t\t\tthis.overrides.isRTL,\n\t\t\tlocaleDefaults.isRTL,\n\t\t\tCalendar.defaults.isRTL\n\t\t);\n\t\tdirDefaults = isRTL ? Calendar.rtlDefaults : {};\n\n\t\tthis.dirDefaults = dirDefaults;\n\t\tthis.localeDefaults = localeDefaults;\n\n\t\trawOptions = mergeOptions([ // merge defaults and overrides. lowest to highest precedence\n\t\t\tCalendar.defaults, // global defaults\n\t\t\tdirDefaults,\n\t\t\tlocaleDefaults,\n\t\t\tthis.overrides,\n\t\t\tthis.dynamicOverrides\n\t\t]);\n\t\tpopulateInstanceComputableOptions(rawOptions); // fill in gaps with computed options\n\n\t\tthis.optionsModel.reset(rawOptions);\n\t},\n\n\n\t// stores the new options internally, but does not rerender anything.\n\trecordOptionOverrides: function(newOptionHash) {\n\t\tvar optionName;\n\n\t\tfor (optionName in newOptionHash) {\n\t\t\tthis.dynamicOverrides[optionName] = newOptionHash[optionName];\n\t\t}\n\n\t\tthis.viewSpecCache = {}; // the dynamic override invalidates the options in this cache, so just clear it\n\t\tthis.populateOptionsHash(); // this.options needs to be recomputed after the dynamic override\n\t}\n\n});\n\n;;\n\nCalendar.mixin({\n\n\tdefaultAllDayEventDuration: null,\n\tdefaultTimedEventDuration: null,\n\tlocaleData: null,\n\n\n\tinitMomentInternals: function() {\n\t\tvar _this = this;\n\n\t\tthis.defaultAllDayEventDuration = moment.duration(this.opt('defaultAllDayEventDuration'));\n\t\tthis.defaultTimedEventDuration = moment.duration(this.opt('defaultTimedEventDuration'));\n\n\t\t// Called immediately, and when any of the options change.\n\t\t// Happens before any internal objects rebuild or rerender, because this is very core.\n\t\tthis.optionsModel.watch('buildingMomentLocale', [\n\t\t\t'?locale', '?monthNames', '?monthNamesShort', '?dayNames', '?dayNamesShort',\n\t\t\t'?firstDay', '?weekNumberCalculation'\n\t\t], function(opts) {\n\t\t\tvar weekNumberCalculation = opts.weekNumberCalculation;\n\t\t\tvar firstDay = opts.firstDay;\n\t\t\tvar _week;\n\n\t\t\t// normalize\n\t\t\tif (weekNumberCalculation === 'iso') {\n\t\t\t\tweekNumberCalculation = 'ISO'; // normalize\n\t\t\t}\n\n\t\t\tvar localeData = Object.create( // make a cheap copy\n\t\t\t\tgetMomentLocaleData(opts.locale) // will fall back to en\n\t\t\t);\n\n\t\t\tif (opts.monthNames) {\n\t\t\t\tlocaleData._months = opts.monthNames;\n\t\t\t}\n\t\t\tif (opts.monthNamesShort) {\n\t\t\t\tlocaleData._monthsShort = opts.monthNamesShort;\n\t\t\t}\n\t\t\tif (opts.dayNames) {\n\t\t\t\tlocaleData._weekdays = opts.dayNames;\n\t\t\t}\n\t\t\tif (opts.dayNamesShort) {\n\t\t\t\tlocaleData._weekdaysShort = opts.dayNamesShort;\n\t\t\t}\n\n\t\t\tif (firstDay == null && weekNumberCalculation === 'ISO') {\n\t\t\t\tfirstDay = 1;\n\t\t\t}\n\t\t\tif (firstDay != null) {\n\t\t\t\t_week = Object.create(localeData._week); // _week: { dow: # }\n\t\t\t\t_week.dow = firstDay;\n\t\t\t\tlocaleData._week = _week;\n\t\t\t}\n\n\t\t\tif ( // whitelist certain kinds of input\n\t\t\t\tweekNumberCalculation === 'ISO' ||\n\t\t\t\tweekNumberCalculation === 'local' ||\n\t\t\t\ttypeof weekNumberCalculation === 'function'\n\t\t\t) {\n\t\t\t\tlocaleData._fullCalendar_weekCalc = weekNumberCalculation; // moment-ext will know what to do with it\n\t\t\t}\n\n\t\t\t_this.localeData = localeData;\n\n\t\t\t// If the internal current date object already exists, move to new locale.\n\t\t\t// We do NOT need to do this technique for event dates, because this happens when converting to \"segments\".\n\t\t\tif (_this.currentDate) {\n\t\t\t\t_this.localizeMoment(_this.currentDate); // sets to localeData\n\t\t\t}\n\t\t});\n\t},\n\n\n\t// Builds a moment using the settings of the current calendar: timezone and locale.\n\t// Accepts anything the vanilla moment() constructor accepts.\n\tmoment: function() {\n\t\tvar mom;\n\n\t\tif (this.opt('timezone') === 'local') {\n\t\t\tmom = FC.moment.apply(null, arguments);\n\n\t\t\t// Force the moment to be local, because FC.moment doesn't guarantee it.\n\t\t\tif (mom.hasTime()) { // don't give ambiguously-timed moments a local zone\n\t\t\t\tmom.local();\n\t\t\t}\n\t\t}\n\t\telse if (this.opt('timezone') === 'UTC') {\n\t\t\tmom = FC.moment.utc.apply(null, arguments); // process as UTC\n\t\t}\n\t\telse {\n\t\t\tmom = FC.moment.parseZone.apply(null, arguments); // let the input decide the zone\n\t\t}\n\n\t\tthis.localizeMoment(mom); // TODO\n\n\t\treturn mom;\n\t},\n\n\n\tmsToMoment: function(ms, forceAllDay) {\n\t\tvar mom = FC.moment.utc(ms); // TODO: optimize by using Date.UTC\n\n\t\tif (forceAllDay) {\n\t\t\tmom.stripTime();\n\t\t}\n\t\telse {\n\t\t\tmom = this.applyTimezone(mom); // may or may not apply locale\n\t\t}\n\n\t\tthis.localizeMoment(mom);\n\n\t\treturn mom;\n\t},\n\n\n\tmsToUtcMoment: function(ms, forceAllDay) {\n\t\tvar mom = FC.moment.utc(ms); // TODO: optimize by using Date.UTC\n\n\t\tif (forceAllDay) {\n\t\t\tmom.stripTime();\n\t\t}\n\n\t\tthis.localizeMoment(mom);\n\n\t\treturn mom;\n\t},\n\n\n\t// Updates the given moment's locale settings to the current calendar locale settings.\n\tlocalizeMoment: function(mom) {\n\t\tmom._locale = this.localeData;\n\t},\n\n\n\t// Returns a boolean about whether or not the calendar knows how to calculate\n\t// the timezone offset of arbitrary dates in the current timezone.\n\tgetIsAmbigTimezone: function() {\n\t\treturn this.opt('timezone') !== 'local' && this.opt('timezone') !== 'UTC';\n\t},\n\n\n\t// Returns a copy of the given date in the current timezone. Has no effect on dates without times.\n\tapplyTimezone: function(date) {\n\t\tif (!date.hasTime()) {\n\t\t\treturn date.clone();\n\t\t}\n\n\t\tvar zonedDate = this.moment(date.toArray());\n\t\tvar timeAdjust = date.time() - zonedDate.time();\n\t\tvar adjustedZonedDate;\n\n\t\t// Safari sometimes has problems with this coersion when near DST. Adjust if necessary. (bug #2396)\n\t\tif (timeAdjust) { // is the time result different than expected?\n\t\t\tadjustedZonedDate = zonedDate.clone().add(timeAdjust); // add milliseconds\n\t\t\tif (date.time() - adjustedZonedDate.time() === 0) { // does it match perfectly now?\n\t\t\t\tzonedDate = adjustedZonedDate;\n\t\t\t}\n\t\t}\n\n\t\treturn zonedDate;\n\t},\n\n\n\t/*\n\tAssumes the footprint is non-open-ended.\n\t*/\n\tfootprintToDateProfile: function(componentFootprint, ignoreEnd) {\n\t\tvar start = FC.moment.utc(componentFootprint.unzonedRange.startMs);\n\t\tvar end;\n\n\t\tif (!ignoreEnd) {\n\t\t\tend = FC.moment.utc(componentFootprint.unzonedRange.endMs);\n\t\t}\n\n\t\tif (componentFootprint.isAllDay) {\n\t\t\tstart.stripTime();\n\n\t\t\tif (end) {\n\t\t\t\tend.stripTime();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tstart = this.applyTimezone(start);\n\n\t\t\tif (end) {\n\t\t\t\tend = this.applyTimezone(end);\n\t\t\t}\n\t\t}\n\n\t\treturn new EventDateProfile(start, end, this);\n\t},\n\n\n\t// Returns a moment for the current date, as defined by the client's computer or from the `now` option.\n\t// Will return an moment with an ambiguous timezone.\n\tgetNow: function() {\n\t\tvar now = this.opt('now');\n\t\tif (typeof now === 'function') {\n\t\t\tnow = now();\n\t\t}\n\t\treturn this.moment(now).stripZone();\n\t},\n\n\n\t// Produces a human-readable string for the given duration.\n\t// Side-effect: changes the locale of the given duration.\n\thumanizeDuration: function(duration) {\n\t\treturn duration.locale(this.opt('locale')).humanize();\n\t},\n\n\n\n\t// Event-Specific Date Utilities. TODO: move\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t// Get an event's normalized end date. If not present, calculate it from the defaults.\n\tgetEventEnd: function(event) {\n\t\tif (event.end) {\n\t\t\treturn event.end.clone();\n\t\t}\n\t\telse {\n\t\t\treturn this.getDefaultEventEnd(event.allDay, event.start);\n\t\t}\n\t},\n\n\n\t// Given an event's allDay status and start date, return what its fallback end date should be.\n\t// TODO: rename to computeDefaultEventEnd\n\tgetDefaultEventEnd: function(allDay, zonedStart) {\n\t\tvar end = zonedStart.clone();\n\n\t\tif (allDay) {\n\t\t\tend.stripTime().add(this.defaultAllDayEventDuration);\n\t\t}\n\t\telse {\n\t\t\tend.add(this.defaultTimedEventDuration);\n\t\t}\n\n\t\tif (this.getIsAmbigTimezone()) {\n\t\t\tend.stripZone(); // we don't know what the tzo should be\n\t\t}\n\n\t\treturn end;\n\t}\n\n});\n\n;;\n\nCalendar.mixin({\n\n\tviewSpecCache: null, // cache of view definitions (initialized in Calendar.js)\n\n\n\t// Gets information about how to create a view. Will use a cache.\n\tgetViewSpec: function(viewType) {\n\t\tvar cache = this.viewSpecCache;\n\n\t\treturn cache[viewType] || (cache[viewType] = this.buildViewSpec(viewType));\n\t},\n\n\n\t// Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n\t// Preference is given to views that have corresponding buttons.\n\tgetUnitViewSpec: function(unit) {\n\t\tvar viewTypes;\n\t\tvar i;\n\t\tvar spec;\n\n\t\tif ($.inArray(unit, unitsDesc) != -1) {\n\n\t\t\t// put views that have buttons first. there will be duplicates, but oh well\n\t\t\tviewTypes = this.header.getViewsWithButtons(); // TODO: include footer as well?\n\t\t\t$.each(FC.views, function(viewType) { // all views\n\t\t\t\tviewTypes.push(viewType);\n\t\t\t});\n\n\t\t\tfor (i = 0; i < viewTypes.length; i++) {\n\t\t\t\tspec = this.getViewSpec(viewTypes[i]);\n\t\t\t\tif (spec) {\n\t\t\t\t\tif (spec.singleUnit == unit) {\n\t\t\t\t\t\treturn spec;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Builds an object with information on how to create a given view\n\tbuildViewSpec: function(requestedViewType) {\n\t\tvar viewOverrides = this.overrides.views || {};\n\t\tvar specChain = []; // for the view. lowest to highest priority\n\t\tvar defaultsChain = []; // for the view. lowest to highest priority\n\t\tvar overridesChain = []; // for the view. lowest to highest priority\n\t\tvar viewType = requestedViewType;\n\t\tvar spec; // for the view\n\t\tvar overrides; // for the view\n\t\tvar durationInput;\n\t\tvar duration;\n\t\tvar unit;\n\n\t\t// iterate from the specific view definition to a more general one until we hit an actual View class\n\t\twhile (viewType) {\n\t\t\tspec = fcViews[viewType];\n\t\t\toverrides = viewOverrides[viewType];\n\t\t\tviewType = null; // clear. might repopulate for another iteration\n\n\t\t\tif (typeof spec === 'function') { // TODO: deprecate\n\t\t\t\tspec = { 'class': spec };\n\t\t\t}\n\n\t\t\tif (spec) {\n\t\t\t\tspecChain.unshift(spec);\n\t\t\t\tdefaultsChain.unshift(spec.defaults || {});\n\t\t\t\tdurationInput = durationInput || spec.duration;\n\t\t\t\tviewType = viewType || spec.type;\n\t\t\t}\n\n\t\t\tif (overrides) {\n\t\t\t\toverridesChain.unshift(overrides); // view-specific option hashes have options at zero-level\n\t\t\t\tdurationInput = durationInput || overrides.duration;\n\t\t\t\tviewType = viewType || overrides.type;\n\t\t\t}\n\t\t}\n\n\t\tspec = mergeProps(specChain);\n\t\tspec.type = requestedViewType;\n\t\tif (!spec['class']) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// fall back to top-level `duration` option\n\t\tdurationInput = durationInput ||\n\t\t\tthis.dynamicOverrides.duration ||\n\t\t\tthis.overrides.duration;\n\n\t\tif (durationInput) {\n\t\t\tduration = moment.duration(durationInput);\n\n\t\t\tif (duration.valueOf()) { // valid?\n\n\t\t\t\tunit = computeDurationGreatestUnit(duration, durationInput);\n\n\t\t\t\tspec.duration = duration;\n\t\t\t\tspec.durationUnit = unit;\n\n\t\t\t\t// view is a single-unit duration, like \"week\" or \"day\"\n\t\t\t\t// incorporate options for this. lowest priority\n\t\t\t\tif (duration.as(unit) === 1) {\n\t\t\t\t\tspec.singleUnit = unit;\n\t\t\t\t\toverridesChain.unshift(viewOverrides[unit] || {});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tspec.defaults = mergeOptions(defaultsChain);\n\t\tspec.overrides = mergeOptions(overridesChain);\n\n\t\tthis.buildViewSpecOptions(spec);\n\t\tthis.buildViewSpecButtonText(spec, requestedViewType);\n\n\t\treturn spec;\n\t},\n\n\n\t// Builds and assigns a view spec's options object from its already-assigned defaults and overrides\n\tbuildViewSpecOptions: function(spec) {\n\t\tspec.options = mergeOptions([ // lowest to highest priority\n\t\t\tCalendar.defaults, // global defaults\n\t\t\tspec.defaults, // view's defaults (from ViewSubclass.defaults)\n\t\t\tthis.dirDefaults,\n\t\t\tthis.localeDefaults, // locale and dir take precedence over view's defaults!\n\t\t\tthis.overrides, // calendar's overrides (options given to constructor)\n\t\t\tspec.overrides, // view's overrides (view-specific options)\n\t\t\tthis.dynamicOverrides // dynamically set via setter. highest precedence\n\t\t]);\n\t\tpopulateInstanceComputableOptions(spec.options);\n\t},\n\n\n\t// Computes and assigns a view spec's buttonText-related options\n\tbuildViewSpecButtonText: function(spec, requestedViewType) {\n\n\t\t// given an options object with a possible `buttonText` hash, lookup the buttonText for the\n\t\t// requested view, falling back to a generic unit entry like \"week\" or \"day\"\n\t\tfunction queryButtonText(options) {\n\t\t\tvar buttonText = options.buttonText || {};\n\t\t\treturn buttonText[requestedViewType] ||\n\t\t\t\t// view can decide to look up a certain key\n\t\t\t\t(spec.buttonTextKey ? buttonText[spec.buttonTextKey] : null) ||\n\t\t\t\t// a key like \"month\"\n\t\t\t\t(spec.singleUnit ? buttonText[spec.singleUnit] : null);\n\t\t}\n\n\t\t// highest to lowest priority\n\t\tspec.buttonTextOverride =\n\t\t\tqueryButtonText(this.dynamicOverrides) ||\n\t\t\tqueryButtonText(this.overrides) || // constructor-specified buttonText lookup hash takes precedence\n\t\t\tspec.overrides.buttonText; // `buttonText` for view-specific options is a string\n\n\t\t// highest to lowest priority. mirrors buildViewSpecOptions\n\t\tspec.buttonTextDefault =\n\t\t\tqueryButtonText(this.localeDefaults) ||\n\t\t\tqueryButtonText(this.dirDefaults) ||\n\t\t\tspec.defaults.buttonText || // a single string. from ViewSubclass.defaults\n\t\t\tqueryButtonText(Calendar.defaults) ||\n\t\t\t(spec.duration ? this.humanizeDuration(spec.duration) : null) || // like \"3 days\"\n\t\t\trequestedViewType; // fall back to given view name\n\t}\n\n});\n\n;;\n\nCalendar.mixin({\n\n\tel: null,\n\tcontentEl: null,\n\tsuggestedViewHeight: null,\n\tignoreUpdateViewSize: 0,\n\tfreezeContentHeightDepth: 0,\n\twindowResizeProxy: null,\n\n\n\trender: function() {\n\t\tif (!this.contentEl) {\n\t\t\tthis.initialRender();\n\t\t}\n\t\telse if (this.elementVisible()) {\n\t\t\t// mainly for the public API\n\t\t\tthis.calcSize();\n\t\t\tthis.renderView();\n\t\t}\n\t},\n\n\n\tinitialRender: function() {\n\t\tvar _this = this;\n\t\tvar el = this.el;\n\n\t\tel.addClass('fc');\n\n\t\t// event delegation for nav links\n\t\tel.on('click.fc', 'a[data-goto]', function(ev) {\n\t\t\tvar anchorEl = $(this);\n\t\t\tvar gotoOptions = anchorEl.data('goto'); // will automatically parse JSON\n\t\t\tvar date = _this.moment(gotoOptions.date);\n\t\t\tvar viewType = gotoOptions.type;\n\n\t\t\t// property like \"navLinkDayClick\". might be a string or a function\n\t\t\tvar customAction = _this.view.opt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n\n\t\t\tif (typeof customAction === 'function') {\n\t\t\t\tcustomAction(date, ev);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (typeof customAction === 'string') {\n\t\t\t\t\tviewType = customAction;\n\t\t\t\t}\n\t\t\t\t_this.zoomTo(date, viewType);\n\t\t\t}\n\t\t});\n\n\t\t// called immediately, and upon option change\n\t\tthis.optionsModel.watch('settingTheme', [ '?theme', '?themeSystem' ], function(opts) {\n\t\t\tvar themeClass = ThemeRegistry.getThemeClass(opts.themeSystem || opts.theme);\n\t\t\tvar theme = new themeClass(_this.optionsModel);\n\t\t\tvar widgetClass = theme.getClass('widget');\n\n\t\t\t_this.theme = theme;\n\n\t\t\tif (widgetClass) {\n\t\t\t\tel.addClass(widgetClass);\n\t\t\t}\n\t\t}, function() {\n\t\t\tvar widgetClass = _this.theme.getClass('widget');\n\n\t\t\t_this.theme = null;\n\n\t\t\tif (widgetClass) {\n\t\t\t\tel.removeClass(widgetClass);\n\t\t\t}\n\t\t});\n\n\t\tthis.optionsModel.watch('settingBusinessHourGenerator', [ '?businessHours' ], function(deps) {\n\t\t\t_this.businessHourGenerator = new BusinessHourGenerator(deps.businessHours, _this);\n\n\t\t\tif (_this.view) {\n\t\t\t\t_this.view.set('businessHourGenerator', _this.businessHourGenerator);\n\t\t\t}\n\t\t}, function() {\n\t\t\t_this.businessHourGenerator = null;\n\t\t});\n\n\t\t// called immediately, and upon option change.\n\t\t// HACK: locale often affects isRTL, so we explicitly listen to that too.\n\t\tthis.optionsModel.watch('applyingDirClasses', [ '?isRTL', '?locale' ], function(opts) {\n\t\t\tel.toggleClass('fc-ltr', !opts.isRTL);\n\t\t\tel.toggleClass('fc-rtl', opts.isRTL);\n\t\t});\n\n\t\tthis.contentEl = $(\"<div class='fc-view-container'/>\").prependTo(el);\n\n\t\tthis.initToolbars();\n\t\tthis.renderHeader();\n\t\tthis.renderFooter();\n\t\tthis.renderView(this.opt('defaultView'));\n\n\t\tif (this.opt('handleWindowResize')) {\n\t\t\t$(window).resize(\n\t\t\t\tthis.windowResizeProxy = debounce( // prevents rapid calls\n\t\t\t\t\tthis.windowResize.bind(this),\n\t\t\t\t\tthis.opt('windowResizeDelay')\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t},\n\n\n\tdestroy: function() {\n\t\tif (this.view) {\n\t\t\tthis.clearView();\n\t\t}\n\n\t\tthis.toolbarsManager.proxyCall('removeElement');\n\t\tthis.contentEl.remove();\n\t\tthis.el.removeClass('fc fc-ltr fc-rtl');\n\n\t\t// removes theme-related root className\n\t\tthis.optionsModel.unwatch('settingTheme');\n\t\tthis.optionsModel.unwatch('settingBusinessHourGenerator');\n\n\t\tthis.el.off('.fc'); // unbind nav link handlers\n\n\t\tif (this.windowResizeProxy) {\n\t\t\t$(window).unbind('resize', this.windowResizeProxy);\n\t\t\tthis.windowResizeProxy = null;\n\t\t}\n\n\t\tGlobalEmitter.unneeded();\n\t},\n\n\n\telementVisible: function() {\n\t\treturn this.el.is(':visible');\n\t},\n\n\n\t// Render Queue\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tbindViewHandlers: function(view) {\n\t\tvar _this = this;\n\n\t\tview.watch('titleForCalendar', [ 'title' ], function(deps) { // TODO: better system\n\t\t\tif (view === _this.view) { // hack\n\t\t\t\t_this.setToolbarsTitle(deps.title);\n\t\t\t}\n\t\t});\n\n\t\tview.watch('dateProfileForCalendar', [ 'dateProfile' ], function(deps) {\n\t\t\tif (view === _this.view) { // hack\n\t\t\t\t_this.currentDate = deps.dateProfile.date; // might have been constrained by view dates\n\t\t\t\t_this.updateToolbarButtons(deps.dateProfile);\n\t\t\t}\n\t\t});\n\t},\n\n\n\tunbindViewHandlers: function(view) {\n\t\tthis.stopListeningTo(view);\n\n\t\tview.unwatch('titleForCalendar');\n\t\tview.unwatch('dateProfileForCalendar');\n\t},\n\n\n\t// View Rendering\n\t// -----------------------------------------------------------------------------------\n\n\n\t// Renders a view because of a date change, view-type change, or for the first time.\n\t// If not given a viewType, keep the current view but render different dates.\n\t// Accepts an optional scroll state to restore to.\n\trenderView: function(viewType) {\n\t\tvar oldView = this.view;\n\t\tvar newView;\n\n\t\tthis.freezeContentHeight();\n\n\t\tif (oldView && viewType && oldView.type !== viewType) {\n\t\t\tthis.clearView();\n\t\t}\n\n\t\t// if viewType changed, or the view was never created, create a fresh view\n\t\tif (!this.view && viewType) {\n\t\t\tnewView = this.view =\n\t\t\t\tthis.viewsByType[viewType] ||\n\t\t\t\t(this.viewsByType[viewType] = this.instantiateView(viewType));\n\n\t\t\tthis.bindViewHandlers(newView);\n\n\t\t\tnewView.setElement(\n\t\t\t\t$(\"<div class='fc-view fc-\" + viewType + \"-view' />\").appendTo(this.contentEl)\n\t\t\t);\n\n\t\t\tthis.toolbarsManager.proxyCall('activateButton', viewType);\n\t\t}\n\n\t\tif (this.view) {\n\n\t\t\t// prevent unnecessary change firing\n\t\t\tif (this.view.get('businessHourGenerator') !== this.businessHourGenerator) {\n\t\t\t\tthis.view.set('businessHourGenerator', this.businessHourGenerator);\n\t\t\t}\n\n\t\t\tthis.view.setDate(this.currentDate);\n\t\t}\n\n\t\tthis.thawContentHeight();\n\t},\n\n\n\t// Unrenders the current view and reflects this change in the Header.\n\t// Unregsiters the `view`, but does not remove from viewByType hash.\n\tclearView: function() {\n\t\tvar currentView = this.view;\n\n\t\tthis.toolbarsManager.proxyCall('deactivateButton', currentView.type);\n\n\t\tthis.unbindViewHandlers(currentView);\n\n\t\tcurrentView.removeElement();\n\n\t\tthis.view = null;\n\t},\n\n\n\t// Destroys the view, including the view object. Then, re-instantiates it and renders it.\n\t// Maintains the same scroll state.\n\t// TODO: maintain any other user-manipulated state.\n\treinitView: function() {\n\t\tvar oldView = this.view;\n\t\tvar scroll = oldView.queryScroll(); // wouldn't be so complicated if Calendar owned the scroll\n\t\tthis.freezeContentHeight();\n\n\t\tthis.clearView();\n\t\tthis.calcSize();\n\t\tthis.renderView(oldView.type); // needs the type to freshly render\n\n\t\tthis.view.applyScroll(scroll);\n\t\tthis.thawContentHeight();\n\t},\n\n\n\t// Resizing\n\t// -----------------------------------------------------------------------------------\n\n\n\tgetSuggestedViewHeight: function() {\n\t\tif (this.suggestedViewHeight === null) {\n\t\t\tthis.calcSize();\n\t\t}\n\t\treturn this.suggestedViewHeight;\n\t},\n\n\n\tisHeightAuto: function() {\n\t\treturn this.opt('contentHeight') === 'auto' || this.opt('height') === 'auto';\n\t},\n\n\n\tupdateViewSize: function(isResize) {\n\t\tvar view = this.view;\n\t\tvar scroll;\n\n\t\tif (!this.ignoreUpdateViewSize && view) {\n\n\t\t\tif (isResize) {\n\t\t\t\tthis.calcSize();\n\t\t\t\tscroll = view.queryScroll();\n\t\t\t}\n\n\t\t\tthis.ignoreUpdateViewSize++;\n\n\t\t\tview.updateSize(\n\t\t\t\tthis.getSuggestedViewHeight(),\n\t\t\t\tthis.isHeightAuto(),\n\t\t\t\tisResize\n\t\t\t);\n\n\t\t\tthis.ignoreUpdateViewSize--;\n\n\t\t\tif (isResize) {\n\t\t\t\tview.applyScroll(scroll);\n\t\t\t}\n\n\t\t\treturn true; // signal success\n\t\t}\n\t},\n\n\n\tcalcSize: function() {\n\t\tif (this.elementVisible()) {\n\t\t\tthis._calcSize();\n\t\t}\n\t},\n\n\n\t_calcSize: function() { // assumes elementVisible\n\t\tvar contentHeightInput = this.opt('contentHeight');\n\t\tvar heightInput = this.opt('height');\n\n\t\tif (typeof contentHeightInput === 'number') { // exists and not 'auto'\n\t\t\tthis.suggestedViewHeight = contentHeightInput;\n\t\t}\n\t\telse if (typeof contentHeightInput === 'function') { // exists and is a function\n\t\t\tthis.suggestedViewHeight = contentHeightInput();\n\t\t}\n\t\telse if (typeof heightInput === 'number') { // exists and not 'auto'\n\t\t\tthis.suggestedViewHeight = heightInput - this.queryToolbarsHeight();\n\t\t}\n\t\telse if (typeof heightInput === 'function') { // exists and is a function\n\t\t\tthis.suggestedViewHeight = heightInput() - this.queryToolbarsHeight();\n\t\t}\n\t\telse if (heightInput === 'parent') { // set to height of parent element\n\t\t\tthis.suggestedViewHeight = this.el.parent().height() - this.queryToolbarsHeight();\n\t\t}\n\t\telse {\n\t\t\tthis.suggestedViewHeight = Math.round(\n\t\t\t\tthis.contentEl.width() /\n\t\t\t\tMath.max(this.opt('aspectRatio'), .5)\n\t\t\t);\n\t\t}\n\t},\n\n\n\twindowResize: function(ev) {\n\t\tif (\n\t\t\tev.target === window && // so we don't process jqui \"resize\" events that have bubbled up\n\t\t\tthis.view &&\n\t\t\tthis.view.isDatesRendered\n\t\t) {\n\t\t\tif (this.updateViewSize(true)) { // isResize=true, returns true on success\n\t\t\t\tthis.publiclyTrigger('windowResize', [ this.view ]);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/* Height \"Freezing\"\n\t-----------------------------------------------------------------------------*/\n\n\n\tfreezeContentHeight: function() {\n\t\tif (!(this.freezeContentHeightDepth++)) {\n\t\t\tthis.forceFreezeContentHeight();\n\t\t}\n\t},\n\n\n\tforceFreezeContentHeight: function() {\n\t\tthis.contentEl.css({\n\t\t\twidth: '100%',\n\t\t\theight: this.contentEl.height(),\n\t\t\toverflow: 'hidden'\n\t\t});\n\t},\n\n\n\tthawContentHeight: function() {\n\t\tthis.freezeContentHeightDepth--;\n\n\t\t// always bring back to natural height\n\t\tthis.contentEl.css({\n\t\t\twidth: '',\n\t\t\theight: '',\n\t\t\toverflow: ''\n\t\t});\n\n\t\t// but if there are future thaws, re-freeze\n\t\tif (this.freezeContentHeightDepth) {\n\t\t\tthis.forceFreezeContentHeight();\n\t\t}\n\t}\n\n});\n\n;;\n\nCalendar.mixin({\n\n\theader: null,\n\tfooter: null,\n\ttoolbarsManager: null,\n\n\n\tinitToolbars: function() {\n\t\tthis.header = new Toolbar(this, this.computeHeaderOptions());\n\t\tthis.footer = new Toolbar(this, this.computeFooterOptions());\n\t\tthis.toolbarsManager = new Iterator([ this.header, this.footer ]);\n\t},\n\n\n\tcomputeHeaderOptions: function() {\n\t\treturn {\n\t\t\textraClasses: 'fc-header-toolbar',\n\t\t\tlayout: this.opt('header')\n\t\t};\n\t},\n\n\n\tcomputeFooterOptions: function() {\n\t\treturn {\n\t\t\textraClasses: 'fc-footer-toolbar',\n\t\t\tlayout: this.opt('footer')\n\t\t};\n\t},\n\n\n\t// can be called repeatedly and Header will rerender\n\trenderHeader: function() {\n\t\tvar header = this.header;\n\n\t\theader.setToolbarOptions(this.computeHeaderOptions());\n\t\theader.render();\n\n\t\tif (header.el) {\n\t\t\tthis.el.prepend(header.el);\n\t\t}\n\t},\n\n\n\t// can be called repeatedly and Footer will rerender\n\trenderFooter: function() {\n\t\tvar footer = this.footer;\n\n\t\tfooter.setToolbarOptions(this.computeFooterOptions());\n\t\tfooter.render();\n\n\t\tif (footer.el) {\n\t\t\tthis.el.append(footer.el);\n\t\t}\n\t},\n\n\n\tsetToolbarsTitle: function(title) {\n\t\tthis.toolbarsManager.proxyCall('updateTitle', title);\n\t},\n\n\n\tupdateToolbarButtons: function(dateProfile) {\n\t\tvar now = this.getNow();\n\t\tvar view = this.view;\n\t\tvar todayInfo = view.buildDateProfile(now);\n\t\tvar prevInfo = view.buildPrevDateProfile(this.currentDate);\n\t\tvar nextInfo = view.buildNextDateProfile(this.currentDate);\n\n\t\tthis.toolbarsManager.proxyCall(\n\t\t\t(todayInfo.isValid && !dateProfile.currentUnzonedRange.containsDate(now)) ?\n\t\t\t\t'enableButton' :\n\t\t\t\t'disableButton',\n\t\t\t'today'\n\t\t);\n\n\t\tthis.toolbarsManager.proxyCall(\n\t\t\tprevInfo.isValid ?\n\t\t\t\t'enableButton' :\n\t\t\t\t'disableButton',\n\t\t\t'prev'\n\t\t);\n\n\t\tthis.toolbarsManager.proxyCall(\n\t\t\tnextInfo.isValid ?\n\t\t\t\t'enableButton' :\n\t\t\t\t'disableButton',\n\t\t\t'next'\n\t\t);\n\t},\n\n\n\tqueryToolbarsHeight: function() {\n\t\treturn this.toolbarsManager.items.reduce(function(accumulator, toolbar) {\n\t\t\tvar toolbarHeight = toolbar.el ? toolbar.el.outerHeight(true) : 0; // includes margin\n\t\t\treturn accumulator + toolbarHeight;\n\t\t}, 0);\n\t}\n\n});\n\n;;\n\n/*\ndetermines if eventInstanceGroup is allowed,\nin relation to other EVENTS and business hours.\n*/\nCalendar.prototype.isEventInstanceGroupAllowed = function(eventInstanceGroup) {\n\tvar eventDef = eventInstanceGroup.getEventDef();\n\tvar eventFootprints = this.eventRangesToEventFootprints(eventInstanceGroup.getAllEventRanges());\n\tvar i;\n\n\tvar peerEventInstances = this.getPeerEventInstances(eventDef);\n\tvar peerEventRanges = peerEventInstances.map(eventInstanceToEventRange);\n\tvar peerEventFootprints = this.eventRangesToEventFootprints(peerEventRanges);\n\n\tvar constraintVal = eventDef.getConstraint();\n\tvar overlapVal = eventDef.getOverlap();\n\n\tvar eventAllowFunc = this.opt('eventAllow');\n\n\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\tif (\n\t\t\t!this.isFootprintAllowed(\n\t\t\t\teventFootprints[i].componentFootprint,\n\t\t\t\tpeerEventFootprints,\n\t\t\t\tconstraintVal,\n\t\t\t\toverlapVal,\n\t\t\t\teventFootprints[i].eventInstance\n\t\t\t)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (eventAllowFunc) {\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\tif (\n\t\t\t\teventAllowFunc(\n\t\t\t\t\teventFootprints[i].componentFootprint.toLegacy(this),\n\t\t\t\t\teventFootprints[i].getEventLegacy()\n\t\t\t\t) === false\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n};\n\n\nCalendar.prototype.getPeerEventInstances = function(eventDef) {\n\treturn this.eventManager.getEventInstancesWithoutId(eventDef.id);\n};\n\n\nCalendar.prototype.isSelectionFootprintAllowed = function(componentFootprint) {\n\tvar peerEventInstances = this.eventManager.getEventInstances();\n\tvar peerEventRanges = peerEventInstances.map(eventInstanceToEventRange);\n\tvar peerEventFootprints = this.eventRangesToEventFootprints(peerEventRanges);\n\n\tvar selectAllowFunc;\n\n\tif (\n\t\tthis.isFootprintAllowed(\n\t\t\tcomponentFootprint,\n\t\t\tpeerEventFootprints,\n\t\t\tthis.opt('selectConstraint'),\n\t\t\tthis.opt('selectOverlap')\n\t\t)\n\t) {\n\t\tselectAllowFunc = this.opt('selectAllow');\n\n\t\tif (selectAllowFunc) {\n\t\t\treturn selectAllowFunc(componentFootprint.toLegacy(this)) !== false;\n\t\t}\n\t\telse {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n};\n\n\nCalendar.prototype.isFootprintAllowed = function(\n\tcomponentFootprint,\n\tpeerEventFootprints,\n\tconstraintVal,\n\toverlapVal,\n\tsubjectEventInstance // optional\n) {\n\tvar constraintFootprints; // ComponentFootprint[]\n\tvar overlapEventFootprints; // EventFootprint[]\n\n\tif (constraintVal != null) {\n\t\tconstraintFootprints = this.constraintValToFootprints(constraintVal, componentFootprint.isAllDay);\n\n\t\tif (!this.isFootprintWithinConstraints(componentFootprint, constraintFootprints)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\toverlapEventFootprints = this.collectOverlapEventFootprints(peerEventFootprints, componentFootprint);\n\n\tif (overlapVal === false) {\n\t\tif (overlapEventFootprints.length) {\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (typeof overlapVal === 'function') {\n\t\tif (!isOverlapsAllowedByFunc(overlapEventFootprints, overlapVal, subjectEventInstance)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (subjectEventInstance) {\n\t\tif (!isOverlapEventInstancesAllowed(overlapEventFootprints, subjectEventInstance)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\n\n// Constraint\n// ------------------------------------------------------------------------------------------------\n\n\nCalendar.prototype.isFootprintWithinConstraints = function(componentFootprint, constraintFootprints) {\n\tvar i;\n\n\tfor (i = 0; i < constraintFootprints.length; i++) {\n\t\tif (this.footprintContainsFootprint(constraintFootprints[i], componentFootprint)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n};\n\n\nCalendar.prototype.constraintValToFootprints = function(constraintVal, isAllDay) {\n\tvar eventInstances;\n\n\tif (constraintVal === 'businessHours') {\n\t\treturn this.buildCurrentBusinessFootprints(isAllDay);\n\t}\n\telse if (typeof constraintVal === 'object') {\n\t\teventInstances = this.parseEventDefToInstances(constraintVal); // handles recurring events\n\n\t\tif (!eventInstances) { // invalid input. fallback to parsing footprint directly\n\t\t\treturn this.parseFootprints(constraintVal);\n\t\t}\n\t\telse {\n\t\t\treturn this.eventInstancesToFootprints(eventInstances);\n\t\t}\n\t}\n\telse if (constraintVal != null) { // an ID\n\t\teventInstances = this.eventManager.getEventInstancesWithId(constraintVal);\n\n\t\treturn this.eventInstancesToFootprints(eventInstances);\n\t}\n};\n\n\n// returns ComponentFootprint[]\n// uses current view's range\nCalendar.prototype.buildCurrentBusinessFootprints = function(isAllDay) {\n\tvar view = this.view;\n\tvar businessHourGenerator = view.get('businessHourGenerator');\n\tvar unzonedRange = view.dateProfile.activeUnzonedRange;\n\tvar eventInstanceGroup = businessHourGenerator.buildEventInstanceGroup(isAllDay, unzonedRange);\n\n\tif (eventInstanceGroup) {\n\t\treturn this.eventInstancesToFootprints(eventInstanceGroup.eventInstances);\n\t}\n\telse {\n\t\treturn [];\n\t}\n};\n\n\n// conversion util\nCalendar.prototype.eventInstancesToFootprints = function(eventInstances) {\n\tvar eventRanges = eventInstances.map(eventInstanceToEventRange);\n\tvar eventFootprints = this.eventRangesToEventFootprints(eventRanges);\n\n\treturn eventFootprints.map(eventFootprintToComponentFootprint);\n};\n\n\n// Overlap\n// ------------------------------------------------------------------------------------------------\n\n\nCalendar.prototype.collectOverlapEventFootprints = function(peerEventFootprints, targetFootprint) {\n\tvar overlapEventFootprints = [];\n\tvar i;\n\n\tfor (i = 0; i < peerEventFootprints.length; i++) {\n\t\tif (\n\t\t\tthis.footprintsIntersect(\n\t\t\t\ttargetFootprint,\n\t\t\t\tpeerEventFootprints[i].componentFootprint\n\t\t\t)\n\t\t) {\n\t\t\toverlapEventFootprints.push(peerEventFootprints[i]);\n\t\t}\n\t}\n\n\treturn overlapEventFootprints;\n};\n\n\n// optional subjectEventInstance\nfunction isOverlapsAllowedByFunc(overlapEventFootprints, overlapFunc, subjectEventInstance) {\n\tvar i;\n\n\tfor (i = 0; i < overlapEventFootprints.length; i++) {\n\t\tif (\n\t\t\t!overlapFunc(\n\t\t\t\toverlapEventFootprints[i].eventInstance.toLegacy(),\n\t\t\t\tsubjectEventInstance ? subjectEventInstance.toLegacy() : null\n\t\t\t)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n\nfunction isOverlapEventInstancesAllowed(overlapEventFootprints, subjectEventInstance) {\n\tvar subjectLegacyInstance = subjectEventInstance.toLegacy();\n\tvar i;\n\tvar overlapEventInstance;\n\tvar overlapEventDef;\n\tvar overlapVal;\n\n\tfor (i = 0; i < overlapEventFootprints.length; i++) {\n\t\toverlapEventInstance = overlapEventFootprints[i].eventInstance;\n\t\toverlapEventDef = overlapEventInstance.def;\n\n\t\t// don't need to pass in calendar, because don't want to consider global eventOverlap property,\n\t\t// because we already considered that earlier in the process.\n\t\toverlapVal = overlapEventDef.getOverlap();\n\n\t\tif (overlapVal === false) {\n\t\t\treturn false;\n\t\t}\n\t\telse if (typeof overlapVal === 'function') {\n\t\t\tif (\n\t\t\t\t!overlapVal(\n\t\t\t\t\toverlapEventInstance.toLegacy(),\n\t\t\t\t\tsubjectLegacyInstance\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n}\n\n\n// Conversion: eventDefs -> eventInstances -> eventRanges -> eventFootprints -> componentFootprints\n// ------------------------------------------------------------------------------------------------\n// NOTE: this might seem like repetitive code with the Grid class, however, this code is related to\n// constraints whereas the Grid code is related to rendering. Each approach might want to convert\n// eventRanges -> eventFootprints in a different way. Regardless, there are opportunities to make\n// this more DRY.\n\n\n/*\nReturns false on invalid input.\n*/\nCalendar.prototype.parseEventDefToInstances = function(eventInput) {\n\tvar eventManager = this.eventManager;\n\tvar eventDef = EventDefParser.parse(eventInput, new EventSource(this));\n\n\tif (!eventDef) { // invalid\n\t\treturn false;\n\t}\n\n\treturn eventDef.buildInstances(eventManager.currentPeriod.unzonedRange);\n};\n\n\nCalendar.prototype.eventRangesToEventFootprints = function(eventRanges) {\n\tvar i;\n\tvar eventFootprints = [];\n\n\tfor (i = 0; i < eventRanges.length; i++) {\n\t\teventFootprints.push.apply( // footprints\n\t\t\teventFootprints,\n\t\t\tthis.eventRangeToEventFootprints(eventRanges[i])\n\t\t);\n\t}\n\n\treturn eventFootprints;\n};\n\n\nCalendar.prototype.eventRangeToEventFootprints = function(eventRange) {\n\treturn [ eventRangeToEventFootprint(eventRange) ];\n};\n\n\n/*\nParses footprints directly.\nVery similar to EventDateProfile::parse :(\n*/\nCalendar.prototype.parseFootprints = function(rawInput) {\n\tvar start, end;\n\n\tif (rawInput.start) {\n\t\tstart = this.moment(rawInput.start);\n\n\t\tif (!start.isValid()) {\n\t\t\tstart = null;\n\t\t}\n\t}\n\n\tif (rawInput.end) {\n\t\tend = this.moment(rawInput.end);\n\n\t\tif (!end.isValid()) {\n\t\t\tend = null;\n\t\t}\n\t}\n\n\treturn [\n\t\tnew ComponentFootprint(\n\t\t\tnew UnzonedRange(start, end),\n\t\t\t(start && !start.hasTime()) || (end && !end.hasTime()) // isAllDay\n\t\t)\n\t];\n};\n\n\n// Footprint Utils\n// ----------------------------------------------------------------------------------------\n\n\nCalendar.prototype.footprintContainsFootprint = function(outerFootprint, innerFootprint) {\n\treturn outerFootprint.unzonedRange.containsRange(innerFootprint.unzonedRange);\n};\n\n\nCalendar.prototype.footprintsIntersect = function(footprint0, footprint1) {\n\treturn footprint0.unzonedRange.intersectsWith(footprint1.unzonedRange);\n};\n\n;;\n\nCalendar.mixin({\n\n\t// Sources\n\t// ------------------------------------------------------------------------------------\n\n\n\tgetEventSources: function() {\n\t\treturn this.eventManager.otherSources.slice(); // clone\n\t},\n\n\n\tgetEventSourceById: function(id) {\n\t\treturn this.eventManager.getSourceById(\n\t\t\tEventSource.normalizeId(id)\n\t\t);\n\t},\n\n\n\taddEventSource: function(sourceInput) {\n\t\tvar source = EventSourceParser.parse(sourceInput, this);\n\n\t\tif (source) {\n\t\t\tthis.eventManager.addSource(source);\n\t\t}\n\t},\n\n\n\tremoveEventSources: function(sourceMultiQuery) {\n\t\tvar eventManager = this.eventManager;\n\t\tvar sources;\n\t\tvar i;\n\n\t\tif (sourceMultiQuery == null) {\n\t\t\tthis.eventManager.removeAllSources();\n\t\t}\n\t\telse {\n\t\t\tsources = eventManager.multiQuerySources(sourceMultiQuery);\n\n\t\t\teventManager.freeze();\n\n\t\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\t\teventManager.removeSource(sources[i]);\n\t\t\t}\n\n\t\t\teventManager.thaw();\n\t\t}\n\t},\n\n\n\tremoveEventSource: function(sourceQuery) {\n\t\tvar eventManager = this.eventManager;\n\t\tvar sources = eventManager.querySources(sourceQuery);\n\t\tvar i;\n\n\t\teventManager.freeze();\n\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\teventManager.removeSource(sources[i]);\n\t\t}\n\n\t\teventManager.thaw();\n\t},\n\n\n\trefetchEventSources: function(sourceMultiQuery) {\n\t\tvar eventManager = this.eventManager;\n\t\tvar sources = eventManager.multiQuerySources(sourceMultiQuery);\n\t\tvar i;\n\n\t\teventManager.freeze();\n\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\teventManager.refetchSource(sources[i]);\n\t\t}\n\n\t\teventManager.thaw();\n\t},\n\n\n\t// Events\n\t// ------------------------------------------------------------------------------------\n\n\n\trefetchEvents: function() {\n\t\tthis.eventManager.refetchAllSources();\n\t},\n\n\n\trenderEvents: function(eventInputs, isSticky) {\n\t\tthis.eventManager.freeze();\n\n\t\tfor (var i = 0; i < eventInputs.length; i++) {\n\t\t\tthis.renderEvent(eventInputs[i], isSticky);\n\t\t}\n\n\t\tthis.eventManager.thaw();\n\t},\n\n\n\trenderEvent: function(eventInput, isSticky) {\n\t\tvar eventManager = this.eventManager;\n\t\tvar eventDef = EventDefParser.parse(\n\t\t\teventInput,\n\t\t\teventInput.source || eventManager.stickySource\n\t\t);\n\n\t\tif (eventDef) {\n\t\t\teventManager.addEventDef(eventDef, isSticky);\n\t\t}\n\t},\n\n\n\t// legacyQuery operates on legacy event instance objects\n\tremoveEvents: function(legacyQuery) {\n\t\tvar eventManager = this.eventManager;\n\t\tvar legacyInstances = [];\n\t\tvar idMap = {};\n\t\tvar eventDef;\n\t\tvar i;\n\n\t\tif (legacyQuery == null) { // shortcut for removing all\n\t\t\teventManager.removeAllEventDefs(true); // persist=true\n\t\t}\n\t\telse {\n\t\t\teventManager.getEventInstances().forEach(function(eventInstance) {\n\t\t\t\tlegacyInstances.push(eventInstance.toLegacy());\n\t\t\t});\n\n\t\t\tlegacyInstances = filterLegacyEventInstances(legacyInstances, legacyQuery);\n\n\t\t\t// compute unique IDs\n\t\t\tfor (i = 0; i < legacyInstances.length; i++) {\n\t\t\t\teventDef = this.eventManager.getEventDefByUid(legacyInstances[i]._id);\n\t\t\t\tidMap[eventDef.id] = true;\n\t\t\t}\n\n\t\t\teventManager.freeze();\n\n\t\t\tfor (i in idMap) { // reuse `i` as an \"id\"\n\t\t\t\teventManager.removeEventDefsById(i, true); // persist=true\n\t\t\t}\n\n\t\t\teventManager.thaw();\n\t\t}\n\t},\n\n\n\t// legacyQuery operates on legacy event instance objects\n\tclientEvents: function(legacyQuery) {\n\t\tvar legacyEventInstances = [];\n\n\t\tthis.eventManager.getEventInstances().forEach(function(eventInstance) {\n\t\t\tlegacyEventInstances.push(eventInstance.toLegacy());\n\t\t});\n\n\t\treturn filterLegacyEventInstances(legacyEventInstances, legacyQuery);\n\t},\n\n\n\tupdateEvents: function(eventPropsArray) {\n\t\tthis.eventManager.freeze();\n\n\t\tfor (var i = 0; i < eventPropsArray.length; i++) {\n\t\t\tthis.updateEvent(eventPropsArray[i]);\n\t\t}\n\n\t\tthis.eventManager.thaw();\n\t},\n\n\n\tupdateEvent: function(eventProps) {\n\t\tvar eventDef = this.eventManager.getEventDefByUid(eventProps._id);\n\t\tvar eventInstance;\n\t\tvar eventDefMutation;\n\n\t\tif (eventDef instanceof SingleEventDef) {\n\t\t\teventInstance = eventDef.buildInstance();\n\n\t\t\teventDefMutation = EventDefMutation.createFromRawProps(\n\t\t\t\teventInstance,\n\t\t\t\teventProps, // raw props\n\t\t\t\tnull // largeUnit -- who uses it?\n\t\t\t);\n\n\t\t\tthis.eventManager.mutateEventsWithId(eventDef.id, eventDefMutation); // will release\n\t\t}\n\t}\n\n});\n\n\nfunction filterLegacyEventInstances(legacyEventInstances, legacyQuery) {\n\tif (legacyQuery == null) {\n\t\treturn legacyEventInstances;\n\t}\n\telse if ($.isFunction(legacyQuery)) {\n\t\treturn legacyEventInstances.filter(legacyQuery);\n\t}\n\telse { // an event ID\n\t\tlegacyQuery += ''; // normalize to string\n\n\t\treturn legacyEventInstances.filter(function(legacyEventInstance) {\n\t\t\t// soft comparison because id not be normalized to string\n\t\t\treturn legacyEventInstance.id == legacyQuery ||\n\t\t\t\tlegacyEventInstance._id === legacyQuery; // can specify internal id, but must exactly match\n\t\t});\n\t}\n}\n\n;;\n\nCalendar.defaults = {\n\n\ttitleRangeSeparator: ' \\u2013 ', // en dash\n\tmonthYearFormat: 'MMMM YYYY', // required for en. other locales rely on datepicker computable option\n\n\tdefaultTimedEventDuration: '02:00:00',\n\tdefaultAllDayEventDuration: { days: 1 },\n\tforceEventDuration: false,\n\tnextDayThreshold: '09:00:00', // 9am\n\n\t// display\n\tcolumnHeader: true,\n\tdefaultView: 'month',\n\taspectRatio: 1.35,\n\theader: {\n\t\tleft: 'title',\n\t\tcenter: '',\n\t\tright: 'today prev,next'\n\t},\n\tweekends: true,\n\tweekNumbers: false,\n\n\tweekNumberTitle: 'W',\n\tweekNumberCalculation: 'local',\n\t\n\t//editable: false,\n\n\t//nowIndicator: false,\n\n\tscrollTime: '06:00:00',\n\tminTime: '00:00:00',\n\tmaxTime: '24:00:00',\n\tshowNonCurrentDates: true,\n\t\n\t// event ajax\n\tlazyFetching: true,\n\tstartParam: 'start',\n\tendParam: 'end',\n\ttimezoneParam: 'timezone',\n\n\ttimezone: false,\n\n\t//allDayDefault: undefined,\n\n\t// locale\n\tisRTL: false,\n\tbuttonText: {\n\t\tprev: \"prev\",\n\t\tnext: \"next\",\n\t\tprevYear: \"prev year\",\n\t\tnextYear: \"next year\",\n\t\tyear: 'year', // TODO: locale files need to specify this\n\t\ttoday: 'today',\n\t\tmonth: 'month',\n\t\tweek: 'week',\n\t\tday: 'day'\n\t},\n\t//buttonIcons: null,\n\n\tallDayText: 'all-day',\n\n\t// allows setting a min-height to the event segment to prevent short events overlapping each other\n\tagendaEventMinHeight: 0,\n\t\n\t// jquery-ui theming\n\ttheme: false,\n\t//themeButtonIcons: null,\n\n\t//eventResizableFromStart: false,\n\tdragOpacity: .75,\n\tdragRevertDuration: 500,\n\tdragScroll: true,\n\t\n\t//selectable: false,\n\tunselectAuto: true,\n\t//selectMinDistance: 0,\n\t\n\tdropAccept: '*',\n\n\teventOrder: 'title',\n\t//eventRenderWait: null,\n\n\teventLimit: false,\n\teventLimitText: 'more',\n\teventLimitClick: 'popover',\n\tdayPopoverFormat: 'LL',\n\t\n\thandleWindowResize: true,\n\twindowResizeDelay: 100, // milliseconds before an updateSize happens\n\n\tlongPressDelay: 1000\n\t\n};\n\n\nCalendar.englishDefaults = { // used by locale.js\n\tdayPopoverFormat: 'dddd, MMMM D'\n};\n\n\nCalendar.rtlDefaults = { // right-to-left defaults\n\theader: { // TODO: smarter solution (first/center/last ?)\n\t\tleft: 'next,prev today',\n\t\tcenter: '',\n\t\tright: 'title'\n\t},\n\tbuttonIcons: {\n\t\tprev: 'right-single-arrow',\n\t\tnext: 'left-single-arrow',\n\t\tprevYear: 'right-double-arrow',\n\t\tnextYear: 'left-double-arrow'\n\t},\n\tthemeButtonIcons: {\n\t\tprev: 'circle-triangle-e',\n\t\tnext: 'circle-triangle-w',\n\t\tnextYear: 'seek-prev',\n\t\tprevYear: 'seek-next'\n\t}\n};\n\n;;\n\nvar localeOptionHash = FC.locales = {}; // initialize and expose\n\n\n// TODO: document the structure and ordering of a FullCalendar locale file\n\n\n// Initialize jQuery UI datepicker translations while using some of the translations\n// Will set this as the default locales for datepicker.\nFC.datepickerLocale = function(localeCode, dpLocaleCode, dpOptions) {\n\n\t// get the FullCalendar internal option hash for this locale. create if necessary\n\tvar fcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\n\n\t// transfer some simple options from datepicker to fc\n\tfcOptions.isRTL = dpOptions.isRTL;\n\tfcOptions.weekNumberTitle = dpOptions.weekHeader;\n\n\t// compute some more complex options from datepicker\n\t$.each(dpComputableOptions, function(name, func) {\n\t\tfcOptions[name] = func(dpOptions);\n\t});\n\n\t// is jQuery UI Datepicker is on the page?\n\tif ($.datepicker) {\n\n\t\t// Register the locale data.\n\t\t// FullCalendar and MomentJS use locale codes like \"pt-br\" but Datepicker\n\t\t// does it like \"pt-BR\" or if it doesn't have the locale, maybe just \"pt\".\n\t\t// Make an alias so the locale can be referenced either way.\n\t\t$.datepicker.regional[dpLocaleCode] =\n\t\t\t$.datepicker.regional[localeCode] = // alias\n\t\t\t\tdpOptions;\n\n\t\t// Alias 'en' to the default locale data. Do this every time.\n\t\t$.datepicker.regional.en = $.datepicker.regional[''];\n\n\t\t// Set as Datepicker's global defaults.\n\t\t$.datepicker.setDefaults(dpOptions);\n\t}\n};\n\n\n// Sets FullCalendar-specific translations. Will set the locales as the global default.\nFC.locale = function(localeCode, newFcOptions) {\n\tvar fcOptions;\n\tvar momOptions;\n\n\t// get the FullCalendar internal option hash for this locale. create if necessary\n\tfcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {});\n\n\t// provided new options for this locales? merge them in\n\tif (newFcOptions) {\n\t\tfcOptions = localeOptionHash[localeCode] = mergeOptions([ fcOptions, newFcOptions ]);\n\t}\n\n\t// compute locale options that weren't defined.\n\t// always do this. newFcOptions can be undefined when initializing from i18n file,\n\t// so no way to tell if this is an initialization or a default-setting.\n\tmomOptions = getMomentLocaleData(localeCode); // will fall back to en\n\t$.each(momComputableOptions, function(name, func) {\n\t\tif (fcOptions[name] == null) {\n\t\t\tfcOptions[name] = func(momOptions, fcOptions);\n\t\t}\n\t});\n\n\t// set it as the default locale for FullCalendar\n\tCalendar.defaults.locale = localeCode;\n};\n\n\n// NOTE: can't guarantee any of these computations will run because not every locale has datepicker\n// configs, so make sure there are English fallbacks for these in the defaults file.\nvar dpComputableOptions = {\n\n\tbuttonText: function(dpOptions) {\n\t\treturn {\n\t\t\t// the translations sometimes wrongly contain HTML entities\n\t\t\tprev: stripHtmlEntities(dpOptions.prevText),\n\t\t\tnext: stripHtmlEntities(dpOptions.nextText),\n\t\t\ttoday: stripHtmlEntities(dpOptions.currentText)\n\t\t};\n\t},\n\n\t// Produces format strings like \"MMMM YYYY\" -> \"September 2014\"\n\tmonthYearFormat: function(dpOptions) {\n\t\treturn dpOptions.showMonthAfterYear ?\n\t\t\t'YYYY[' + dpOptions.yearSuffix + '] MMMM' :\n\t\t\t'MMMM YYYY[' + dpOptions.yearSuffix + ']';\n\t}\n\n};\n\nvar momComputableOptions = {\n\n\t// Produces format strings like \"ddd M/D\" -> \"Fri 9/15\"\n\tdayOfMonthFormat: function(momOptions, fcOptions) {\n\t\tvar format = momOptions.longDateFormat('l'); // for the format like \"M/D/YYYY\"\n\n\t\t// strip the year off the edge, as well as other misc non-whitespace chars\n\t\tformat = format.replace(/^Y+[^\\w\\s]*|[^\\w\\s]*Y+$/g, '');\n\n\t\tif (fcOptions.isRTL) {\n\t\t\tformat += ' ddd'; // for RTL, add day-of-week to end\n\t\t}\n\t\telse {\n\t\t\tformat = 'ddd ' + format; // for LTR, add day-of-week to beginning\n\t\t}\n\t\treturn format;\n\t},\n\n\t// Produces format strings like \"h:mma\" -> \"6:00pm\"\n\tmediumTimeFormat: function(momOptions) { // can't be called `timeFormat` because collides with option\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h(:mm)a\" -> \"6pm\" / \"6:30pm\"\n\tsmallTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '(:mm)')\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h(:mm)t\" -> \"6p\" / \"6:30p\"\n\textraSmallTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '(:mm)')\n\t\t\t.replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 't'); // convert to AM/PM/am/pm to lowercase one-letter. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"ha\" / \"H\" -> \"6pm\" / \"18\"\n\thourFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(':mm', '')\n\t\t\t.replace(/(\\Wmm)$/, '') // like above, but for foreign locales\n\t\t\t.replace(/\\s*a$/i, 'a'); // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\n\t},\n\n\t// Produces format strings like \"h:mm\" -> \"6:30\" (with no AM/PM)\n\tnoMeridiemTimeFormat: function(momOptions) {\n\t\treturn momOptions.longDateFormat('LT')\n\t\t\t.replace(/\\s*a$/i, ''); // remove trailing AM/PM\n\t}\n\n};\n\n\n// options that should be computed off live calendar options (considers override options)\n// TODO: best place for this? related to locale?\n// TODO: flipping text based on isRTL is a bad idea because the CSS `direction` might want to handle it\nvar instanceComputableOptions = {\n\n\t// Produces format strings for results like \"Mo 16\"\n\tsmallDayDateFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'D dd' :\n\t\t\t'dd D';\n\t},\n\n\t// Produces format strings for results like \"Wk 5\"\n\tweekFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'w[ ' + options.weekNumberTitle + ']' :\n\t\t\t'[' + options.weekNumberTitle + ' ]w';\n\t},\n\n\t// Produces format strings for results like \"Wk5\"\n\tsmallWeekFormat: function(options) {\n\t\treturn options.isRTL ?\n\t\t\t'w[' + options.weekNumberTitle + ']' :\n\t\t\t'[' + options.weekNumberTitle + ']w';\n\t}\n\n};\n\n// TODO: make these computable properties in optionsModel\nfunction populateInstanceComputableOptions(options) {\n\t$.each(instanceComputableOptions, function(name, func) {\n\t\tif (options[name] == null) {\n\t\t\toptions[name] = func(options);\n\t\t}\n\t});\n}\n\n\n// Returns moment's internal locale data. If doesn't exist, returns English.\nfunction getMomentLocaleData(localeCode) {\n\treturn moment.localeData(localeCode) || moment.localeData('en');\n}\n\n\n// Initialize English by forcing computation of moment-derived options.\n// Also, sets it as the default.\nFC.locale('en', Calendar.englishDefaults);\n\n;;\n\nvar UnzonedRange = FC.UnzonedRange = Class.extend({\n\n\tstartMs: null, // if null, no start constraint\n\tendMs: null, // if null, no end constraint\n\n\t// TODO: move these into footprint.\n\t// Especially, doesn't make sense for null startMs/endMs.\n\tisStart: true,\n\tisEnd: true,\n\n\tconstructor: function(startInput, endInput) {\n\n\t\tif (moment.isMoment(startInput)) {\n\t\t\tstartInput = startInput.clone().stripZone();\n\t\t}\n\n\t\tif (moment.isMoment(endInput)) {\n\t\t\tendInput = endInput.clone().stripZone();\n\t\t}\n\n\t\tif (startInput) {\n\t\t\tthis.startMs = startInput.valueOf();\n\t\t}\n\n\t\tif (endInput) {\n\t\t\tthis.endMs = endInput.valueOf();\n\t\t}\n\t},\n\n\tintersect: function(otherRange) {\n\t\tvar startMs = this.startMs;\n\t\tvar endMs = this.endMs;\n\t\tvar newRange = null;\n\n\t\tif (otherRange.startMs !== null) {\n\t\t\tif (startMs === null) {\n\t\t\t\tstartMs = otherRange.startMs;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstartMs = Math.max(startMs, otherRange.startMs);\n\t\t\t}\n\t\t}\n\n\t\tif (otherRange.endMs !== null) {\n\t\t\tif (endMs === null) {\n\t\t\t\tendMs = otherRange.endMs;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tendMs = Math.min(endMs, otherRange.endMs);\n\t\t\t}\n\t\t}\n\n\t\tif (startMs === null || endMs === null || startMs < endMs) {\n\t\t\tnewRange = new UnzonedRange(startMs, endMs);\n\t\t\tnewRange.isStart = this.isStart && startMs === this.startMs;\n\t\t\tnewRange.isEnd = this.isEnd && endMs === this.endMs;\n\t\t}\n\n\t\treturn newRange;\n\t},\n\n\n\tintersectsWith: function(otherRange) {\n\t\treturn (this.endMs === null || otherRange.startMs === null || this.endMs > otherRange.startMs) &&\n\t\t\t(this.startMs === null || otherRange.endMs === null || this.startMs < otherRange.endMs);\n\t},\n\n\n\tcontainsRange: function(innerRange) {\n\t\treturn (this.startMs === null || (innerRange.startMs !== null && innerRange.startMs >= this.startMs)) &&\n\t\t\t(this.endMs === null || (innerRange.endMs !== null && innerRange.endMs <= this.endMs));\n\t},\n\n\n\t// `date` can be a moment, a Date, or a millisecond time.\n\tcontainsDate: function(date) {\n\t\tvar ms = date.valueOf();\n\n\t\treturn (this.startMs === null || ms >= this.startMs) &&\n\t\t\t(this.endMs === null || ms < this.endMs);\n\t},\n\n\n\t// If the given date is not within the given range, move it inside.\n\t// (If it's past the end, make it one millisecond before the end).\n\t// `date` can be a moment, a Date, or a millisecond time.\n\t// Returns a MS-time.\n\tconstrainDate: function(date) {\n\t\tvar ms = date.valueOf();\n\n\t\tif (this.startMs !== null && ms < this.startMs) {\n\t\t\tms = this.startMs;\n\t\t}\n\n\t\tif (this.endMs !== null && ms >= this.endMs) {\n\t\t\tms = this.endMs - 1;\n\t\t}\n\n\t\treturn ms;\n\t},\n\n\n\tequals: function(otherRange) {\n\t\treturn this.startMs === otherRange.startMs && this.endMs === otherRange.endMs;\n\t},\n\n\n\tclone: function() {\n\t\tvar range = new UnzonedRange(this.startMs, this.endMs);\n\n\t\trange.isStart = this.isStart;\n\t\trange.isEnd = this.isEnd;\n\n\t\treturn range;\n\t},\n\n\n\t// Returns an ambig-zoned moment from startMs.\n\t// BEWARE: returned moment is not localized.\n\t// Formatting and start-of-week will be default.\n\tgetStart: function() {\n\t\tif (this.startMs !== null) {\n\t\t\treturn FC.moment.utc(this.startMs).stripZone();\n\t\t}\n\t},\n\n\t// Returns an ambig-zoned moment from startMs.\n\t// BEWARE: returned moment is not localized.\n\t// Formatting and start-of-week will be default.\n\tgetEnd: function() {\n\t\tif (this.endMs !== null) {\n\t\t\treturn FC.moment.utc(this.endMs).stripZone();\n\t\t}\n\t},\n\n\n\tas: function(unit) {\n\t\treturn moment.utc(this.endMs).diff(\n\t\t\tmoment.utc(this.startMs),\n\t\t\tunit,\n\t\t\ttrue\n\t\t);\n\t}\n\n});\n\n\n/*\nSIDEEFFECT: will mutate eventRanges.\nWill return a new array result.\nOnly works for non-open-ended ranges.\n*/\nfunction invertUnzonedRanges(ranges, constraintRange) {\n\tvar invertedRanges = [];\n\tvar startMs = constraintRange.startMs; // the end of the previous range. the start of the new range\n\tvar i;\n\tvar dateRange;\n\n\t// ranges need to be in order. required for our date-walking algorithm\n\tranges.sort(compareUnzonedRanges);\n\n\tfor (i = 0; i < ranges.length; i++) {\n\t\tdateRange = ranges[i];\n\n\t\t// add the span of time before the event (if there is any)\n\t\tif (dateRange.startMs > startMs) { // compare millisecond time (skip any ambig logic)\n\t\t\tinvertedRanges.push(\n\t\t\t\tnew UnzonedRange(startMs, dateRange.startMs)\n\t\t\t);\n\t\t}\n\n\t\tif (dateRange.endMs > startMs) {\n\t\t\tstartMs = dateRange.endMs;\n\t\t}\n\t}\n\n\t// add the span of time after the last event (if there is any)\n\tif (startMs < constraintRange.endMs) { // compare millisecond time (skip any ambig logic)\n\t\tinvertedRanges.push(\n\t\t\tnew UnzonedRange(startMs, constraintRange.endMs)\n\t\t);\n\t}\n\n\treturn invertedRanges;\n}\n\n\n/*\nOnly works for non-open-ended ranges.\n*/\nfunction compareUnzonedRanges(range1, range2) {\n\treturn range1.startMs - range2.startMs; // earlier ranges go first\n}\n\n;;\n\n/*\nMeant to be immutable\n*/\nvar ComponentFootprint = FC.ComponentFootprint = Class.extend({\n\n\tunzonedRange: null,\n\tisAllDay: false, // component can choose to ignore this\n\n\n\tconstructor: function(unzonedRange, isAllDay) {\n\t\tthis.unzonedRange = unzonedRange;\n\t\tthis.isAllDay = isAllDay;\n\t},\n\n\n\t/*\n\tOnly works for non-open-ended ranges.\n\t*/\n\ttoLegacy: function(calendar) {\n\t\treturn {\n\t\t\tstart: calendar.msToMoment(this.unzonedRange.startMs, this.isAllDay),\n\t\t\tend: calendar.msToMoment(this.unzonedRange.endMs, this.isAllDay)\n\t\t};\n\t}\n\n});\n\n;;\n\nvar EventPeriod = Class.extend(EmitterMixin, {\n\n\tstart: null,\n\tend: null,\n\ttimezone: null,\n\n\tunzonedRange: null,\n\n\trequestsByUid: null,\n\tpendingCnt: 0,\n\n\tfreezeDepth: 0,\n\tstuntedReleaseCnt: 0,\n\treleaseCnt: 0,\n\n\teventDefsByUid: null,\n\teventDefsById: null,\n\teventInstanceGroupsById: null,\n\n\n\tconstructor: function(start, end, timezone) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis.timezone = timezone;\n\n\t\tthis.unzonedRange = new UnzonedRange(\n\t\t\tstart.clone().stripZone(),\n\t\t\tend.clone().stripZone()\n\t\t);\n\n\t\tthis.requestsByUid = {};\n\t\tthis.eventDefsByUid = {};\n\t\tthis.eventDefsById = {};\n\t\tthis.eventInstanceGroupsById = {};\n\t},\n\n\n\tisWithinRange: function(start, end) {\n\t\t// TODO: use a range util function?\n\t\treturn !start.isBefore(this.start) && !end.isAfter(this.end);\n\t},\n\n\n\t// Requesting and Purging\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trequestSources: function(sources) {\n\t\tthis.freeze();\n\n\t\tfor (var i = 0; i < sources.length; i++) {\n\t\t\tthis.requestSource(sources[i]);\n\t\t}\n\n\t\tthis.thaw();\n\t},\n\n\n\trequestSource: function(source) {\n\t\tvar _this = this;\n\t\tvar request = { source: source, status: 'pending' };\n\n\t\tthis.requestsByUid[source.uid] = request;\n\t\tthis.pendingCnt += 1;\n\n\t\tsource.fetch(this.start, this.end, this.timezone).then(function(eventDefs) {\n\t\t\tif (request.status !== 'cancelled') {\n\t\t\t\trequest.status = 'completed';\n\t\t\t\trequest.eventDefs = eventDefs;\n\n\t\t\t\t_this.addEventDefs(eventDefs);\n\t\t\t\t_this.pendingCnt--;\n\t\t\t\t_this.tryRelease();\n\t\t\t}\n\t\t}, function() { // failure\n\t\t\tif (request.status !== 'cancelled') {\n\t\t\t\trequest.status = 'failed';\n\n\t\t\t\t_this.pendingCnt--;\n\t\t\t\t_this.tryRelease();\n\t\t\t}\n\t\t});\n\t},\n\n\n\tpurgeSource: function(source) {\n\t\tvar request = this.requestsByUid[source.uid];\n\n\t\tif (request) {\n\t\t\tdelete this.requestsByUid[source.uid];\n\n\t\t\tif (request.status === 'pending') {\n\t\t\t\trequest.status = 'cancelled';\n\t\t\t\tthis.pendingCnt--;\n\t\t\t\tthis.tryRelease();\n\t\t\t}\n\t\t\telse if (request.status === 'completed') {\n\t\t\t\trequest.eventDefs.forEach(this.removeEventDef.bind(this));\n\t\t\t}\n\t\t}\n\t},\n\n\n\tpurgeAllSources: function() {\n\t\tvar requestsByUid = this.requestsByUid;\n\t\tvar uid, request;\n\t\tvar completedCnt = 0;\n\n\t\tfor (uid in requestsByUid) {\n\t\t\trequest = requestsByUid[uid];\n\n\t\t\tif (request.status === 'pending') {\n\t\t\t\trequest.status = 'cancelled';\n\t\t\t}\n\t\t\telse if (request.status === 'completed') {\n\t\t\t\tcompletedCnt++;\n\t\t\t}\n\t\t}\n\n\t\tthis.requestsByUid = {};\n\t\tthis.pendingCnt = 0;\n\n\t\tif (completedCnt) {\n\t\t\tthis.removeAllEventDefs(); // might release\n\t\t}\n\t},\n\n\n\t// Event Definitions\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tgetEventDefByUid: function(eventDefUid) {\n\t\treturn this.eventDefsByUid[eventDefUid];\n\t},\n\n\n\tgetEventDefsById: function(eventDefId) {\n\t\tvar a = this.eventDefsById[eventDefId];\n\n\t\tif (a) {\n\t\t\treturn a.slice(); // clone\n\t\t}\n\n\t\treturn [];\n\t},\n\n\n\taddEventDefs: function(eventDefs) {\n\t\tfor (var i = 0; i < eventDefs.length; i++) {\n\t\t\tthis.addEventDef(eventDefs[i]);\n\t\t}\n\t},\n\n\n\taddEventDef: function(eventDef) {\n\t\tvar eventDefsById = this.eventDefsById;\n\t\tvar eventDefId = eventDef.id;\n\t\tvar eventDefs = eventDefsById[eventDefId] || (eventDefsById[eventDefId] = []);\n\t\tvar eventInstances = eventDef.buildInstances(this.unzonedRange);\n\t\tvar i;\n\n\t\teventDefs.push(eventDef);\n\n\t\tthis.eventDefsByUid[eventDef.uid] = eventDef;\n\n\t\tfor (i = 0; i < eventInstances.length; i++) {\n\t\t\tthis.addEventInstance(eventInstances[i], eventDefId);\n\t\t}\n\t},\n\n\n\tremoveEventDefsById: function(eventDefId) {\n\t\tvar _this = this;\n\n\t\tthis.getEventDefsById(eventDefId).forEach(function(eventDef) {\n\t\t\t_this.removeEventDef(eventDef);\n\t\t});\n\t},\n\n\n\tremoveAllEventDefs: function() {\n\t\tvar isEmpty = $.isEmptyObject(this.eventDefsByUid);\n\n\t\tthis.eventDefsByUid = {};\n\t\tthis.eventDefsById = {};\n\t\tthis.eventInstanceGroupsById = {};\n\n\t\tif (!isEmpty) {\n\t\t\tthis.tryRelease();\n\t\t}\n\t},\n\n\n\tremoveEventDef: function(eventDef) {\n\t\tvar eventDefsById = this.eventDefsById;\n\t\tvar eventDefs = eventDefsById[eventDef.id];\n\n\t\tdelete this.eventDefsByUid[eventDef.uid];\n\n\t\tif (eventDefs) {\n\t\t\tremoveExact(eventDefs, eventDef);\n\n\t\t\tif (!eventDefs.length) {\n\t\t\t\tdelete eventDefsById[eventDef.id];\n\t\t\t}\n\n\t\t\tthis.removeEventInstancesForDef(eventDef);\n\t\t}\n\t},\n\n\n\t// Event Instances\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tgetEventInstances: function() { // TODO: consider iterator\n\t\tvar eventInstanceGroupsById = this.eventInstanceGroupsById;\n\t\tvar eventInstances = [];\n\t\tvar id;\n\n\t\tfor (id in eventInstanceGroupsById) {\n\t\t\teventInstances.push.apply(eventInstances, // append\n\t\t\t\teventInstanceGroupsById[id].eventInstances\n\t\t\t);\n\t\t}\n\n\t\treturn eventInstances;\n\t},\n\n\n\tgetEventInstancesWithId: function(eventDefId) {\n\t\tvar eventInstanceGroup = this.eventInstanceGroupsById[eventDefId];\n\n\t\tif (eventInstanceGroup) {\n\t\t\treturn eventInstanceGroup.eventInstances.slice(); // clone\n\t\t}\n\n\t\treturn [];\n\t},\n\n\n\tgetEventInstancesWithoutId: function(eventDefId) { // TODO: consider iterator\n\t\tvar eventInstanceGroupsById = this.eventInstanceGroupsById;\n\t\tvar matchingInstances = [];\n\t\tvar id;\n\n\t\tfor (id in eventInstanceGroupsById) {\n\t\t\tif (id !== eventDefId) {\n\t\t\t\tmatchingInstances.push.apply(matchingInstances, // append\n\t\t\t\t\teventInstanceGroupsById[id].eventInstances\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn matchingInstances;\n\t},\n\n\n\taddEventInstance: function(eventInstance, eventDefId) {\n\t\tvar eventInstanceGroupsById = this.eventInstanceGroupsById;\n\t\tvar eventInstanceGroup = eventInstanceGroupsById[eventDefId] ||\n\t\t\t(eventInstanceGroupsById[eventDefId] = new EventInstanceGroup());\n\n\t\teventInstanceGroup.eventInstances.push(eventInstance);\n\n\t\tthis.tryRelease();\n\t},\n\n\n\tremoveEventInstancesForDef: function(eventDef) {\n\t\tvar eventInstanceGroupsById = this.eventInstanceGroupsById;\n\t\tvar eventInstanceGroup = eventInstanceGroupsById[eventDef.id];\n\t\tvar removeCnt;\n\n\t\tif (eventInstanceGroup) {\n\t\t\tremoveCnt = removeMatching(eventInstanceGroup.eventInstances, function(currentEventInstance) {\n\t\t\t\treturn currentEventInstance.def === eventDef;\n\t\t\t});\n\n\t\t\tif (!eventInstanceGroup.eventInstances.length) {\n\t\t\t\tdelete eventInstanceGroupsById[eventDef.id];\n\t\t\t}\n\n\t\t\tif (removeCnt) {\n\t\t\t\tthis.tryRelease();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Releasing and Freezing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\ttryRelease: function() {\n\t\tif (!this.pendingCnt) {\n\t\t\tif (!this.freezeDepth) {\n\t\t\t\tthis.release();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.stuntedReleaseCnt++;\n\t\t\t}\n\t\t}\n\t},\n\n\n\trelease: function() {\n\t\tthis.releaseCnt++;\n\t\tthis.trigger('release', this.eventInstanceGroupsById);\n\t},\n\n\n\twhenReleased: function() {\n\t\tvar _this = this;\n\n\t\tif (this.releaseCnt) {\n\t\t\treturn Promise.resolve(this.eventInstanceGroupsById);\n\t\t}\n\t\telse {\n\t\t\treturn Promise.construct(function(onResolve) {\n\t\t\t\t_this.one('release', onResolve);\n\t\t\t});\n\t\t}\n\t},\n\n\n\tfreeze: function() {\n\t\tif (!(this.freezeDepth++)) {\n\t\t\tthis.stuntedReleaseCnt = 0;\n\t\t}\n\t},\n\n\n\tthaw: function() {\n\t\tif (!(--this.freezeDepth) && this.stuntedReleaseCnt && !this.pendingCnt) {\n\t\t\tthis.release();\n\t\t}\n\t}\n\n});\n\n;;\n\nvar EventManager = Class.extend(EmitterMixin, ListenerMixin, {\n\n\tcurrentPeriod: null,\n\n\tcalendar: null,\n\tstickySource: null,\n\totherSources: null, // does not include sticky source\n\n\n\tconstructor: function(calendar) {\n\t\tthis.calendar = calendar;\n\t\tthis.stickySource = new ArrayEventSource(calendar);\n\t\tthis.otherSources = [];\n\t},\n\n\n\trequestEvents: function(start, end, timezone, force) {\n\t\tif (\n\t\t\tforce ||\n\t\t\t!this.currentPeriod ||\n\t\t\t!this.currentPeriod.isWithinRange(start, end) ||\n\t\t\ttimezone !== this.currentPeriod.timezone\n\t\t) {\n\t\t\tthis.setPeriod( // will change this.currentPeriod\n\t\t\t\tnew EventPeriod(start, end, timezone)\n\t\t\t);\n\t\t}\n\n\t\treturn this.currentPeriod.whenReleased();\n\t},\n\n\n\t// Source Adding/Removing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\taddSource: function(eventSource) {\n\t\tthis.otherSources.push(eventSource);\n\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.requestSource(eventSource); // might release\n\t\t}\n\t},\n\n\n\tremoveSource: function(doomedSource) {\n\t\tremoveExact(this.otherSources, doomedSource);\n\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.purgeSource(doomedSource); // might release\n\t\t}\n\t},\n\n\n\tremoveAllSources: function() {\n\t\tthis.otherSources = [];\n\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.purgeAllSources(); // might release\n\t\t}\n\t},\n\n\n\t// Source Refetching\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\trefetchSource: function(eventSource) {\n\t\tvar currentPeriod = this.currentPeriod;\n\n\t\tif (currentPeriod) {\n\t\t\tcurrentPeriod.freeze();\n\t\t\tcurrentPeriod.purgeSource(eventSource);\n\t\t\tcurrentPeriod.requestSource(eventSource);\n\t\t\tcurrentPeriod.thaw();\n\t\t}\n\t},\n\n\n\trefetchAllSources: function() {\n\t\tvar currentPeriod = this.currentPeriod;\n\n\t\tif (currentPeriod) {\n\t\t\tcurrentPeriod.freeze();\n\t\t\tcurrentPeriod.purgeAllSources();\n\t\t\tcurrentPeriod.requestSources(this.getSources());\n\t\t\tcurrentPeriod.thaw();\n\t\t}\n\t},\n\n\n\t// Source Querying\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tgetSources: function() {\n\t\treturn [ this.stickySource ].concat(this.otherSources);\n\t},\n\n\n\t// like querySources, but accepts multple match criteria (like multiple IDs)\n\tmultiQuerySources: function(matchInputs) {\n\n\t\t// coerce into an array\n\t\tif (!matchInputs) {\n\t\t\tmatchInputs = [];\n\t\t}\n\t\telse if (!$.isArray(matchInputs)) {\n\t\t\tmatchInputs = [ matchInputs ];\n\t\t}\n\n\t\tvar matchingSources = [];\n\t\tvar i;\n\n\t\t// resolve raw inputs to real event source objects\n\t\tfor (i = 0; i < matchInputs.length; i++) {\n\t\t\tmatchingSources.push.apply( // append\n\t\t\t\tmatchingSources,\n\t\t\t\tthis.querySources(matchInputs[i])\n\t\t\t);\n\t\t}\n\n\t\treturn matchingSources;\n\t},\n\n\n\t// matchInput can either by a real event source object, an ID, or the function/URL for the source.\n\t// returns an array of matching source objects.\n\tquerySources: function(matchInput) {\n\t\tvar sources = this.otherSources;\n\t\tvar i, source;\n\n\t\t// given a proper event source object\n\t\tfor (i = 0; i < sources.length; i++) {\n\t\t\tsource = sources[i];\n\n\t\t\tif (source === matchInput) {\n\t\t\t\treturn [ source ];\n\t\t\t}\n\t\t}\n\n\t\t// an ID match\n\t\tsource = this.getSourceById(EventSource.normalizeId(matchInput));\n\t\tif (source) {\n\t\t\treturn [ source ];\n\t\t}\n\n\t\t// parse as an event source\n\t\tmatchInput = EventSourceParser.parse(matchInput, this.calendar);\n\t\tif (matchInput) {\n\n\t\t\treturn $.grep(sources, function(source) {\n\t\t\t\treturn isSourcesEquivalent(matchInput, source);\n\t\t\t});\n\t\t}\n\t},\n\n\n\t/*\n\tID assumed to already be normalized\n\t*/\n\tgetSourceById: function(id) {\n\t\treturn $.grep(this.otherSources, function(source) {\n\t\t\treturn source.id && source.id === id;\n\t\t})[0];\n\t},\n\n\n\t// Event-Period\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tsetPeriod: function(eventPeriod) {\n\t\tif (this.currentPeriod) {\n\t\t\tthis.unbindPeriod(this.currentPeriod);\n\t\t\tthis.currentPeriod = null;\n\t\t}\n\n\t\tthis.currentPeriod = eventPeriod;\n\t\tthis.bindPeriod(eventPeriod);\n\n\t\teventPeriod.requestSources(this.getSources());\n\t},\n\n\n\tbindPeriod: function(eventPeriod) {\n\t\tthis.listenTo(eventPeriod, 'release', function(eventsPayload) {\n\t\t\tthis.trigger('release', eventsPayload);\n\t\t});\n\t},\n\n\n\tunbindPeriod: function(eventPeriod) {\n\t\tthis.stopListeningTo(eventPeriod);\n\t},\n\n\n\t// Event Getting/Adding/Removing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tgetEventDefByUid: function(uid) {\n\t\tif (this.currentPeriod) {\n\t\t\treturn this.currentPeriod.getEventDefByUid(uid);\n\t\t}\n\t},\n\n\n\taddEventDef: function(eventDef, isSticky) {\n\t\tif (isSticky) {\n\t\t\tthis.stickySource.addEventDef(eventDef);\n\t\t}\n\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.addEventDef(eventDef); // might release\n\t\t}\n\t},\n\n\n\tremoveEventDefsById: function(eventId) {\n\t\tthis.getSources().forEach(function(eventSource) {\n\t\t\teventSource.removeEventDefsById(eventId);\n\t\t});\n\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.removeEventDefsById(eventId); // might release\n\t\t}\n\t},\n\n\n\tremoveAllEventDefs: function() {\n\t\tthis.getSources().forEach(function(eventSource) {\n\t\t\teventSource.removeAllEventDefs();\n\t\t});\n\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.removeAllEventDefs();\n\t\t}\n\t},\n\n\n\t// Event Mutating\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\t/*\n\tReturns an undo function.\n\t*/\n\tmutateEventsWithId: function(eventDefId, eventDefMutation) {\n\t\tvar currentPeriod = this.currentPeriod;\n\t\tvar eventDefs;\n\t\tvar undoFuncs = [];\n\n\t\tif (currentPeriod) {\n\n\t\t\tcurrentPeriod.freeze();\n\n\t\t\teventDefs = currentPeriod.getEventDefsById(eventDefId);\n\t\t\teventDefs.forEach(function(eventDef) {\n\t\t\t\t// add/remove esp because id might change\n\t\t\t\tcurrentPeriod.removeEventDef(eventDef);\n\t\t\t\tundoFuncs.push(eventDefMutation.mutateSingle(eventDef));\n\t\t\t\tcurrentPeriod.addEventDef(eventDef);\n\t\t\t});\n\n\t\t\tcurrentPeriod.thaw();\n\n\t\t\treturn function() {\n\t\t\t\tcurrentPeriod.freeze();\n\n\t\t\t\tfor (var i = 0; i < eventDefs.length; i++) {\n\t\t\t\t\tcurrentPeriod.removeEventDef(eventDefs[i]);\n\t\t\t\t\tundoFuncs[i]();\n\t\t\t\t\tcurrentPeriod.addEventDef(eventDefs[i]);\n\t\t\t\t}\n\n\t\t\t\tcurrentPeriod.thaw();\n\t\t\t};\n\t\t}\n\n\t\treturn function() { };\n\t},\n\n\n\t/*\n\tcopies and then mutates\n\t*/\n\tbuildMutatedEventInstanceGroup: function(eventDefId, eventDefMutation) {\n\t\tvar eventDefs = this.getEventDefsById(eventDefId);\n\t\tvar i;\n\t\tvar defCopy;\n\t\tvar allInstances = [];\n\n\t\tfor (i = 0; i < eventDefs.length; i++) {\n\t\t\tdefCopy = eventDefs[i].clone();\n\n\t\t\tif (defCopy instanceof SingleEventDef) {\n\t\t\t\teventDefMutation.mutateSingle(defCopy);\n\n\t\t\t\tallInstances.push.apply(allInstances, // append\n\t\t\t\t\tdefCopy.buildInstances()\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn new EventInstanceGroup(allInstances);\n\t},\n\n\n\t// Freezing\n\t// -----------------------------------------------------------------------------------------------------------------\n\n\n\tfreeze: function() {\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.freeze();\n\t\t}\n\t},\n\n\n\tthaw: function() {\n\t\tif (this.currentPeriod) {\n\t\t\tthis.currentPeriod.thaw();\n\t\t}\n\t}\n\n});\n\n\n// Methods that straight-up query the current EventPeriod for an array of results.\n[\n\t'getEventDefsById',\n\t'getEventInstances',\n\t'getEventInstancesWithId',\n\t'getEventInstancesWithoutId'\n].forEach(function(methodName) {\n\n\tEventManager.prototype[methodName] = function() {\n\t\tvar currentPeriod = this.currentPeriod;\n\n\t\tif (currentPeriod) {\n\t\t\treturn currentPeriod[methodName].apply(currentPeriod, arguments);\n\t\t}\n\n\t\treturn [];\n\t};\n});\n\n\nfunction isSourcesEquivalent(source0, source1) {\n\treturn source0.getPrimitive() == source1.getPrimitive();\n}\n\n;;\n\nvar BUSINESS_HOUR_EVENT_DEFAULTS = {\n\tstart: '09:00',\n\tend: '17:00',\n\tdow: [ 1, 2, 3, 4, 5 ], // monday - friday\n\trendering: 'inverse-background'\n\t// classNames are defined in businessHoursSegClasses\n};\n\n\nvar BusinessHourGenerator = FC.BusinessHourGenerator = Class.extend({\n\n\trawComplexDef: null,\n\tcalendar: null, // for anonymous EventSource\n\n\n\tconstructor: function(rawComplexDef, calendar) {\n\t\tthis.rawComplexDef = rawComplexDef;\n\t\tthis.calendar = calendar;\n\t},\n\n\n\tbuildEventInstanceGroup: function(isAllDay, unzonedRange) {\n\t\tvar eventDefs = this.buildEventDefs(isAllDay);\n\t\tvar eventInstanceGroup;\n\n\t\tif (eventDefs.length) {\n\t\t\teventInstanceGroup = new EventInstanceGroup(\n\t\t\t\teventDefsToEventInstances(eventDefs, unzonedRange)\n\t\t\t);\n\n\t\t\t// so that inverse-background rendering can happen even when no eventRanges in view\n\t\t\teventInstanceGroup.explicitEventDef = eventDefs[0];\n\n\t\t\treturn eventInstanceGroup;\n\t\t}\n\t},\n\n\n\tbuildEventDefs: function(isAllDay) {\n\t\tvar rawComplexDef = this.rawComplexDef;\n\t\tvar rawDefs = [];\n\t\tvar requireDow = false;\n\t\tvar i;\n\t\tvar defs = [];\n\n\t\tif (rawComplexDef === true) {\n\t\t\trawDefs = [ {} ]; // will get BUSINESS_HOUR_EVENT_DEFAULTS verbatim\n\t\t}\n\t\telse if ($.isPlainObject(rawComplexDef)) {\n\t\t\trawDefs = [ rawComplexDef ];\n\t\t}\n\t\telse if ($.isArray(rawComplexDef)) {\n\t\t\trawDefs = rawComplexDef;\n\t\t\trequireDow = true; // every sub-definition NEEDS a day-of-week\n\t\t}\n\n\t\tfor (i = 0; i < rawDefs.length; i++) {\n\t\t\tif (!requireDow || rawDefs[i].dow) {\n\t\t\t\tdefs.push(\n\t\t\t\t\tthis.buildEventDef(isAllDay, rawDefs[i])\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn defs;\n\t},\n\n\n\tbuildEventDef: function(isAllDay, rawDef) {\n\t\tvar fullRawDef = $.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, rawDef);\n\n\t\tif (isAllDay) {\n\t\t\tfullRawDef.start = null;\n\t\t\tfullRawDef.end = null;\n\t\t}\n\n\t\treturn RecurringEventDef.parse(\n\t\t\tfullRawDef,\n\t\t\tnew EventSource(this.calendar) // dummy source\n\t\t);\n\t}\n\n});\n\n;;\n\nvar EventDefParser = {\n\n\tparse: function(eventInput, source) {\n\t\tif (\n\t\t\tisTimeString(eventInput.start) || moment.isDuration(eventInput.start) ||\n\t\t\tisTimeString(eventInput.end) || moment.isDuration(eventInput.end)\n\t\t) {\n\t\t\treturn RecurringEventDef.parse(eventInput, source);\n\t\t}\n\t\telse {\n\t\t\treturn SingleEventDef.parse(eventInput, source);\n\t\t}\n\t}\n\n};\n\n;;\n\nvar EventDef = FC.EventDef = Class.extend(ParsableModelMixin, {\n\n\tsource: null, // required\n\n\tid: null, // normalized supplied ID\n\trawId: null, // unnormalized supplied ID\n\tuid: null, // internal ID. new ID for every definition\n\n\t// NOTE: eventOrder sorting relies on these\n\ttitle: null,\n\turl: null,\n\trendering: null,\n\tconstraint: null,\n\toverlap: null,\n\teditable: null,\n\tstartEditable: null,\n\tdurationEditable: null,\n\tcolor: null,\n\tbackgroundColor: null,\n\tborderColor: null,\n\ttextColor: null,\n\n\tclassName: null, // an array. TODO: rename to className*s* (API breakage)\n\tmiscProps: null,\n\n\n\tconstructor: function(source) {\n\t\tthis.source = source;\n\t\tthis.className = [];\n\t\tthis.miscProps = {};\n\t},\n\n\n\tisAllDay: function() {\n\t\t// subclasses must implement\n\t},\n\n\n\tbuildInstances: function(unzonedRange) {\n\t\t// subclasses must implement\n\t},\n\n\n\tclone: function() {\n\t\tvar copy = new this.constructor(this.source);\n\n\t\tcopy.id = this.id;\n\t\tcopy.rawId = this.rawId;\n\t\tcopy.uid = this.uid; // not really unique anymore :(\n\n\t\tEventDef.copyVerbatimStandardProps(this, copy);\n\n\t\tcopy.className = this.className.slice(); // copy\n\t\tcopy.miscProps = $.extend({}, this.miscProps);\n\n\t\treturn copy;\n\t},\n\n\n\thasInverseRendering: function() {\n\t\treturn this.getRendering() === 'inverse-background';\n\t},\n\n\n\thasBgRendering: function() {\n\t\tvar rendering = this.getRendering();\n\n\t\treturn rendering === 'inverse-background' || rendering === 'background';\n\t},\n\n\n\tgetRendering: function() {\n\t\tif (this.rendering != null) {\n\t\t\treturn this.rendering;\n\t\t}\n\n\t\treturn this.source.rendering;\n\t},\n\n\n\tgetConstraint: function() {\n\t\tif (this.constraint != null) {\n\t\t\treturn this.constraint;\n\t\t}\n\n\t\tif (this.source.constraint != null) {\n\t\t\treturn this.source.constraint;\n\t\t}\n\n\t\treturn this.source.calendar.opt('eventConstraint'); // what about View option?\n\t},\n\n\n\tgetOverlap: function() {\n\t\tif (this.overlap != null) {\n\t\t\treturn this.overlap;\n\t\t}\n\n\t\tif (this.source.overlap != null) {\n\t\t\treturn this.source.overlap;\n\t\t}\n\n\t\treturn this.source.calendar.opt('eventOverlap'); // what about View option?\n\t},\n\n\n\tisStartExplicitlyEditable: function() {\n\t\tif (this.startEditable !== null) {\n\t\t\treturn this.startEditable;\n\t\t}\n\n\t\treturn this.source.startEditable;\n\t},\n\n\n\tisDurationExplicitlyEditable: function() {\n\t\tif (this.durationEditable !== null) {\n\t\t\treturn this.durationEditable;\n\t\t}\n\n\t\treturn this.source.durationEditable;\n\t},\n\n\n\tisExplicitlyEditable: function() {\n\t\tif (this.editable !== null) {\n\t\t\treturn this.editable;\n\t\t}\n\n\t\treturn this.source.editable;\n\t},\n\n\n\ttoLegacy: function() {\n\t\tvar obj = $.extend({}, this.miscProps);\n\n\t\tobj._id = this.uid;\n\t\tobj.source = this.source;\n\t\tobj.className = this.className.slice(); // copy\n\t\tobj.allDay = this.isAllDay();\n\n\t\tif (this.rawId != null) {\n\t\t\tobj.id = this.rawId;\n\t\t}\n\n\t\tEventDef.copyVerbatimStandardProps(this, obj);\n\n\t\treturn obj;\n\t},\n\n\n\tapplyManualStandardProps: function(rawProps) {\n\n\t\tif (rawProps.id != null) {\n\t\t\tthis.id = EventDef.normalizeId((this.rawId = rawProps.id));\n\t\t}\n\t\telse {\n\t\t\tthis.id = EventDef.generateId();\n\t\t}\n\n\t\tif (rawProps._id != null) { // accept this prop, even tho somewhat internal\n\t\t\tthis.uid = String(rawProps._id);\n\t\t}\n\t\telse {\n\t\t\tthis.uid = EventDef.generateId();\n\t\t}\n\n\t\t// TODO: converge with EventSource\n\t\tif ($.isArray(rawProps.className)) {\n\t\t\tthis.className = rawProps.className;\n\t\t}\n\t\tif (typeof rawProps.className === 'string') {\n\t\t\tthis.className = rawProps.className.split(/\\s+/);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\n\tapplyMiscProps: function(rawProps) {\n\t\t$.extend(this.miscProps, rawProps);\n\t}\n\n});\n\n// finish initializing the mixin\nEventDef.defineStandardProps = ParsableModelMixin_defineStandardProps;\nEventDef.copyVerbatimStandardProps = ParsableModelMixin_copyVerbatimStandardProps;\n\n\n// IDs\n// ---------------------------------------------------------------------------------------------------------------------\n// TODO: converge with EventSource\n\n\nEventDef.uuid = 0;\n\n\nEventDef.normalizeId = function(id) {\n\treturn String(id);\n};\n\n\nEventDef.generateId = function() {\n\treturn '_fc' + (EventDef.uuid++);\n};\n\n\n// Parsing\n// ---------------------------------------------------------------------------------------------------------------------\n\n\nEventDef.defineStandardProps({\n\t// not automatically assigned (`false`)\n\t_id: false,\n\tid: false,\n\tclassName: false,\n\tsource: false, // will ignored\n\n\t// automatically assigned (`true`)\n\ttitle: true,\n\turl: true,\n\trendering: true,\n\tconstraint: true,\n\toverlap: true,\n\teditable: true,\n\tstartEditable: true,\n\tdurationEditable: true,\n\tcolor: true,\n\tbackgroundColor: true,\n\tborderColor: true,\n\ttextColor: true\n});\n\n\nEventDef.parse = function(rawInput, source) {\n\tvar def = new this(source);\n\tvar calendarTransform = source.calendar.opt('eventDataTransform');\n\tvar sourceTransform = source.eventDataTransform;\n\n\tif (calendarTransform) {\n\t\trawInput = calendarTransform(rawInput);\n\t}\n\tif (sourceTransform) {\n\t\trawInput = sourceTransform(rawInput);\n\t}\n\n\tif (def.applyProps(rawInput)) {\n\t\treturn def;\n\t}\n\n\treturn false;\n};\n\n;;\n\nvar SingleEventDef = EventDef.extend({\n\n\tdateProfile: null,\n\n\n\t/*\n\tWill receive start/end params, but will be ignored.\n\t*/\n\tbuildInstances: function() {\n\t\treturn [ this.buildInstance() ];\n\t},\n\n\n\tbuildInstance: function() {\n\t\treturn new EventInstance(\n\t\t\tthis, // definition\n\t\t\tthis.dateProfile\n\t\t);\n\t},\n\n\n\tisAllDay: function() {\n\t\treturn this.dateProfile.isAllDay();\n\t},\n\n\n\tclone: function() {\n\t\tvar def = EventDef.prototype.clone.call(this);\n\n\t\tdef.dateProfile = this.dateProfile;\n\n\t\treturn def;\n\t},\n\n\n\trezone: function() {\n\t\tvar calendar = this.source.calendar;\n\t\tvar dateProfile = this.dateProfile;\n\n\t\tthis.dateProfile = new EventDateProfile(\n\t\t\tcalendar.moment(dateProfile.start),\n\t\t\tdateProfile.end ? calendar.moment(dateProfile.end) : null,\n\t\t\tcalendar\n\t\t);\n\t},\n\n\n\t/*\n\tNOTE: if super-method fails, should still attempt to apply\n\t*/\n\tapplyManualStandardProps: function(rawProps) {\n\t\tvar superSuccess = EventDef.prototype.applyManualStandardProps.apply(this, arguments);\n\t\tvar dateProfile = EventDateProfile.parse(rawProps, this.source); // returns null on failure\n\n\t\tif (dateProfile) {\n\t\t\tthis.dateProfile = dateProfile;\n\n\t\t\t// make sure `date` shows up in the legacy event objects as-is\n\t\t\tif (rawProps.date != null) {\n\t\t\t\tthis.miscProps.date = rawProps.date;\n\t\t\t}\n\n\t\t\treturn superSuccess;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t}\n\n});\n\n\n// Parsing\n// ---------------------------------------------------------------------------------------------------------------------\n\n\nSingleEventDef.defineStandardProps({ // false = manually process\n\tstart: false,\n\tdate: false, // alias for 'start'\n\tend: false,\n\tallDay: false\n});\n\n;;\n\nvar RecurringEventDef = EventDef.extend({\n\n\tstartTime: null, // duration\n\tendTime: null, // duration, or null\n\tdowHash: null, // object hash, or null\n\n\n\tisAllDay: function() {\n\t\treturn !this.startTime && !this.endTime;\n\t},\n\n\n\tbuildInstances: function(unzonedRange) {\n\t\tvar calendar = this.source.calendar;\n\t\tvar unzonedDate = unzonedRange.getStart();\n\t\tvar unzonedEnd = unzonedRange.getEnd();\n\t\tvar zonedDayStart;\n\t\tvar instanceStart, instanceEnd;\n\t\tvar instances = [];\n\n\t\twhile (unzonedDate.isBefore(unzonedEnd)) {\n\n\t\t\t// if everyday, or this particular day-of-week\n\t\t\tif (!this.dowHash || this.dowHash[unzonedDate.day()]) {\n\n\t\t\t\tzonedDayStart = calendar.applyTimezone(unzonedDate);\n\t\t\t\tinstanceStart = zonedDayStart.clone();\n\t\t\t\tinstanceEnd = null;\n\n\t\t\t\tif (this.startTime) {\n\t\t\t\t\tinstanceStart.time(this.startTime);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tinstanceStart.stripTime();\n\t\t\t\t}\n\n\t\t\t\tif (this.endTime) {\n\t\t\t\t\tinstanceEnd = zonedDayStart.clone().time(this.endTime);\n\t\t\t\t}\n\n\t\t\t\tinstances.push(\n\t\t\t\t\tnew EventInstance(\n\t\t\t\t\t\tthis, // definition\n\t\t\t\t\t\tnew EventDateProfile(instanceStart, instanceEnd, calendar)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tunzonedDate.add(1, 'days');\n\t\t}\n\n\t\treturn instances;\n\t},\n\n\n\tsetDow: function(dowNumbers) {\n\n\t\tif (!this.dowHash) {\n\t\t\tthis.dowHash = {};\n\t\t}\n\n\t\tfor (var i = 0; i < dowNumbers.length; i++) {\n\t\t\tthis.dowHash[dowNumbers[i]] = true;\n\t\t}\n\t},\n\n\n\tclone: function() {\n\t\tvar def = EventDef.prototype.clone.call(this);\n\n\t\tif (def.startTime) {\n\t\t\tdef.startTime = moment.duration(this.startTime);\n\t\t}\n\n\t\tif (def.endTime) {\n\t\t\tdef.endTime = moment.duration(this.endTime);\n\t\t}\n\n\t\tif (this.dowHash) {\n\t\t\tdef.dowHash = $.extend({}, this.dowHash);\n\t\t}\n\n\t\treturn def;\n\t},\n\n\n\t/*\n\tNOTE: if super-method fails, should still attempt to apply\n\t*/\n\tapplyProps: function(rawProps) {\n\t\tvar superSuccess = EventDef.prototype.applyProps.apply(this, arguments);\n\n\t\tif (rawProps.start) {\n\t\t\tthis.startTime = moment.duration(rawProps.start);\n\t\t}\n\n\t\tif (rawProps.end) {\n\t\t\tthis.endTime = moment.duration(rawProps.end);\n\t\t}\n\n\t\tif (rawProps.dow) {\n\t\t\tthis.setDow(rawProps.dow);\n\t\t}\n\n\t\treturn superSuccess;\n\t}\n\n});\n\n\n// Parsing\n// ---------------------------------------------------------------------------------------------------------------------\n\n\nRecurringEventDef.defineStandardProps({ // false = manually process\n\tstart: false,\n\tend: false,\n\tdow: false\n});\n\n;;\n\nvar EventInstance = Class.extend({\n\n\tdef: null, // EventDef\n\tdateProfile: null, // EventDateProfile\n\n\n\tconstructor: function(def, dateProfile) {\n\t\tthis.def = def;\n\t\tthis.dateProfile = dateProfile;\n\t},\n\n\n\ttoLegacy: function() {\n\t\tvar dateProfile = this.dateProfile;\n\t\tvar obj = this.def.toLegacy();\n\n\t\tobj.start = dateProfile.start.clone();\n\t\tobj.end = dateProfile.end ? dateProfile.end.clone() : null;\n\n\t\treturn obj;\n\t}\n\n});\n\n;;\n\n/*\nIt's expected that there will be at least one EventInstance,\nOR that an explicitEventDef is assigned.\n*/\nvar EventInstanceGroup = FC.EventInstanceGroup = Class.extend({\n\n\teventInstances: null,\n\texplicitEventDef: null, // optional\n\n\n\tconstructor: function(eventInstances) {\n\t\tthis.eventInstances = eventInstances || [];\n\t},\n\n\n\tgetAllEventRanges: function(constraintRange) {\n\t\tif (constraintRange) {\n\t\t\treturn this.sliceNormalRenderRanges(constraintRange);\n\t\t}\n\t\telse {\n\t\t\treturn this.eventInstances.map(eventInstanceToEventRange);\n\t\t}\n\t},\n\n\n\tsliceRenderRanges: function(constraintRange) {\n\t\tif (this.isInverse()) {\n\t\t\treturn this.sliceInverseRenderRanges(constraintRange);\n\t\t}\n\t\telse {\n\t\t\treturn this.sliceNormalRenderRanges(constraintRange);\n\t\t}\n\t},\n\n\n\tsliceNormalRenderRanges: function(constraintRange) {\n\t\tvar eventInstances = this.eventInstances;\n\t\tvar i, eventInstance;\n\t\tvar slicedRange;\n\t\tvar slicedEventRanges = [];\n\n\t\tfor (i = 0; i < eventInstances.length; i++) {\n\t\t\teventInstance = eventInstances[i];\n\n\t\t\tslicedRange = eventInstance.dateProfile.unzonedRange.intersect(constraintRange);\n\n\t\t\tif (slicedRange) {\n\t\t\t\tslicedEventRanges.push(\n\t\t\t\t\tnew EventRange(\n\t\t\t\t\t\tslicedRange,\n\t\t\t\t\t\teventInstance.def,\n\t\t\t\t\t\teventInstance\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn slicedEventRanges;\n\t},\n\n\n\tsliceInverseRenderRanges: function(constraintRange) {\n\t\tvar unzonedRanges = this.eventInstances.map(eventInstanceToUnzonedRange);\n\t\tvar ownerDef = this.getEventDef();\n\n\t\tunzonedRanges = invertUnzonedRanges(unzonedRanges, constraintRange);\n\n\t\treturn unzonedRanges.map(function(unzonedRange) {\n\t\t\treturn new EventRange(unzonedRange, ownerDef); // don't give an EventInstance\n\t\t});\n\t},\n\n\n\tisInverse: function() {\n\t\treturn this.getEventDef().hasInverseRendering();\n\t},\n\n\n\tgetEventDef: function() {\n\t\treturn this.explicitEventDef || this.eventInstances[0].def;\n\t}\n\n});\n\n;;\n\n/*\nMeant to be immutable\n*/\nvar EventDateProfile = Class.extend({\n\n\tstart: null,\n\tend: null,\n\tunzonedRange: null,\n\n\n\tconstructor: function(start, end, calendar) {\n\t\tthis.start = start;\n\t\tthis.end = end || null;\n\t\tthis.unzonedRange = this.buildUnzonedRange(calendar);\n\t},\n\n\n\tisAllDay: function() { // why recompute this every time?\n\t\treturn !(this.start.hasTime() || (this.end && this.end.hasTime()));\n\t},\n\n\n\t/*\n\tNeeds a Calendar object\n\t*/\n\tbuildUnzonedRange: function(calendar) {\n\t\tvar startMs = this.start.clone().stripZone().valueOf();\n\t\tvar endMs = this.getEnd(calendar).stripZone().valueOf();\n\n\t\treturn new UnzonedRange(startMs, endMs);\n\t},\n\n\n\t/*\n\tNeeds a Calendar object\n\t*/\n\tgetEnd: function(calendar) {\n\t\treturn this.end ?\n\t\t\tthis.end.clone() :\n\t\t\t// derive the end from the start and allDay. compute allDay if necessary\n\t\t\tcalendar.getDefaultEventEnd(\n\t\t\t\tthis.isAllDay(),\n\t\t\t\tthis.start\n\t\t\t);\n\t}\n\n});\n\n\nEventDateProfile.isStandardProp = function(propName) {\n\treturn propName === 'start' || propName === 'date' || propName === 'end' || propName === 'allDay';\n};\n\n\n/*\nNeeds an EventSource object\n*/\nEventDateProfile.parse = function(rawProps, source) {\n\tvar startInput = rawProps.start || rawProps.date;\n\tvar endInput = rawProps.end;\n\n\tif (!startInput) {\n\t\treturn false;\n\t}\n\n\tvar calendar = source.calendar;\n\tvar start = calendar.moment(startInput);\n\tvar end = endInput ? calendar.moment(endInput) : null;\n\tvar forcedAllDay = rawProps.allDay;\n\tvar forceEventDuration = calendar.opt('forceEventDuration');\n\n\tif (!start.isValid()) {\n\t\treturn false;\n\t}\n\n\tif (end && (!end.isValid() || !end.isAfter(start))) {\n\t\tend = null;\n\t}\n\n\tif (forcedAllDay == null) {\n\t\tforcedAllDay = source.allDayDefault;\n\t\tif (forcedAllDay == null) {\n\t\t\tforcedAllDay = calendar.opt('allDayDefault');\n\t\t}\n\t}\n\n\tif (forcedAllDay === true) {\n\t\tstart.stripTime();\n\t\tif (end) {\n\t\t\tend.stripTime();\n\t\t}\n\t}\n\telse if (forcedAllDay === false) {\n\t\tif (!start.hasTime()) {\n\t\t\tstart.time(0);\n\t\t}\n\t\tif (end && !end.hasTime()) {\n\t\t\tend.time(0);\n\t\t}\n\t}\n\n\tif (!end && forceEventDuration) {\n\t\tend = calendar.getDefaultEventEnd(!start.hasTime(), start);\n\t}\n\n\treturn new EventDateProfile(start, end, calendar);\n};\n\n;;\n\nvar EventRange = Class.extend({\n\n\tunzonedRange: null,\n\teventDef: null,\n\teventInstance: null, // optional\n\n\n\tconstructor: function(unzonedRange, eventDef, eventInstance) {\n\t\tthis.unzonedRange = unzonedRange;\n\t\tthis.eventDef = eventDef;\n\n\t\tif (eventInstance) {\n\t\t\tthis.eventInstance = eventInstance;\n\t\t}\n\t}\n\n});\n\n;;\n\nvar EventFootprint = FC.EventFootprint = Class.extend({\n\n\tcomponentFootprint: null,\n\teventDef: null,\n\teventInstance: null, // optional\n\n\n\tconstructor: function(componentFootprint, eventDef, eventInstance) {\n\t\tthis.componentFootprint = componentFootprint;\n\t\tthis.eventDef = eventDef;\n\n\t\tif (eventInstance) {\n\t\t\tthis.eventInstance = eventInstance;\n\t\t}\n\t},\n\n\n\tgetEventLegacy: function() {\n\t\treturn (this.eventInstance || this.eventDef).toLegacy();\n\t}\n\n});\n\n;;\n\nvar EventDefMutation = FC.EventDefMutation = Class.extend({\n\n\t// won't ever be empty. will be null instead.\n\t// callers should use setDateMutation for setting.\n\tdateMutation: null,\n\n\t// hacks to get updateEvent/createFromRawProps to work.\n\t// not undo-able and not considered in isEmpty.\n\teventDefId: null, // standard manual props\n\tclassName: null, // \"\n\tverbatimStandardProps: null,\n\tmiscProps: null,\n\n\n\t/*\n\teventDef assumed to be a SingleEventDef.\n\treturns an undo function.\n\t*/\n\tmutateSingle: function(eventDef) {\n\t\tvar origDateProfile;\n\n\t\tif (this.dateMutation) {\n\t\t\torigDateProfile = eventDef.dateProfile;\n\n\t\t\teventDef.dateProfile = this.dateMutation.buildNewDateProfile(\n\t\t\t\torigDateProfile,\n\t\t\t\teventDef.source.calendar\n\t\t\t);\n\t\t}\n\n\t\t// can't undo\n\t\t// TODO: more DRY with EventDef::applyManualStandardProps\n\t\tif (this.eventDefId != null) {\n\t\t\teventDef.id = EventDef.normalizeId((eventDef.rawId = this.eventDefId));\n\t\t}\n\n\t\t// can't undo\n\t\t// TODO: more DRY with EventDef::applyManualStandardProps\n\t\tif (this.className) {\n\t\t\teventDef.className = this.className;\n\t\t}\n\n\t\t// can't undo\n\t\tif (this.verbatimStandardProps) {\n\t\t\tSingleEventDef.copyVerbatimStandardProps(\n\t\t\t\tthis.verbatimStandardProps, // src\n\t\t\t\teventDef // dest\n\t\t\t);\n\t\t}\n\n\t\t// can't undo\n\t\tif (this.miscProps) {\n\t\t\teventDef.applyMiscProps(this.miscProps);\n\t\t}\n\n\t\tif (origDateProfile) {\n\t\t\treturn function() {\n\t\t\t\teventDef.dateProfile = origDateProfile;\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\treturn function() { };\n\t\t}\n\t},\n\n\n\tsetDateMutation: function(dateMutation) {\n\t\tif (dateMutation && !dateMutation.isEmpty()) {\n\t\t\tthis.dateMutation = dateMutation;\n\t\t}\n\t\telse {\n\t\t\tthis.dateMutation = null;\n\t\t}\n\t},\n\n\n\tisEmpty: function() {\n\t\treturn !this.dateMutation;\n\t}\n\n});\n\n\nEventDefMutation.createFromRawProps = function(eventInstance, rawProps, largeUnit) {\n\tvar eventDef = eventInstance.def;\n\tvar dateProps = {};\n\tvar standardProps = {};\n\tvar miscProps = {};\n\tvar verbatimStandardProps = {};\n\tvar eventDefId = null;\n\tvar className = null;\n\tvar propName;\n\tvar dateProfile;\n\tvar dateMutation;\n\tvar defMutation;\n\n\tfor (propName in rawProps) {\n\t\tif (EventDateProfile.isStandardProp(propName)) {\n\t\t\tdateProps[propName] = rawProps[propName];\n\t\t}\n\t\telse if (eventDef.isStandardProp(propName)) {\n\t\t\tstandardProps[propName] = rawProps[propName];\n\t\t}\n\t\telse if (eventDef.miscProps[propName] !== rawProps[propName]) { // only if changed\n\t\t\tmiscProps[propName] = rawProps[propName];\n\t\t}\n\t}\n\n\tdateProfile = EventDateProfile.parse(dateProps, eventDef.source);\n\n\tif (dateProfile) { // no failure?\n\t\tdateMutation = EventDefDateMutation.createFromDiff(\n\t\t\teventInstance.dateProfile,\n\t\t\tdateProfile,\n\t\t\tlargeUnit\n\t\t);\n\t}\n\n\tif (standardProps.id !== eventDef.id) {\n\t\teventDefId = standardProps.id; // only apply if there's a change\n\t}\n\n\tif (!isArraysEqual(standardProps.className, eventDef.className)) {\n\t\tclassName = standardProps.className; // only apply if there's a change\n\t}\n\n\tEventDef.copyVerbatimStandardProps(\n\t\tstandardProps, // src\n\t\tverbatimStandardProps // dest\n\t);\n\n\tdefMutation = new EventDefMutation();\n\tdefMutation.eventDefId = eventDefId;\n\tdefMutation.className = className;\n\tdefMutation.verbatimStandardProps = verbatimStandardProps;\n\tdefMutation.miscProps = miscProps;\n\n\tif (dateMutation) {\n\t\tdefMutation.dateMutation = dateMutation;\n\t}\n\n\treturn defMutation;\n};\n\n;;\n\nvar EventDefDateMutation = Class.extend({\n\n\tclearEnd: false,\n\tforceTimed: false,\n\tforceAllDay: false,\n\n\t// Durations. if 0-ms duration, will be null instead.\n\t// Callers should not set this directly.\n\tdateDelta: null,\n\tstartDelta: null,\n\tendDelta: null,\n\n\n\t/*\n\treturns an undo function.\n\t*/\n\tbuildNewDateProfile: function(eventDateProfile, calendar) {\n\t\tvar start = eventDateProfile.start.clone();\n\t\tvar end = null;\n\t\tvar shouldRezone = false;\n\n\t\tif (eventDateProfile.end && !this.clearEnd) {\n\t\t\tend = eventDateProfile.end.clone();\n\t\t}\n\t\t// if there will be an end-date mutation, guarantee an end,\n\t\t// ambigously-zoned according to the original allDay\n\t\telse if (this.endDelta && !end) {\n\t\t\tend = calendar.getDefaultEventEnd(eventDateProfile.isAllDay(), start);\n\t\t}\n\n\t\tif (this.forceTimed) {\n\t\t\tshouldRezone = true;\n\n\t\t\tif (!start.hasTime()) {\n\t\t\t\tstart.time(0);\n\t\t\t}\n\n\t\t\tif (end && !end.hasTime()) {\n\t\t\t\tend.time(0);\n\t\t\t}\n\t\t}\n\t\telse if (this.forceAllDay) {\n\n\t\t\tif (start.hasTime()) {\n\t\t\t\tstart.stripTime();\n\t\t\t}\n\n\t\t\tif (end && end.hasTime()) {\n\t\t\t\tend.stripTime();\n\t\t\t}\n\t\t}\n\n\t\tif (this.dateDelta) {\n\t\t\tshouldRezone = true;\n\n\t\t\tstart.add(this.dateDelta);\n\n\t\t\tif (end) {\n\t\t\t\tend.add(this.dateDelta);\n\t\t\t}\n\t\t}\n\n\t\t// do this before adding startDelta to start, so we can work off of start\n\t\tif (this.endDelta) {\n\t\t\tshouldRezone = true;\n\n\t\t\tend.add(this.endDelta);\n\t\t}\n\n\t\tif (this.startDelta) {\n\t\t\tshouldRezone = true;\n\n\t\t\tstart.add(this.startDelta);\n\t\t}\n\n\t\tif (shouldRezone) {\n\t\t\tstart = calendar.applyTimezone(start);\n\n\t\t\tif (end) {\n\t\t\t\tend = calendar.applyTimezone(end);\n\t\t\t}\n\t\t}\n\n\t\t// TODO: okay to access calendar option?\n\t\tif (!end && calendar.opt('forceEventDuration')) {\n\t\t\tend = calendar.getDefaultEventEnd(eventDateProfile.isAllDay(), start);\n\t\t}\n\n\t\treturn new EventDateProfile(start, end, calendar);\n\t},\n\n\n\tsetDateDelta: function(dateDelta) {\n\t\tif (dateDelta && dateDelta.valueOf()) {\n\t\t\tthis.dateDelta = dateDelta;\n\t\t}\n\t\telse {\n\t\t\tthis.dateDelta = null;\n\t\t}\n\t},\n\n\n\tsetStartDelta: function(startDelta) {\n\t\tif (startDelta && startDelta.valueOf()) {\n\t\t\tthis.startDelta = startDelta;\n\t\t}\n\t\telse {\n\t\t\tthis.startDelta = null;\n\t\t}\n\t},\n\n\n\tsetEndDelta: function(endDelta) {\n\t\tif (endDelta && endDelta.valueOf()) {\n\t\t\tthis.endDelta = endDelta;\n\t\t}\n\t\telse {\n\t\t\tthis.endDelta = null;\n\t\t}\n\t},\n\n\n\tisEmpty: function() {\n\t\treturn !this.clearEnd && !this.forceTimed && !this.forceAllDay &&\n\t\t\t!this.dateDelta && !this.startDelta && !this.endDelta;\n\t}\n\n});\n\n\nEventDefDateMutation.createFromDiff = function(dateProfile0, dateProfile1, largeUnit) {\n\tvar clearEnd = dateProfile0.end && !dateProfile1.end;\n\tvar forceTimed = dateProfile0.isAllDay() && !dateProfile1.isAllDay();\n\tvar forceAllDay = !dateProfile0.isAllDay() && dateProfile1.isAllDay();\n\tvar dateDelta;\n\tvar endDiff;\n\tvar endDelta;\n\tvar mutation;\n\n\t// subtracts the dates in the appropriate way, returning a duration\n\tfunction subtractDates(date1, date0) { // date1 - date0\n\t\tif (largeUnit) {\n\t\t\treturn diffByUnit(date1, date0, largeUnit); // poorly named\n\t\t}\n\t\telse if (dateProfile1.isAllDay()) {\n\t\t\treturn diffDay(date1, date0); // poorly named\n\t\t}\n\t\telse {\n\t\t\treturn diffDayTime(date1, date0); // poorly named\n\t\t}\n\t}\n\n\tdateDelta = subtractDates(dateProfile1.start, dateProfile0.start);\n\n\tif (dateProfile1.end) {\n\t\t// use unzonedRanges because dateProfile0.end might be null\n\t\tendDiff = subtractDates(\n\t\t\tdateProfile1.unzonedRange.getEnd(),\n\t\t\tdateProfile0.unzonedRange.getEnd()\n\t\t);\n\t\tendDelta = endDiff.subtract(dateDelta);\n\t}\n\n\tmutation = new EventDefDateMutation();\n\tmutation.clearEnd = clearEnd;\n\tmutation.forceTimed = forceTimed;\n\tmutation.forceAllDay = forceAllDay;\n\tmutation.setDateDelta(dateDelta);\n\tmutation.setEndDelta(endDelta);\n\n\treturn mutation;\n};\n\n;;\n\nfunction eventDefsToEventInstances(eventDefs, unzonedRange) {\n\tvar eventInstances = [];\n\tvar i;\n\n\tfor (i = 0; i < eventDefs.length; i++) {\n\t\teventInstances.push.apply(eventInstances, // append\n\t\t\teventDefs[i].buildInstances(unzonedRange)\n\t\t);\n\t}\n\n\treturn eventInstances;\n}\n\n\nfunction eventInstanceToEventRange(eventInstance) {\n\treturn new EventRange(\n\t\teventInstance.dateProfile.unzonedRange,\n\t\teventInstance.def,\n\t\teventInstance\n\t);\n}\n\n\nfunction eventRangeToEventFootprint(eventRange) {\n\treturn new EventFootprint(\n\t\tnew ComponentFootprint(\n\t\t\teventRange.unzonedRange,\n\t\t\teventRange.eventDef.isAllDay()\n\t\t),\n\t\teventRange.eventDef,\n\t\teventRange.eventInstance // might not exist\n\t);\n}\n\n\nfunction eventInstanceToUnzonedRange(eventInstance) {\n\treturn eventInstance.dateProfile.unzonedRange;\n}\n\n\nfunction eventFootprintToComponentFootprint(eventFootprint) {\n\treturn eventFootprint.componentFootprint;\n}\n\n;;\n\nvar EventSource = Class.extend(ParsableModelMixin, {\n\n\tcalendar: null,\n\n\tid: null, // can stay null\n\tuid: null,\n\tcolor: null,\n\tbackgroundColor: null,\n\tborderColor: null,\n\ttextColor: null,\n\tclassName: null, // array\n\teditable: null,\n\tstartEditable: null,\n\tdurationEditable: null,\n\trendering: null,\n\toverlap: null,\n\tconstraint: null,\n\tallDayDefault: null,\n\teventDataTransform: null, // optional function\n\n\n\t// can we do away with calendar? at least for the abstract?\n\t// useful for buildEventDef\n\tconstructor: function(calendar) {\n\t\tthis.calendar = calendar;\n\t\tthis.className = [];\n\t\tthis.uid = String(EventSource.uuid++);\n\t},\n\n\n\tfetch: function(start, end, timezone) {\n\t\t// subclasses must implement. must return a promise.\n\t},\n\n\n\tremoveEventDefsById: function(eventDefId) {\n\t\t// optional for subclasses to implement\n\t},\n\n\n\tremoveAllEventDefs: function() {\n\t\t// optional for subclasses to implement\n\t},\n\n\n\t/*\n\tFor compairing/matching\n\t*/\n\tgetPrimitive: function(otherSource) {\n\t\t// subclasses must implement\n\t},\n\n\n\tparseEventDefs: function(rawEventDefs) {\n\t\tvar i;\n\t\tvar eventDef;\n\t\tvar eventDefs = [];\n\n\t\tfor (i = 0; i < rawEventDefs.length; i++) {\n\t\t\teventDef = EventDefParser.parse(\n\t\t\t\trawEventDefs[i],\n\t\t\t\tthis // source\n\t\t\t);\n\n\t\t\tif (eventDef) {\n\t\t\t\teventDefs.push(eventDef);\n\t\t\t}\n\t\t}\n\n\t\treturn eventDefs;\n\t},\n\n\n\tapplyManualStandardProps: function(rawProps) {\n\n\t\tif (rawProps.id != null) {\n\t\t\tthis.id = EventSource.normalizeId(rawProps.id);\n\t\t}\n\n\t\t// TODO: converge with EventDef\n\t\tif ($.isArray(rawProps.className)) {\n\t\t\tthis.className = rawProps.className;\n\t\t}\n\t\telse if (typeof rawProps.className === 'string') {\n\t\t\tthis.className = rawProps.className.split(/\\s+/);\n\t\t}\n\n\t\treturn true;\n\t}\n\n});\n\n\n// finish initializing the mixin\nEventSource.defineStandardProps = ParsableModelMixin_defineStandardProps;\n\n\n// IDs\n// ---------------------------------------------------------------------------------------------------------------------\n// TODO: converge with EventDef\n\n\nEventSource.uuid = 0;\n\n\nEventSource.normalizeId = function(id) {\n\tif (id) {\n\t\treturn String(id);\n\t}\n\n\treturn null;\n};\n\n\n// Parsing\n// ---------------------------------------------------------------------------------------------------------------------\n\n\nEventSource.defineStandardProps({\n\t// manually process...\n\tid: false,\n\tclassName: false,\n\n\t// automatically transfer...\n\tcolor: true,\n\tbackgroundColor: true,\n\tborderColor: true,\n\ttextColor: true,\n\teditable: true,\n\tstartEditable: true,\n\tdurationEditable: true,\n\trendering: true,\n\toverlap: true,\n\tconstraint: true,\n\tallDayDefault: true,\n\teventDataTransform: true\n});\n\n\n/*\nrawInput can be any data type!\n*/\nEventSource.parse = function(rawInput, calendar) {\n\tvar source = new this(calendar);\n\n\tif (typeof rawInput === 'object') {\n\t\tif (source.applyProps(rawInput)) {\n\t\t\treturn source;\n\t\t}\n\t}\n\n\treturn false;\n};\n\n\nFC.EventSource = EventSource;\n\n;;\n\nvar EventSourceParser = {\n\n\tsourceClasses: [],\n\n\n\tregisterClass: function(EventSourceClass) {\n\t\tthis.sourceClasses.unshift(EventSourceClass); // give highest priority\n\t},\n\n\n\tparse: function(rawInput, calendar) {\n\t\tvar sourceClasses = this.sourceClasses;\n\t\tvar i;\n\t\tvar eventSource;\n\n\t\tfor (i = 0; i < sourceClasses.length; i++) {\n\t\t\teventSource = sourceClasses[i].parse(rawInput, calendar);\n\n\t\t\tif (eventSource) {\n\t\t\t\treturn eventSource;\n\t\t\t}\n\t\t}\n\t}\n\n};\n\n\nFC.EventSourceParser = EventSourceParser;\n\n;;\n\nvar ArrayEventSource = EventSource.extend({\n\n\trawEventDefs: null, // unparsed\n\teventDefs: null,\n\tcurrentTimezone: null,\n\n\n\tconstructor: function(calendar) {\n\t\tEventSource.apply(this, arguments); // super-constructor\n\t\tthis.eventDefs = []; // for if setRawEventDefs is never called\n\t},\n\n\n\tsetRawEventDefs: function(rawEventDefs) {\n\t\tthis.rawEventDefs = rawEventDefs;\n\t\tthis.eventDefs = this.parseEventDefs(rawEventDefs);\n\t},\n\n\n\tfetch: function(start, end, timezone) {\n\t\tvar eventDefs = this.eventDefs;\n\t\tvar i;\n\n\t\tif (\n\t\t\tthis.currentTimezone !== null &&\n\t\t\tthis.currentTimezone !== timezone\n\t\t) {\n\t\t\tfor (i = 0; i < eventDefs.length; i++) {\n\t\t\t\tif (eventDefs[i] instanceof SingleEventDef) {\n\t\t\t\t\teventDefs[i].rezone();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.currentTimezone = timezone;\n\n\t\treturn Promise.resolve(eventDefs);\n\t},\n\n\n\taddEventDef: function(eventDef) {\n\t\tthis.eventDefs.push(eventDef);\n\t},\n\n\n\t/*\n\teventDefId already normalized to a string\n\t*/\n\tremoveEventDefsById: function(eventDefId) {\n\t\treturn removeMatching(this.eventDefs, function(eventDef) {\n\t\t\treturn eventDef.id === eventDefId;\n\t\t});\n\t},\n\n\n\tremoveAllEventDefs: function() {\n\t\tthis.eventDefs = [];\n\t},\n\n\n\tgetPrimitive: function() {\n\t\treturn this.rawEventDefs;\n\t},\n\n\n\tapplyManualStandardProps: function(rawProps) {\n\t\tvar superSuccess = EventSource.prototype.applyManualStandardProps.apply(this, arguments);\n\n\t\tthis.setRawEventDefs(rawProps.events);\n\n\t\treturn superSuccess;\n\t}\n\n});\n\n\nArrayEventSource.defineStandardProps({\n\tevents: false // don't automatically transfer\n});\n\n\nArrayEventSource.parse = function(rawInput, calendar) {\n\tvar rawProps;\n\n\t// normalize raw input\n\tif ($.isArray(rawInput.events)) { // extended form\n\t\trawProps = rawInput;\n\t}\n\telse if ($.isArray(rawInput)) { // short form\n\t\trawProps = { events: rawInput };\n\t}\n\n\tif (rawProps) {\n\t\treturn EventSource.parse.call(this, rawProps, calendar);\n\t}\n\n\treturn false;\n};\n\n\nEventSourceParser.registerClass(ArrayEventSource);\n\nFC.ArrayEventSource = ArrayEventSource;\n\n;;\n\nvar FuncEventSource = EventSource.extend({\n\n\tfunc: null,\n\n\n\tfetch: function(start, end, timezone) {\n\t\tvar _this = this;\n\n\t\tthis.calendar.pushLoading();\n\n\t\treturn Promise.construct(function(onResolve) {\n\t\t\t_this.func.call(\n\t\t\t\t_this.calendar,\n\t\t\t\tstart.clone(),\n\t\t\t\tend.clone(),\n\t\t\t\ttimezone,\n\t\t\t\tfunction(rawEventDefs) {\n\t\t\t\t\t_this.calendar.popLoading();\n\n\t\t\t\t\tonResolve(_this.parseEventDefs(rawEventDefs));\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t},\n\n\n\tgetPrimitive: function() {\n\t\treturn this.func;\n\t},\n\n\n\tapplyManualStandardProps: function(rawProps) {\n\t\tvar superSuccess = EventSource.prototype.applyManualStandardProps.apply(this, arguments);\n\n\t\tthis.func = rawProps.events;\n\n\t\treturn superSuccess;\n\t}\n\n});\n\n\nFuncEventSource.defineStandardProps({\n\tevents: false // don't automatically transfer\n});\n\n\nFuncEventSource.parse = function(rawInput, calendar) {\n\tvar rawProps;\n\n\t// normalize raw input\n\tif ($.isFunction(rawInput.events)) { // extended form\n\t\trawProps = rawInput;\n\t}\n\telse if ($.isFunction(rawInput)) { // short form\n\t\trawProps = { events: rawInput };\n\t}\n\n\tif (rawProps) {\n\t\treturn EventSource.parse.call(this, rawProps, calendar);\n\t}\n\n\treturn false;\n};\n\n\nEventSourceParser.registerClass(FuncEventSource);\n\nFC.FuncEventSource = FuncEventSource;\n\n;;\n\nvar JsonFeedEventSource = EventSource.extend({\n\n\t// these props must all be manually set before calling fetch\n\turl: null,\n\tstartParam: null,\n\tendParam: null,\n\ttimezoneParam: null,\n\tajaxSettings: null, // does not include url\n\n\n\tfetch: function(start, end, timezone) {\n\t\tvar _this = this;\n\t\tvar ajaxSettings = this.ajaxSettings;\n\t\tvar onSuccess = ajaxSettings.success;\n\t\tvar onError = ajaxSettings.error;\n\t\tvar requestParams = this.buildRequestParams(start, end, timezone);\n\n\t\t// todo: eventually handle the promise's then,\n\t\t// don't intercept success/error\n\t\t// tho will be a breaking API change\n\n\t\tthis.calendar.pushLoading();\n\n\t\treturn Promise.construct(function(onResolve, onReject) {\n\t\t\t$.ajax($.extend(\n\t\t\t\t{}, // destination\n\t\t\t\tJsonFeedEventSource.AJAX_DEFAULTS,\n\t\t\t\tajaxSettings,\n\t\t\t\t{\n\t\t\t\t\turl: _this.url,\n\t\t\t\t\tdata: requestParams,\n\t\t\t\t\tsuccess: function(rawEventDefs) {\n\t\t\t\t\t\tvar callbackRes;\n\n\t\t\t\t\t\t_this.calendar.popLoading();\n\n\t\t\t\t\t\tif (rawEventDefs) {\n\t\t\t\t\t\t\tcallbackRes = applyAll(onSuccess, this, arguments); // redirect `this`\n\n\t\t\t\t\t\t\tif ($.isArray(callbackRes)) {\n\t\t\t\t\t\t\t\trawEventDefs = callbackRes;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tonResolve(_this.parseEventDefs(rawEventDefs));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tonReject();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\t_this.calendar.popLoading();\n\n\t\t\t\t\t\tapplyAll(onError, this, arguments); // redirect `this`\n\t\t\t\t\t\tonReject();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t));\n\t\t});\n\t},\n\n\n\tbuildRequestParams: function(start, end, timezone) {\n\t\tvar calendar = this.calendar;\n\t\tvar ajaxSettings = this.ajaxSettings;\n\t\tvar startParam, endParam, timezoneParam;\n\t\tvar customRequestParams;\n\t\tvar params = {};\n\n\t\tstartParam = this.startParam;\n\t\tif (startParam == null) {\n\t\t\tstartParam = calendar.opt('startParam');\n\t\t}\n\n\t\tendParam = this.endParam;\n\t\tif (endParam == null) {\n\t\t\tendParam = calendar.opt('endParam');\n\t\t}\n\n\t\ttimezoneParam = this.timezoneParam;\n\t\tif (timezoneParam == null) {\n\t\t\ttimezoneParam = calendar.opt('timezoneParam');\n\t\t}\n\n\t\t// retrieve any outbound GET/POST $.ajax data from the options\n\t\tif ($.isFunction(ajaxSettings.data)) {\n\t\t\t// supplied as a function that returns a key/value object\n\t\t\tcustomRequestParams = ajaxSettings.data();\n\t\t}\n\t\telse {\n\t\t\t// probably supplied as a straight key/value object\n\t\t\tcustomRequestParams = ajaxSettings.data || {};\n\t\t}\n\n\t\t$.extend(params, customRequestParams);\n\n\t\tparams[startParam] = start.format();\n\t\tparams[endParam] = end.format();\n\n\t\tif (timezone && timezone !== 'local') {\n\t\t\tparams[timezoneParam] = timezone;\n\t\t}\n\n\t\treturn params;\n\t},\n\n\n\tgetPrimitive: function() {\n\t\treturn this.url;\n\t},\n\n\n\tapplyMiscProps: function(rawProps) {\n\t\tEventSource.prototype.applyMiscProps.apply(this, arguments);\n\n\t\tthis.ajaxSettings = rawProps;\n\t}\n\n});\n\n\nJsonFeedEventSource.AJAX_DEFAULTS = {\n\tdataType: 'json',\n\tcache: false\n};\n\n\nJsonFeedEventSource.defineStandardProps({\n\t// automatically transfer (true)...\n\turl: true,\n\tstartParam: true,\n\tendParam: true,\n\ttimezoneParam: true\n});\n\n\nJsonFeedEventSource.parse = function(rawInput, calendar) {\n\tvar rawProps;\n\n\t// normalize raw input\n\tif (typeof rawInput.url === 'string') { // extended form\n\t\trawProps = rawInput;\n\t}\n\telse if (typeof rawInput === 'string') { // short form\n\t\trawProps = { url: rawInput };\n\t}\n\n\tif (rawProps) {\n\t\treturn EventSource.parse.call(this, rawProps, calendar);\n\t}\n\n\treturn false;\n};\n\n\nEventSourceParser.registerClass(JsonFeedEventSource);\n\nFC.JsonFeedEventSource = JsonFeedEventSource;\n\n;;\n\nvar ThemeRegistry = FC.ThemeRegistry = {\n\n\tthemeClassHash: {},\n\n\n\tregister: function(themeName, themeClass) {\n\t\tthis.themeClassHash[themeName] = themeClass;\n\t},\n\n\n\tgetThemeClass: function(themeSetting) {\n\t\tif (!themeSetting) {\n\t\t\treturn StandardTheme;\n\t\t}\n\t\telse if (themeSetting === true) {\n\t\t\treturn JqueryUiTheme;\n\t\t}\n\t\telse {\n\t\t\treturn this.themeClassHash[themeSetting];\n\t\t}\n\t}\n\n};\n\n;;\n\nvar Theme = FC.Theme = Class.extend({\n\n\tclasses: {},\n\ticonClasses: {},\n\tbaseIconClass: '',\n\ticonOverrideOption: null,\n\ticonOverrideCustomButtonOption: null,\n\ticonOverridePrefix: '',\n\n\n\tconstructor: function(optionsModel) {\n\t\tthis.optionsModel = optionsModel;\n\t\tthis.processIconOverride();\n\t},\n\n\n\tprocessIconOverride: function() {\n\t\tif (this.iconOverrideOption) {\n\t\t\tthis.setIconOverride(\n\t\t\t\tthis.optionsModel.get(this.iconOverrideOption)\n\t\t\t);\n\t\t}\n\t},\n\n\n\tsetIconOverride: function(iconOverrideHash) {\n\t\tvar iconClassesCopy;\n\t\tvar buttonName;\n\n\t\tif ($.isPlainObject(iconOverrideHash)) {\n\t\t\ticonClassesCopy = $.extend({}, this.iconClasses);\n\n\t\t\tfor (buttonName in iconOverrideHash) {\n\t\t\t\ticonClassesCopy[buttonName] = this.applyIconOverridePrefix(\n\t\t\t\t\ticonOverrideHash[buttonName]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.iconClasses = iconClassesCopy;\n\t\t}\n\t\telse if (iconOverrideHash === false) {\n\t\t\tthis.iconClasses = {};\n\t\t}\n\t},\n\n\n\tapplyIconOverridePrefix: function(className) {\n\t\tvar prefix = this.iconOverridePrefix;\n\n\t\tif (prefix && className.indexOf(prefix) !== 0) { // if not already present\n\t\t\tclassName = prefix + className;\n\t\t}\n\n\t\treturn className;\n\t},\n\n\n\tgetClass: function(key) {\n\t\treturn this.classes[key] || '';\n\t},\n\n\n\tgetIconClass: function(buttonName) {\n\t\tvar className = this.iconClasses[buttonName];\n\n\t\tif (className) {\n\t\t\treturn this.baseIconClass + ' ' + className;\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\tgetCustomButtonIconClass: function(customButtonProps) {\n\t\tvar className;\n\n\t\tif (this.iconOverrideCustomButtonOption) {\n\t\t\tclassName = customButtonProps[this.iconOverrideCustomButtonOption];\n\n\t\t\tif (className) {\n\t\t\t\treturn this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t}\n\n});\n\n;;\n\nvar StandardTheme = Theme.extend({\n\n\tclasses: {\n\t\twidget: 'fc-unthemed',\n\t\twidgetHeader: 'fc-widget-header',\n\t\twidgetContent: 'fc-widget-content',\n\n\t\tbuttonGroup: 'fc-button-group',\n\t\tbutton: 'fc-button',\n\t\tcornerLeft: 'fc-corner-left',\n\t\tcornerRight: 'fc-corner-right',\n\t\tstateDefault: 'fc-state-default',\n\t\tstateActive: 'fc-state-active',\n\t\tstateDisabled: 'fc-state-disabled',\n\t\tstateHover: 'fc-state-hover',\n\t\tstateDown: 'fc-state-down',\n\n\t\tpopoverHeader: 'fc-widget-header',\n\t\tpopoverContent: 'fc-widget-content',\n\n\t\t// day grid\n\t\theaderRow: 'fc-widget-header',\n\t\tdayRow: 'fc-widget-content',\n\n\t\t// list view\n\t\tlistView: 'fc-widget-content'\n\t},\n\n\tbaseIconClass: 'fc-icon',\n\ticonClasses: {\n\t\tclose: 'fc-icon-x',\n\t\tprev: 'fc-icon-left-single-arrow',\n\t\tnext: 'fc-icon-right-single-arrow',\n\t\tprevYear: 'fc-icon-left-double-arrow',\n\t\tnextYear: 'fc-icon-right-double-arrow'\n\t},\n\n\ticonOverrideOption: 'buttonIcons',\n\ticonOverrideCustomButtonOption: 'icon',\n\ticonOverridePrefix: 'fc-icon-'\n\n});\n\nThemeRegistry.register('standard', StandardTheme);\n\n;;\n\nvar JqueryUiTheme = Theme.extend({\n\n\tclasses: {\n\t\twidget: 'ui-widget',\n\t\twidgetHeader: 'ui-widget-header',\n\t\twidgetContent: 'ui-widget-content',\n\n\t\tbuttonGroup: 'fc-button-group',\n\t\tbutton: 'ui-button',\n\t\tcornerLeft: 'ui-corner-left',\n\t\tcornerRight: 'ui-corner-right',\n\t\tstateDefault: 'ui-state-default',\n\t\tstateActive: 'ui-state-active',\n\t\tstateDisabled: 'ui-state-disabled',\n\t\tstateHover: 'ui-state-hover',\n\t\tstateDown: 'ui-state-down',\n\n\t\ttoday: 'ui-state-highlight',\n\n\t\tpopoverHeader: 'ui-widget-header',\n\t\tpopoverContent: 'ui-widget-content',\n\n\t\t// day grid\n\t\theaderRow: 'ui-widget-header',\n\t\tdayRow: 'ui-widget-content',\n\n\t\t// list view\n\t\tlistView: 'ui-widget-content'\n\t},\n\n\tbaseIconClass: 'ui-icon',\n\ticonClasses: {\n\t\tclose: 'ui-icon-closethick',\n\t\tprev: 'ui-icon-circle-triangle-w',\n\t\tnext: 'ui-icon-circle-triangle-e',\n\t\tprevYear: 'ui-icon-seek-prev',\n\t\tnextYear: 'ui-icon-seek-next'\n\t},\n\n\ticonOverrideOption: 'themeButtonIcons',\n\ticonOverrideCustomButtonOption: 'themeIcon',\n\ticonOverridePrefix: 'ui-icon-'\n\n});\n\nThemeRegistry.register('jquery-ui', JqueryUiTheme);\n\n;;\n\nvar BootstrapTheme = Theme.extend({\n\n\tclasses: {\n\t\twidget: 'fc-bootstrap3',\n\n\t\ttableGrid: 'table-bordered', // avoid `table` class b/c don't want margins. only border color\n\t\ttableList: 'table table-striped', // `table` class creates bottom margin but who cares\n\n\t\tbuttonGroup: 'btn-group',\n\t\tbutton: 'btn btn-default',\n\t\tstateActive: 'active',\n\t\tstateDisabled: 'disabled',\n\n\t\ttoday: 'alert alert-info', // the plain `info` class requires `.table`, too much to ask\n\n\t\tpopover: 'panel panel-default',\n\t\tpopoverHeader: 'panel-heading',\n\t\tpopoverContent: 'panel-body',\n\n\t\t// day grid\n\t\theaderRow: 'panel-default', // avoid `panel` class b/c don't want margins/radius. only border color\n\t\tdayRow: 'panel-default', // \"\n\n\t\t// list view\n\t\tlistView: 'panel panel-default'\n\t},\n\n\tbaseIconClass: 'glyphicon',\n\ticonClasses: {\n\t\tclose: 'glyphicon-remove',\n\t\tprev: 'glyphicon-chevron-left',\n\t\tnext: 'glyphicon-chevron-right',\n\t\tprevYear: 'glyphicon-backward',\n\t\tnextYear: 'glyphicon-forward'\n\t},\n\n\ticonOverrideOption: 'bootstrapGlyphicons',\n\ticonOverrideCustomButtonOption: 'bootstrapGlyphicon',\n\ticonOverridePrefix: 'glyphicon-'\n\n});\n\nThemeRegistry.register('bootstrap3', BootstrapTheme);\n\n;;\n\nvar DayGridFillRenderer = FillRenderer.extend({\n\n\tfillSegTag: 'td', // override the default tag name\n\n\n\tattachSegEls: function(type, segs) {\n\t\tvar nodes = [];\n\t\tvar i, seg;\n\t\tvar skeletonEl;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tskeletonEl = this.renderFillRow(type, seg);\n\t\t\tthis.component.rowEls.eq(seg.row).append(skeletonEl);\n\t\t\tnodes.push(skeletonEl[0]);\n\t\t}\n\n\t\treturn nodes;\n\t},\n\n\n\t// Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n\trenderFillRow: function(type, seg) {\n\t\tvar colCnt = this.component.colCnt;\n\t\tvar startCol = seg.leftCol;\n\t\tvar endCol = seg.rightCol + 1;\n\t\tvar className;\n\t\tvar skeletonEl;\n\t\tvar trEl;\n\n\t\tif (type === 'businessHours') {\n\t\t\tclassName = 'bgevent';\n\t\t}\n\t\telse {\n\t\t\tclassName = type.toLowerCase();\n\t\t}\n\n\t\tskeletonEl = $(\n\t\t\t'<div class=\"fc-' + className + '-skeleton\">' +\n\t\t\t\t'<table><tr/></table>' +\n\t\t\t'</div>'\n\t\t);\n\t\ttrEl = skeletonEl.find('tr');\n\n\t\tif (startCol > 0) {\n\t\t\ttrEl.append('<td colspan=\"' + startCol + '\"/>');\n\t\t}\n\n\t\ttrEl.append(\n\t\t\tseg.el.attr('colspan', endCol - startCol)\n\t\t);\n\n\t\tif (endCol < colCnt) {\n\t\t\ttrEl.append('<td colspan=\"' + (colCnt - endCol) + '\"/>');\n\t\t}\n\n\t\tthis.component.bookendCells(trEl);\n\n\t\treturn skeletonEl;\n\t}\n});\n\n;;\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar DayGridEventRenderer = EventRenderer.extend({\n\n\tdayGrid: null,\n\trowStructs: null, // an array of objects, each holding information about a row's foreground event-rendering\n\n\n\tconstructor: function(dayGrid) {\n\t\tEventRenderer.apply(this, arguments);\n\n\t\tthis.dayGrid = dayGrid;\n\t},\n\n\n\trenderBgRanges: function(eventRanges) {\n\t\t// don't render timed background events\n\t\teventRanges = $.grep(eventRanges, function(eventRange) {\n\t\t\treturn eventRange.eventDef.isAllDay();\n\t\t});\n\n\t\tEventRenderer.prototype.renderBgRanges.call(this, eventRanges);\n\t},\n\n\n\t// Renders the given foreground event segments onto the grid\n\trenderFgSegs: function(segs) {\n\t\tvar rowStructs = this.rowStructs = this.renderSegRows(segs);\n\n\t\t// append to each row's content skeleton\n\t\tthis.dayGrid.rowEls.each(function(i, rowNode) {\n\t\t\t$(rowNode).find('.fc-content-skeleton > table').append(\n\t\t\t\trowStructs[i].tbodyEl\n\t\t\t);\n\t\t});\n\t},\n\n\n\t// Unrenders all currently rendered foreground event segments\n\tunrenderFgSegs: function() {\n\t\tvar rowStructs = this.rowStructs || [];\n\t\tvar rowStruct;\n\n\t\twhile ((rowStruct = rowStructs.pop())) {\n\t\t\trowStruct.tbodyEl.remove();\n\t\t}\n\n\t\tthis.rowStructs = null;\n\t},\n\n\n\t// Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n\t// Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n\t// PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n\trenderSegRows: function(segs) {\n\t\tvar rowStructs = [];\n\t\tvar segRows;\n\t\tvar row;\n\n\t\tsegRows = this.groupSegRows(segs); // group into nested arrays\n\n\t\t// iterate each row of segment groupings\n\t\tfor (row = 0; row < segRows.length; row++) {\n\t\t\trowStructs.push(\n\t\t\t\tthis.renderSegRow(row, segRows[row])\n\t\t\t);\n\t\t}\n\n\t\treturn rowStructs;\n\t},\n\n\n\t// Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n\t// the segments. Returns object with a bunch of internal data about how the render was calculated.\n\t// NOTE: modifies rowSegs\n\trenderSegRow: function(row, rowSegs) {\n\t\tvar colCnt = this.dayGrid.colCnt;\n\t\tvar segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n\t\tvar levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n\t\tvar tbody = $('<tbody/>');\n\t\tvar segMatrix = []; // lookup for which segments are rendered into which level+col cells\n\t\tvar cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n\t\tvar loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n\t\tvar i, levelSegs;\n\t\tvar col;\n\t\tvar tr;\n\t\tvar j, seg;\n\t\tvar td;\n\n\t\t// populates empty cells from the current column (`col`) to `endCol`\n\t\tfunction emptyCellsUntil(endCol) {\n\t\t\twhile (col < endCol) {\n\t\t\t\t// try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n\t\t\t\ttd = (loneCellMatrix[i - 1] || [])[col];\n\t\t\t\tif (td) {\n\t\t\t\t\ttd.attr(\n\t\t\t\t\t\t'rowspan',\n\t\t\t\t\t\tparseInt(td.attr('rowspan') || 1, 10) + 1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttd = $('<td/>');\n\t\t\t\t\ttr.append(td);\n\t\t\t\t}\n\t\t\t\tcellMatrix[i][col] = td;\n\t\t\t\tloneCellMatrix[i][col] = td;\n\t\t\t\tcol++;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < levelCnt; i++) { // iterate through all levels\n\t\t\tlevelSegs = segLevels[i];\n\t\t\tcol = 0;\n\t\t\ttr = $('<tr/>');\n\n\t\t\tsegMatrix.push([]);\n\t\t\tcellMatrix.push([]);\n\t\t\tloneCellMatrix.push([]);\n\n\t\t\t// levelCnt might be 1 even though there are no actual levels. protect against this.\n\t\t\t// this single empty row is useful for styling.\n\t\t\tif (levelSegs) {\n\t\t\t\tfor (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n\t\t\t\t\tseg = levelSegs[j];\n\n\t\t\t\t\temptyCellsUntil(seg.leftCol);\n\n\t\t\t\t\t// create a container that occupies or more columns. append the event element.\n\t\t\t\t\ttd = $('<td class=\"fc-event-container\"/>').append(seg.el);\n\t\t\t\t\tif (seg.leftCol != seg.rightCol) {\n\t\t\t\t\t\ttd.attr('colspan', seg.rightCol - seg.leftCol + 1);\n\t\t\t\t\t}\n\t\t\t\t\telse { // a single-column segment\n\t\t\t\t\t\tloneCellMatrix[i][col] = td;\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (col <= seg.rightCol) {\n\t\t\t\t\t\tcellMatrix[i][col] = td;\n\t\t\t\t\t\tsegMatrix[i][col] = seg;\n\t\t\t\t\t\tcol++;\n\t\t\t\t\t}\n\n\t\t\t\t\ttr.append(td);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temptyCellsUntil(colCnt); // finish off the row\n\t\t\tthis.dayGrid.bookendCells(tr);\n\t\t\ttbody.append(tr);\n\t\t}\n\n\t\treturn { // a \"rowStruct\"\n\t\t\trow: row, // the row number\n\t\t\ttbodyEl: tbody,\n\t\t\tcellMatrix: cellMatrix,\n\t\t\tsegMatrix: segMatrix,\n\t\t\tsegLevels: segLevels,\n\t\t\tsegs: rowSegs\n\t\t};\n\t},\n\n\n\t// Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n\t// NOTE: modifies segs\n\tbuildSegLevels: function(segs) {\n\t\tvar levels = [];\n\t\tvar i, seg;\n\t\tvar j;\n\n\t\t// Give preference to elements with certain criteria, so they have\n\t\t// a chance to be closer to the top.\n\t\tthis.sortEventSegs(segs);\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\n\t\t\t// loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n\t\t\tfor (j = 0; j < levels.length; j++) {\n\t\t\t\tif (!isDaySegCollision(seg, levels[j])) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// `j` now holds the desired subrow index\n\t\t\tseg.level = j;\n\n\t\t\t// create new level array if needed and append segment\n\t\t\t(levels[j] || (levels[j] = [])).push(seg);\n\t\t}\n\n\t\t// order segments left-to-right. very important if calendar is RTL\n\t\tfor (j = 0; j < levels.length; j++) {\n\t\t\tlevels[j].sort(compareDaySegCols);\n\t\t}\n\n\t\treturn levels;\n\t},\n\n\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n\tgroupSegRows: function(segs) {\n\t\tvar segRows = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.dayGrid.rowCnt; i++) {\n\t\t\tsegRows.push([]);\n\t\t}\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegRows[segs[i].row].push(segs[i]);\n\t\t}\n\n\t\treturn segRows;\n\t},\n\n\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.opt('extraSmallTimeFormat'); // like \"6p\" or \"6:30p\"\n\t},\n\n\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\n\tcomputeDisplayEventEnd: function() {\n\t\treturn this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n\t},\n\n\n\t// Builds the HTML to be used for the default element for an individual segment\n\tfgSegHtml: function(seg, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar eventDef = seg.footprint.eventDef;\n\t\tvar isAllDay = seg.footprint.componentFootprint.isAllDay;\n\t\tvar isDraggable = view.isEventDefDraggable(eventDef);\n\t\tvar isResizableFromStart = !disableResizing && isAllDay &&\n\t\t\tseg.isStart && view.isEventDefResizableFromStart(eventDef);\n\t\tvar isResizableFromEnd = !disableResizing && isAllDay &&\n\t\t\tseg.isEnd && view.isEventDefResizableFromEnd(eventDef);\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\n\t\tvar skinCss = cssToStr(this.getSkinCss(eventDef));\n\t\tvar timeHtml = '';\n\t\tvar timeText;\n\t\tvar titleHtml;\n\n\t\tclasses.unshift('fc-day-grid-event', 'fc-h-event');\n\n\t\t// Only display a timed events time if it is the starting segment\n\t\tif (seg.isStart) {\n\t\t\ttimeText = this.getTimeText(seg.footprint);\n\t\t\tif (timeText) {\n\t\t\t\ttimeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n\t\t\t}\n\t\t}\n\n\t\ttitleHtml =\n\t\t\t'<span class=\"fc-title\">' +\n\t\t\t\t(htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n\t\t\t'</span>';\n\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\n\t\t\t\t(eventDef.url ?\n\t\t\t\t\t' href=\"' + htmlEscape(eventDef.url) + '\"' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t(skinCss ?\n\t\t\t\t\t' style=\"' + skinCss + '\"' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'>' +\n\t\t\t\t'<div class=\"fc-content\">' +\n\t\t\t\t\t(this.isRTL ?\n\t\t\t\t\t\ttitleHtml + ' ' + timeHtml : // put a natural space in between\n\t\t\t\t\t\ttimeHtml + ' ' + titleHtml   //\n\t\t\t\t\t\t) +\n\t\t\t\t'</div>' +\n\t\t\t\t(isResizableFromStart ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t(isResizableFromEnd ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'</a>';\n\t}\n\n});\n\n\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n\tvar i, otherSeg;\n\n\tfor (i = 0; i < otherSegs.length; i++) {\n\t\totherSeg = otherSegs[i];\n\n\t\tif (\n\t\t\totherSeg.leftCol <= seg.rightCol &&\n\t\t\totherSeg.rightCol >= seg.leftCol\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n\treturn a.leftCol - b.leftCol;\n}\n\n;;\n\nvar DayGridHelperRenderer = HelperRenderer.extend({\n\n\n\t// Renders a mock \"helper\" event. `sourceSeg` is the associated internal segment object. It can be null.\n\trenderSegs: function(segs, sourceSeg) {\n\t\tvar helperNodes = [];\n\t\tvar rowStructs;\n\n\t\t// TODO: not good to call eventRenderer this way\n\t\trowStructs = this.eventRenderer.renderSegRows(segs);\n\n\t\t// inject each new event skeleton into each associated row\n\t\tthis.component.rowEls.each(function(row, rowNode) {\n\t\t\tvar rowEl = $(rowNode); // the .fc-row\n\t\t\tvar skeletonEl = $('<div class=\"fc-helper-skeleton\"><table/></div>'); // will be absolutely positioned\n\t\t\tvar skeletonTopEl;\n\t\t\tvar skeletonTop;\n\n\t\t\t// If there is an original segment, match the top position. Otherwise, put it at the row's top level\n\t\t\tif (sourceSeg && sourceSeg.row === row) {\n\t\t\t\tskeletonTop = sourceSeg.el.position().top;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tskeletonTopEl = rowEl.find('.fc-content-skeleton tbody');\n\t\t\t\tif (!skeletonTopEl.length) { // when no events\n\t\t\t\t\tskeletonTopEl = rowEl.find('.fc-content-skeleton table');\n\t\t\t\t}\n\n\t\t\t\tskeletonTop = skeletonTopEl.position().top;\n\t\t\t}\n\n\t\t\tskeletonEl.css('top', skeletonTop)\n\t\t\t\t.find('table')\n\t\t\t\t\t.append(rowStructs[row].tbodyEl);\n\n\t\t\trowEl.append(skeletonEl);\n\t\t\thelperNodes.push(skeletonEl[0]);\n\t\t});\n\n\t\treturn $(helperNodes); // must return the elements rendered\n\t}\n\n});\n\n;;\n\n/* A component that renders a grid of whole-days that runs horizontally. There can be multiple rows, one per week.\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar DayGrid = FC.DayGrid = InteractiveDateComponent.extend(StandardInteractionsMixin, DayTableMixin, {\n\n\teventRendererClass: DayGridEventRenderer,\n\tbusinessHourRendererClass: BusinessHourRenderer,\n\thelperRendererClass: DayGridHelperRenderer,\n\tfillRendererClass: DayGridFillRenderer,\n\n\tview: null, // TODO: make more general and/or remove\n\thelperRenderer: null,\n\n\tcellWeekNumbersVisible: false, // display week numbers in day cell?\n\n\tbottomCoordPadding: 0, // hack for extending the hit area for the last row of the coordinate grid\n\n\theadContainerEl: null, // div that hold's the date header\n\trowEls: null, // set of fake row elements\n\tcellEls: null, // set of whole-day elements comprising the row's background\n\n\trowCoordCache: null,\n\tcolCoordCache: null,\n\n\t// isRigid determines whether the individual rows should ignore the contents and be a constant height.\n\t// Relies on the view's colCnt and rowCnt. In the future, this component should probably be self-sufficient.\n\tisRigid: false,\n\n\thasAllDayBusinessHours: true,\n\n\n\tconstructor: function(view) {\n\t\tthis.view = view; // do first, for opt calls during initialization\n\n\t\tInteractiveDateComponent.call(this);\n\t},\n\n\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\n\tcomponentFootprintToSegs: function(componentFootprint) {\n\t\tvar segs = this.sliceRangeByRow(componentFootprint.unzonedRange);\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\n\t\t\tif (this.isRTL) {\n\t\t\t\tseg.leftCol = this.daysPerRow - 1 - seg.lastRowDayIndex;\n\t\t\t\tseg.rightCol = this.daysPerRow - 1 - seg.firstRowDayIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tseg.leftCol = seg.firstRowDayIndex;\n\t\t\t\tseg.rightCol = seg.lastRowDayIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Date Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderDates: function(dateProfile) {\n\t\tthis.dateProfile = dateProfile;\n\t\tthis.updateDayTable();\n\t\tthis.renderGrid();\n\t},\n\n\n\tunrenderDates: function() {\n\t\tthis.removeSegPopover();\n\t},\n\n\n\t// Renders the rows and columns into the component's `this.el`, which should already be assigned.\n\trenderGrid: function() {\n\t\tvar view = this.view;\n\t\tvar rowCnt = this.rowCnt;\n\t\tvar colCnt = this.colCnt;\n\t\tvar html = '';\n\t\tvar row;\n\t\tvar col;\n\n\t\tif (this.headContainerEl) {\n\t\t\tthis.headContainerEl.html(this.renderHeadHtml());\n\t\t}\n\n\t\tfor (row = 0; row < rowCnt; row++) {\n\t\t\thtml += this.renderDayRowHtml(row, this.isRigid);\n\t\t}\n\t\tthis.el.html(html);\n\n\t\tthis.rowEls = this.el.find('.fc-row');\n\t\tthis.cellEls = this.el.find('.fc-day, .fc-disabled-day');\n\n\t\tthis.rowCoordCache = new CoordCache({\n\t\t\tels: this.rowEls,\n\t\t\tisVertical: true\n\t\t});\n\t\tthis.colCoordCache = new CoordCache({\n\t\t\tels: this.cellEls.slice(0, this.colCnt), // only the first row\n\t\t\tisHorizontal: true\n\t\t});\n\n\t\t// trigger dayRender with each cell's element\n\t\tfor (row = 0; row < rowCnt; row++) {\n\t\t\tfor (col = 0; col < colCnt; col++) {\n\t\t\t\tthis.publiclyTrigger('dayRender', {\n\t\t\t\t\tcontext: view,\n\t\t\t\t\targs: [\n\t\t\t\t\t\tthis.getCellDate(row, col),\n\t\t\t\t\t\tthis.getCellEl(row, col),\n\t\t\t\t\t\tview\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Generates the HTML for a single row, which is a div that wraps a table.\n\t// `row` is the row number.\n\trenderDayRowHtml: function(row, isRigid) {\n\t\tvar theme = this.view.calendar.theme;\n\t\tvar classes = [ 'fc-row', 'fc-week', theme.getClass('dayRow') ];\n\n\t\tif (isRigid) {\n\t\t\tclasses.push('fc-rigid');\n\t\t}\n\n\t\treturn '' +\n\t\t\t'<div class=\"' + classes.join(' ') + '\">' +\n\t\t\t\t'<div class=\"fc-bg\">' +\n\t\t\t\t\t'<table class=\"' + theme.getClass('tableGrid') + '\">' +\n\t\t\t\t\t\tthis.renderBgTrHtml(row) +\n\t\t\t\t\t'</table>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"fc-content-skeleton\">' +\n\t\t\t\t\t'<table>' +\n\t\t\t\t\t\t(this.getIsNumbersVisible() ?\n\t\t\t\t\t\t\t'<thead>' +\n\t\t\t\t\t\t\t\tthis.renderNumberTrHtml(row) +\n\t\t\t\t\t\t\t'</thead>' :\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t) +\n\t\t\t\t\t'</table>' +\n\t\t\t\t'</div>' +\n\t\t\t'</div>';\n\t},\n\n\n\tgetIsNumbersVisible: function() {\n\t\treturn this.getIsDayNumbersVisible() || this.cellWeekNumbersVisible;\n\t},\n\n\n\tgetIsDayNumbersVisible: function() {\n\t\treturn this.rowCnt > 1;\n\t},\n\n\n\t/* Grid Number Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderNumberTrHtml: function(row) {\n\t\treturn '' +\n\t\t\t'<tr>' +\n\t\t\t\t(this.isRTL ? '' : this.renderNumberIntroHtml(row)) +\n\t\t\t\tthis.renderNumberCellsHtml(row) +\n\t\t\t\t(this.isRTL ? this.renderNumberIntroHtml(row) : '') +\n\t\t\t'</tr>';\n\t},\n\n\n\trenderNumberIntroHtml: function(row) {\n\t\treturn this.renderIntroHtml();\n\t},\n\n\n\trenderNumberCellsHtml: function(row) {\n\t\tvar htmls = [];\n\t\tvar col, date;\n\n\t\tfor (col = 0; col < this.colCnt; col++) {\n\t\t\tdate = this.getCellDate(row, col);\n\t\t\thtmls.push(this.renderNumberCellHtml(date));\n\t\t}\n\n\t\treturn htmls.join('');\n\t},\n\n\n\t// Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n\t// The number row will only exist if either day numbers or week numbers are turned on.\n\trenderNumberCellHtml: function(date) {\n\t\tvar view = this.view;\n\t\tvar html = '';\n\t\tvar isDateValid = this.dateProfile.activeUnzonedRange.containsDate(date); // TODO: called too frequently. cache somehow.\n\t\tvar isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n\t\tvar classes;\n\t\tvar weekCalcFirstDoW;\n\n\t\tif (!isDayNumberVisible && !this.cellWeekNumbersVisible) {\n\t\t\t// no numbers in day cell (week number must be along the side)\n\t\t\treturn '<td/>'; //  will create an empty space above events :(\n\t\t}\n\n\t\tclasses = this.getDayClasses(date);\n\t\tclasses.unshift('fc-day-top');\n\n\t\tif (this.cellWeekNumbersVisible) {\n\t\t\t// To determine the day of week number change under ISO, we cannot\n\t\t\t// rely on moment.js methods such as firstDayOfWeek() or weekday(),\n\t\t\t// because they rely on the locale's dow (possibly overridden by\n\t\t\t// our firstDay option), which may not be Monday. We cannot change\n\t\t\t// dow, because that would affect the calendar start day as well.\n\t\t\tif (date._locale._fullCalendar_weekCalc === 'ISO') {\n\t\t\t\tweekCalcFirstDoW = 1;  // Monday by ISO 8601 definition\n\t\t\t}\n\t\t\telse {\n\t\t\t\tweekCalcFirstDoW = date._locale.firstDayOfWeek();\n\t\t\t}\n\t\t}\n\n\t\thtml += '<td class=\"' + classes.join(' ') + '\"' +\n\t\t\t(isDateValid ?\n\t\t\t\t' data-date=\"' + date.format() + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t'>';\n\n\t\tif (this.cellWeekNumbersVisible && (date.day() == weekCalcFirstDoW)) {\n\t\t\thtml += view.buildGotoAnchorHtml(\n\t\t\t\t{ date: date, type: 'week' },\n\t\t\t\t{ 'class': 'fc-week-number' },\n\t\t\t\tdate.format('w') // inner HTML\n\t\t\t);\n\t\t}\n\n\t\tif (isDayNumberVisible) {\n\t\t\thtml += view.buildGotoAnchorHtml(\n\t\t\t\tdate,\n\t\t\t\t{ 'class': 'fc-day-number' },\n\t\t\t\tdate.date() // inner HTML\n\t\t\t);\n\t\t}\n\n\t\thtml += '</td>';\n\n\t\treturn html;\n\t},\n\n\n\t/* Hit System\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tprepareHits: function() {\n\t\tthis.colCoordCache.build();\n\t\tthis.rowCoordCache.build();\n\t\tthis.rowCoordCache.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.colCoordCache.clear();\n\t\tthis.rowCoordCache.clear();\n\t},\n\n\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tif (this.colCoordCache.isLeftInBounds(leftOffset) && this.rowCoordCache.isTopInBounds(topOffset)) {\n\t\t\tvar col = this.colCoordCache.getHorizontalIndex(leftOffset);\n\t\t\tvar row = this.rowCoordCache.getVerticalIndex(topOffset);\n\n\t\t\tif (row != null && col != null) {\n\t\t\t\treturn this.getCellHit(row, col);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tgetHitFootprint: function(hit) {\n\t\tvar range = this.getCellRange(hit.row, hit.col);\n\n\t\treturn new ComponentFootprint(\n\t\t\tnew UnzonedRange(range.start, range.end),\n\t\t\ttrue // all-day?\n\t\t);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.getCellEl(hit.row, hit.col);\n\t},\n\n\n\t/* Cell System\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// FYI: the first column is the leftmost column, regardless of date\n\n\n\tgetCellHit: function(row, col) {\n\t\treturn {\n\t\t\trow: row,\n\t\t\tcol: col,\n\t\t\tcomponent: this, // needed unfortunately :(\n\t\t\tleft: this.colCoordCache.getLeftOffset(col),\n\t\t\tright: this.colCoordCache.getRightOffset(col),\n\t\t\ttop: this.rowCoordCache.getTopOffset(row),\n\t\t\tbottom: this.rowCoordCache.getBottomOffset(row)\n\t\t};\n\t},\n\n\n\tgetCellEl: function(row, col) {\n\t\treturn this.cellEls.eq(row * this.colCnt + col);\n\t},\n\n\n\t/* Event Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Unrenders all events currently rendered on the grid\n\tunrenderEvents: function() {\n\t\tthis.removeSegPopover(); // removes the \"more..\" events popover\n\n\t\tInteractiveDateComponent.prototype.unrenderEvents.apply(this, arguments);\n\t},\n\n\n\t// Retrieves all rendered segment objects currently rendered on the grid\n\tgetOwnEventSegs: function() {\n\t\treturn InteractiveDateComponent.prototype.getOwnEventSegs.apply(this, arguments) // get the segments from the super-method\n\t\t\t.concat(this.popoverSegs || []); // append the segments from the \"more...\" popover\n\t},\n\n\n\t/* Event Drag Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event or external element being dragged.\n\t// `eventLocation` has zoned start and end (optional)\n\trenderDrag: function(eventFootprints, seg, isTouch) {\n\t\tvar i;\n\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\tthis.renderHighlight(eventFootprints[i].componentFootprint);\n\t\t}\n\n\t\t// render drags from OTHER components as helpers\n\t\tif (eventFootprints.length && seg && seg.component !== this) {\n\t\t\tthis.helperRenderer.renderEventDraggingFootprints(eventFootprints, seg, isTouch);\n\n\t\t\treturn true; // signal helpers rendered\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of a hovering event\n\tunrenderDrag: function(seg) {\n\t\tthis.unrenderHighlight();\n\t\tthis.helperRenderer.unrender();\n\t},\n\n\n\t/* Event Resize Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being resized\n\trenderEventResize: function(eventFootprints, seg, isTouch) {\n\t\tvar i;\n\n\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\tthis.renderHighlight(eventFootprints[i].componentFootprint);\n\t\t}\n\n\t\tthis.helperRenderer.renderEventResizingFootprints(eventFootprints, seg, isTouch);\n\t},\n\n\n\t// Unrenders a visual indication of an event being resized\n\tunrenderEventResize: function(seg) {\n\t\tthis.unrenderHighlight();\n\t\tthis.helperRenderer.unrender();\n\t}\n\n});\n\n;;\n\n/* Methods relate to limiting the number events for a given day on a DayGrid\n----------------------------------------------------------------------------------------------------------------------*/\n// NOTE: all the segs being passed around in here are foreground segs\n\nDayGrid.mixin({\n\n\tsegPopover: null, // the Popover that holds events that can't fit in a cell. null when not visible\n\tpopoverSegs: null, // an array of segment objects that the segPopover holds. null when not visible\n\n\n\tremoveSegPopover: function() {\n\t\tif (this.segPopover) {\n\t\t\tthis.segPopover.hide(); // in handler, will call segPopover's removeElement\n\t\t}\n\t},\n\n\n\t// Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n\t// `levelLimit` can be false (don't limit), a number, or true (should be computed).\n\tlimitRows: function(levelLimit) {\n\t\tvar rowStructs = this.eventRenderer.rowStructs || [];\n\t\tvar row; // row #\n\t\tvar rowLevelLimit;\n\n\t\tfor (row = 0; row < rowStructs.length; row++) {\n\t\t\tthis.unlimitRow(row);\n\n\t\t\tif (!levelLimit) {\n\t\t\t\trowLevelLimit = false;\n\t\t\t}\n\t\t\telse if (typeof levelLimit === 'number') {\n\t\t\t\trowLevelLimit = levelLimit;\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowLevelLimit = this.computeRowLevelLimit(row);\n\t\t\t}\n\n\t\t\tif (rowLevelLimit !== false) {\n\t\t\t\tthis.limitRow(row, rowLevelLimit);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Computes the number of levels a row will accomodate without going outside its bounds.\n\t// Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n\t// `row` is the row number.\n\tcomputeRowLevelLimit: function(row) {\n\t\tvar rowEl = this.rowEls.eq(row); // the containing \"fake\" row div\n\t\tvar rowHeight = rowEl.height(); // TODO: cache somehow?\n\t\tvar trEls = this.eventRenderer.rowStructs[row].tbodyEl.children();\n\t\tvar i, trEl;\n\t\tvar trHeight;\n\n\t\tfunction iterInnerHeights(i, childNode) {\n\t\t\ttrHeight = Math.max(trHeight, $(childNode).outerHeight());\n\t\t}\n\n\t\t// Reveal one level <tr> at a time and stop when we find one out of bounds\n\t\tfor (i = 0; i < trEls.length; i++) {\n\t\t\ttrEl = trEls.eq(i).removeClass('fc-limited'); // reset to original state (reveal)\n\n\t\t\t// with rowspans>1 and IE8, trEl.outerHeight() would return the height of the largest cell,\n\t\t\t// so instead, find the tallest inner content element.\n\t\t\ttrHeight = 0;\n\t\t\ttrEl.find('> td > :first-child').each(iterInnerHeights);\n\n\t\t\tif (trEl.position().top + trHeight > rowHeight) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn false; // should not limit at all\n\t},\n\n\n\t// Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n\t// `row` is the row number.\n\t// `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n\tlimitRow: function(row, levelLimit) {\n\t\tvar _this = this;\n\t\tvar rowStruct = this.eventRenderer.rowStructs[row];\n\t\tvar moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n\t\tvar col = 0; // col #, left-to-right (not chronologically)\n\t\tvar levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n\t\tvar cellMatrix; // a matrix (by level, then column) of all <td> jQuery elements in the row\n\t\tvar limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n\t\tvar i, seg;\n\t\tvar segsBelow; // array of segment objects below `seg` in the current `col`\n\t\tvar totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n\t\tvar colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n\t\tvar td, rowspan;\n\t\tvar segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n\t\tvar j;\n\t\tvar moreTd, moreWrap, moreLink;\n\n\t\t// Iterates through empty level cells and places \"more\" links inside if need be\n\t\tfunction emptyCellsUntil(endCol) { // goes from current `col` to `endCol`\n\t\t\twhile (col < endCol) {\n\t\t\t\tsegsBelow = _this.getCellSegs(row, col, levelLimit);\n\t\t\t\tif (segsBelow.length) {\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][col];\n\t\t\t\t\tmoreLink = _this.renderMoreLink(row, col, segsBelow);\n\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\n\t\t\t\t\ttd.append(moreWrap);\n\t\t\t\t\tmoreNodes.push(moreWrap[0]);\n\t\t\t\t}\n\t\t\t\tcol++;\n\t\t\t}\n\t\t}\n\n\t\tif (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n\t\t\tlevelSegs = rowStruct.segLevels[levelLimit - 1];\n\t\t\tcellMatrix = rowStruct.cellMatrix;\n\n\t\t\tlimitedNodes = rowStruct.tbodyEl.children().slice(levelLimit) // get level <tr> elements past the limit\n\t\t\t\t.addClass('fc-limited').get(); // hide elements and get a simple DOM-nodes array\n\n\t\t\t// iterate though segments in the last allowable level\n\t\t\tfor (i = 0; i < levelSegs.length; i++) {\n\t\t\t\tseg = levelSegs[i];\n\t\t\t\temptyCellsUntil(seg.leftCol); // process empty cells before the segment\n\n\t\t\t\t// determine *all* segments below `seg` that occupy the same columns\n\t\t\t\tcolSegsBelow = [];\n\t\t\t\ttotalSegsBelow = 0;\n\t\t\t\twhile (col <= seg.rightCol) {\n\t\t\t\t\tsegsBelow = this.getCellSegs(row, col, levelLimit);\n\t\t\t\t\tcolSegsBelow.push(segsBelow);\n\t\t\t\t\ttotalSegsBelow += segsBelow.length;\n\t\t\t\t\tcol++;\n\t\t\t\t}\n\n\t\t\t\tif (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n\t\t\t\t\ttd = cellMatrix[levelLimit - 1][seg.leftCol]; // the segment's parent cell\n\t\t\t\t\trowspan = td.attr('rowspan') || 1;\n\t\t\t\t\tsegMoreNodes = [];\n\n\t\t\t\t\t// make a replacement <td> for each column the segment occupies. will be one for each colspan\n\t\t\t\t\tfor (j = 0; j < colSegsBelow.length; j++) {\n\t\t\t\t\t\tmoreTd = $('<td class=\"fc-more-cell\"/>').attr('rowspan', rowspan);\n\t\t\t\t\t\tsegsBelow = colSegsBelow[j];\n\t\t\t\t\t\tmoreLink = this.renderMoreLink(\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tseg.leftCol + j,\n\t\t\t\t\t\t\t[ seg ].concat(segsBelow) // count seg as hidden too\n\t\t\t\t\t\t);\n\t\t\t\t\t\tmoreWrap = $('<div/>').append(moreLink);\n\t\t\t\t\t\tmoreTd.append(moreWrap);\n\t\t\t\t\t\tsegMoreNodes.push(moreTd[0]);\n\t\t\t\t\t\tmoreNodes.push(moreTd[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\ttd.addClass('fc-limited').after($(segMoreNodes)); // hide original <td> and inject replacements\n\t\t\t\t\tlimitedNodes.push(td[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\temptyCellsUntil(this.colCnt); // finish off the level\n\t\t\trowStruct.moreEls = $(moreNodes); // for easy undoing later\n\t\t\trowStruct.limitedEls = $(limitedNodes); // for easy undoing later\n\t\t}\n\t},\n\n\n\t// Reveals all levels and removes all \"more\"-related elements for a grid's row.\n\t// `row` is a row number.\n\tunlimitRow: function(row) {\n\t\tvar rowStruct = this.eventRenderer.rowStructs[row];\n\n\t\tif (rowStruct.moreEls) {\n\t\t\trowStruct.moreEls.remove();\n\t\t\trowStruct.moreEls = null;\n\t\t}\n\n\t\tif (rowStruct.limitedEls) {\n\t\t\trowStruct.limitedEls.removeClass('fc-limited');\n\t\t\trowStruct.limitedEls = null;\n\t\t}\n\t},\n\n\n\t// Renders an <a> element that represents hidden event element for a cell.\n\t// Responsible for attaching click handler as well.\n\trenderMoreLink: function(row, col, hiddenSegs) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\n\t\treturn $('<a class=\"fc-more\"/>')\n\t\t\t.text(\n\t\t\t\tthis.getMoreLinkText(hiddenSegs.length)\n\t\t\t)\n\t\t\t.on('click', function(ev) {\n\t\t\t\tvar clickOption = _this.opt('eventLimitClick');\n\t\t\t\tvar date = _this.getCellDate(row, col);\n\t\t\t\tvar moreEl = $(this);\n\t\t\t\tvar dayEl = _this.getCellEl(row, col);\n\t\t\t\tvar allSegs = _this.getCellSegs(row, col);\n\n\t\t\t\t// rescope the segments to be within the cell's date\n\t\t\t\tvar reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n\t\t\t\tvar reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n\n\t\t\t\tif (typeof clickOption === 'function') {\n\t\t\t\t\t// the returned value can be an atomic option\n\t\t\t\t\tclickOption = _this.publiclyTrigger('eventLimitClick', {\n\t\t\t\t\t\tcontext: view,\n\t\t\t\t\t\targs: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdate: date.clone(),\n\t\t\t\t\t\t\t\tdayEl: dayEl,\n\t\t\t\t\t\t\t\tmoreEl: moreEl,\n\t\t\t\t\t\t\t\tsegs: reslicedAllSegs,\n\t\t\t\t\t\t\t\thiddenSegs: reslicedHiddenSegs\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tev,\n\t\t\t\t\t\t\tview\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (clickOption === 'popover') {\n\t\t\t\t\t_this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n\t\t\t\t}\n\t\t\t\telse if (typeof clickOption === 'string') { // a view name\n\t\t\t\t\tview.calendar.zoomTo(date, clickOption);\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\n\t// Reveals the popover that displays all events within a cell\n\tshowSegPopover: function(row, col, moreLink, segs) {\n\t\tvar _this = this;\n\t\tvar view = this.view;\n\t\tvar moreWrap = moreLink.parent(); // the <div> wrapper around the <a>\n\t\tvar topEl; // the element we want to match the top coordinate of\n\t\tvar options;\n\n\t\tif (this.rowCnt == 1) {\n\t\t\ttopEl = view.el; // will cause the popover to cover any sort of header\n\t\t}\n\t\telse {\n\t\t\ttopEl = this.rowEls.eq(row); // will align with top of row\n\t\t}\n\n\t\toptions = {\n\t\t\tclassName: 'fc-more-popover ' + view.calendar.theme.getClass('popover'),\n\t\t\tcontent: this.renderSegPopoverContent(row, col, segs),\n\t\t\tparentEl: view.el, // attach to root of view. guarantees outside of scrollbars.\n\t\t\ttop: topEl.offset().top,\n\t\t\tautoHide: true, // when the user clicks elsewhere, hide the popover\n\t\t\tviewportConstrain: this.opt('popoverViewportConstrain'),\n\t\t\thide: function() {\n\t\t\t\t// kill everything when the popover is hidden\n\t\t\t\t// notify events to be removed\n\t\t\t\tif (_this.popoverSegs) {\n\t\t\t\t\t_this.triggerBeforeEventSegsDestroyed(_this.popoverSegs);\n\t\t\t\t}\n\t\t\t\t_this.segPopover.removeElement();\n\t\t\t\t_this.segPopover = null;\n\t\t\t\t_this.popoverSegs = null;\n\t\t\t}\n\t\t};\n\n\t\t// Determine horizontal coordinate.\n\t\t// We use the moreWrap instead of the <td> to avoid border confusion.\n\t\tif (this.isRTL) {\n\t\t\toptions.right = moreWrap.offset().left + moreWrap.outerWidth() + 1; // +1 to be over cell border\n\t\t}\n\t\telse {\n\t\t\toptions.left = moreWrap.offset().left - 1; // -1 to be over cell border\n\t\t}\n\n\t\tthis.segPopover = new Popover(options);\n\t\tthis.segPopover.show();\n\n\t\t// the popover doesn't live within the grid's container element, and thus won't get the event\n\t\t// delegated-handlers for free. attach event-related handlers to the popover.\n\t\tthis.bindAllSegHandlersToEl(this.segPopover.el);\n\n\t\tthis.triggerAfterEventSegsRendered(segs);\n\t},\n\n\n\t// Builds the inner DOM contents of the segment popover\n\trenderSegPopoverContent: function(row, col, segs) {\n\t\tvar view = this.view;\n\t\tvar theme = view.calendar.theme;\n\t\tvar title = this.getCellDate(row, col).format(this.opt('dayPopoverFormat'));\n\t\tvar content = $(\n\t\t\t'<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n\t\t\t\t'<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n\t\t\t\t'<span class=\"fc-title\">' +\n\t\t\t\t\thtmlEscape(title) +\n\t\t\t\t'</span>' +\n\t\t\t\t'<div class=\"fc-clear\"/>' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n\t\t\t\t'<div class=\"fc-event-container\"></div>' +\n\t\t\t'</div>'\n\t\t);\n\t\tvar segContainer = content.find('.fc-event-container');\n\t\tvar i;\n\n\t\t// render each seg's `el` and only return the visible segs\n\t\tsegs = this.eventRenderer.renderFgSegEls(segs, true); // disableResizing=true\n\t\tthis.popoverSegs = segs;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\n\t\t\t// because segments in the popover are not part of a grid coordinate system, provide a hint to any\n\t\t\t// grids that want to do drag-n-drop about which cell it came from\n\t\t\tthis.hitsNeeded();\n\t\t\tsegs[i].hit = this.getCellHit(row, col);\n\t\t\tthis.hitsNotNeeded();\n\n\t\t\tsegContainer.append(segs[i].el);\n\t\t}\n\n\t\treturn content;\n\t},\n\n\n\t// Given the events within an array of segment objects, reslice them to be in a single day\n\tresliceDaySegs: function(segs, dayDate) {\n\t\tvar dayStart = dayDate.clone();\n\t\tvar dayEnd = dayStart.clone().add(1, 'days');\n\t\tvar dayRange = new UnzonedRange(dayStart, dayEnd);\n\t\tvar newSegs = [];\n\t\tvar i, seg;\n\t\tvar slicedRange;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tslicedRange = seg.footprint.componentFootprint.unzonedRange.intersect(dayRange);\n\n\t\t\tif (slicedRange) {\n\t\t\t\tnewSegs.push(\n\t\t\t\t\t$.extend({}, seg, {\n\t\t\t\t\t\tfootprint: new EventFootprint(\n\t\t\t\t\t\t\tnew ComponentFootprint(\n\t\t\t\t\t\t\t\tslicedRange,\n\t\t\t\t\t\t\t\tseg.footprint.componentFootprint.isAllDay\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tseg.footprint.eventDef,\n\t\t\t\t\t\t\tseg.footprint.eventInstance\n\t\t\t\t\t\t),\n\t\t\t\t\t\tisStart: seg.isStart && slicedRange.isStart,\n\t\t\t\t\t\tisEnd: seg.isEnd && slicedRange.isEnd\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// force an order because eventsToSegs doesn't guarantee one\n\t\t// TODO: research if still needed\n\t\tthis.eventRenderer.sortEventSegs(newSegs);\n\n\t\treturn newSegs;\n\t},\n\n\n\t// Generates the text that should be inside a \"more\" link, given the number of events it represents\n\tgetMoreLinkText: function(num) {\n\t\tvar opt = this.opt('eventLimitText');\n\n\t\tif (typeof opt === 'function') {\n\t\t\treturn opt(num);\n\t\t}\n\t\telse {\n\t\t\treturn '+' + num + ' ' + opt;\n\t\t}\n\t},\n\n\n\t// Returns segments within a given cell.\n\t// If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n\tgetCellSegs: function(row, col, startLevel) {\n\t\tvar segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n\t\tvar level = startLevel || 0;\n\t\tvar segs = [];\n\t\tvar seg;\n\n\t\twhile (level < segMatrix.length) {\n\t\t\tseg = segMatrix[level][col];\n\t\t\tif (seg) {\n\t\t\t\tsegs.push(seg);\n\t\t\t}\n\t\t\tlevel++;\n\t\t}\n\n\t\treturn segs;\n\t}\n\n});\n\n;;\n\n/* An abstract class for the \"basic\" views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar BasicView = FC.BasicView = View.extend({\n\n\tscroller: null,\n\n\tdayGridClass: DayGrid, // class the dayGrid will be instantiated from (overridable by subclasses)\n\tdayGrid: null, // the main subcomponent that does most of the heavy lifting\n\n\tweekNumberWidth: null, // width of all the week-number cells running down the side\n\n\n\tconstructor: function() {\n\t\tView.apply(this, arguments);\n\n\t\tthis.dayGrid = this.instantiateDayGrid();\n\t\tthis.dayGrid.isRigid = this.hasRigidRows();\n\n\t\tif (this.opt('weekNumbers')) {\n\t\t\tif (this.opt('weekNumbersWithinDays')) {\n\t\t\t\tthis.dayGrid.cellWeekNumbersVisible = true;\n\t\t\t\tthis.dayGrid.colWeekNumbersVisible = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.dayGrid.cellWeekNumbersVisible = false;\n\t\t\t\tthis.dayGrid.colWeekNumbersVisible = true;\n\t\t\t};\n\t\t}\n\n\t\tthis.addChild(this.dayGrid);\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\t// Generates the DayGrid object this view needs. Draws from this.dayGridClass\n\tinstantiateDayGrid: function() {\n\t\t// generate a subclass on the fly with BasicView-specific behavior\n\t\t// TODO: cache this subclass\n\t\tvar subclass = this.dayGridClass.extend(basicDayGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t// Computes the date range that will be rendered.\n\tbuildRenderRange: function(currentUnzonedRange, currentRangeUnit, isRangeAllDay) {\n\t\tvar renderUnzonedRange = View.prototype.buildRenderRange.apply(this, arguments); // an UnzonedRange\n\t\tvar start = this.calendar.msToUtcMoment(renderUnzonedRange.startMs, isRangeAllDay);\n\t\tvar end = this.calendar.msToUtcMoment(renderUnzonedRange.endMs, isRangeAllDay);\n\n\t\t// year and month views should be aligned with weeks. this is already done for week\n\t\tif (/^(year|month)$/.test(currentRangeUnit)) {\n\t\t\tstart.startOf('week');\n\n\t\t\t// make end-of-week if not already\n\t\t\tif (end.weekday()) {\n\t\t\t\tend.add(1, 'week').startOf('week'); // exclusively move backwards\n\t\t\t}\n\t\t}\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\texecuteDateRender: function(dateProfile) {\n\t\tthis.dayGrid.breakOnWeeks = /year|month|week/.test(dateProfile.currentRangeUnit);\n\n\t\tView.prototype.executeDateRender.apply(this, arguments);\n\t},\n\n\n\trenderSkeleton: function() {\n\t\tvar dayGridContainerEl;\n\t\tvar dayGridEl;\n\n\t\tthis.el.addClass('fc-basic-view').html(this.renderSkeletonHtml());\n\n\t\tthis.scroller.render();\n\n\t\tdayGridContainerEl = this.scroller.el.addClass('fc-day-grid-container');\n\t\tdayGridEl = $('<div class=\"fc-day-grid\" />').appendTo(dayGridContainerEl);\n\n\t\tthis.el.find('.fc-body > tr > td').append(dayGridContainerEl);\n\n\t\tthis.dayGrid.headContainerEl = this.el.find('.fc-head-container');\n\t\tthis.dayGrid.setElement(dayGridEl);\n\t},\n\n\n\tunrenderSkeleton: function() {\n\t\tthis.dayGrid.removeElement();\n\t\tthis.scroller.destroy();\n\t},\n\n\n\t// Builds the HTML skeleton for the view.\n\t// The day-grid component will render inside of a container defined by this HTML.\n\trenderSkeletonHtml: function() {\n\t\tvar theme = this.calendar.theme;\n\n\t\treturn '' +\n\t\t\t'<table class=\"' + theme.getClass('tableGrid') + '\">' +\n\t\t\t\t(this.opt('columnHeader') ?\n\t\t\t\t\t'<thead class=\"fc-head\">' +\n\t\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t\t'<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n\t\t\t\t\t\t'</tr>' +\n\t\t\t\t\t'</thead>' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t'<tbody class=\"fc-body\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</tbody>' +\n\t\t\t'</table>';\n\t},\n\n\n\t// Generates an HTML attribute string for setting the width of the week number column, if it is known\n\tweekNumberStyleAttr: function() {\n\t\tif (this.weekNumberWidth !== null) {\n\t\t\treturn 'style=\"width:' + this.weekNumberWidth + 'px\"';\n\t\t}\n\t\treturn '';\n\t},\n\n\n\t// Determines whether each row should have a constant height\n\thasRigidRows: function() {\n\t\tvar eventLimit = this.opt('eventLimit');\n\n\t\treturn eventLimit && typeof eventLimit !== 'number';\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Refreshes the horizontal dimensions of the view\n\tupdateSize: function(totalHeight, isAuto, isResize) {\n\t\tvar eventLimit = this.opt('eventLimit');\n\t\tvar headRowEl = this.dayGrid.headContainerEl.find('.fc-row');\n\t\tvar scrollerHeight;\n\t\tvar scrollbarWidths;\n\n\t\t// hack to give the view some height prior to dayGrid's columns being rendered\n\t\t// TODO: separate setting height from scroller VS dayGrid.\n\t\tif (!this.dayGrid.rowEls) {\n\t\t\tif (!isAuto) {\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tView.prototype.updateSize.apply(this, arguments);\n\n\t\tif (this.dayGrid.colWeekNumbersVisible) {\n\t\t\t// Make sure all week number cells running down the side have the same width.\n\t\t\t// Record the width for cells created later.\n\t\t\tthis.weekNumberWidth = matchCellWidths(\n\t\t\t\tthis.el.find('.fc-week-number')\n\t\t\t);\n\t\t}\n\n\t\t// reset all heights to be natural\n\t\tthis.scroller.clear();\n\t\tuncompensateScroll(headRowEl);\n\n\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n\n\t\t// is the event limit a constant level number?\n\t\tif (eventLimit && typeof eventLimit === 'number') {\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n\t\t}\n\n\t\t// distribute the height to the rows\n\t\t// (totalHeight is a \"recommended\" value if isAuto)\n\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\tthis.setGridHeight(scrollerHeight, isAuto);\n\n\t\t// is the event limit dynamically calculated?\n\t\tif (eventLimit && typeof eventLimit !== 'number') {\n\t\t\tthis.dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n\t\t}\n\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\n\n\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\n\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n\n\t\t\t\tcompensateScroll(headRowEl, scrollbarWidths);\n\n\t\t\t\t// doing the scrollbar compensation might have created text overflow which created more height. redo\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\n\t\t\t// guarantees the same scrollbar widths\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\n\t\t}\n\t},\n\n\n\t// given a desired total height of the view, returns what the height of the scroller should be\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\t// Sets the height of just the DayGrid component in this view\n\tsetGridHeight: function(height, isAuto) {\n\t\tif (isAuto) {\n\t\t\tundistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n\t\t}\n\t\telse {\n\t\t\tdistributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n\t\t}\n\t},\n\n\n\t/* Scroll\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tcomputeInitialDateScroll: function() {\n\t\treturn { top: 0 };\n\t},\n\n\n\tqueryDateScroll: function() {\n\t\treturn { top: this.scroller.getScrollTop() };\n\t},\n\n\n\tapplyDateScroll: function(scroll) {\n\t\tif (scroll.top !== undefined) {\n\t\t\tthis.scroller.setScrollTop(scroll.top);\n\t\t}\n\t}\n\n});\n\n\n// Methods that will customize the rendering behavior of the BasicView's dayGrid\nvar basicDayGridMethods = { // not relly methods anymore\n\n\n\tcolWeekNumbersVisible: false, // display week numbers along the side?\n\n\n\t// Generates the HTML that will go before the day-of week header cells\n\trenderHeadIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (this.colWeekNumbersVisible) {\n\t\t\treturn '' +\n\t\t\t\t'<th class=\"fc-week-number ' + view.calendar.theme.getClass('widgetHeader') + '\" ' + view.weekNumberStyleAttr() + '>' +\n\t\t\t\t\t'<span>' + // needed for matchCellWidths\n\t\t\t\t\t\thtmlEscape(this.opt('weekNumberTitle')) +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</th>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n\trenderNumberIntroHtml: function(row) {\n\t\tvar view = this.view;\n\t\tvar weekStart = this.getCellDate(row, 0);\n\n\t\tif (this.colWeekNumbersVisible) {\n\t\t\treturn '' +\n\t\t\t\t'<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '>' +\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n\t\t\t\t\t\t{ date: weekStart, type: 'week', forceOff: this.colCnt === 1 },\n\t\t\t\t\t\tweekStart.format('w') // inner HTML\n\t\t\t\t\t) +\n\t\t\t\t'</td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that goes before the day bg cells for each day-row\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (this.colWeekNumbersVisible) {\n\t\t\treturn '<td class=\"fc-week-number ' + view.calendar.theme.getClass('widgetContent') + '\" ' +\n\t\t\t\tview.weekNumberStyleAttr() + '></td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\t// Generates the HTML that goes before every other type of row generated by DayGrid.\n\t// Affects helper-skeleton and highlight-skeleton rows.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\tif (this.colWeekNumbersVisible) {\n\t\t\treturn '<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '></td>';\n\t\t}\n\n\t\treturn '';\n\t},\n\n\n\tgetIsNumbersVisible: function() {\n\t\treturn DayGrid.prototype.getIsNumbersVisible.apply(this, arguments) || this.colWeekNumbersVisible;\n\t}\n\n};\n\n;;\n\n/* A month view with day cells running in rows (one-per-week) and columns\n----------------------------------------------------------------------------------------------------------------------*/\n\nvar MonthView = FC.MonthView = BasicView.extend({\n\n\n\t// Computes the date range that will be rendered.\n\tbuildRenderRange: function(currentUnzonedRange, currentRangeUnit, isRangeAllDay) {\n\t\tvar renderUnzonedRange = BasicView.prototype.buildRenderRange.apply(this, arguments);\n\t\tvar start = this.calendar.msToUtcMoment(renderUnzonedRange.startMs, isRangeAllDay);\n\t\tvar end = this.calendar.msToUtcMoment(renderUnzonedRange.endMs, isRangeAllDay);\n\t\tvar rowCnt;\n\n\t\t// ensure 6 weeks\n\t\tif (this.isFixedWeeks()) {\n\t\t\trowCnt = Math.ceil( // could be partial weeks due to hiddenDays\n\t\t\t\tend.diff(start, 'weeks', true) // dontRound=true\n\t\t\t);\n\t\t\tend.add(6 - rowCnt, 'weeks');\n\t\t}\n\n\t\treturn new UnzonedRange(start, end);\n\t},\n\n\n\t// Overrides the default BasicView behavior to have special multi-week auto-height logic\n\tsetGridHeight: function(height, isAuto) {\n\n\t\t// if auto, make the height of each row the height that it would be if there were 6 weeks\n\t\tif (isAuto) {\n\t\t\theight *= this.rowCnt / 6;\n\t\t}\n\n\t\tdistributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n\t},\n\n\n\tisFixedWeeks: function() {\n\t\treturn this.opt('fixedWeekCount');\n\t},\n\n\n\tisDateInOtherMonth: function(date, dateProfile) {\n\t\treturn date.month() !== moment.utc(dateProfile.currentUnzonedRange.startMs).month(); // TODO: optimize\n\t}\n\n});\n\n;;\n\nfcViews.basic = {\n\t'class': BasicView\n};\n\nfcViews.basicDay = {\n\ttype: 'basic',\n\tduration: { days: 1 }\n};\n\nfcViews.basicWeek = {\n\ttype: 'basic',\n\tduration: { weeks: 1 }\n};\n\nfcViews.month = {\n\t'class': MonthView,\n\tduration: { months: 1 }, // important for prev/next\n\tdefaults: {\n\t\tfixedWeekCount: true\n\t}\n};\n;;\n\nvar TimeGridFillRenderer = FillRenderer.extend({\n\n\n\tattachSegEls: function(type, segs) {\n\t\tvar timeGrid = this.component;\n\t\tvar containerEls;\n\n\t\t// TODO: more efficient lookup\n\t\tif (type === 'bgEvent') {\n\t\t\tcontainerEls = timeGrid.bgContainerEls;\n\t\t}\n\t\telse if (type === 'businessHours') {\n\t\t\tcontainerEls = timeGrid.businessContainerEls;\n\t\t}\n\t\telse if (type === 'highlight') {\n\t\t\tcontainerEls = timeGrid.highlightContainerEls;\n\t\t}\n\n\t\ttimeGrid.updateSegVerticals(segs);\n\t\ttimeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls);\n\n\t\treturn segs.map(function(seg) {\n\t\t\treturn seg.el[0];\n\t\t});\n\t}\n\n});\n\n;;\n\n/*\nOnly handles foreground segs.\nDoes not own rendering. Use for low-level util methods by TimeGrid.\n*/\nvar TimeGridEventRenderer = EventRenderer.extend({\n\n\ttimeGrid: null,\n\n\n\tconstructor: function(timeGrid) {\n\t\tEventRenderer.apply(this, arguments);\n\n\t\tthis.timeGrid = timeGrid;\n\t},\n\n\n\trenderFgSegs: function(segs) {\n\t\tthis.renderFgSegsIntoContainers(segs, this.timeGrid.fgContainerEls);\n\t},\n\n\n\t// Given an array of foreground segments, render a DOM element for each, computes position,\n\t// and attaches to the column inner-container elements.\n\trenderFgSegsIntoContainers: function(segs, containerEls) {\n\t\tvar segsByCol;\n\t\tvar col;\n\n\t\tsegsByCol = this.timeGrid.groupSegsByCol(segs);\n\n\t\tfor (col = 0; col < this.timeGrid.colCnt; col++) {\n\t\t\tthis.updateFgSegCoords(segsByCol[col]);\n\t\t}\n\n\t\tthis.timeGrid.attachSegsByCol(segsByCol, containerEls);\n\t},\n\n\n\tunrenderFgSegs: function() {\n\t\tif (this.fgSegs) { // hack\n\t\t\tthis.fgSegs.forEach(function(seg) {\n\t\t\t\tseg.el.remove();\n\t\t\t});\n\t\t}\n\t},\n\n\n\t// Computes a default event time formatting string if `timeFormat` is not explicitly defined\n\tcomputeEventTimeFormat: function() {\n\t\treturn this.opt('noMeridiemTimeFormat'); // like \"6:30\" (no AM/PM)\n\t},\n\n\n\t// Computes a default `displayEventEnd` value if one is not expliclty defined\n\tcomputeDisplayEventEnd: function() {\n\t\treturn true;\n\t},\n\n\n\t// Renders the HTML for a single event segment's default rendering\n\tfgSegHtml: function(seg, disableResizing) {\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar componentFootprint = seg.footprint.componentFootprint;\n\t\tvar isAllDay = componentFootprint.isAllDay;\n\t\tvar eventDef = seg.footprint.eventDef;\n\t\tvar isDraggable = view.isEventDefDraggable(eventDef);\n\t\tvar isResizableFromStart = !disableResizing && seg.isStart && view.isEventDefResizableFromStart(eventDef);\n\t\tvar isResizableFromEnd = !disableResizing && seg.isEnd && view.isEventDefResizableFromEnd(eventDef);\n\t\tvar classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd);\n\t\tvar skinCss = cssToStr(this.getSkinCss(eventDef));\n\t\tvar timeText;\n\t\tvar fullTimeText; // more verbose time text. for the print stylesheet\n\t\tvar startTimeText; // just the start time text\n\n\t\tclasses.unshift('fc-time-grid-event', 'fc-v-event');\n\n\t\t// if the event appears to span more than one day...\n\t\tif (view.isMultiDayRange(componentFootprint.unzonedRange)) {\n\t\t\t// Don't display time text on segments that run entirely through a day.\n\t\t\t// That would appear as midnight-midnight and would look dumb.\n\t\t\t// Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n\t\t\tif (seg.isStart || seg.isEnd) {\n\t\t\t\tvar zonedStart = calendar.msToMoment(seg.startMs);\n\t\t\t\tvar zonedEnd = calendar.msToMoment(seg.endMs);\n\t\t\t\ttimeText = this._getTimeText(zonedStart, zonedEnd, isAllDay);\n\t\t\t\tfullTimeText = this._getTimeText(zonedStart, zonedEnd, isAllDay, 'LT');\n\t\t\t\tstartTimeText = this._getTimeText(zonedStart, zonedEnd, isAllDay, null, false); // displayEnd=false\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Display the normal time text for the *event's* times\n\t\t\ttimeText = this.getTimeText(seg.footprint);\n\t\t\tfullTimeText = this.getTimeText(seg.footprint, 'LT');\n\t\t\tstartTimeText = this.getTimeText(seg.footprint, null, false); // displayEnd=false\n\t\t}\n\n\t\treturn '<a class=\"' + classes.join(' ') + '\"' +\n\t\t\t(eventDef.url ?\n\t\t\t\t' href=\"' + htmlEscape(eventDef.url) + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t(skinCss ?\n\t\t\t\t' style=\"' + skinCss + '\"' :\n\t\t\t\t''\n\t\t\t\t) +\n\t\t\t'>' +\n\t\t\t\t'<div class=\"fc-content\">' +\n\t\t\t\t\t(timeText ?\n\t\t\t\t\t\t'<div class=\"fc-time\"' +\n\t\t\t\t\t\t' data-start=\"' + htmlEscape(startTimeText) + '\"' +\n\t\t\t\t\t\t' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\n\t\t\t\t\t\t'>' +\n\t\t\t\t\t\t\t'<span>' + htmlEscape(timeText) + '</span>' +\n\t\t\t\t\t\t'</div>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t\t(eventDef.title ?\n\t\t\t\t\t\t'<div class=\"fc-title\">' +\n\t\t\t\t\t\t\thtmlEscape(eventDef.title) +\n\t\t\t\t\t\t'</div>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"fc-bg\"/>' +\n\t\t\t\t/* TODO: write CSS for this\n\t\t\t\t(isResizableFromStart ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-start-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t*/\n\t\t\t\t(isResizableFromEnd ?\n\t\t\t\t\t'<div class=\"fc-resizer fc-end-resizer\" />' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t'</a>';\n\t},\n\n\n\t// Given segments that are assumed to all live in the *same column*,\n\t// compute their verical/horizontal coordinates and assign to their elements.\n\tupdateFgSegCoords: function(segs) {\n\t\tthis.timeGrid.computeSegVerticals(segs); // horizontals relies on this\n\t\tthis.computeFgSegHorizontals(segs); // compute horizontal coordinates, z-index's, and reorder the array\n\t\tthis.timeGrid.assignSegVerticals(segs);\n\t\tthis.assignFgSegHorizontals(segs);\n\t},\n\n\n\t// Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n\t// NOTE: Also reorders the given array by date!\n\tcomputeFgSegHorizontals: function(segs) {\n\t\tvar levels;\n\t\tvar level0;\n\t\tvar i;\n\n\t\tthis.sortEventSegs(segs); // order by certain criteria\n\t\tlevels = buildSlotSegLevels(segs);\n\t\tcomputeForwardSlotSegs(levels);\n\n\t\tif ((level0 = levels[0])) {\n\n\t\t\tfor (i = 0; i < level0.length; i++) {\n\t\t\t\tcomputeSlotSegPressures(level0[i]);\n\t\t\t}\n\n\t\t\tfor (i = 0; i < level0.length; i++) {\n\t\t\t\tthis.computeFgSegForwardBack(level0[i], 0, 0);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n\t// from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n\t// seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n\t//\n\t// The segment might be part of a \"series\", which means consecutive segments with the same pressure\n\t// who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n\t// segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n\t// coordinate of the first segment in the series.\n\tcomputeFgSegForwardBack: function(seg, seriesBackwardPressure, seriesBackwardCoord) {\n\t\tvar forwardSegs = seg.forwardSegs;\n\t\tvar i;\n\n\t\tif (seg.forwardCoord === undefined) { // not already computed\n\n\t\t\tif (!forwardSegs.length) {\n\n\t\t\t\t// if there are no forward segments, this segment should butt up against the edge\n\t\t\t\tseg.forwardCoord = 1;\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t// sort highest pressure first\n\t\t\t\tthis.sortForwardSegs(forwardSegs);\n\n\t\t\t\t// this segment's forwardCoord will be calculated from the backwardCoord of the\n\t\t\t\t// highest-pressure forward segment.\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n\t\t\t\tseg.forwardCoord = forwardSegs[0].backwardCoord;\n\t\t\t}\n\n\t\t\t// calculate the backwardCoord from the forwardCoord. consider the series\n\t\t\tseg.backwardCoord = seg.forwardCoord -\n\t\t\t\t(seg.forwardCoord - seriesBackwardCoord) / // available width for series\n\t\t\t\t(seriesBackwardPressure + 1); // # of segments in the series\n\n\t\t\t// use this segment's coordinates to computed the coordinates of the less-pressurized\n\t\t\t// forward segments\n\t\t\tfor (i=0; i<forwardSegs.length; i++) {\n\t\t\t\tthis.computeFgSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tsortForwardSegs: function(forwardSegs) {\n\t\tforwardSegs.sort(proxy(this, 'compareForwardSegs'));\n\t},\n\n\n\t// A cmp function for determining which forward segment to rely on more when computing coordinates.\n\tcompareForwardSegs: function(seg1, seg2) {\n\t\t// put higher-pressure first\n\t\treturn seg2.forwardPressure - seg1.forwardPressure ||\n\t\t\t// put segments that are closer to initial edge first (and favor ones with no coords yet)\n\t\t\t(seg1.backwardCoord || 0) - (seg2.backwardCoord || 0) ||\n\t\t\t// do normal sorting...\n\t\t\tthis.compareEventSegs(seg1, seg2);\n\t},\n\n\n\t// Given foreground event segments that have already had their position coordinates computed,\n\t// assigns position-related CSS values to their elements.\n\tassignFgSegHorizontals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.el.css(this.generateFgSegHorizontalCss(seg));\n\n\t\t\t// if the height is short, add a className for alternate styling\n\t\t\tif (seg.bottom - seg.top < 30) {\n\t\t\t\tseg.el.addClass('fc-short');\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Generates an object with CSS properties/values that should be applied to an event segment element.\n\t// Contains important positioning-related properties that should be applied to any event element, customized or not.\n\tgenerateFgSegHorizontalCss: function(seg) {\n\t\tvar shouldOverlap = this.opt('slotEventOverlap');\n\t\tvar backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n\t\tvar forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n\t\tvar props = this.timeGrid.generateSegVerticalCss(seg); // get top/bottom first\n\t\tvar left; // amount of space from left edge, a fraction of the total width\n\t\tvar right; // amount of space from right edge, a fraction of the total width\n\n\t\tif (shouldOverlap) {\n\t\t\t// double the width, but don't go beyond the maximum forward coordinate (1.0)\n\t\t\tforwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n\t\t}\n\n\t\tif (this.timeGrid.isRTL) {\n\t\t\tleft = 1 - forwardCoord;\n\t\t\tright = backwardCoord;\n\t\t}\n\t\telse {\n\t\t\tleft = backwardCoord;\n\t\t\tright = 1 - forwardCoord;\n\t\t}\n\n\t\tprops.zIndex = seg.level + 1; // convert from 0-base to 1-based\n\t\tprops.left = left * 100 + '%';\n\t\tprops.right = right * 100 + '%';\n\n\t\tif (shouldOverlap && seg.forwardPressure) {\n\t\t\t// add padding to the edge so that forward stacked events don't cover the resizer's icon\n\t\t\tprops[this.isRTL ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n\t\t}\n\n\t\treturn props;\n\t}\n\n});\n\n\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\nfunction buildSlotSegLevels(segs) {\n\tvar levels = [];\n\tvar i, seg;\n\tvar j;\n\n\tfor (i=0; i<segs.length; i++) {\n\t\tseg = segs[i];\n\n\t\t// go through all the levels and stop on the first level where there are no collisions\n\t\tfor (j=0; j<levels.length; j++) {\n\t\t\tif (!computeSlotSegCollisions(seg, levels[j]).length) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tseg.level = j;\n\n\t\t(levels[j] || (levels[j] = [])).push(seg);\n\t}\n\n\treturn levels;\n}\n\n\n// For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\nfunction computeForwardSlotSegs(levels) {\n\tvar i, level;\n\tvar j, seg;\n\tvar k;\n\n\tfor (i=0; i<levels.length; i++) {\n\t\tlevel = levels[i];\n\n\t\tfor (j=0; j<level.length; j++) {\n\t\t\tseg = level[j];\n\n\t\t\tseg.forwardSegs = [];\n\t\t\tfor (k=i+1; k<levels.length; k++) {\n\t\t\t\tcomputeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\nfunction computeSlotSegPressures(seg) {\n\tvar forwardSegs = seg.forwardSegs;\n\tvar forwardPressure = 0;\n\tvar i, forwardSeg;\n\n\tif (seg.forwardPressure === undefined) { // not already computed\n\n\t\tfor (i=0; i<forwardSegs.length; i++) {\n\t\t\tforwardSeg = forwardSegs[i];\n\n\t\t\t// figure out the child's maximum forward path\n\t\t\tcomputeSlotSegPressures(forwardSeg);\n\n\t\t\t// either use the existing maximum, or use the child's forward pressure\n\t\t\t// plus one (for the forwardSeg itself)\n\t\t\tforwardPressure = Math.max(\n\t\t\t\tforwardPressure,\n\t\t\t\t1 + forwardSeg.forwardPressure\n\t\t\t);\n\t\t}\n\n\t\tseg.forwardPressure = forwardPressure;\n\t}\n}\n\n\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n\tresults = results || [];\n\n\tfor (var i=0; i<otherSegs.length; i++) {\n\t\tif (isSlotSegCollision(seg, otherSegs[i])) {\n\t\t\tresults.push(otherSegs[i]);\n\t\t}\n\t}\n\n\treturn results;\n}\n\n\n// Do these segments occupy the same vertical space?\nfunction isSlotSegCollision(seg1, seg2) {\n\treturn seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n}\n\n;;\n\nvar TimeGridHelperRenderer = HelperRenderer.extend({\n\n\n\trenderSegs: function(segs, sourceSeg) {\n\t\tvar helperNodes = [];\n\t\tvar i, seg;\n\t\tvar sourceEl;\n\n\t\t// TODO: not good to call eventRenderer this way\n\t\tthis.eventRenderer.renderFgSegsIntoContainers(\n\t\t\tsegs,\n\t\t\tthis.component.helperContainerEls\n\t\t);\n\n\t\t// Try to make the segment that is in the same row as sourceSeg look the same\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\n\t\t\tif (sourceSeg && sourceSeg.col === seg.col) {\n\t\t\t\tsourceEl = sourceSeg.el;\n\t\t\t\tseg.el.css({\n\t\t\t\t\tleft: sourceEl.css('left'),\n\t\t\t\t\tright: sourceEl.css('right'),\n\t\t\t\t\t'margin-left': sourceEl.css('margin-left'),\n\t\t\t\t\t'margin-right': sourceEl.css('margin-right')\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thelperNodes.push(seg.el[0]);\n\t\t}\n\n\t\treturn $(helperNodes); // must return the elements rendered\n\t}\n\n});\n\n;;\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n// We mixin DayTable, even though there is only a single row of days\n\nvar TimeGrid = FC.TimeGrid = InteractiveDateComponent.extend(StandardInteractionsMixin, DayTableMixin, {\n\n\teventRendererClass: TimeGridEventRenderer,\n\tbusinessHourRendererClass: BusinessHourRenderer,\n\thelperRendererClass: TimeGridHelperRenderer,\n\tfillRendererClass: TimeGridFillRenderer,\n\n\tview: null, // TODO: make more general and/or remove\n\thelperRenderer: null,\n\n\tdayRanges: null, // UnzonedRange[], of start-end of each day\n\tslotDuration: null, // duration of a \"slot\", a distinct time segment on given day, visualized by lines\n\tsnapDuration: null, // granularity of time for dragging and selecting\n\tsnapsPerSlot: null,\n\tlabelFormat: null, // formatting string for times running along vertical axis\n\tlabelInterval: null, // duration of how often a label should be displayed for a slot\n\n\theadContainerEl: null, // div that hold's the date header\n\tcolEls: null, // cells elements in the day-row background\n\tslatContainerEl: null, // div that wraps all the slat rows\n\tslatEls: null, // elements running horizontally across all columns\n\tnowIndicatorEls: null,\n\n\tcolCoordCache: null,\n\tslatCoordCache: null,\n\n\tbottomRuleEl: null, // hidden by default\n\tcolContainerEls: null, // containers for each column\n\n\t// inner-containers for each column where different types of segs live\n\tfgContainerEls: null,\n\tbgContainerEls: null,\n\thelperContainerEls: null,\n\thighlightContainerEls: null,\n\tbusinessContainerEls: null,\n\n\t// arrays of different types of displayed segments\n\thelperSegs: null,\n\thighlightSegs: null,\n\tbusinessSegs: null,\n\n\n\tconstructor: function(view) {\n\t\tthis.view = view; // do first, for opt calls during initialization\n\n\t\tInteractiveDateComponent.call(this); // call the super-constructor\n\n\t\tthis.processOptions();\n\t},\n\n\n\t// Slices up the given span (unzoned start/end with other misc data) into an array of segments\n\tcomponentFootprintToSegs: function(componentFootprint) {\n\t\tvar segs = this.sliceRangeByTimes(componentFootprint.unzonedRange);\n\t\tvar i;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tif (this.isRTL) {\n\t\t\t\tsegs[i].col = this.daysPerRow - 1 - segs[i].dayIndex;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsegs[i].col = segs[i].dayIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Date Handling\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tsliceRangeByTimes: function(unzonedRange) {\n\t\tvar segs = [];\n\t\tvar segRange;\n\t\tvar dayIndex;\n\n\t\tfor (dayIndex = 0; dayIndex < this.daysPerRow; dayIndex++) {\n\n\t\t\tsegRange = unzonedRange.intersect(this.dayRanges[dayIndex]);\n\n\t\t\tif (segRange) {\n\t\t\t\tsegs.push({\n\t\t\t\t\tstartMs: segRange.startMs,\n\t\t\t\t\tendMs: segRange.endMs,\n\t\t\t\t\tisStart: segRange.isStart,\n\t\t\t\t\tisEnd: segRange.isEnd,\n\t\t\t\t\tdayIndex: dayIndex\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\t/* Options\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Parses various options into properties of this object\n\tprocessOptions: function() {\n\t\tvar slotDuration = this.opt('slotDuration');\n\t\tvar snapDuration = this.opt('snapDuration');\n\t\tvar input;\n\n\t\tslotDuration = moment.duration(slotDuration);\n\t\tsnapDuration = snapDuration ? moment.duration(snapDuration) : slotDuration;\n\n\t\tthis.slotDuration = slotDuration;\n\t\tthis.snapDuration = snapDuration;\n\t\tthis.snapsPerSlot = slotDuration / snapDuration; // TODO: ensure an integer multiple?\n\n\t\t// might be an array value (for TimelineView).\n\t\t// if so, getting the most granular entry (the last one probably).\n\t\tinput = this.opt('slotLabelFormat');\n\t\tif ($.isArray(input)) {\n\t\t\tinput = input[input.length - 1];\n\t\t}\n\n\t\tthis.labelFormat = input ||\n\t\t\tthis.opt('smallTimeFormat'); // the computed default\n\n\t\tinput = this.opt('slotLabelInterval');\n\t\tthis.labelInterval = input ?\n\t\t\tmoment.duration(input) :\n\t\t\tthis.computeLabelInterval(slotDuration);\n\t},\n\n\n\t// Computes an automatic value for slotLabelInterval\n\tcomputeLabelInterval: function(slotDuration) {\n\t\tvar i;\n\t\tvar labelInterval;\n\t\tvar slotsPerLabel;\n\n\t\t// find the smallest stock label interval that results in more than one slots-per-label\n\t\tfor (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n\t\t\tlabelInterval = moment.duration(AGENDA_STOCK_SUB_DURATIONS[i]);\n\t\t\tslotsPerLabel = divideDurationByDuration(labelInterval, slotDuration);\n\t\t\tif (isInt(slotsPerLabel) && slotsPerLabel > 1) {\n\t\t\t\treturn labelInterval;\n\t\t\t}\n\t\t}\n\n\t\treturn moment.duration(slotDuration); // fall back. clone\n\t},\n\n\n\t/* Date Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderDates: function(dateProfile) {\n\t\tthis.dateProfile = dateProfile;\n\t\tthis.updateDayTable();\n\t\tthis.renderSlats();\n\t\tthis.renderColumns();\n\t},\n\n\n\trenderSkeleton: function() {\n\t\tvar theme = this.view.calendar.theme;\n\n\t\tthis.el.html(\n\t\t\t'<div class=\"fc-bg\"></div>' +\n\t\t\t'<div class=\"fc-slats\"></div>' +\n\t\t\t'<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" style=\"display:none\" />'\n\t\t);\n\n\t\tthis.bottomRuleEl = this.el.find('hr');\n\t},\n\n\n\trenderSlats: function() {\n\t\tvar theme = this.view.calendar.theme;\n\n\t\tthis.slatContainerEl = this.el.find('> .fc-slats')\n\t\t\t.html(\n\t\t\t\t'<table class=\"' + theme.getClass('tableGrid') + '\">' +\n\t\t\t\t\tthis.renderSlatRowHtml() +\n\t\t\t\t'</table>'\n\t\t\t);\n\n\t\tthis.slatEls = this.slatContainerEl.find('tr');\n\n\t\tthis.slatCoordCache = new CoordCache({\n\t\t\tels: this.slatEls,\n\t\t\tisVertical: true\n\t\t});\n\t},\n\n\n\t// Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n\trenderSlatRowHtml: function() {\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar theme = calendar.theme;\n\t\tvar isRTL = this.isRTL;\n\t\tvar dateProfile = this.dateProfile;\n\t\tvar html = '';\n\t\tvar slotTime = moment.duration(+dateProfile.minTime); // wish there was .clone() for durations\n\t\tvar slotIterator = moment.duration(0);\n\t\tvar slotDate; // will be on the view's first day, but we only care about its time\n\t\tvar isLabeled;\n\t\tvar axisHtml;\n\n\t\t// Calculate the time for each slot\n\t\twhile (slotTime < dateProfile.maxTime) {\n\t\t\tslotDate = calendar.msToUtcMoment(dateProfile.renderUnzonedRange.startMs).time(slotTime);\n\t\t\tisLabeled = isInt(divideDurationByDuration(slotIterator, this.labelInterval));\n\n\t\t\taxisHtml =\n\t\t\t\t'<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t\t(isLabeled ?\n\t\t\t\t\t\t'<span>' + // for matchCellWidths\n\t\t\t\t\t\t\thtmlEscape(slotDate.format(this.labelFormat)) +\n\t\t\t\t\t\t'</span>' :\n\t\t\t\t\t\t''\n\t\t\t\t\t\t) +\n\t\t\t\t'</td>';\n\n\t\t\thtml +=\n\t\t\t\t'<tr data-time=\"' + slotDate.format('HH:mm:ss') + '\"' +\n\t\t\t\t\t(isLabeled ? '' : ' class=\"fc-minor\"') +\n\t\t\t\t\t'>' +\n\t\t\t\t\t(!isRTL ? axisHtml : '') +\n\t\t\t\t\t'<td class=\"' + theme.getClass('widgetContent') + '\"/>' +\n\t\t\t\t\t(isRTL ? axisHtml : '') +\n\t\t\t\t\"</tr>\";\n\n\t\t\tslotTime.add(this.slotDuration);\n\t\t\tslotIterator.add(this.slotDuration);\n\t\t}\n\n\t\treturn html;\n\t},\n\n\n\trenderColumns: function() {\n\t\tvar dateProfile = this.dateProfile;\n\t\tvar theme = this.view.calendar.theme;\n\n\t\tthis.dayRanges = this.dayDates.map(function(dayDate) {\n\t\t\treturn new UnzonedRange(\n\t\t\t\tdayDate.clone().add(dateProfile.minTime),\n\t\t\t\tdayDate.clone().add(dateProfile.maxTime)\n\t\t\t);\n\t\t});\n\n\t\tif (this.headContainerEl) {\n\t\t\tthis.headContainerEl.html(this.renderHeadHtml());\n\t\t}\n\n\t\tthis.el.find('> .fc-bg').html(\n\t\t\t'<table class=\"' + theme.getClass('tableGrid') + '\">' +\n\t\t\t\tthis.renderBgTrHtml(0) + // row=0\n\t\t\t'</table>'\n\t\t);\n\n\t\tthis.colEls = this.el.find('.fc-day, .fc-disabled-day');\n\n\t\tthis.colCoordCache = new CoordCache({\n\t\t\tels: this.colEls,\n\t\t\tisHorizontal: true\n\t\t});\n\n\t\tthis.renderContentSkeleton();\n\t},\n\n\n\t/* Content Skeleton\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders the DOM that the view's content will live in\n\trenderContentSkeleton: function() {\n\t\tvar cellHtml = '';\n\t\tvar i;\n\t\tvar skeletonEl;\n\n\t\tfor (i = 0; i < this.colCnt; i++) {\n\t\t\tcellHtml +=\n\t\t\t\t'<td>' +\n\t\t\t\t\t'<div class=\"fc-content-col\">' +\n\t\t\t\t\t\t'<div class=\"fc-event-container fc-helper-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-event-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-highlight-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-bgevent-container\"></div>' +\n\t\t\t\t\t\t'<div class=\"fc-business-container\"></div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t'</td>';\n\t\t}\n\n\t\tskeletonEl = $(\n\t\t\t'<div class=\"fc-content-skeleton\">' +\n\t\t\t\t'<table>' +\n\t\t\t\t\t'<tr>' + cellHtml + '</tr>' +\n\t\t\t\t'</table>' +\n\t\t\t'</div>'\n\t\t);\n\n\t\tthis.colContainerEls = skeletonEl.find('.fc-content-col');\n\t\tthis.helperContainerEls = skeletonEl.find('.fc-helper-container');\n\t\tthis.fgContainerEls = skeletonEl.find('.fc-event-container:not(.fc-helper-container)');\n\t\tthis.bgContainerEls = skeletonEl.find('.fc-bgevent-container');\n\t\tthis.highlightContainerEls = skeletonEl.find('.fc-highlight-container');\n\t\tthis.businessContainerEls = skeletonEl.find('.fc-business-container');\n\n\t\tthis.bookendCells(skeletonEl.find('tr')); // TODO: do this on string level\n\t\tthis.el.append(skeletonEl);\n\t},\n\n\n\t// Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n\tgroupSegsByCol: function(segs) {\n\t\tvar segsByCol = [];\n\t\tvar i;\n\n\t\tfor (i = 0; i < this.colCnt; i++) {\n\t\t\tsegsByCol.push([]);\n\t\t}\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tsegsByCol[segs[i].col].push(segs[i]);\n\t\t}\n\n\t\treturn segsByCol;\n\t},\n\n\n\t// Given segments grouped by column, insert the segments' elements into a parallel array of container\n\t// elements, each living within a column.\n\tattachSegsByCol: function(segsByCol, containerEls) {\n\t\tvar col;\n\t\tvar segs;\n\t\tvar i;\n\n\t\tfor (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n\t\t\tsegs = segsByCol[col];\n\n\t\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\t\tcontainerEls.eq(col).append(segs[i].el);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t\treturn 'minute'; // will refresh on the minute\n\t},\n\n\n\trenderNowIndicator: function(date) {\n\t\t// seg system might be overkill, but it handles scenario where line needs to be rendered\n\t\t//  more than once because of columns with the same date (resources columns for example)\n\t\tvar segs = this.componentFootprintToSegs(\n\t\t\tnew ComponentFootprint(\n\t\t\t\tnew UnzonedRange(date, date.valueOf() + 1), // protect against null range\n\t\t\t\tfalse // all-day\n\t\t\t)\n\t\t);\n\t\tvar top = this.computeDateTop(date, date);\n\t\tvar nodes = [];\n\t\tvar i;\n\n\t\t// render lines within the columns\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-line\"></div>')\n\t\t\t\t.css('top', top)\n\t\t\t\t.appendTo(this.colContainerEls.eq(segs[i].col))[0]);\n\t\t}\n\n\t\t// render an arrow over the axis\n\t\tif (segs.length > 0) { // is the current time in view?\n\t\t\tnodes.push($('<div class=\"fc-now-indicator fc-now-indicator-arrow\"></div>')\n\t\t\t\t.css('top', top)\n\t\t\t\t.appendTo(this.el.find('.fc-content-skeleton'))[0]);\n\t\t}\n\n\t\tthis.nowIndicatorEls = $(nodes);\n\t},\n\n\n\tunrenderNowIndicator: function() {\n\t\tif (this.nowIndicatorEls) {\n\t\t\tthis.nowIndicatorEls.remove();\n\t\t\tthis.nowIndicatorEls = null;\n\t\t}\n\t},\n\n\n\t/* Coordinates\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tupdateSize: function(totalHeight, isAuto, isResize) {\n\t\tInteractiveDateComponent.prototype.updateSize.apply(this, arguments);\n\n\t\tthis.slatCoordCache.build();\n\n\t\tif (isResize) {\n\t\t\tthis.updateSegVerticals(\n\t\t\t\t[].concat(this.eventRenderer.getSegs(), this.businessSegs || [])\n\t\t\t);\n\t\t}\n\t},\n\n\n\tgetTotalSlatHeight: function() {\n\t\treturn this.slatContainerEl.outerHeight();\n\t},\n\n\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given date.\n\t// `ms` can be a millisecond UTC time OR a UTC moment.\n\t// A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n\tcomputeDateTop: function(ms, startOfDayDate) {\n\t\treturn this.computeTimeTop(\n\t\t\tmoment.duration(\n\t\t\t\tms - startOfDayDate.clone().stripTime()\n\t\t\t)\n\t\t);\n\t},\n\n\n\t// Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n\tcomputeTimeTop: function(time) {\n\t\tvar len = this.slatEls.length;\n\t\tvar dateProfile = this.dateProfile;\n\t\tvar slatCoverage = (time - dateProfile.minTime) / this.slotDuration; // floating-point value of # of slots covered\n\t\tvar slatIndex;\n\t\tvar slatRemainder;\n\n\t\t// compute a floating-point number for how many slats should be progressed through.\n\t\t// from 0 to number of slats (inclusive)\n\t\t// constrained because minTime/maxTime might be customized.\n\t\tslatCoverage = Math.max(0, slatCoverage);\n\t\tslatCoverage = Math.min(len, slatCoverage);\n\n\t\t// an integer index of the furthest whole slat\n\t\t// from 0 to number slats (*exclusive*, so len-1)\n\t\tslatIndex = Math.floor(slatCoverage);\n\t\tslatIndex = Math.min(slatIndex, len - 1);\n\n\t\t// how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n\t\t// could be 1.0 if slatCoverage is covering *all* the slots\n\t\tslatRemainder = slatCoverage - slatIndex;\n\n\t\treturn this.slatCoordCache.getTopPosition(slatIndex) +\n\t\t\tthis.slatCoordCache.getHeight(slatIndex) * slatRemainder;\n\t},\n\n\n\t// Refreshes the CSS top/bottom coordinates for each segment element.\n\t// Works when called after initial render, after a window resize/zoom for example.\n\tupdateSegVerticals: function(segs) {\n\t\tthis.computeSegVerticals(segs);\n\t\tthis.assignSegVerticals(segs);\n\t},\n\n\n\t// For each segment in an array, computes and assigns its top and bottom properties\n\tcomputeSegVerticals: function(segs) {\n\t\tvar eventMinHeight = this.opt('agendaEventMinHeight');\n\t\tvar i, seg;\n\t\tvar dayDate;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tdayDate = this.dayDates[seg.dayIndex];\n\n\t\t\tseg.top = this.computeDateTop(seg.startMs, dayDate);\n\t\t\tseg.bottom = Math.max(\n\t\t\t\tseg.top + eventMinHeight,\n\t\t\t\tthis.computeDateTop(seg.endMs, dayDate)\n\t\t\t);\n\t\t}\n\t},\n\n\n\t// Given segments that already have their top/bottom properties computed, applies those values to\n\t// the segments' elements.\n\tassignSegVerticals: function(segs) {\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\tseg.el.css(this.generateSegVerticalCss(seg));\n\t\t}\n\t},\n\n\n\t// Generates an object with CSS properties for the top/bottom coordinates of a segment element\n\tgenerateSegVerticalCss: function(seg) {\n\t\treturn {\n\t\t\ttop: seg.top,\n\t\t\tbottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n\t\t};\n\t},\n\n\n\t/* Hit System\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tprepareHits: function() {\n\t\tthis.colCoordCache.build();\n\t\tthis.slatCoordCache.build();\n\t},\n\n\n\treleaseHits: function() {\n\t\tthis.colCoordCache.clear();\n\t\t// NOTE: don't clear slatCoordCache because we rely on it for computeTimeTop\n\t},\n\n\n\tqueryHit: function(leftOffset, topOffset) {\n\t\tvar snapsPerSlot = this.snapsPerSlot;\n\t\tvar colCoordCache = this.colCoordCache;\n\t\tvar slatCoordCache = this.slatCoordCache;\n\n\t\tif (colCoordCache.isLeftInBounds(leftOffset) && slatCoordCache.isTopInBounds(topOffset)) {\n\t\t\tvar colIndex = colCoordCache.getHorizontalIndex(leftOffset);\n\t\t\tvar slatIndex = slatCoordCache.getVerticalIndex(topOffset);\n\n\t\t\tif (colIndex != null && slatIndex != null) {\n\t\t\t\tvar slatTop = slatCoordCache.getTopOffset(slatIndex);\n\t\t\t\tvar slatHeight = slatCoordCache.getHeight(slatIndex);\n\t\t\t\tvar partial = (topOffset - slatTop) / slatHeight; // floating point number between 0 and 1\n\t\t\t\tvar localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n\t\t\t\tvar snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n\t\t\t\tvar snapTop = slatTop + (localSnapIndex / snapsPerSlot) * slatHeight;\n\t\t\t\tvar snapBottom = slatTop + ((localSnapIndex + 1) / snapsPerSlot) * slatHeight;\n\n\t\t\t\treturn {\n\t\t\t\t\tcol: colIndex,\n\t\t\t\t\tsnap: snapIndex,\n\t\t\t\t\tcomponent: this, // needed unfortunately :(\n\t\t\t\t\tleft: colCoordCache.getLeftOffset(colIndex),\n\t\t\t\t\tright: colCoordCache.getRightOffset(colIndex),\n\t\t\t\t\ttop: snapTop,\n\t\t\t\t\tbottom: snapBottom\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\n\n\tgetHitFootprint: function(hit) {\n\t\tvar start = this.getCellDate(0, hit.col); // row=0\n\t\tvar time = this.computeSnapTime(hit.snap); // pass in the snap-index\n\t\tvar end;\n\n\t\tstart.time(time);\n\t\tend = start.clone().add(this.snapDuration);\n\n\t\treturn new ComponentFootprint(\n\t\t\tnew UnzonedRange(start, end),\n\t\t\tfalse // all-day?\n\t\t);\n\t},\n\n\n\t// Given a row number of the grid, representing a \"snap\", returns a time (Duration) from its start-of-day\n\tcomputeSnapTime: function(snapIndex) {\n\t\treturn moment.duration(this.dateProfile.minTime + this.snapDuration * snapIndex);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\treturn this.colEls.eq(hit.col);\n\t},\n\n\n\t/* Event Drag Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being dragged over the specified date(s).\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(eventFootprints, seg, isTouch) {\n\t\tvar i;\n\n\t\tif (seg) { // if there is event information for this drag, render a helper event\n\n\t\t\tif (eventFootprints.length) {\n\t\t\t\tthis.helperRenderer.renderEventDraggingFootprints(eventFootprints, seg, isTouch);\n\n\t\t\t\t// signal that a helper has been rendered\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse { // otherwise, just render a highlight\n\n\t\t\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\t\t\tthis.renderHighlight(eventFootprints[i].componentFootprint);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of an event being dragged\n\tunrenderDrag: function(seg) {\n\t\tthis.unrenderHighlight();\n\t\tthis.helperRenderer.unrender();\n\t},\n\n\n\t/* Event Resize Visualization\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of an event being resized\n\trenderEventResize: function(eventFootprints, seg, isTouch) {\n\t\tthis.helperRenderer.renderEventResizingFootprints(eventFootprints, seg, isTouch);\n\t},\n\n\n\t// Unrenders any visual indication of an event being resized\n\tunrenderEventResize: function(seg) {\n\t\tthis.helperRenderer.unrender();\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n\trenderSelectionFootprint: function(componentFootprint) {\n\t\tif (this.opt('selectHelper')) { // this setting signals that a mock helper event should be rendered\n\t\t\tthis.helperRenderer.renderComponentFootprint(componentFootprint);\n\t\t}\n\t\telse {\n\t\t\tthis.renderHighlight(componentFootprint);\n\t\t}\n\t},\n\n\n\t// Unrenders any visual indication of a selection\n\tunrenderSelection: function() {\n\t\tthis.helperRenderer.unrender();\n\t\tthis.unrenderHighlight();\n\t}\n\n});\n\n;;\n\n/* An abstract class for all agenda-related views. Displays one more columns with time slots running vertically.\n----------------------------------------------------------------------------------------------------------------------*/\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n// Responsible for managing width/height.\n\nvar AgendaView = FC.AgendaView = View.extend({\n\n\tscroller: null,\n\n\ttimeGridClass: TimeGrid, // class used to instantiate the timeGrid. subclasses can override\n\ttimeGrid: null, // the main time-grid subcomponent of this view\n\n\tdayGridClass: DayGrid, // class used to instantiate the dayGrid. subclasses can override\n\tdayGrid: null, // the \"all-day\" subcomponent. if all-day is turned off, this will be null\n\n\taxisWidth: null, // the width of the time axis running down the side\n\n\t// indicates that minTime/maxTime affects rendering\n\tusesMinMaxTime: true,\n\n\n\tconstructor: function() {\n\t\tView.apply(this, arguments);\n\n\t\tthis.timeGrid = this.instantiateTimeGrid();\n\t\tthis.addChild(this.timeGrid);\n\n\t\tif (this.opt('allDaySlot')) { // should we display the \"all-day\" area?\n\t\t\tthis.dayGrid = this.instantiateDayGrid(); // the all-day subcomponent of this view\n\t\t\tthis.addChild(this.dayGrid);\n\t\t}\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\t// Instantiates the TimeGrid object this view needs. Draws from this.timeGridClass\n\tinstantiateTimeGrid: function() {\n\t\tvar subclass = this.timeGridClass.extend(agendaTimeGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t// Instantiates the DayGrid object this view might need. Draws from this.dayGridClass\n\tinstantiateDayGrid: function() {\n\t\tvar subclass = this.dayGridClass.extend(agendaDayGridMethods);\n\n\t\treturn new subclass(this);\n\t},\n\n\n\t/* Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\trenderSkeleton: function() {\n\t\tvar timeGridWrapEl;\n\t\tvar timeGridEl;\n\n\t\tthis.el.addClass('fc-agenda-view').html(this.renderSkeletonHtml());\n\n\t\tthis.scroller.render();\n\n\t\ttimeGridWrapEl = this.scroller.el.addClass('fc-time-grid-container');\n\t\ttimeGridEl = $('<div class=\"fc-time-grid\" />').appendTo(timeGridWrapEl);\n\n\t\tthis.el.find('.fc-body > tr > td').append(timeGridWrapEl);\n\n\t\tthis.timeGrid.headContainerEl = this.el.find('.fc-head-container');\n\t\tthis.timeGrid.setElement(timeGridEl);\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.setElement(this.el.find('.fc-day-grid'));\n\n\t\t\t// have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n\t\t\tthis.dayGrid.bottomCoordPadding = this.dayGrid.el.next('hr').outerHeight();\n\t\t}\n\t},\n\n\n\tunrenderSkeleton: function() {\n\t\tthis.timeGrid.removeElement();\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.removeElement();\n\t\t}\n\n\t\tthis.scroller.destroy();\n\t},\n\n\n\t// Builds the HTML skeleton for the view.\n\t// The day-grid and time-grid components will render inside containers defined by this HTML.\n\trenderSkeletonHtml: function() {\n\t\tvar theme = this.calendar.theme;\n\n\t\treturn '' +\n\t\t\t'<table class=\"' + theme.getClass('tableGrid') + '\">' +\n\t\t\t\t(this.opt('columnHeader') ?\n\t\t\t\t\t'<thead class=\"fc-head\">' +\n\t\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t\t'<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n\t\t\t\t\t\t'</tr>' +\n\t\t\t\t\t'</thead>' :\n\t\t\t\t\t''\n\t\t\t\t\t) +\n\t\t\t\t'<tbody class=\"fc-body\">' +\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t\t'<td class=\"' + theme.getClass('widgetContent') + '\">' +\n\t\t\t\t\t\t\t(this.dayGrid ?\n\t\t\t\t\t\t\t\t'<div class=\"fc-day-grid\"/>' +\n\t\t\t\t\t\t\t\t'<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\"/>' :\n\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t) +\n\t\t\t\t\t\t'</td>' +\n\t\t\t\t\t'</tr>' +\n\t\t\t\t'</tbody>' +\n\t\t\t'</table>';\n\t},\n\n\n\t// Generates an HTML attribute string for setting the width of the axis, if it is known\n\taxisStyleAttr: function() {\n\t\tif (this.axisWidth !== null) {\n\t\t\t return 'style=\"width:' + this.axisWidth + 'px\"';\n\t\t}\n\t\treturn '';\n\t},\n\n\n\t/* Now Indicator\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\tgetNowIndicatorUnit: function() {\n\t\treturn this.timeGrid.getNowIndicatorUnit();\n\t},\n\n\n\t/* Dimensions\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Adjusts the vertical dimensions of the view to the specified values\n\tupdateSize: function(totalHeight, isAuto, isResize) {\n\t\tvar eventLimit;\n\t\tvar scrollerHeight;\n\t\tvar scrollbarWidths;\n\n\t\tView.prototype.updateSize.apply(this, arguments);\n\n\t\t// make all axis cells line up, and record the width so newly created axis cells will have it\n\t\tthis.axisWidth = matchCellWidths(this.el.find('.fc-axis'));\n\n\t\t// hack to give the view some height prior to timeGrid's columns being rendered\n\t\t// TODO: separate setting height from scroller VS timeGrid.\n\t\tif (!this.timeGrid.colEls) {\n\t\t\tif (!isAuto) {\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// set of fake row elements that must compensate when scroller has scrollbars\n\t\tvar noScrollRowEls = this.el.find('.fc-row:not(.fc-scroller *)');\n\n\t\t// reset all dimensions back to the original state\n\t\tthis.timeGrid.bottomRuleEl.hide(); // .show() will be called later if this <hr> is necessary\n\t\tthis.scroller.clear(); // sets height to 'auto' and clears overflow\n\t\tuncompensateScroll(noScrollRowEls);\n\n\t\t// limit number of events in the all-day area\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n\n\t\t\teventLimit = this.opt('eventLimit');\n\t\t\tif (eventLimit && typeof eventLimit !== 'number') {\n\t\t\t\teventLimit = AGENDA_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n\t\t\t}\n\t\t\tif (eventLimit) {\n\t\t\t\tthis.dayGrid.limitRows(eventLimit);\n\t\t\t}\n\t\t}\n\n\t\tif (!isAuto) { // should we force dimensions of the scroll container?\n\n\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\tscrollbarWidths = this.scroller.getScrollbarWidths();\n\n\t\t\tif (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n\n\t\t\t\t// make the all-day and header rows lines up\n\t\t\t\tcompensateScroll(noScrollRowEls, scrollbarWidths);\n\n\t\t\t\t// the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n\t\t\t\t// and reapply the desired height to the scroller.\n\t\t\t\tscrollerHeight = this.computeScrollerHeight(totalHeight);\n\t\t\t\tthis.scroller.setHeight(scrollerHeight);\n\t\t\t}\n\n\t\t\t// guarantees the same scrollbar widths\n\t\t\tthis.scroller.lockOverflow(scrollbarWidths);\n\n\t\t\t// if there's any space below the slats, show the horizontal rule.\n\t\t\t// this won't cause any new overflow, because lockOverflow already called.\n\t\t\tif (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n\t\t\t\tthis.timeGrid.bottomRuleEl.show();\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// given a desired total height of the view, returns what the height of the scroller should be\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\t/* Scroll\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Computes the initial pre-configured scroll state prior to allowing the user to change it\n\tcomputeInitialDateScroll: function() {\n\t\tvar scrollTime = moment.duration(this.opt('scrollTime'));\n\t\tvar top = this.timeGrid.computeTimeTop(scrollTime);\n\n\t\t// zoom can give weird floating-point values. rather scroll a little bit further\n\t\ttop = Math.ceil(top);\n\n\t\tif (top) {\n\t\t\ttop++; // to overcome top border that slots beyond the first have. looks better\n\t\t}\n\n\t\treturn { top: top };\n\t},\n\n\n\tqueryDateScroll: function() {\n\t\treturn { top: this.scroller.getScrollTop() };\n\t},\n\n\n\tapplyDateScroll: function(scroll) {\n\t\tif (scroll.top !== undefined) {\n\t\t\tthis.scroller.setScrollTop(scroll.top);\n\t\t}\n\t},\n\n\n\t/* Hit Areas\n\t------------------------------------------------------------------------------------------------------------------*/\n\t// forward all hit-related method calls to the grids (dayGrid might not be defined)\n\n\n\tgetHitFootprint: function(hit) {\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\n\t\treturn hit.component.getHitFootprint(hit);\n\t},\n\n\n\tgetHitEl: function(hit) {\n\t\t// TODO: hit.component is set as a hack to identify where the hit came from\n\t\treturn hit.component.getHitEl(hit);\n\t},\n\n\n\t/* Event Rendering\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\texecuteEventRender: function(eventsPayload) {\n\t\tvar dayEventsPayload = {};\n\t\tvar timedEventsPayload = {};\n\t\tvar id, eventInstanceGroup;\n\n\t\t// separate the events into all-day and timed\n\t\tfor (id in eventsPayload) {\n\t\t\teventInstanceGroup = eventsPayload[id];\n\n\t\t\tif (eventInstanceGroup.getEventDef().isAllDay()) {\n\t\t\t\tdayEventsPayload[id] = eventInstanceGroup;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttimedEventsPayload[id] = eventInstanceGroup;\n\t\t\t}\n\t\t}\n\n\t\tthis.timeGrid.executeEventRender(timedEventsPayload);\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.executeEventRender(dayEventsPayload);\n\t\t}\n\t},\n\n\n\t/* Dragging/Resizing Routing\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// A returned value of `true` signals that a mock \"helper\" event has been rendered.\n\trenderDrag: function(eventFootprints, seg, isTouch) {\n\t\tvar groups = groupEventFootprintsByAllDay(eventFootprints);\n\t\tvar renderedHelper = false;\n\n\t\trenderedHelper = this.timeGrid.renderDrag(groups.timed, seg, isTouch);\n\n\t\tif (this.dayGrid) {\n\t\t\trenderedHelper = this.dayGrid.renderDrag(groups.allDay, seg, isTouch) || renderedHelper;\n\t\t}\n\n\t\treturn renderedHelper;\n\t},\n\n\n\trenderEventResize: function(eventFootprints, seg, isTouch) {\n\t\tvar groups = groupEventFootprintsByAllDay(eventFootprints);\n\n\t\tthis.timeGrid.renderEventResize(groups.timed, seg, isTouch);\n\n\t\tif (this.dayGrid) {\n\t\t\tthis.dayGrid.renderEventResize(groups.allDay, seg, isTouch);\n\t\t}\n\t},\n\n\n\t/* Selection\n\t------------------------------------------------------------------------------------------------------------------*/\n\n\n\t// Renders a visual indication of a selection\n\trenderSelectionFootprint: function(componentFootprint) {\n\t\tif (!componentFootprint.isAllDay) {\n\t\t\tthis.timeGrid.renderSelectionFootprint(componentFootprint);\n\t\t}\n\t\telse if (this.dayGrid) {\n\t\t\tthis.dayGrid.renderSelectionFootprint(componentFootprint);\n\t\t}\n\t}\n\n});\n\n\n// Methods that will customize the rendering behavior of the AgendaView's timeGrid\n// TODO: move into TimeGrid\nvar agendaTimeGridMethods = {\n\n\n\t// Generates the HTML that will go before the day-of week header cells\n\trenderHeadIntroHtml: function() {\n\t\tvar view = this.view;\n\t\tvar calendar = view.calendar;\n\t\tvar weekStart = calendar.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs, true);\n\t\tvar weekText;\n\n\t\tif (this.opt('weekNumbers')) {\n\t\t\tweekText = weekStart.format(this.opt('smallWeekFormat'));\n\n\t\t\treturn '' +\n\t\t\t\t'<th class=\"fc-axis fc-week-number ' + calendar.theme.getClass('widgetHeader') + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t\tview.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n\t\t\t\t\t\t{ date: weekStart, type: 'week', forceOff: this.colCnt > 1 },\n\t\t\t\t\t\thtmlEscape(weekText) // inner HTML\n\t\t\t\t\t) +\n\t\t\t\t'</th>';\n\t\t}\n\t\telse {\n\t\t\treturn '<th class=\"fc-axis ' + calendar.theme.getClass('widgetHeader') + '\" ' + view.axisStyleAttr() + '></th>';\n\t\t}\n\t},\n\n\n\t// Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis ' + view.calendar.theme.getClass('widgetContent') + '\" ' + view.axisStyleAttr() + '></td>';\n\t},\n\n\n\t// Generates the HTML that goes before all other types of cells.\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\n\t}\n\n};\n\n\n// Methods that will customize the rendering behavior of the AgendaView's dayGrid\nvar agendaDayGridMethods = {\n\n\n\t// Generates the HTML that goes before the all-day cells\n\trenderBgIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '' +\n\t\t\t'<td class=\"fc-axis ' + view.calendar.theme.getClass('widgetContent') + '\" ' + view.axisStyleAttr() + '>' +\n\t\t\t\t'<span>' + // needed for matchCellWidths\n\t\t\t\t\tview.getAllDayHtml() +\n\t\t\t\t'</span>' +\n\t\t\t'</td>';\n\t},\n\n\n\t// Generates the HTML that goes before all other types of cells.\n\t// Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\n\trenderIntroHtml: function() {\n\t\tvar view = this.view;\n\n\t\treturn '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>';\n\t}\n\n};\n\n\nfunction groupEventFootprintsByAllDay(eventFootprints) {\n\tvar allDay = [];\n\tvar timed = [];\n\tvar i;\n\n\tfor (i = 0; i < eventFootprints.length; i++) {\n\t\tif (eventFootprints[i].componentFootprint.isAllDay) {\n\t\t\tallDay.push(eventFootprints[i]);\n\t\t}\n\t\telse {\n\t\t\ttimed.push(eventFootprints[i]);\n\t\t}\n\t}\n\n\treturn { allDay: allDay, timed: timed };\n}\n\n;;\n\nvar AGENDA_ALL_DAY_EVENT_LIMIT = 5;\n\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar AGENDA_STOCK_SUB_DURATIONS = [\n\t{ hours: 1 },\n\t{ minutes: 30 },\n\t{ minutes: 15 },\n\t{ seconds: 30 },\n\t{ seconds: 15 }\n];\n\nfcViews.agenda = {\n\t'class': AgendaView,\n\tdefaults: {\n\t\tallDaySlot: true,\n\t\tslotDuration: '00:30:00',\n\t\tslotEventOverlap: true // a bad name. confused with overlap/constraint system\n\t}\n};\n\nfcViews.agendaDay = {\n\ttype: 'agenda',\n\tduration: { days: 1 }\n};\n\nfcViews.agendaWeek = {\n\ttype: 'agenda',\n\tduration: { weeks: 1 }\n};\n;;\n\n/*\nResponsible for the scroller, and forwarding event-related actions into the \"grid\".\n*/\nvar ListView = FC.ListView = View.extend({\n\n\tsegSelector: '.fc-list-item', // which elements accept event actions\n\t//eventRendererClass is below\n\t//eventPointingClass is below\n\n\tscroller: null,\n\tcontentEl: null,\n\n\tdayDates: null, // localized ambig-time moment array\n\tdayRanges: null, // UnzonedRange[], of start-end of each day\n\n\n\tconstructor: function() {\n\t\tView.apply(this, arguments);\n\n\t\tthis.scroller = new Scroller({\n\t\t\toverflowX: 'hidden',\n\t\t\toverflowY: 'auto'\n\t\t});\n\t},\n\n\n\trenderSkeleton: function() {\n\t\tthis.el.addClass(\n\t\t\t'fc-list-view ' +\n\t\t\tthis.calendar.theme.getClass('listView')\n\t\t);\n\n\t\tthis.scroller.render();\n\t\tthis.scroller.el.appendTo(this.el);\n\n\t\tthis.contentEl = this.scroller.scrollEl; // shortcut\n\t},\n\n\n\tunrenderSkeleton: function() {\n\t\tthis.scroller.destroy(); // will remove the Grid too\n\t},\n\n\n\tupdateSize: function(totalHeight, isAuto, isResize) {\n\t\tthis.scroller.setHeight(this.computeScrollerHeight(totalHeight));\n\t},\n\n\n\tcomputeScrollerHeight: function(totalHeight) {\n\t\treturn totalHeight -\n\t\t\tsubtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n\t},\n\n\n\trenderDates: function(dateProfile) {\n\t\tvar calendar = this.calendar;\n\t\tvar dayStart = calendar.msToUtcMoment(dateProfile.renderUnzonedRange.startMs, true);\n\t\tvar viewEnd = calendar.msToUtcMoment(dateProfile.renderUnzonedRange.endMs, true);\n\t\tvar dayDates = [];\n\t\tvar dayRanges = [];\n\n\t\twhile (dayStart < viewEnd) {\n\n\t\t\tdayDates.push(dayStart.clone());\n\n\t\t\tdayRanges.push(new UnzonedRange(\n\t\t\t\tdayStart,\n\t\t\t\tdayStart.clone().add(1, 'day')\n\t\t\t));\n\n\t\t\tdayStart.add(1, 'day');\n\t\t}\n\n\t\tthis.dayDates = dayDates;\n\t\tthis.dayRanges = dayRanges;\n\n\t\t// all real rendering happens in EventRenderer\n\t},\n\n\n\t// slices by day\n\tcomponentFootprintToSegs: function(footprint) {\n\t\tvar dayRanges = this.dayRanges;\n\t\tvar dayIndex;\n\t\tvar segRange;\n\t\tvar seg;\n\t\tvar segs = [];\n\n\t\tfor (dayIndex = 0; dayIndex < dayRanges.length; dayIndex++) {\n\t\t\tsegRange = footprint.unzonedRange.intersect(dayRanges[dayIndex]);\n\n\t\t\tif (segRange) {\n\t\t\t\tseg = {\n\t\t\t\t\tstartMs: segRange.startMs,\n\t\t\t\t\tendMs: segRange.endMs,\n\t\t\t\t\tisStart: segRange.isStart,\n\t\t\t\t\tisEnd: segRange.isEnd,\n\t\t\t\t\tdayIndex: dayIndex\n\t\t\t\t};\n\n\t\t\t\tsegs.push(seg);\n\n\t\t\t\t// detect when footprint won't go fully into the next day,\n\t\t\t\t// and mutate the latest seg to the be the end.\n\t\t\t\tif (\n\t\t\t\t\t!seg.isEnd && !footprint.isAllDay &&\n\t\t\t\t\tdayIndex + 1 < dayRanges.length &&\n\t\t\t\t\tfootprint.unzonedRange.endMs < dayRanges[dayIndex + 1].startMs + this.nextDayThreshold\n\t\t\t\t) {\n\t\t\t\t\tseg.endMs = footprint.unzonedRange.endMs;\n\t\t\t\t\tseg.isEnd = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn segs;\n\t},\n\n\n\teventRendererClass: EventRenderer.extend({\n\n\n\t\trenderFgSegs: function(segs) {\n\t\t\tif (!segs.length) {\n\t\t\t\tthis.component.renderEmptyMessage();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.component.renderSegList(segs);\n\t\t\t}\n\t\t},\n\n\n\t\t// generates the HTML for a single event row\n\t\tfgSegHtml: function(seg) {\n\t\t\tvar view = this.view;\n\t\t\tvar calendar = view.calendar;\n\t\t\tvar theme = calendar.theme;\n\t\t\tvar eventFootprint = seg.footprint;\n\t\t\tvar eventDef = eventFootprint.eventDef;\n\t\t\tvar componentFootprint = eventFootprint.componentFootprint;\n\t\t\tvar url = eventDef.url;\n\t\t\tvar classes = [ 'fc-list-item' ].concat(this.getClasses(eventDef));\n\t\t\tvar bgColor = this.getBgColor(eventDef);\n\t\t\tvar timeHtml;\n\n\t\t\tif (componentFootprint.isAllDay) {\n\t\t\t\ttimeHtml = view.getAllDayHtml();\n\t\t\t}\n\t\t\t// if the event appears to span more than one day\n\t\t\telse if (view.isMultiDayRange(componentFootprint.unzonedRange)) {\n\t\t\t\tif (seg.isStart || seg.isEnd) { // outer segment that probably lasts part of the day\n\t\t\t\t\ttimeHtml = htmlEscape(this._getTimeText(\n\t\t\t\t\t\tcalendar.msToMoment(seg.startMs),\n\t\t\t\t\t\tcalendar.msToMoment(seg.endMs),\n\t\t\t\t\t\tcomponentFootprint.isAllDay\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t\telse { // inner segment that lasts the whole day\n\t\t\t\t\ttimeHtml = view.getAllDayHtml();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Display the normal time text for the *event's* times\n\t\t\t\ttimeHtml = htmlEscape(this.getTimeText(eventFootprint));\n\t\t\t}\n\n\t\t\tif (url) {\n\t\t\t\tclasses.push('fc-has-url');\n\t\t\t}\n\n\t\t\treturn '<tr class=\"' + classes.join(' ') + '\">' +\n\t\t\t\t(this.displayEventTime ?\n\t\t\t\t\t'<td class=\"fc-list-item-time ' + theme.getClass('widgetContent') + '\">' +\n\t\t\t\t\t\t(timeHtml || '') +\n\t\t\t\t\t'</td>' :\n\t\t\t\t\t'') +\n\t\t\t\t'<td class=\"fc-list-item-marker ' + theme.getClass('widgetContent') + '\">' +\n\t\t\t\t\t'<span class=\"fc-event-dot\"' +\n\t\t\t\t\t(bgColor ?\n\t\t\t\t\t\t' style=\"background-color:' + bgColor + '\"' :\n\t\t\t\t\t\t'') +\n\t\t\t\t\t'></span>' +\n\t\t\t\t'</td>' +\n\t\t\t\t'<td class=\"fc-list-item-title ' + theme.getClass('widgetContent') + '\">' +\n\t\t\t\t\t'<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n\t\t\t\t\t\thtmlEscape(eventDef.title || '') +\n\t\t\t\t\t'</a>' +\n\t\t\t\t'</td>' +\n\t\t\t'</tr>';\n\t\t},\n\n\n\t\t// like \"4:00am\"\n\t\tcomputeEventTimeFormat: function() {\n\t\t\treturn this.opt('mediumTimeFormat');\n\t\t}\n\n\t}),\n\n\n\teventPointingClass: EventPointing.extend({\n\n\t\t// for events with a url, the whole <tr> should be clickable,\n\t\t// but it's impossible to wrap with an <a> tag. simulate this.\n\t\thandleClick: function(seg, ev) {\n\t\t\tvar url;\n\n\t\t\tEventPointing.prototype.handleClick.apply(this, arguments); // super. might prevent the default action\n\n\t\t\t// not clicking on or within an <a> with an href\n\t\t\tif (!$(ev.target).closest('a[href]').length) {\n\t\t\t\turl = seg.footprint.eventDef.url;\n\n\t\t\t\tif (url && !ev.isDefaultPrevented()) { // jsEvent not cancelled in handler\n\t\t\t\t\twindow.location.href = url; // simulate link click\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}),\n\n\n\trenderEmptyMessage: function() {\n\t\tthis.contentEl.html(\n\t\t\t'<div class=\"fc-list-empty-wrap2\">' + // TODO: try less wraps\n\t\t\t'<div class=\"fc-list-empty-wrap1\">' +\n\t\t\t'<div class=\"fc-list-empty\">' +\n\t\t\t\thtmlEscape(this.opt('noEventsMessage')) +\n\t\t\t'</div>' +\n\t\t\t'</div>' +\n\t\t\t'</div>'\n\t\t);\n\t},\n\n\n\t// render the event segments in the view\n\trenderSegList: function(allSegs) {\n\t\tvar segsByDay = this.groupSegsByDay(allSegs); // sparse array\n\t\tvar dayIndex;\n\t\tvar daySegs;\n\t\tvar i;\n\t\tvar tableEl = $('<table class=\"fc-list-table ' + this.calendar.theme.getClass('tableList') + '\"><tbody/></table>');\n\t\tvar tbodyEl = tableEl.find('tbody');\n\n\t\tfor (dayIndex = 0; dayIndex < segsByDay.length; dayIndex++) {\n\t\t\tdaySegs = segsByDay[dayIndex];\n\n\t\t\tif (daySegs) { // sparse array, so might be undefined\n\n\t\t\t\t// append a day header\n\t\t\t\ttbodyEl.append(this.dayHeaderHtml(this.dayDates[dayIndex]));\n\n\t\t\t\tthis.eventRenderer.sortEventSegs(daySegs);\n\n\t\t\t\tfor (i = 0; i < daySegs.length; i++) {\n\t\t\t\t\ttbodyEl.append(daySegs[i].el); // append event row\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.contentEl.empty().append(tableEl);\n\t},\n\n\n\t// Returns a sparse array of arrays, segs grouped by their dayIndex\n\tgroupSegsByDay: function(segs) {\n\t\tvar segsByDay = []; // sparse array\n\t\tvar i, seg;\n\n\t\tfor (i = 0; i < segs.length; i++) {\n\t\t\tseg = segs[i];\n\t\t\t(segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\n\t\t\t\t.push(seg);\n\t\t}\n\n\t\treturn segsByDay;\n\t},\n\n\n\t// generates the HTML for the day headers that live amongst the event rows\n\tdayHeaderHtml: function(dayDate) {\n\t\tvar mainFormat = this.opt('listDayFormat');\n\t\tvar altFormat = this.opt('listDayAltFormat');\n\n\t\treturn '<tr class=\"fc-list-heading\" data-date=\"' + dayDate.format('YYYY-MM-DD') + '\">' +\n\t\t\t'<td class=\"' + this.calendar.theme.getClass('widgetHeader') + '\" colspan=\"3\">' +\n\t\t\t\t(mainFormat ?\n\t\t\t\t\tthis.buildGotoAnchorHtml(\n\t\t\t\t\t\tdayDate,\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-main' },\n\t\t\t\t\t\thtmlEscape(dayDate.format(mainFormat)) // inner HTML\n\t\t\t\t\t) :\n\t\t\t\t\t'') +\n\t\t\t\t(altFormat ?\n\t\t\t\t\tthis.buildGotoAnchorHtml(\n\t\t\t\t\t\tdayDate,\n\t\t\t\t\t\t{ 'class': 'fc-list-heading-alt' },\n\t\t\t\t\t\thtmlEscape(dayDate.format(altFormat)) // inner HTML\n\t\t\t\t\t) :\n\t\t\t\t\t'') +\n\t\t\t'</td>' +\n\t\t'</tr>';\n\t}\n\n});\n\n;;\n\nfcViews.list = {\n\t'class': ListView,\n\tbuttonTextKey: 'list', // what to lookup in locale files\n\tdefaults: {\n\t\tbuttonText: 'list', // text to display for English\n\t\tlistDayFormat: 'LL', // like \"January 1, 2016\"\n\t\tnoEventsMessage: 'No events to display'\n\t}\n};\n\nfcViews.listDay = {\n\ttype: 'list',\n\tduration: { days: 1 },\n\tdefaults: {\n\t\tlistDayFormat: 'dddd' // day-of-week is all we need. full date is probably in header\n\t}\n};\n\nfcViews.listWeek = {\n\ttype: 'list',\n\tduration: { weeks: 1 },\n\tdefaults: {\n\t\tlistDayFormat: 'dddd', // day-of-week is more important\n\t\tlistDayAltFormat: 'LL'\n\t}\n};\n\nfcViews.listMonth = {\n\ttype: 'list',\n\tduration: { month: 1 },\n\tdefaults: {\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\n\t}\n};\n\nfcViews.listYear = {\n\ttype: 'list',\n\tduration: { year: 1 },\n\tdefaults: {\n\t\tlistDayAltFormat: 'dddd' // day-of-week is nice-to-have\n\t}\n};\n\n;;\n\r\nreturn FC; // export for Node/CommonJS\r\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/ng-fullcalendar/node_modules/fullcalendar/dist/fullcalendar.js\n// module id = ./node_modules/ng-fullcalendar/node_modules/fullcalendar/dist/fullcalendar.js\n// module chunks = incidencias.module","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = ./node_modules/process/browser.js\n// module chunks = incidencias.module","/** PURE_IMPORTS_START .._Observable,.._util_tryCatch,.._util_isFunction,.._util_errorObject,.._Subscription PURE_IMPORTS_END */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nimport { Observable } from '../Observable';\nimport { tryCatch } from '../util/tryCatch';\nimport { isFunction } from '../util/isFunction';\nimport { errorObject } from '../util/errorObject';\nimport { Subscription } from '../Subscription';\nvar toString = Object.prototype.toString;\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return !!sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return !!sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isNodeList(sourceObj) {\n    return !!sourceObj && toString.call(sourceObj) === '[object NodeList]';\n}\nfunction isHTMLCollection(sourceObj) {\n    return !!sourceObj && toString.call(sourceObj) === '[object HTMLCollection]';\n}\nfunction isEventTarget(sourceObj) {\n    return !!sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nexport var FromEventObservable = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(FromEventObservable, _super);\n    function FromEventObservable(sourceObj, eventName, selector, options) {\n        _super.call(this);\n        this.sourceObj = sourceObj;\n        this.eventName = eventName;\n        this.selector = selector;\n        this.options = options;\n    }\n    /* tslint:enable:max-line-length */\n    /**\n     * Creates an Observable that emits events of a specific type coming from the\n     * given event target.\n     *\n     * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n     * EventEmitter events or others.</span>\n     *\n     * <img src=\"./img/fromEvent.png\" width=\"100%\">\n     *\n     * `fromEvent` accepts as a first argument event target, which is an object with methods\n     * for registering event handler functions. As a second argument it takes string that indicates\n     * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n     * which are described in detail below. If your event target does not match any of the ones listed,\n     * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n     * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n     * handler functions have different names, but they all accept a string describing event type\n     * and function itself, which will be called whenever said event happens.\n     *\n     * Every time resulting Observable is subscribed, event handler function will be registered\n     * to event target on given event type. When that event fires, value\n     * passed as a first argument to registered function will be emitted by output Observable.\n     * When Observable is unsubscribed, function will be unregistered from event target.\n     *\n     * Note that if event target calls registered function with more than one argument, second\n     * and following arguments will not appear in resulting stream. In order to get access to them,\n     * you can pass to `fromEvent` optional project function, which will be called with all arguments\n     * passed to event handler. Output Observable will then emit value returned by project function,\n     * instead of the usual value.\n     *\n     * Remember that event targets listed below are checked via duck typing. It means that\n     * no matter what kind of object you have and no matter what environment you work in,\n     * you can safely use `fromEvent` on that object if it exposes described methods (provided\n     * of course they behave as was described above). So for example if Node.js library exposes\n     * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n     * a good choice.\n     *\n     * If the API you use is more callback then event handler oriented (subscribed\n     * callback function fires only once and thus there is no need to manually\n     * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n     * instead.\n     *\n     * `fromEvent` supports following types of event targets:\n     *\n     * **DOM EventTarget**\n     *\n     * This is an object with `addEventListener` and `removeEventListener` methods.\n     *\n     * In the browser, `addEventListener` accepts - apart from event type string and event\n     * handler function arguments - optional third parameter, which is either an object or boolean,\n     * both used for additional configuration how and when passed function will be called. When\n     * `fromEvent` is used with event target of that type, you can provide this values\n     * as third parameter as well.\n     *\n     * **Node.js EventEmitter**\n     *\n     * An object with `addListener` and `removeListener` methods.\n     *\n     * **JQuery-style event target**\n     *\n     * An object with `on` and `off` methods\n     *\n     * **DOM NodeList**\n     *\n     * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n     *\n     * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n     * it contains and install event handler function in every of them. When returned Observable\n     * is unsubscribed, function will be removed from all Nodes.\n     *\n     * **DOM HtmlCollection**\n     *\n     * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n     * installed and removed in each of elements.\n     *\n     *\n     * @example <caption>Emits clicks happening on the DOM document</caption>\n     * var clicks = Rx.Observable.fromEvent(document, 'click');\n     * clicks.subscribe(x => console.log(x));\n     *\n     * // Results in:\n     * // MouseEvent object logged to console every time a click\n     * // occurs on the document.\n     *\n     *\n     * @example <caption>Use addEventListener with capture option</caption>\n     * var clicksInDocument = Rx.Observable.fromEvent(document, 'click', true); // note optional configuration parameter\n     *                                                                          // which will be passed to addEventListener\n     * var clicksInDiv = Rx.Observable.fromEvent(someDivInDocument, 'click');\n     *\n     * clicksInDocument.subscribe(() => console.log('document'));\n     * clicksInDiv.subscribe(() => console.log('div'));\n     *\n     * // By default events bubble UP in DOM tree, so normally\n     * // when we would click on div in document\n     * // \"div\" would be logged first and then \"document\".\n     * // Since we specified optional `capture` option, document\n     * // will catch event when it goes DOWN DOM tree, so console\n     * // will log \"document\" and then \"div\".\n     *\n     * @see {@link bindCallback}\n     * @see {@link bindNodeCallback}\n     * @see {@link fromEventPattern}\n     *\n     * @param {EventTargetLike} target The DOM EventTarget, Node.js\n     * EventEmitter, JQuery-like event target, NodeList or HTMLCollection to attach the event handler to.\n     * @param {string} eventName The event name of interest, being emitted by the\n     * `target`.\n     * @param {EventListenerOptions} [options] Options to pass through to addEventListener\n     * @param {SelectorMethodSignature<T>} [selector] An optional function to\n     * post-process results. It takes the arguments from the event handler and\n     * should return a single value.\n     * @return {Observable<T>}\n     * @static true\n     * @name fromEvent\n     * @owner Observable\n     */\n    FromEventObservable.create = function (target, eventName, options, selector) {\n        if (isFunction(options)) {\n            selector = options;\n            options = undefined;\n        }\n        return new FromEventObservable(target, eventName, selector, options);\n    };\n    FromEventObservable.setupSubscription = function (sourceObj, eventName, handler, subscriber, options) {\n        var unsubscribe;\n        if (isNodeList(sourceObj) || isHTMLCollection(sourceObj)) {\n            for (var i = 0, len = sourceObj.length; i < len; i++) {\n                FromEventObservable.setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n            }\n        }\n        else if (isEventTarget(sourceObj)) {\n            var source_1 = sourceObj;\n            sourceObj.addEventListener(eventName, handler, options);\n            unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n        }\n        else if (isJQueryStyleEventEmitter(sourceObj)) {\n            var source_2 = sourceObj;\n            sourceObj.on(eventName, handler);\n            unsubscribe = function () { return source_2.off(eventName, handler); };\n        }\n        else if (isNodeStyleEventEmitter(sourceObj)) {\n            var source_3 = sourceObj;\n            sourceObj.addListener(eventName, handler);\n            unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n        }\n        else {\n            throw new TypeError('Invalid event target');\n        }\n        subscriber.add(new Subscription(unsubscribe));\n    };\n    /** @deprecated internal use only */ FromEventObservable.prototype._subscribe = function (subscriber) {\n        var sourceObj = this.sourceObj;\n        var eventName = this.eventName;\n        var options = this.options;\n        var selector = this.selector;\n        var handler = selector ? function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i - 0] = arguments[_i];\n            }\n            var result = tryCatch(selector).apply(void 0, args);\n            if (result === errorObject) {\n                subscriber.error(errorObject.e);\n            }\n            else {\n                subscriber.next(result);\n            }\n        } : function (e) { return subscriber.next(e); };\n        FromEventObservable.setupSubscription(sourceObj, eventName, handler, subscriber, options);\n    };\n    return FromEventObservable;\n}(Observable));\n//# sourceMappingURL=FromEventObservable.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/_esm5/observable/FromEventObservable.js\n// module id = ./node_modules/rxjs/_esm5/observable/FromEventObservable.js\n// module chunks = incidencias.module","/** PURE_IMPORTS_START ._FromEventObservable PURE_IMPORTS_END */\nimport { FromEventObservable } from './FromEventObservable';\nexport var fromEvent = FromEventObservable.create;\n//# sourceMappingURL=fromEvent.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/_esm5/observable/fromEvent.js\n// module id = ./node_modules/rxjs/_esm5/observable/fromEvent.js\n// module chunks = incidencias.module","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/util/support/isBufferBrowser.js\n// module id = ./node_modules/util/support/isBufferBrowser.js\n// module chunks = incidencias.module","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/util/util.js\n// module id = ./node_modules/util/util.js\n// module chunks = incidencias.module","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport { EnvironmentService } from './../shared/environment/environment.service';\nimport { Ng4LoadingSpinnerService } from 'ng4-loading-spinner';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\n@Injectable()\nexport class ArticuloService {\n\n  constructor(private _http: HttpClient,\n    private environmentService: EnvironmentService) { }\n  public gettoken(token) {\n    let url = this.environmentService.setApiServiceWithToken('articulos', token);\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError);\n  }\n\n  private handleError(error: HttpErrorResponse | any) {\n    let errMsg: string;\n    errMsg = error.error;\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/articulo/articulo.service.ts","import { Injectable } from '@angular/core';\nimport { Observable } from \"rxjs\";\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport { EnvironmentService } from './../shared/environment/environment.service';\nimport { Ng4LoadingSpinnerService } from 'ng4-loading-spinner';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\n\n@Injectable()\nexport class ComentarioincidenteService {\n\n  constructor(private _http: HttpClient,\n    private environmentService: EnvironmentService) { }\n\n  public get(page) {\n    let url = this.environmentService.setApiServiceWithPageEnterprise('comentarioincidente', page)\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n\n  add(userData) {\n    let url = this.environmentService.setApiService('comentarioincidente');\n    return this._http.post(url, userData)\n      .map(res => res)\n      .catch(this.handleError);\n  }\n\n\n  getById($id) {\n    let url = this.environmentService.setApiServiceById('comentarioincidente', $id)\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n  public getbytoken(page) {\n    let url = this.environmentService.setApiServiceWithVars('comentarioincidente', page)\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n\n  update(userData) {\n    let url = this.environmentService.setApiServiceById('comentarioincidente', userData.id)\n    return this._http.put(url, userData)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n  updatecomponent(userData) {\n    let url = this.environmentService.setApiService('comentarioincidente');\n    return this._http.post(url, userData)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n  delete($id) {\n    let url = this.environmentService.setApiServiceById('comentarioincidente', $id)\n    return this._http.delete(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n\n  private handleError(error: HttpErrorResponse | any) {\n    let errMsg: string;\n    errMsg = error.error\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/comentarioincidente/comentarioincidente.service.ts","import { Directive, HostListener } from '@angular/core';\n@Directive({\n  selector: '[appNoDblClick]'\n})\nexport class NoDblClickDirectiveDirective {\n\n  constructor() { }\n  @HostListener('submit', ['$event'])\n  clickEvent(event) {\n    event.srcElement.setAttribute('disabled', true);\n    setTimeout(function(){ \n      event.srcElement.removeAttribute('disabled');\n    }, 500);\n    \n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/directives/no-dbl-click-directive.directive.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-add/incidencia-add.component.css\n// module id = ./src/app/incidencias/incidencia-add/incidencia-add.component.css\n// module chunks = incidencias.module","module.exports = \"<!-- Page wrapper  -->\\n<!-- ============================================================== -->\\n<div class=\\\"page-wrapper\\\">\\n  <!-- ============================================================== -->\\n  <!-- Container fluid  -->\\n  <!-- ============================================================== -->\\n  <div class=\\\"container-fluid\\\">\\n    <!-- ============================================================== -->\\n    <!-- Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n\\n    <!-- ============================================================== -->\\n    <!-- End Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n    <!-- ============================================================== -->\\n    <!-- Start Page Content -->\\n    <!-- ============================================================== -->\\n    <!-- Row -->\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-lg-12\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"card-header bg-info\\\">\\n            <h4 class=\\\"m-b-0 text-white\\\"></h4>\\n          </div>\\n          <div class=\\\"card-body\\\">\\n            <form action=\\\"#\\\" id=\\\"form-id\\\" (ngSubmit)=\\\"validaradd()\\\" #ctrlform=\\\"ngForm\\\">\\n              <div class=\\\"form-body\\\">\\n                <h3 class=\\\"card-title\\\">Información Básica</h3> <small>campos con * requeridos </small>\\n                <hr>\\n                <div class=\\\"row p-t-20\\\">\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Cliente *</label>\\n\\n\\n                      <input [(ngModel)]=\\\"item.razonsocial\\\" [typeahead]=\\\"dataSource\\\" [typeaheadAsync]=\\\"true\\\" required\\n                        (typeaheadLoading)=\\\"changeTypeaheadLoading($event)\\\"\\n                        (typeaheadOnSelect)=\\\"typeaheadOnSelect($event)\\\" [typeaheadScrollable]=\\\"true\\\"\\n                        typeaheadOptionField=\\\"razon_social\\\" [typeaheadOptionsLimit]=\\\"100\\\"\\n                        [typeaheadItemTemplate]=\\\"clientItemTemplate\\\" placeholder=\\\"Seleccione el cliente\\\"\\n                        class=\\\"form-control\\\" name=\\\"test\\\" autocomplete=\\\"off\\\" #ctrlcliente=\\\"ngModel\\\">\\n                      <ng-template #clientItemTemplate let-model=\\\"item\\\" let-index=\\\"index\\\">\\n                        <h5>{{model.razon_social}} <span class=\\\"text-danger\\\" *ngIf=\\\"model.bloqueado!='N'\\\">En Lista\\n                            Negra</span></h5>\\n\\n                      </ng-template>\\n                      <div *ngIf=\\\"typeaheadLoading\\\">Cargando..</div>\\n\\n                      <small class=\\\"form-control-feedback\\\"> Seleccione el cliente </small>\\n                      <small class=\\\"text-danger\\\" *ngIf=\\\"bloqueo\\\"> En Lista Negra </small>\\n                      <div\\n                        *ngIf=\\\"(item.cliente_id==='0'||ctrlcliente.invalid) && (ctrlcliente.dirty || ctrlcliente.touched||validform)\\\"\\n                        class=\\\"text-danger\\\">\\n\\n                        <div *ngIf=\\\"item.cliente_id==0||ctrlcliente.errors.required\\\">\\n                          Cliente es requerido.\\n                        </div>\\n\\n\\n                      </div>\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Estación Servicio *</label>\\n                      <!-- <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.estacion_servicio_id\\\"\\n                        name=\\\"ctrlestacionservicio\\\" (change)=\\\"onselectEstacionServicio($event)\\\"\\n                        #ctrlestacionservicio=\\\"ngModel\\\" required>\\n                        <option [value]=\\\"-1\\\">Seleccione</option>\\n                        <option *ngFor=\\\"let o of estacionservicio\\\" [value]=\\\"o.id.toString()\\\">\\n                          {{ o.name }} ({{o.zonatecnica.name}})\\n\\n                        </option>\\n                      </select> -->\\n                      <ng-select [items]=\\\"estacionservicio\\\" bindLabel=\\\"name\\\" bindValue=\\\"id\\\" [multiple]=\\\"false\\\"\\n                        placeholder=\\\"Seleccione\\\" [(ngModel)]=\\\"item.estacion_servicio_id\\\"\\n                        (change)=\\\"onselectEstacionServicio($event)\\\" name=\\\"ctrlestacionservicio\\\"\\n                        #ctrlestacionservicio=\\\"ngModel\\\">\\n                      </ng-select>\\n\\n                      <small class=\\\"form-control-feedback\\\"> Seleccione la Estación de Servicio </small>\\n                    </div>\\n                    <div\\n                      *ngIf=\\\"(item.estacion_servicio_id===-1||ctrlestacionservicio.invalid) && (ctrlestacionservicio.dirty || ctrlestacionservicio.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"item.estacion_servicio_id==-1||ctrlestacionservicio.errors.required\\\">\\n                        Estación Servicio requerido.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">N° Referencia Cliente</label>\\n\\n                      <input [(ngModel)]=\\\"item.noreferencia\\\" placeholder=\\\"N° referencia Cliente\\\" class=\\\"form-control\\\"\\n                        name=\\\"noreferencia\\\">\\n\\n                      <small class=\\\"form-control-feedback\\\"> Escriba el N° de referencia del cliente </small>\\n                    </div>\\n\\n                  </div>\\n\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Proyecto *</label>\\n\\n                      <ng-select [multiple]=\\\"false\\\" placeholder=\\\"Seleccione Proyecto\\\" [items]=\\\"proyects\\\"\\n                        bindLabel=\\\"temp_name\\\" [(ngModel)]=\\\"selectedProyectId\\\" (change)=\\\"onChangeProyect($event)\\\"\\n                        name=\\\"ctrlproyecto\\\">\\n                      </ng-select>\\n\\n                    </div>\\n\\n                    <div *ngIf=\\\"item.proyecto_id === '-1' && validform\\\" class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"item.proyecto_id === '-1' || ctrlproyecto.errors.required\\\">\\n                        Proyecto es requerido.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n\\n                </div>\\n                <h3 class=\\\"card-title\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">Estación Servicio</h3>\\n                <hr>\\n                <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo && newcompo.name!=undefined\\\">\\n                  <table id=\\\"example23\\\" class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\"\\n                    cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n                    <thead>\\n                      <tr>\\n                        <th>Estación Servicio</th>\\n                        <th>Zona Tecnica</th>\\n                        <th>Dirección</th>\\n                        <th>Teléfono</th>\\n                      </tr>\\n                    </thead>\\n                    <tbody>\\n                      <tr>\\n                        <td>{{newcompo.name}}</td>\\n                        <td>{{newcompo.zonatecnica.name}}</td>\\n                        <td>{{newcompo.direccion}}</td>\\n                        <td>{{newcompo.telefono}} </td>\\n                      </tr>\\n                      <tr>\\n                        <td colspan=\\\"4\\\">Observaciones:<br>{{newcompo.observaciones}}<br>Archivos:<br>\\n                          <ul class=\\\"el-info list-inline\\\"\\n                            *ngIf=\\\"newcompo.archivos!=undefined&&newcompo.archivos.length>0\\\">\\n                            <li *ngFor=\\\"let imgprod of newcompo.archivos;\\\" class=\\\"col-lg-3 text-truncate\\\"\\n                              title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                              <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                                href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                                <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                                {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a>\\n                            </li>\\n\\n                          </ul>\\n                        </td>\\n                      </tr>\\n                    </tbody>\\n                  </table>\\n                </div>\\n                <h3 class=\\\"card-title\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">Componentes</h3>\\n                <hr>\\n                <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">\\n                  <div class=\\\"table-responsive\\\">\\n                    <table id=\\\"example23\\\" class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\"\\n                      cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n                      <thead>\\n                        <tr>\\n                          <th>Tipo Componente</th>\\n                          <th>Informacion</th>\\n                          <th>Contratos</th>\\n\\n\\n                        </tr>\\n                      </thead>\\n\\n                      <tbody>\\n                        <ng-container *ngFor=\\\"let row of newcompo.componentes; let i = index\\\">\\n                          <!-- row.id && row.estado -->\\n                          <tr *ngIf=\\\"row.id\\\">\\n                            <td>\\n                              {{row.tipocomponente.name}}<br>\\n                              <p *ngIf=\\\"row.observacionescontrato!=''\\\">Observaciones:<span\\n                                  [innerHTML]=\\\"row.observacionescontrato\\\"></span></p>\\n                              <ul class=\\\"el-info\\\" *ngIf=\\\"row.archivos!=undefined&&row.archivos.length>0\\\">\\n                                <li *ngFor=\\\"let imgprod of row.archivos;\\\" class=\\\"col-lg-10 text-truncate\\\"\\n                                  title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                                  <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                                    href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                                    <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                                    {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a>\\n                                </li>\\n\\n                              </ul>\\n                            </td>\\n\\n                            <td>\\n                              <ul>\\n                                <li *ngFor=\\\"let field of row.componentfields\\\">\\n                                  <strong>{{field.tipocomponentfield.name}}:</strong> {{field.value}}\\n                                </li>\\n                              </ul>\\n                            </td>\\n                            <td>\\n                              <ul class=\\\"list-group list-group-full\\\">\\n                                <ng-container *ngFor=\\\"let contr of row.contratos; let j = index\\\">\\n                                  <li class=\\\"list-group-item\\\" *ngIf=\\\"contr.contrato&&contr.contrato.estado==1\\\">\\n\\n                                    <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\"><strong>Tipo</strong>\\n                                      <span\\n                                        [ngStyle]=\\\"{'background-color': contr.contrato.tipocontrato.color?contr.contrato.tipocontrato.color:'#ffffff'}\\\"\\n                                        class=\\\"badge badge-pill \\\">\\n                                        {{contr.contrato.tipocontrato.name}}</span> <br>\\n                                      <strong>Vto</strong> {{contr.contrato.fechafin}}\\n                                    </div>\\n                                    <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                                      style=\\\"display: inline; text-align: start;\\\">\\n                                      <input class=\\\"custom-control-input\\\" id=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"\\n                                        (click)=\\\"clickcontrato(contr,row)\\\" name=\\\"checkbox{{newcompo.id}}\\\" type=\\\"radio\\\"\\n                                        value=\\\"check\\\">\\n                                      <label class=\\\"custom-control-label\\\"\\n                                        for=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"></label>\\n                                    </div>\\n                                  </li>\\n                                </ng-container>\\n\\n                                <li class=\\\"list-group-item\\\" *ngIf=\\\"row.contratos.length==0\\\">\\n                                  <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\"> <strong>Sin\\n                                      Contrato</strong><br></div>\\n\\n                                  <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                                    style=\\\"display: inline; text-align: start;\\\">\\n                                    <input class=\\\"custom-control-input\\\" id=\\\"checkbox{{newcompo.id}}_{{i}}_sn\\\"\\n                                      name=\\\"checkbox{{newcompo.id}}\\\" (click)=\\\"clicksincontrato(row.id)\\\" type=\\\"radio\\\"\\n                                      value=\\\"check\\\">\\n                                    <label class=\\\"custom-control-label mb-3\\\"\\n                                      for=\\\"checkbox{{newcompo.id}}_{{i}}_sn\\\"></label>\\n                                  </div>\\n                                </li>\\n                              </ul>\\n\\n                            </td>\\n\\n\\n                          </tr>\\n\\n\\n                        </ng-container>\\n                      </tbody>\\n                    </table>\\n                  </div>\\n                </div>\\n                <div class=\\\"row p-t-20\\\">\\n                  <div class=\\\"col-md-12\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Titulo *</label>\\n\\n\\n                      <input [(ngModel)]=\\\"item.titulo\\\" maxlength=\\\"250\\\" required placeholder=\\\"Escriba el titulo\\\"\\n                        class=\\\"form-control\\\" name=\\\"titulo\\\" #ctrltitulo=\\\"ngModel\\\">\\n\\n                      <div *ngIf=\\\"(ctrltitulo.invalid) && (ctrltitulo.dirty || ctrltitulo.touched||validform)\\\"\\n                        class=\\\"text-danger\\\">\\n\\n                        <div *ngIf=\\\"ctrltitulo.errors.required\\\">\\n                          Titulo es requerido.\\n                        </div>\\n                        <div *ngIf=\\\"ctrltitulo.errors.maxlength\\\">\\n                          La observación debe contener 250 caracteres.\\n                        </div>\\n\\n\\n                      </div>\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Actuación</label>\\n                      <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.actuacion\\\" name=\\\"actuacion\\\">\\n                        <option value=\\\"-1\\\">Seleccione</option>\\n                        <option value=\\\"Correctivo\\\">Correctivo</option>\\n                        <option value=\\\"Preventivas\\\">Preventivas</option>\\n                        <option value=\\\"Instalaciones\\\">Instalaciones</option>\\n                        <option value=\\\"Obra\\\">Obra</option>\\n                      </select>\\n\\n                      <small class=\\\"form-control-feedback\\\"> Seleccione la Actuación </small>\\n                    </div>\\n\\n                  </div>\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Prioridad *</label>\\n                      <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.categoria_incidente_id\\\"\\n                        name=\\\"ctrlprioridad\\\" #ctrlprioridad=\\\"ngModel\\\" required>\\n                        <option [value]=\\\"-1\\\">Seleccione</option>\\n                        <option [value]=\\\"-2\\\" *ngIf=\\\"prioridades.length==0\\\">Sin Prioridad</option>\\n                        <option *ngFor=\\\"let o of  prioridades \\\" [value]=\\\"o.id.toString()\\\">\\n                          {{ o.name }} ({{o.tiemporesolucion}}-{{o.tipotiempo}})\\n\\n                        </option>\\n                      </select>\\n\\n                      <small class=\\\"form-control-feedback\\\"> Seleccione la Prioridad </small>\\n                    </div>\\n                    <div\\n                      *ngIf=\\\"(item.categoria_incidente_id===-1||ctrlprioridad.invalid) && (ctrlprioridad.dirty || ctrlprioridad.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"item.categoria_incidente_id==-1||ctrlprioridad.errors.required\\\">\\n                        La Prioridad es requerida.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-md-4\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Siniestro</label>\\n                      <div class=\\\"custom-control custom-checkbox mr-sm-2\\\">\\n                        <input class=\\\"custom-control-input\\\" id=\\\"checkbox_pedir{{item.id}}\\\"\\n                          name=\\\"checkbox_pedir{{item.id}}\\\" (change)=\\\"essiniestro($event)\\\" type=\\\"checkbox\\\"\\n                          [checked]=\\\"item.siniestro\\\">\\n                        <label class=\\\"custom-control-label\\\" for=\\\"checkbox_pedir{{item.id}}\\\"> Seleccione si es\\n                          siniestro </label>\\n                      </div>\\n\\n                    </div>\\n\\n                  </div>\\n\\n                  <div class=\\\"col-md-12\\\">\\n                    <div class=\\\"form-group\\\">\\n                      <label class=\\\"control-label\\\">Descripción de la incidencia *</label>\\n\\n                      <ckeditor [(ngModel)]=\\\"item.descripcion\\\" class=\\\"\\\" #myckeditor=\\\"ngModel\\\" required name=\\\"myckeditor\\\"\\n                        maxlength=\\\"2500\\\" [config]=\\\"ckeConfig\\\" debounce=\\\"500\\\" (change)=\\\"onChange($event)\\\"\\n                        #ctrlobservaciones=\\\"ngModel\\\">\\n                      </ckeditor>\\n\\n                      <small class=\\\"form-control-feedback\\\"> Escriba la observación del Contrato\\n                        {{2500-(item.descripcion==undefined?0:item.descripcion.length)}}</small>\\n                    </div>\\n                    <div\\n                      *ngIf=\\\"ctrlobservaciones.invalid && (ctrlobservaciones.dirty || ctrlobservaciones.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrlobservaciones.errors.required\\\">\\n                        La observación del Contrato es requerido.\\n                      </div>\\n                      <div *ngIf=\\\"ctrlobservaciones.errors.maxlength\\\">\\n                        La observación debe contener 2500 caracteres.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                </div>\\n\\n                <!--/span-->\\n\\n                <!--/span-->\\n              </div>\\n\\n              <div class=\\\"form-actions\\\">\\n                <button type=\\\"submit\\\" class=\\\"btn btn-success\\\"> <i class=\\\"fa fa-check\\\"></i>\\n                  Guardar</button>\\n                <button type=\\\"button\\\" class=\\\"btn btn-inverse\\\" routerLink=\\\"/tipocontrato\\\">Cancelar</button>\\n              </div>\\n\\n            </form>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<swal #confirmplaneacionSwal title=\\\"Confirmar Planeación\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\"\\n  [showCancelButton]=\\\"true\\\" [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Aceptar'\\\"\\n  (confirm)=\\\"add()\\\" showCloseButton=\\\"true\\\">\\n  <div *swalPartial>\\n    <form>\\n      <div class=\\\"form-body\\\">\\n\\n        <div class=\\\"row p-t-20\\\">\\n\\n          <div class=\\\"col-md-12\\\">\\n            <p class=\\\"text-center\\\" [innerHTML]=\\\"mensajePlaneacion\\\"></p>\\n          </div>\\n\\n        </div>\\n\\n      </div>\\n\\n    </form>\\n  </div>\\n</swal>\\n\\n\\n<!-- Row -->\\n<!-- ============================================================== -->\\n<!-- End PAge Content -->\\n<!-- ============================================================== -->\\n<!-- ============================================================== -->\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-add/incidencia-add.component.html\n// module id = ./src/app/incidencias/incidencia-add/incidencia-add.component.html\n// module chunks = incidencias.module","import { Component, OnInit, ViewChild } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { IncidenciaService } from \"./../incidencia.service\";\nimport { Ng4LoadingSpinnerService } from \"ng4-loading-spinner\";\nimport { NotificationService } from \"./../../shared\";\nimport { LocalDataService } from \"./../../shared\";\nimport { tipocomponente } from \"../../viewmodel/tipocomponente\";\nimport { Contrato } from \"../../viewmodel/contrato\";\nimport { Observable } from \"rxjs\";\nimport { ClienteService } from \"../../clientes/cliente.service\";\nimport { TypeaheadMatch } from \"ngx-bootstrap/typeahead\";\nimport { listLocales } from \"ngx-bootstrap/chronos\";\nimport { BsDatepickerConfig, BsLocaleService } from \"ngx-bootstrap/datepicker\";\nimport { mergeMap } from \"rxjs/operators\";\nimport { TipocontratoService } from \"../../tipocontrato/tipocontrato.service\";\nimport { EstacionservicioService } from \"../../estacionservicio/estacionservicio.service\";\nimport { estacionservicio } from \"../../viewmodel/estacionservicio\";\nimport { tipocontrato } from \"../../viewmodel/tipocontrato\";\nimport { SwalComponent } from \"@toverux/ngx-sweetalert2\";\nimport { Componente } from \"../../viewmodel/Componente\";\nimport { ComponenteActuacion } from \"../../viewmodel/componente_actuacion\";\nimport { Incidencia } from \"../../viewmodel/incidencia\";\nimport { CategoriaIncidente } from \"../../viewmodel/categoriaincidente\";\nimport { Candeactivateguard } from \"../../shared/can-deactivate-guard/can-deactivate-guard.service\";\nimport { environment } from \"../../../environments/environment\";\nimport { ProyectosService } from \"../../proyectos/proyectos.service\";\nimport { Proyect } from \"@app/viewmodel/proyect\";\n\n@Component({\n  selector: \"app-incidencia-add\",\n  templateUrl: \"./incidencia-add.component.html\",\n  styleUrls: [\"./incidencia-add.component.css\"],\n})\nexport class IncidenciaAddComponent implements OnInit {\n  item: Incidencia;\n  asyncSelected: string;\n  typeaheadLoading: boolean;\n  typeaheadNoResults: boolean;\n  dataSource: Observable<any>;\n  tipocontrato: any;\n  estacionservicio: any;\n  name = \"ng2-ckeditor\";\n  ckeConfig: any;\n  mycontent: string;\n  newcompo: estacionservicio;\n  tipocontratosel: tipocontrato;\n  componentesel: Componente;\n  actuacionesNew: ComponenteActuacion;\n  prioridades: CategoriaIncidente[];\n  @ViewChild(\"myckeditor\") ckeditor: any;\n  @ViewChild(\"createSwal\") private createSwal: SwalComponent;\n  @ViewChild(\"confirmplaneacionSwal\")\n  private confirmplaneacionSwal: SwalComponent;\n  bloqueo = false;\n  selectauto = false;\n  observacionescontrato = \"\";\n  mensajePlaneacion: string;\n  apiurl: any;\n  @ViewChild(\"ctrlform\") ctrlform: any;\n  validform: boolean;\n\n  proyects: Array<any>;\n\n  selectedProyectId: any;\n\n  constructor(\n    private spinnerService: Ng4LoadingSpinnerService,\n    private incidenciaService: IncidenciaService,\n    private router: Router,\n    private notificationService: NotificationService,\n    private localDataService: LocalDataService,\n    private clienteService: ClienteService,\n    private localeService: BsLocaleService,\n    private tipocontratoService: TipocontratoService,\n    private estacionservicioService: EstacionservicioService,\n    private candeactivateguard: Candeactivateguard,\n    private proyectosService: ProyectosService\n  ) {\n    this.candeactivateguard.setedit(true);\n    this.localeService.use(\"es\");\n\n    this.dataSource = Observable.create((observer: any) => {\n      // Runs on every search\n      this.clienteService.gettoken(this.item.razonsocial).subscribe((value) => {\n        observer.next(value.data);\n      });\n    });\n    this.apiurl = environment.apiUrl;\n  }\n\n  ngOnInit() {\n    this.validform = false;\n    this.ckeConfig = {\n      allowedContent: false,\n      extraPlugins: \"divarea\",\n      forcePasteAsPlainText: true,\n    };\n    this.item = new Incidencia();\n    this.item.cliente_id = \"\";\n    this.item.estacion_servicio_id = -1;\n    this.item.categoria_incidente_id = -1;\n    this.item.actuacion = \"-1\";\n    this.item.proyecto_id = \"-1\";\n    this.cargarTipoCOntrato();\n    this.cargarEstacionServicio();\n    this.cargarProyectos();\n    this.newcompo = new estacionservicio();\n    this.prioridades = [];\n    /*  this.ctrlform.form.valueChanges.subscribe(data => {\n       console.log(\"suscribed\", this.ctrlform.form.get(\"ctrlproyecto\"));\n       this.item.proyecto_id = this.ctrlform.form.get(\"ctrlproyecto\").value;\n       this.ctrlform.form.controls[\"ctrlproyecto\"].updateValueAndValidity(); // update value and validity.\n     }); */\n  }\n\n  onChange($event: any): void {\n    console.log(\"onChange\");\n  }\n  cargarTipoCOntrato() {\n    this.tipocontratoService.get(1).subscribe((value) => {\n      this.tipocontrato = value.data;\n    });\n  }\n\n  async cargarEstacionServicio() {\n    let empresa = 0;\n    this.spinnerService.show();\n    empresa = this.localDataService.getLocalData(\"empresaSeleccionada\").id;\n    let subEst = this.estacionservicioService\n      .getactbycliente(empresa, this.item.cliente_id)\n      .toPromise();\n\n    let res = await Promise.all([subEst]);\n    let prEst = res[0];\n    if (prEst != undefined) {\n      this.estacionservicio = prEst.data;\n      this.spinnerService.hide();\n    }\n  }\n\n  async onselectEstacionServicio(estacionserviciosel) {\n    this.item.razonsocial = \"\";\n    this.item.cliente_id = \"\";\n    console.log({estacionserviciosel})\n    if (estacionserviciosel.id != \"-1\") {\n      let busRazon: boolean = false;\n      if (\n        (this.item.razonsocial == \"\" || this.item.razonsocial == undefined) &&\n        (this.item.cliente_id == undefined || this.item.cliente_id == \"\")\n      ) {\n        busRazon = true;\n      }\n\n      let result = this.estacionservicio.filter(\n        (comp) => comp.id.toString() == estacionserviciosel.id\n      );\n      if (result.length > 0) {\n        this.item.cliente_id = result[0].codigo_cliente;\n        if (result[0].componentes != null) {\n          if (result[0].componentes.length == 0) {\n            await this.cargarEstacionServicio();\n            result = this.estacionservicio.filter(\n              (comp) => comp.id.toString() == estacionserviciosel.id\n            );\n          }\n        }\n        this.cargarProyectos();\n        this.newcompo = result[0];\n      }\n      console.log({busRazon})\n      if (busRazon) {\n        this.spinnerService.show();\n        this.clienteService\n          .gettoken(this.newcompo.razon_social)\n          .subscribe((value) => {\n            if (value.data.length > 0) {\n              if (value.data[0].bloqueado != \"N\") {\n                this.bloqueo = true;\n              } else {\n                this.bloqueo = false;\n              }\n              this.item.razonsocial = this.newcompo.razon_social;\n              this.item.cliente_id = this.newcompo.codigo_cliente;\n            }\n           // this.spinnerService.hide();\n          },e=>{\n            console.log(\"Error\",e)\n          },()=>{\n            console.log(\"finally\")\n            this.spinnerService.hide();\n\n          });\n      }\n    } else {\n      this.newcompo = new estacionservicio();\n    }\n  }\n\n  onselecttipocontrato(tipocontratovalue) {\n    let result;\n    result = this.tipocontrato.filter(\n      (comp) => comp.id.toString() == tipocontratovalue.target.value\n    );\n\n    if (result.length > 0) {\n      this.tipocontratosel = result[0];\n    }\n  }\n  validaradd() {\n    this.validform = false;\n    if (this.ctrlform.form.valid == false) {\n      this.validform = true;\n      return false;\n    }\n\n    if (this.item.proyecto_id == \"-1\") {\n      this.validform = true;\n      return false;\n    }\n\n    if (this.item.contrato_componente_id == undefined) {\n      this.mensajePlaneacion = \"Desea guardar el incidente sin contrato?\";\n    } else {\n      this.mensajePlaneacion = \"Desea guardar el incidente?\";\n    }\n    this.confirmplaneacionSwal.show();\n  }\n  add() {\n    this.spinnerService.show();\n    this.candeactivateguard.setedit(false);\n    this.item.empresa_id = this.localDataService.getLocalData(\n      \"empresaSeleccionada\"\n    ).id;\n    this.item.usuario_id = this.localDataService.getLocalData(\"userInfo\").id;\n    this.item.estacion_servicio_id = this.newcompo.id;\n    // Console\n    console.log(this.item);\n    this.incidenciaService.add(this.item).subscribe(\n      (value) => {\n        this.spinnerService.hide();\n        this.notificationService.onSuccess(\"Incidencia agregada con exito.\");\n        this.router.navigateByUrl(\"incidencia\");\n      },\n      (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError(\"El Contrato ya existe\");\n        } else if (err.status_code == 400) {\n          this.notificationService.onError(err.errors.message[0]);\n        } else {\n          this.notificationService.onError(\"Se ha producido un error.\");\n        }\n      }\n    );\n  }\n  changeTypeaheadLoading(e: boolean): void {\n    this.typeaheadLoading = e;\n  }\n\n  typeaheadOnSelect(e: TypeaheadMatch): void {\n    this.item.cliente_id = e.item.codigo_cliente;\n    if (e.item.bloqueado != \"N\") {\n      this.bloqueo = true;\n    } else {\n      this.bloqueo = false;\n    }\n\n    this.cargarEstacionServicio();\n    this.cargarProyectos();\n  }\n\n  cargarProyectos() {\n    this.proyectosService.getproybycliente(this.item.cliente_id).subscribe(\n      (res) => {\n        console.log(res.data, \"proyectos obtenidos\");\n        this.proyects = this.formatProjects(res.data);\n      },\n      (err) => {}\n    );\n  }\n\n  /**\n   * It takes an array of objects, and returns a new array of objects, where each object has a new\n   * property called temp_name, which is a concatenation of two other properties.\n   * @param data - the data that is being passed to the select\n   * @returns An array of objects with the same structure as the original data, but with an additional\n   * property called temp_name.\n   */\n  formatProjects(data) {\n    return data.map((item) => {\n      return {\n        ...data,\n        temp_name: item.codigo_proyecto + \" | \" + item.descripcion,\n      };\n    });\n  }\n\n  onChangeProyect(selectedProyect) {\n    if (selectedProyect) {\n      /* console.log(\"Proyect exist\", this.ctrlform.form.value, this.ctrlform)\n      let selectedProyect: Proyect[] = this.proyects.filter(proyect_id => this.ctrlform.form.value.ctrlproyecto.toString() == proyect_id.id);\n      console.log(selectedProyect, \"selectedProyect\");\n      console.log(proyect, \"proyect\");\n      this.ctrlform.form.controls['ctrlproyecto'].setValue(selectedProyect)\n      this.item.proyecto_id = selectedProyect[0].proyecto_id;\n      this.item.proyecto_description = selectedProyect[0].proyecto_description; */\n      console.log(selectedProyect, \"selectedProyect value\");\n      //this.item.proyecto_id = proyect.item.proyeto_id;\n      //console.log( this.ctrlform.form.controls['ctrlproyecto'].value, this.ctrlform.form.get(\"ctrlproyecto\"), \"ctrlproyecto\");\n      //this.item.proyecto_id = proyect.target.value;\n\n      console.log(selectedProyect.temp_name.split(\" | \")[0]);\n\n      let selectedProyectId: Proyect[] = Object.values(\n        selectedProyect as Record<string, any>[]\n      ).filter(\n        (item) =>\n          item.codigo_proyecto === selectedProyect.temp_name.split(\" | \")[0]\n      );\n\n      console.log(selectedProyectId, \"after filter\");\n\n      /* this.item.proyecto_id = selectedProyectId[0].codigo_proyecto;\n      this.item.proyecto_description = selectedProyectId[0].descripcion; */\n\n      // this.item.proyecto_id = null;\n      this.item.proyecto_id = selectedProyectId[0].codigo_proyecto;\n\n      console.log(selectedProyectId, \"selectedProyect value\");\n      console.log(this.item, \"item\");\n    } else {\n      console.log(\"Proyect do not exist\");\n      this.item.proyecto_id = \"-1\";\n    }\n  }\n\n  selectComponent(comp) {\n    if (comp.select) {\n      comp.select = false;\n    } else {\n      comp.select = true;\n    }\n    return false;\n  }\n  modalactuacion(item) {\n    this.componentesel = item;\n    if (!this.componentesel.actuaciones) {\n      this.componentesel.actuaciones = [];\n    }\n\n    this.createSwal.show();\n    return false;\n  }\n  agregaractuacion() {\n    this.componentesel.actuaciones.push(this.actuacionesNew);\n    this.actuacionesNew = new ComponenteActuacion();\n    this.actuacionesNew.tipo = \"-1\";\n  }\n  onvaluechanged(value) {\n    if (value.index === undefined || value.index === \"\") {\n      this.actuacionesNew.dias = value.dias;\n    } else {\n      this.componentesel.actuaciones[value.index].dias = value.dias;\n    }\n  }\n  clickcontrato(contrato, row) {\n    this.quitarobservaciones();\n    this.prioridades = contrato.contrato.tipocontrato.categoriaincidentes;\n    this.item.contrato_componente_id = contrato.id;\n    row.observacionescontrato = contrato.contrato.observaciones;\n    row.archivos = contrato.contrato.archivos;\n  }\n  quitarobservaciones() {\n    this.newcompo.componentes.forEach((element) => {\n      element.observacionescontrato = \"\";\n      element.archivos = [];\n    });\n  }\n  clicksincontrato(id) {\n    this.prioridades = [];\n    this.item.sincontrato = id;\n    this.item.contrato_componente_id = null;\n  }\n  essiniestro(event) {\n    this.item.siniestro = event.target.checked;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencia-add/incidencia-add.component.ts","module.exports = \".tab-pane{\\n    padding-left: 30px;\\n    padding-right: 30px;\\n    padding-top: 40px;\\n    padding-bottom: 40px;\\n}\\n\\n.nav-item {\\n    cursor: pointer;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.css\n// module id = ./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.css\n// module chunks = incidencias.module","module.exports = \"<div class=\\\"incidence-detail mt-4\\\" *ngIf=\\\"incidenceDetail\\\" >\\n<div class=\\\"alert alert-danger alert-rounded\\\" *ngIf=\\\"!item.usuario_asignado\\\">\\n  El incidente no tiene usuario asignado por lo que no se pueden registrar partes de trabajo.\\n  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"> <span\\n      aria-hidden=\\\"true\\\">×</span> </button>\\n</div>\\n\\n<ul class=\\\"nav nav-tabs\\\" >\\n  <li class=\\\"nav-item\\\"> <a class=\\\"nav-link active\\\" data-toggle=\\\"tab\\\" id=\\\"tab-detail\\\" (click)=\\\"toggleNav('detail')\\\" role=\\\"tab\\\"> <span class=\\\"hidden-xs-down\\\">Detalles</span></a> </li>\\n  <li class=\\\"nav-item\\\"> <a class=\\\"nav-link\\\" data-toggle=\\\"tab\\\" id=\\\"tab-planing\\\" (click)=\\\"toggleNav('planing')\\\" role=\\\"tab\\\"> <span class=\\\"hidden-xs-down\\\">Planificación</span></a> </li>\\n  <li class=\\\"nav-item\\\"> <a class=\\\"nav-link\\\" data-toggle=\\\"tab\\\" id=\\\"tab-parts\\\" (click)=\\\"toggleNav('parts')\\\" role=\\\"tab\\\"> <span class=\\\"hidden-xs-down\\\">Partes</span></a> </li>\\n  <li class=\\\"nav-item\\\"> <a class=\\\"nav-link\\\" data-toggle=\\\"tab\\\" id=\\\"tab-location-data\\\" (click)=\\\"toggleNav('location-data')\\\" role=\\\"tab\\\"> <span class=\\\"hidden-xs-down\\\">Datos Ubicación</span></a> </li>\\n  <li class=\\\"nav-item\\\"> <a class=\\\"nav-link\\\" data-toggle=\\\"tab\\\" id=\\\"tab-components\\\" (click)=\\\"toggleNav('components')\\\" role=\\\"tab\\\"> <span class=\\\"hidden-xs-down\\\">Componentes</span></a> </li>\\n</ul>\\n<!-- Tab panes -->\\n<div class=\\\"tab-content tabcontent-border mb-5\\\">\\n    <div class=\\\"tab-pane active\\\" id=\\\"detail\\\" role=\\\"tabpanel\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Siniestro</label>\\n              <div class=\\\"custom-control custom-checkbox mr-sm-2\\\">\\n                <input class=\\\"custom-control-input\\\" id=\\\"checkbox_pedir{{item.id}}\\\"\\n                  name=\\\"checkbox_pedir{{item.id}}\\\" (change)=\\\"essiniestro($event)\\\" type=\\\"checkbox\\\"\\n                  [checked]=\\\"item.siniestro\\\">\\n                <label class=\\\"custom-control-label\\\" for=\\\"checkbox_pedir{{item.id}}\\\"> Seleccione si es\\n                  siniestro </label>\\n              </div>\\n\\n            </div>\\n\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Actuación</label>\\n              <select class=\\\"form-control custom-select\\\" [disabled]=\\\"edit\\\" [(ngModel)]=\\\"item.actuacion\\\"\\n                name=\\\"ctrlactuacion\\\">\\n                <option value=\\\"-1\\\">Seleccione</option>\\n                <option value=\\\"Correctivo\\\">Correctivo</option>\\n                <option value=\\\"Preventivas\\\">Preventivas</option>\\n                <option value=\\\"Instalaciones\\\">Instalaciones</option>\\n                <option value=\\\"Obra\\\">Obra</option>\\n              </select>\\n\\n              <small class=\\\"form-control-feedback\\\"> Seleccione la Actuación </small> </div>\\n\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Prioridad *</label>\\n              <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.categoria_incidente_id\\\"\\n                name=\\\"ctrlprioridad\\\" #ctrlprioridad=\\\"ngModel\\\" required>\\n                <option [value]=\\\"-1\\\">Seleccione</option>\\n                <option [value]=\\\"-2\\\" *ngIf=\\\"prioridades.length==0\\\">Sin Prioridad</option>\\n                <option *ngFor=\\\"let o of  prioridades \\\" [value]=\\\"o.id.toString()\\\">\\n                  {{ o.name }} ({{o.tiemporesolucion}}-{{o.tipotiempo}})\\n\\n                </option>\\n              </select>\\n\\n              <small class=\\\"form-control-feedback\\\"> Seleccione la Prioridad </small> </div>\\n            <div\\n              *ngIf=\\\"(item.categoria_incidente_id===-1||ctrlprioridad.invalid) && (ctrlprioridad.dirty || ctrlprioridad.touched ||validform)\\\"\\n              class=\\\"text-danger\\\">\\n\\n              <div *ngIf=\\\"item.categoria_incidente_id==-1||ctrlprioridad.errors.required\\\">\\n                La Prioridad es requerida.\\n              </div>\\n\\n\\n            </div>\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Cliente *</label>\\n\\n\\n              <input [(ngModel)]=\\\"item.razonsocial\\\" [disabled]=\\\"edit\\\" [typeahead]=\\\"dataSource\\\"\\n                [typeaheadAsync]=\\\"true\\\" required (typeaheadLoading)=\\\"changeTypeaheadLoading($event)\\\"\\n                (typeaheadOnSelect)=\\\"typeaheadOnSelect($event)\\\" [typeaheadScrollable]=\\\"true\\\"\\n                typeaheadOptionField=\\\"razon_social\\\" [typeaheadOptionsLimit]=\\\"100\\\"\\n                placeholder=\\\"Seleccione el cliente\\\" class=\\\"form-control\\\" name=\\\"test\\\" autocomplete=\\\"off\\\"\\n                #ctrlcliente=\\\"ngModel\\\">\\n              <div *ngIf=\\\"typeaheadLoading\\\">Cargando..</div>\\n\\n              <small class=\\\"form-control-feedback\\\"> Seleccione el cliente </small>\\n              <div\\n                *ngIf=\\\"(item.cliente_id==='0'||ctrlcliente.invalid) && (ctrlcliente.dirty || ctrlcliente.touched ||validform)\\\"\\n                class=\\\"text-danger\\\">\\n\\n                <div *ngIf=\\\"item.cliente_id==0||ctrlcliente.errors.required\\\">\\n                  Cliente es requerido es requerido.\\n                </div>\\n\\n\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Estacion Servicio</label>\\n              <select class=\\\"form-control custom-select\\\" [disabled]=\\\"edit\\\"\\n                [(ngModel)]=\\\"item.estacion_servicio_id\\\" name=\\\"ctrlestacionservicio\\\"\\n                (change)=\\\"onselectEstacionServicio($event)\\\" #ctrlestacionservicio=\\\"ngModel\\\" required>\\n                <option [value]=\\\"-1\\\">Seleccione</option>\\n                <option *ngFor=\\\"let o of estacionservicio\\\" [value]=\\\"o.id.toString()\\\">\\n                  {{ o.name }} ({{o.zonatecnica.name}})\\n\\n                </option>\\n              </select>\\n\\n              <small class=\\\"form-control-feedback\\\"> Seleccione la Estacion de Servicio </small> </div>\\n            <div\\n              *ngIf=\\\"(item.estacion_servicio_id===-1||ctrlestacionservicio.invalid) && (ctrlestacionservicio.dirty || ctrlestacionservicio.touched ||validform)\\\"\\n              class=\\\"text-danger\\\">\\n\\n              <div *ngIf=\\\"item.estacion_servicio_id==-1||ctrlestacionservicio.errors.required\\\">\\n                Estacion Servicio requerido.\\n              </div>\\n\\n\\n            </div>\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">N° Referencia Cliente</label>\\n\\n              <input [(ngModel)]=\\\"item.noreferencia\\\" placeholder=\\\"N° referencia Cliente\\\"\\n                class=\\\"form-control\\\" name=\\\"noreferencia\\\">\\n\\n              <small class=\\\"form-control-feedback\\\"> Escriba el N° de referencia del cliente </small> </div>\\n\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Proyecto *</label>\\n              <ng-select [multiple]=\\\"false\\\"\\n                placeholder=\\\"Seleccione Proyecto\\\" [(ngModel)]=\\\"selectProyect\\\"  (change)=\\\"onselectEstacionServicio($event)\\\"\\n                 name=\\\"ctrlproyecto\\\" [disabled]=\\\"esTecnico()\\\" #ctrlproyecto=\\\"ngModel\\\">\\n                 <ng-option *ngFor=\\\"let p of proyects\\\" [value]=\\\"p\\\">{{ p.codigo_proyecto }} | {{ p.descripcion }}</ng-option>\\n              </ng-select>\\n              <div\\n                *ngIf=\\\"(selectProyect ===-1||ctrlproyecto.invalid) && (ctrlproyecto.dirty || ctrlproyecto.touched ||validform)\\\"\\n                class=\\\"text-danger\\\">\\n\\n                <div *ngIf=\\\"selectProyect ==-1||ctrlproyecto.errors.required\\\">\\n                  Proyecto requerido.\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\\\"col-md-12\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label\\\">Descripción de la incidencia *</label>\\n\\n              <ckeditor [(ngModel)]=\\\"item.descripcion\\\" [readonly]=\\\"edit\\\" #myckeditordesc=\\\"ngModel\\\"\\n                name=\\\"myckeditor\\\" [config]=\\\"ckeConfigdesc\\\" debounce=\\\"500\\\" (change)=\\\"onChange($event)\\\"\\n                #ctrlobservaciones=\\\"ngModel\\\" maxlength=\\\"2500\\\" required>\\n              </ckeditor>\\n\\n              <small class=\\\"form-control-feedback\\\"> Escriba el la observacion del Contrato {{2500-(item.descripcion==undefined?0:item.descripcion.length)}}</small>\\n            </div>\\n            <div\\n              *ngIf=\\\"ctrlobservaciones.invalid && (ctrlobservaciones.dirty || ctrlobservaciones.touched ||validform)\\\"\\n              class=\\\"text-danger\\\">\\n\\n              <div *ngIf=\\\"ctrlobservaciones.errors.required\\\">\\n                La observacion del Contrato es requerido.\\n              </div>\\n              <div *ngIf=\\\"ctrlobservaciones.errors.maxlength\\\">\\n                La observación debe contener 2500 caracteres.\\n              </div>\\n\\n\\n            </div>\\n          </div>\\n        </div>\\n    </div>\\n    <div class=\\\"tab-pane  p-20\\\" id=\\\"planing\\\" role=\\\"tabpanel\\\">\\n      <form autocomplete=\\\"off\\\" class=\\\"row\\\" style=\\\"margin-bottom: 20px;\\\">\\n            <div class=\\\"col\\\">\\n              <label for=\\\"ctrltecnico\\\" class=\\\" mr-2\\\">Tecnico</label>\\n                <select class=\\\"form-control  mr-sm-2 custom-select\\\" placeholder=\\\" Escriba la hora\\\"\\n                  [(ngModel)]=\\\"item.usuario_asignado_id\\\" name=\\\"ctrltecnico\\\" #ctrltecnico=\\\"ngModel\\\"\\n                  id=\\\"ctrltecnico\\\">\\n\\n\\n                  <option *ngFor=\\\"let usr of usuariostec\\\" [value]=\\\"usr.id.toString()\\\">\\n                    {{ usr.name }}\\n\\n                  </option>\\n                </select>\\n            </div>\\n            <div class=\\\"col\\\">\\n                <label for=\\\"ctrl_fecha\\\" class=\\\" mr-2\\\">Fecha</label>\\n                <input type=\\\"text\\\" id=\\\"ctrl_fecha{{i}}\\\" class=\\\"form-control \\\"\\n                  placeholder=\\\" Escriba la fecha\\\" [(ngModel)]=\\\"item.fecha_programacion\\\"\\n                  name=\\\"ctrl_fecha{{i}}\\\" bsDatepicker [minDate]='mindate'\\n                  [bsValue]=\\\"item.fecha_programacion\\\">\\n            </div>\\n            <div class=\\\"col\\\">\\n                <label for=\\\"ctrl_hora\\\" class=\\\" mr-2\\\">Hora</label>\\n                <div class=\\\"input-group clockpicker\\\" style=\\\"width: 120px\\\">\\n\\n                  <input type=\\\"text\\\" class=\\\"form-control \\\" #ctrlhora name=\\\"ctrl_hora{{i}}\\\"\\n                    (blur)=\\\"item.hora_programacion=ctrlhora.value\\\" [(ngModel)]=\\\"item.hora_programacion\\\">\\n                  <div class=\\\"input-group-append\\\" (click)=\\\"adclock(item)\\\">\\n                    <span class=\\\"input-group-text\\\"><i class=\\\"ti-alarm-clock\\\"></i></span>\\n                  </div>\\n                </div>\\n            </div>\\n            <div class=\\\"col\\\">\\n                <a class=\\\"btn btn-info btn-rounded \\\" (click)=\\\"validaAsignacionUsuario(item)\\\"><i\\n                    class=\\\"ti-save\\\"></i></a>\\n\\n            </div>\\n          </form>\\n\\n      <div class=\\\"inbox-center table-responsive\\\">\\n        <table class=\\\"table table-hover no-wrap\\\" id=\\\"example23\\\">\\n          <thead>\\n            <tr>\\n              <th>Planificacion</th>\\n              <th>Tecnico</th>\\n              <th>Tipo Tecnico</th>\\n              <th>Fecha Planificacion</th>\\n              <th>Hora</th>\\n              <th>Estado</th>\\n              <th></th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <ng-container *ngFor=\\\"let ptrab of userIncidence; let i=index;\\\">\\n              <tr >\\n                <td>{{ ptrab.planificacion }}</td>\\n                <td>{{ ptrab.tecnico }}</td>\\n                <td>{{ ptrab.tipo }}</td>\\n                <td>{{ ptrab.fecha }}</td>\\n                <td>{{ ptrab.hora }}</td>\\n                <td>{{ ptrab.estado }}</td>\\n                <td> </td>\\n              </tr>\\n            </ng-container>\\n          </tbody>\\n        </table>\\n      </div>\\n\\n      <h4>Técnicos adicionales</h4>\\n      <br><br>\\n      <div class=\\\"row\\\" style=\\\"margin-bottom: 20px;\\\">\\n        <div class=\\\"col\\\">\\n          <label for=\\\"ctrltecnico\\\" class=\\\" mr-2\\\">Tecnico</label>\\n            <select class=\\\"form-control  mr-sm-2 custom-select\\\" placeholder=\\\" Escriba la hora\\\"\\n              [(ngModel)]=\\\"tecnicoadicionalnew.id_usuario\\\" name=\\\"ctrltecnico\\\" #ctrltecnico=\\\"ngModel\\\"\\n              id=\\\"ctrltecnico\\\">\\n\\n\\n              <option *ngFor=\\\"let usr of usuariostec\\\" [value]=\\\"usr.id.toString()\\\">\\n                {{ usr.name }}\\n\\n              </option>\\n            </select>\\n        </div>\\n        <div class=\\\"col\\\">\\n            <label for=\\\"ctrl_fecha\\\" class=\\\" mr-2\\\">Observaciones</label>\\n            <textarea class=\\\"form-control\\\" [(ngModel)]=\\\"tecnicoadicionalnew.observaciones\\\" name=\\\"txtobservaciontec\\\"></textarea>\\n        </div>\\n        <div class=\\\"col\\\">\\n            <a class=\\\"btn btn-info btn-rounded \\\" (click)=\\\"agregartecnicoadicional()\\\"><i\\n                class=\\\"ti-save\\\"></i></a>\\n\\n        </div>\\n      </div>\\n\\n      <div class=\\\"inbox-center table-responsive\\\">\\n        <table class=\\\"table table-hover no-wrap\\\" id=\\\"example23\\\">\\n          <thead>\\n            <tr>\\n              <th>Nombre técnico</th>\\n              <th>Observaciones</th>\\n              <th></th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <ng-container *ngFor=\\\"let row of item.tecnicosadicionales; let i=index;\\\">\\n              <tr>\\n                <td>\\n                  {{row.usuario.name}}\\n                </td>\\n                <td>\\n                  {{row.observaciones}}\\n                </td>\\n                <td>\\n                  <a class=\\\"preview\\\" *ngIf=\\\"item.estado=='PDA'||item.estado=='PLA'\\\" href=\\\"#\\\"\\n                    [swal]=\\\"deletetecSwal\\\"> <i class=\\\"icon-trash\\\"></i></a>\\n                  <swal #deletetecSwal title=\\\"Eliminar Tecnico adicional\\\"\\n                    text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                    [focusCancel]=\\\"true\\\" (confirm)=\\\"deleterecnico(i)\\\">\\n                  </swal>\\n                </td>\\n              </tr>\\n            </ng-container>\\n          </tbody>\\n        </table>\\n      </div>\\n\\n    </div>\\n    <div class=\\\"tab-pane p-20\\\" id=\\\"parts\\\" role=\\\"tabpanel\\\">\\n      <div class=\\\"inbox-center table-responsive\\\">\\n        <table class=\\\"table table-hover no-wrap\\\" id=\\\"example23\\\">\\n          <thead>\\n            <tr>\\n              <th>Fecha</th>\\n              <th>N° Parte</th>\\n              <th>Tecnico</th>\\n              <th>Trabajo Realizado</th>\\n              <th>Estado</th>\\n              <th>Horas</th>\\n              <th>Horas Desplazamiento</th>\\n              <th>Km</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <ng-container *ngFor=\\\"let ptrab of item.partestrabajo; let i=index;\\\">\\n              <tr (click)=\\\"verparte(ptrab)\\\">\\n                <td>{{ptrab.created_at}}</td>\\n                <td># {{ptrab.id}}</td>\\n                <td>Técnico {{ptrab.usuario_respuesta.name}}</td>\\n                <td>{{ptrab.description_text}}</td>\\n                <td>{{ptrab.estadorespuesta}}</td>\\n                <td>{{ptrab.tiemporespuesta}}</td>\\n                <td>{{ptrab.horasdistancia}}</td>\\n                <td>{{ptrab.distanciareportada}}</td>\\n              </tr>\\n            </ng-container>\\n          </tbody>\\n        </table>\\n      </div>\\n    </div>\\n    <div class=\\\"tab-pane p-20\\\" id=\\\"location-data\\\" role=\\\"tabpanel\\\">\\n      <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo && newcompo.name!=undefined\\\">\\n            <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Estacion Servicio</strong> <br>{{newcompo.name}}</div>\\n            <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Zona Tecnica</strong><br>{{newcompo.zonatecnica.name}}\\n            </div>\\n            <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Dirección</strong> <br>{{newcompo.direccion}}</div>\\n            <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Telefono</strong> <br>{{newcompo.telefono}}</div>\\n            <div class=\\\"col-lg-12 col-sm-12\\\"><strong>Observaciones</strong> <br>{{newcompo.observaciones}}\\n            </div>\\n            <div class=\\\"col-lg-12 col-sm-12\\\"><strong>Archivos</strong>\\n              <br>\\n              <ul class=\\\"el-info list-inline\\\"\\n                *ngIf=\\\"newcompo.archivos!=undefined&&newcompo.archivos.length>0\\\">\\n                <li *ngFor=\\\"let imgprod of newcompo.archivos;\\\" class=\\\"col-lg-3 text-truncate\\\"\\n                  title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                  <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                    href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                    <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                    {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a></li>\\n\\n              </ul>\\n            </div>\\n          </div>\\n    </div>\\n    <div class=\\\"tab-pane p-20\\\" id=\\\"components\\\" role=\\\"tabpanel\\\">\\n      <div class=\\\"table-responsive\\\">\\n        <table id=\\\"example23\\\"\\n          class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\" cellspacing=\\\"0\\\"\\n          width=\\\"100%\\\">\\n          <thead>\\n            <tr>\\n              <th>Tipo Componente</th>\\n              <th>Informacion</th>\\n              <th>Contratos</th>\\n\\n\\n            </tr>\\n          </thead>\\n\\n          <tbody>\\n\\n\\n            <ng-container *ngFor=\\\"let row of newcompo.componentes; let i = index\\\">\\n              <!-- row.id && row.estado -->\\n              <tr *ngIf=\\\"row.id\\\">\\n                <td>\\n                  {{row.tipocomponente.name}}\\n                  <br>\\n                  <p *ngIf=\\\"row.observacionescontrato!=''\\\">Observaciones:<span\\n                      [innerHTML]=\\\"row.observacionescontrato\\\"></span></p>\\n                  <ul class=\\\"el-info\\\" *ngIf=\\\"row.archivos!=undefined&&row.archivos.length>0\\\">\\n                    <li *ngFor=\\\"let imgprod of row.archivos;\\\" class=\\\"col-lg-10 text-truncate\\\"\\n                      title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                      <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                        href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                        <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                        {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a></li>\\n\\n                  </ul>\\n                </td>\\n                <td>\\n                  <ul>\\n                    <li *ngFor=\\\"let field of row.componentfields\\\">\\n                      <strong>{{field.tipocomponentfield.name}}:</strong> {{field.value}}\\n                    </li>\\n                  </ul>\\n                </td>\\n                <td>\\n                  <ul class=\\\"list-group list-group-full\\\">\\n                    <li class=\\\"list-group-item\\\" *ngFor=\\\"let contr of row.contratos; let j = index\\\">\\n\\n                      <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\"><strong>Tipo</strong>\\n                        <span\\n                          [ngStyle]=\\\"{'background-color': contr.contrato.tipocontrato.color?contr.contrato.tipocontrato.color:'#ffffff'}\\\"\\n                          class=\\\"badge badge-pill \\\"> {{contr.contrato.tipocontrato.name}}</span><br>\\n                        <strong>Vto</strong> {{contr.contrato.fechafin}}</div>\\n                      <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                        style=\\\"display: inline; text-align: start;\\\">\\n                        <input class=\\\"custom-control-input\\\" id=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"\\n                          (click)=\\\"clickcontrato(contr,row)\\\" name=\\\"checkbox{{newcompo.id}}\\\" type=\\\"radio\\\"\\n                          [disabled]=\\\"edit\\\" [checked]=\\\"item.contrato_componente_id==contr.id\\\">\\n\\n                        <label class=\\\"custom-control-label\\\" for=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"><i\\n                            *ngIf=\\\"edit && item.contrato_componente_id==contr.id\\\"\\n                            class=\\\"fas fa-check-circle\\\"></i></label>\\n                      </div>\\n                    </li>\\n                    <li class=\\\"list-group-item\\\"\\n                      *ngIf=\\\"row.contratos==undefined||row.contratos.length==0\\\">\\n                      <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\"> <strong>Sin\\n                          Contrato</strong><br></div>\\n\\n                      <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                        style=\\\"display: inline; text-align: start;\\\">\\n                        <input class=\\\"custom-control-input\\\" id=\\\"checkbox{{newcompo.id}}_{{i}}_sn\\\"\\n                          name=\\\"checkbox{{newcompo.id}}\\\" type=\\\"radio\\\" value=\\\"check\\\"\\n                          [checked]=\\\"item.sincontrato==row.id && item.contrato_componente_id==null\\\"\\n                          [disabled]=\\\"edit\\\" (click)=\\\"clicksincontrato(row.id)\\\">\\n\\n                        <label class=\\\"custom-control-label mb-3\\\"\\n                          for=\\\"checkbox{{newcompo.id}}_{{i}}_sn\\\"><i\\n                            *ngIf=\\\"edit && item.sincontrato==row.id\\\"\\n                            class=\\\"fas fa-check-circle\\\"></i></label>\\n                      </div>\\n                    </li>\\n                  </ul>\\n\\n                </td>\\n\\n\\n              </tr>\\n\\n\\n            </ng-container>\\n          </tbody>\\n        </table>\\n      </div>\\n    </div>\\n</div>\\n<div class=\\\"text-right pb-5\\\">\\n  <button class=\\\"btn btn-primary\\\" (click)=\\\"view()\\\">Ver Incidencia</button>\\n</div>\\n\\n</div>\\n\\n<swal #partetrabajoSwal title=\\\"Firma Cliente\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\" [showCancelButton]=\\\"false\\\"\\n  [showConfirmButton]=\\\"false\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Agregar'\\\" customClass=\\\"swal-wide\\\"\\n  showCloseButton=\\\"true\\\">\\n  <div *swalPartial>\\n\\n    <div class=\\\"card-body \\\">\\n      <h4><i class=\\\"ti-write\\\"></i> Parte de trabajo <a\\n          href=\\\"{{apiurl+'storage/respuestas/resp_'+respuestaview.id+'.pdf'}}\\\" download>Descargar Pdf</a></h4>\\n      <form action=\\\"#\\\" class=\\\"row\\\" id=\\\"form-rta\\\">\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">N° {{respuestaview.manual?'Manual':''}}</label>\\n          <input type=\\\"text\\\" id=\\\"numerorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"numero Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.id\\\" name=\\\"numerorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">Técnico</label>\\n          <input type=\\\"text\\\" id=\\\"tecnicorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tecnico Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.usuario_respuesta.name\\\" name=\\\"tecnicorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">Fecha Registro</label>\\n          <input type=\\\"text\\\" id=\\\"fecharespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"fecha Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.created_at\\\" name=\\\"fecharespuesta\\\">\\n\\n        </div>\\n\\n\\n        <div class=\\\"form-group col-lg-12\\\">\\n          <label class=\\\"control-label\\\">Parte de trabajo de la incidencia</label>\\n\\n          <ckeditor [(ngModel)]=\\\"respuestaview.descripcion\\\" #myckeditor=\\\"ngModel\\\" name=\\\"rtackeditor\\\"\\n            [config]=\\\"ckeConfig\\\" debounce=\\\"500\\\">\\n          </ckeditor>\\n\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Estado Parte de trabajo *</label>\\n          <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"respuestaview.estadorespuesta\\\"\\n            name=\\\"ctrlestadorespuesta\\\" required>\\n            <option value=\\\"\\\">Seleccione</option>\\n            <option value=\\\"TE\\\">Terminada</option>\\n            <option value=\\\"PM\\\">Pendiente por material</option>\\n            <option value=\\\"PC\\\">Pendiente por restricciones de cliente.</option>\\n            <option value=\\\"PS\\\">Pendiente por seguridad</option>\\n          </select>\\n\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Tiempo Solución (Horas)</label>\\n          <input type=\\\"number\\\" id=\\\"tiemporespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.tiemporespuesta\\\" name=\\\"tiemporespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Tiempo Recorrido (Horas)</label>\\n          <input type=\\\"number\\\" id=\\\"tiemporecorrisorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.horasdistancia\\\" name=\\\"tiemporecorrisorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Distancia (Kms)</label>\\n          <input type=\\\"number\\\" id=\\\"distanciarespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.distanciareportada\\\" name=\\\"distanciarespuesta\\\">\\n\\n        </div>\\n\\n      </form>\\n    </div>\\n  </div>\\n</swal>\\n\\n<swal #confirmplaneacionSwal title=\\\"Confirmar Planeación\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\"\\n[showCancelButton]=\\\"true\\\" [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Aceptar'\\\"\\n(confirm)=\\\"onasignarusuario()\\\" showCloseButton=\\\"true\\\">\\n<div *swalPartial>\\n  <form>\\n    <div class=\\\"form-body\\\">\\n\\n      <div class=\\\"row p-t-20\\\">\\n\\n        <div class=\\\"col-md-12\\\">\\n          <p class=\\\"text-center\\\" [innerHTML]=\\\"mensajePlaneacion\\\"></p>\\n        </div>\\n\\n      </div>\\n\\n    </div>\\n\\n  </form>\\n</div>\\n</swal>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.html\n// module id = ./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.html\n// module chunks = incidencias.module","import {\n  Component,\n  OnInit,\n  ViewChild,\n  AfterViewInit,\n  Input,\n  Output,\n  EventEmitter,\n} from \"@angular/core\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { IncidenciaService } from \"./../incidencia.service\";\nimport { Ng4LoadingSpinnerService } from \"ng4-loading-spinner\";\nimport { NotificationService } from \"./../../shared\";\nimport { LocalDataService } from \"./../../shared\";\nimport { tipocomponente } from \"../../viewmodel/tipocomponente\";\nimport { Contrato } from \"../../viewmodel/contrato\";\nimport { Observable } from \"rxjs\";\nimport { ClienteService } from \"../../clientes/cliente.service\";\nimport { TypeaheadMatch } from \"ngx-bootstrap/typeahead\";\nimport { listLocales } from \"ngx-bootstrap/chronos\";\nimport { BsDatepickerConfig, BsLocaleService } from \"ngx-bootstrap/datepicker\";\nimport { mergeMap } from \"rxjs/operators\";\nimport { TipocontratoService } from \"../../tipocontrato/tipocontrato.service\";\nimport { EstacionservicioService } from \"../../estacionservicio/estacionservicio.service\";\nimport { estacionservicio } from \"../../viewmodel/estacionservicio\";\nimport { tipocontrato } from \"../../viewmodel/tipocontrato\";\nimport { SwalComponent } from \"@toverux/ngx-sweetalert2\";\nimport { Componente } from \"../../viewmodel/Componente\";\nimport { ComponenteActuacion } from \"../../viewmodel/componente_actuacion\";\nimport { Incidencia } from \"../../viewmodel/incidencia\";\nimport { CategoriaIncidente } from \"../../viewmodel/categoriaincidente\";\nimport {\n  FileUploader,\n  FileLikeObject,\n  FileItem,\n  ParsedResponseHeaders,\n} from \"ng2-file-upload\";\nimport { environment } from \"../../../environments/environment\";\nimport * as moment from \"moment\";\nimport { ESTADOINCIDENCIAS } from \"../../mocks/estadoincidente\";\nimport { Respuesta } from \"../../viewmodel/respuesta\";\nimport { RespuestasService } from \"../../respuesta/respuestas.service\";\nimport { ArticuloService } from \"../../articulo/articulo.service\";\nimport { MaterialRespuesta } from \"../../viewmodel/MaterialRespuesta\";\nimport { ComentarioIncidente } from \"../../viewmodel/comentario_incidente\";\nimport { ComentarioincidenteService } from \"../../comentarioincidente/comentarioincidente.service\";\nimport { Tecnicoadicional } from \"../../viewmodel/tecnicoadicional\";\nimport { Candeactivateguard } from \"../../shared/can-deactivate-guard/can-deactivate-guard.service\";\nimport { isNgTemplate } from \"@angular/compiler\";\nimport { ArchivouploadService } from \"../../archivoupload/archivoupload.service\";\nimport { LocationService } from \"../../shared/location/location.service\";\nimport { AuditoriaService } from \"../../shared/auditoria/auditoria.service\";\nimport { ProyectosService } from \"../../proyectos/proyectos.service\";\ndeclare var $;\n\n@Component({\n  selector: \"app-incidencia-edit-tab\",\n  templateUrl: \"./incidencia-edit-tab.component.html\",\n  styleUrls: [\"./incidencia-edit-tab.component.css\"],\n})\nexport class IncidenciaEditTabComponent implements OnInit, AfterViewInit {\n  @Input() incidenceId: number;\n\n  @Output() showIncidenceDetail: EventEmitter<any> = new EventEmitter();\n\n  public uploader: FileUploader = new FileUploader({\n    url: environment.apiUrl + \"api/archivoincidencia\",\n    authTokenHeader: \"Authorization\",\n    authToken: \"Bearer \" + localStorage.getItem(\"access_token\"),\n    isHTML5: true,\n    autoUpload: true,\n    maxFileSize: 5 * 1024 * 1024,\n  });\n\n  item: Incidencia;\n  /*autocomplete clicnte */\n  asyncSelected: string;\n  typeaheadLoading: boolean;\n  typeaheadNoResults: boolean;\n  dataSource: Observable<any>;\n  /*autocomplete articulo */\n  asyncSelected_art: string;\n  typeaheadLoading_art: boolean;\n  typeaheadNoResults_art: boolean;\n  dataSource_art: Observable<any>;\n\n  tipocontrato: any;\n  estacionservicio: any;\n  name = \"ng2-ckeditor\";\n  ckeConfig: any;\n  ckeConfigdesc: any;\n  ckeConfigcom: any;\n  mycontent: string;\n  newcompo: estacionservicio;\n  tipocontratosel: tipocontrato;\n  componentesel: Componente;\n  actuacionesNew: ComponenteActuacion;\n  prioridades: CategoriaIncidente[];\n  currentPrioriad=null;\n  irespuesta: Respuesta;\n  estadoincidente = ESTADOINCIDENCIAS;\n  apiurl: any;\n  edit: boolean;\n  txterror = \"\";\n  disablesave = false;\n  @ViewChild(\"myckeditor\") ckeditor: any;\n  @ViewChild(\"myckeditordesc\") ckeditordesc: any;\n  @ViewChild(\"rtackeditor\") rtackeditor: any;\n  @ViewChild(\"createSwal\") private createSwal: SwalComponent;\n  @ViewChild(\"partetrabajoSwal\") private partetrabajoSwal: SwalComponent;\n  @ViewChild(\"cierremanualSwal\") private cierremanualSwal: SwalComponent;\n  @ViewChild(\"ctrlform\") ctrlform: any;\n  @ViewChild(\"ctrlformrta\") ctrlformrta: any;\n  @ViewChild(\"confirmplaneacionSwal\")\n  private confirmplaneacionSwal: SwalComponent;\n\n  articulodesc: any;\n  materialnew: MaterialRespuesta;\n  comentarionew: ComentarioIncidente;\n  respuestaview: Respuesta;\n  tecnicoadicionalnew: Tecnicoadicional;\n  usuariostec = [];\n  tipofotosiniestro = \"\";\n  validform: boolean;\n  usuariostecparte: any;\n  geolocationPosition: any;\n\n  proyects: Array<any>;\n\n  selectProyect: any;\n  mensajePlaneacion: string;\n\n  incnew: Incidencia;\n  istec = false;\n  incidenceDetail: boolean = false;\n\n  userIncidence: Array<any> = [];\n  user: any;\n\n  constructor(\n    private spinnerService: Ng4LoadingSpinnerService,\n    private incidenciaService: IncidenciaService,\n    private router: Router,\n    private notificationService: NotificationService,\n    private localDataService: LocalDataService,\n    private clienteService: ClienteService,\n    private localeService: BsLocaleService,\n    private tipocontratoService: TipocontratoService,\n    private estacionservicioService: EstacionservicioService,\n    private route: ActivatedRoute,\n    private respuestaService: RespuestasService,\n    private archivouploadService: ArchivouploadService,\n    private articuloService: ArticuloService,\n    private comentarioincidenteService: ComentarioincidenteService,\n    private candeactivateguard: Candeactivateguard,\n    private locationService: LocationService,\n    private auditoriaService: AuditoriaService,\n    private proyectosService: ProyectosService\n  ) {\n    this.istec = this.localDataService.getuser().perfil == 1;\n    this.localeService.use(\"es\");\n    this.candeactivateguard.setedit(true);\n    this.dataSource = Observable.create((observer: any) => {\n      // Runs on every search\n      this.clienteService.gettoken(this.item.razonsocial).subscribe((value) => {\n        observer.next(value.data);\n      });\n    });\n    this.edit = true;\n\n    this.dataSource_art = Observable.create((observer: any) => {\n      // Runs on every search\n      this.articuloService.gettoken(this.articulodesc).subscribe((value) => {\n        observer.next(value.data);\n      });\n    });\n    this.apiurl = environment.apiUrl;\n    this.tecnicoadicionalnew = new Tecnicoadicional();\n    this.tecnicoadicionalnew.id_usuario = -1;\n    this.user = this.localDataService.getLocalData(\"userInfo\");\n  }\n\n  public hasBaseDropZoneOver: boolean = false;\n  public hasAnotherDropZoneOver: boolean = false;\n\n  ngOnInit() {\n    this.incnew = new Incidencia();\n  }\n  ngOnChanges() {\n    if (this.incidenceId === undefined) return;\n    this.ckeConfig = {\n      allowedContent: false,\n      extraPlugins: \"divarea\",\n      forcePasteAsPlainText: true,\n    };\n\n    this.ckeConfigdesc = {\n      allowedContent: false,\n      extraPlugins: \"divarea\",\n      forcePasteAsPlainText: true,\n    };\n    this.ckeConfigcom = {\n      allowedContent: false,\n      extraPlugins: \"divarea\",\n      forcePasteAsPlainText: true,\n      toolbar: [{ name: \"basicstyles\", items: [\"Bold\", \"Italic\", \"Strike\"] }],\n    };\n    this.item = new Incidencia();\n    this.item.cliente_id = \"\";\n    this.item.estacion_servicio_id = -1;\n    this.item.categoria_incidente_id = -1;\n    this.item.imagenes = [];\n    this.cargarTipoCOntrato();\n    this.cargarEstacionServicio();\n    this.newcompo = new estacionservicio();\n    this.prioridades = [];\n    this.irespuesta = new Respuesta();\n    this.materialnew = new MaterialRespuesta();\n    this.irespuesta.materiales = [];\n    this.irespuesta.manual = false;\n    this.getById();\n\n    this.irespuesta.estadorespuesta = \"\";\n    this.uploader.onAfterAddingFile = (file: any) => {\n      file.withCredentials = false;\n    };\n    this.uploader.onErrorItem = (item, response, status, headers) =>\n      this.onErrorItem(item, response, status, headers);\n    this.uploader.onSuccessItem = (item, response, status, headers) =>\n      this.onSuccessItem(item, response, status, headers);\n    this.uploader.onWhenAddingFileFailed = (fileItem) => {\n      this.notificationService.onError(\n        \"La imagen no se pudo cargar, \" +\n        \"el tamaño maximo es de 5MB y el formato es png o jpg, INtentelo nuevamente\"\n      );\n    };\n    this.comentarionew = new ComentarioIncidente();\n\n    this.showIncidenceDetail.emit(false);\n    this.incidenceDetail = false;\n  }\n\n  onChange($event: any): void {\n    console.log(\"onChange\");\n  }\n\n  adclock(inc) {\n    console.log(\"adclock\", inc);\n    if (!this.istec) {\n      inc.isEditable = true;\n      if (\n        inc.fecha_programacion != undefined &&\n        inc.fecha_programacion != null &&\n        inc.fecha_programacion != \"\"\n      ) {\n        inc.fecha_programacion = moment(inc.fecha_programacion).format(\n          \"MM/DD/YYYY h:mm:ss\"\n        );\n\n      }\n      $('.clockpicker').clockpicker({\n        placement: 'bottom',\n        align: 'left',\n        autoclose: true,\n        donetext: 'Aceptar',\n  \n        'default': 'now'\n      }).find('input').change(function () {\n        console.log(this.value);\n      });\n    }\n    \n  }\n\n  getById() {\n    this.userIncidence = [];\n    this.spinnerService.show();\n    // const $id = this.route.snapshot.paramMap.get('id');\n    this.uploader.options.additionalParameter = {\n      incidencia_id: this.incidenceId,\n      tipofotosiniestro: this.tipofotosiniestro,\n    };\n    this.irespuesta.id_incidencia = this.incidenceId;\n    this.incidenciaService.getById(this.incidenceId).subscribe((response) => {\n      this.item = response.data;\n      const htmltoText = (html: string) => {\n        let text = html;\n        text = text.replace(/\\n/gi, \"\");\n        text = text.replace(/<style([\\s\\S]*?)<\\/style>/gi, \"\");\n        text = text.replace(/<script([\\s\\S]*?)<\\/script>/gi, \"\");\n        text = text.replace(\n          /<a.*?href=\"(.*?)[\\?\\\"].*?>(.*?)<\\/a.*?>/gi,\n          \" $2 $1 \"\n        );\n        text = text.replace(/<\\/div>/gi, \"\\n\\n\");\n        text = text.replace(/<\\/li>/gi, \"\\n\");\n        text = text.replace(/<li.*?>/gi, \"  *  \");\n        text = text.replace(/<\\/ul>/gi, \"\\n\\n\");\n        text = text.replace(/<\\/p>/gi, \"\\n\\n\");\n        text = text.replace(/<br\\s*[\\/]?>/gi, \"\\n\");\n        text = text.replace(/<[^>]+>/gi, \"\");\n        text = text.replace(/^\\s*/gim, \"\");\n        text = text.replace(/ ,/gi, \",\");\n        text = text.replace(/ +/gi, \" \");\n        text = text.replace(/\\n+/gi, \"\\n\\n\");\n        return text;\n      };\n\n      this.item.partestrabajo = this.item.partestrabajo.map((p) => {\n        let description_text = htmltoText(p.descripcion);\n        description_text =\n          description_text.length > 35\n            ? `${description_text.slice(35)}...`\n            : description_text;\n        return { ...p, description_text };\n      });\n\n      this.usuariostecparte = response.data.usuariostecparte;\n      this.usuariostec = response.data.usuariostec.sort(this.compare);\n      this.item.usuario_asignado_id = response.data.usuario_asignado_id;\n      this.edit = response.data.mismo;\n      if (\n        response.data.mismo &&\n        this.item.estado != \"TRA\" &&\n        this.item.estado != \"PTE\" &&\n        this.item.estado != \"CLO\"\n      ) {\n        this.candeactivateguard.setedit(false);\n        this.router.navigateByUrl(\"incidencia\");\n      }\n      if (this.item.tiempo && this.item.estado == \"TRA\") {\n        this.irespuesta.tiemporespuesta =\n          Math.round((this.item.tiempo / 60 / 60) * 100) / 100;\n        this.irespuesta.distanciareportada =\n          Math.round((this.item.distanciacalculada / 1000) * 100) / 100;\n        this.irespuesta.horasdistancia =\n          Math.round((this.item.t_deplazamiento / 60 / 60) * 100) / 100;\n      }\n      if (!moment(this.item.fecha_vencimiento, \"DD/MM/YYYY\").isValid()) {\n        this.item.fecha_vencimiento = moment(\n          this.item.fecha_vencimiento\n        ).toDate();\n      }\n\n      this.incidenceDetail = true;\n      this.showIncidenceDetail.emit(true);\n      this.cargarEstacionServicio();\n      this.cargarProyectos();\n      if (response.data.contrato_componente != null) {\n        this.prioridades =\n          response.data.contrato_componente.contrato.tipocontrato.categoriaincidentes;\n\n          this.currentPrioriad=this.prioridades.find((it)=>{\n            return it.id==this.item.categoria_incidente_id;\n          })\n      }\n\n      this.adclock(this.item);\n      this.spinnerService.hide();\n\n      var _userIncidence = [];\n\n      if (this.item.usuario_asignado != null) {\n        _userIncidence.push({\n          planificacion: \"Tecnico Principal\",\n          tecnico: this.item.usuario_asignado.name,\n          tipo: \"Pincipal\",\n          fecha: this.item.fecha_programacion,\n          hora: this.item.hora_programacion,\n          estado: \"\",\n          principal: 1,\n        });\n        const estado=this.item.estado;\n        if ((estado === \"PTE\" || estado===\"INT\")) {\n          _userIncidence = [];\n        }\n        this.userIncidence = _userIncidence;\n      }\n    });\n  }\n\n  cargarTipoCOntrato() {\n    this.tipocontratoService.get(1).subscribe((value) => {\n      this.tipocontrato = value.data;\n    });\n  }\n\n  cargarEstacionServicio() {\n    let empresa = 0;\n    this.spinnerService.show();\n    empresa = this.localDataService.getLocalData(\"empresaSeleccionada\").id;\n    this.estacionservicioService\n      .getbycliente(empresa, this.item.cliente_id)\n      .subscribe((value) => {\n        this.estacionservicio = value.data;\n        if (this.item.estacion_servicio_id != -1) {\n          let result = this.estacionservicio.filter(\n            (comp) => comp.id.toString() == this.item.estacion_servicio_id\n          );\n\n          if (result.length > 0) {\n            this.newcompo = result[0];\n            this.quitarobservaciones();\n            this.setobservacioncontrato();\n          }\n        } else {\n          this.newcompo = new estacionservicio();\n        }\n        this.spinnerService.hide();\n      });\n  }\n  setobservacioncontrato() {\n    this.newcompo.componentes.forEach((element) => {\n      if (element.contratos.length > 0) {\n        element.contratos.forEach((contrato) => {\n          if (contrato.id == this.item.contrato_componente_id) {\n            element.observacionescontrato = contrato.contrato.observaciones;\n            element.archivos = contrato.contrato.archivos;\n          }\n        });\n      }\n    });\n  }\n\n  onselectEstacionServicio(estacionserviciosel) {\n    if (estacionserviciosel.target.value != \"-1\") {\n      let result = this.estacionservicio.filter(\n        (comp) => comp.id.toString() == estacionserviciosel.target.value\n      );\n\n      if (result.length > 0) {\n        this.newcompo = result[0];\n      }\n    } else {\n      this.newcompo = new estacionservicio();\n    }\n  }\n  onselecttipocontrato(tipocontratovalue) {\n    let result;\n    result = this.tipocontrato.filter(\n      (comp) => comp.id.toString() == tipocontratovalue.target.value\n    );\n\n    if (result.length > 0) {\n      this.tipocontratosel = result[0];\n    }\n  }\n\n  add(cierreManual) {\n    this.validform = false;\n    if (this.ctrlform.form.valid == false) {\n      this.validform = true;\n      return false;\n    }\n    this.disablesave = true;\n    this.txterror = \"\";\n    this.spinnerService.show();\n    this.candeactivateguard.setedit(false);\n    this.item.empresa_id = this.localDataService.getLocalData(\n      \"empresaSeleccionada\"\n    ).id;\n    this.item.usuario_id = this.localDataService.getLocalData(\"userInfo\").id;\n    this.item.estacion_servicio_id = this.newcompo.id;\n    this.item.manual = cierreManual;\n    if (\n      this.item.fecha_programacion != undefined &&\n      this.item.fecha_programacion != null &&\n      this.item.fecha_programacion != \"\"\n    ) {\n      if (\n        this.item.hora_programacion != undefined &&\n        this.item.hora_programacion != null &&\n        this.item.hora_programacion != \"\"\n      ) {\n        if (!moment(this.item.fecha_programacion, \"DD/MM/YYYY\").isValid()) {\n          this.item.fecha_programacion = moment(\n            this.item.fecha_programacion\n          ).format(\"YYYY-MM-DD\");\n        } else {\n          this.item.fecha_programacion = moment(\n            this.item.fecha_programacion,\n            \"DD/MM/YYYY\"\n          ).format(\"YYYY-MM-DD\");\n        }\n        this.item.fecha_programacion = moment(\n          this.item.fecha_programacion + \" \" + this.item.hora_programacion\n        ).format(\"DD-MM-YYYY HH:mm:ss\");\n      } else {\n        if (!moment(this.item.fecha_programacion, \"DD/MM/YYYY\").isValid()) {\n          this.item.fecha_programacion = moment(\n            this.item.fecha_programacion\n          ).format(\"YYYY-MM-DD\");\n        } else {\n          this.item.fecha_programacion = moment(\n            this.item.fecha_programacion,\n            \"DD/MM/YYYY\"\n          ).format(\"YYYY-MM-DD\");\n        }\n        this.item.fecha_programacion = moment(\n          this.item.fecha_programacion + \" \" + \"00:00:00\"\n        ).format(\"DD-MM-YYYY HH:mm:ss\");\n      }\n    }\n    this.incidenciaService.update(this.item).subscribe(\n      (value) => {\n        if (value.data.errorusu == 1) {\n          this.notificationService.onError(\n            \"No se puede asignar el usuario por que es tecnico adicional\"\n          );\n        } else {\n          this.notificationService.onSuccess(\n            \"Incidencia Actualizada con exito.\"\n          );\n          this.router.navigateByUrl(\"incidencia\");\n        }\n        this.registrarauditoria(\n          \"Actualizar incidente\",\n          \"Guardar\",\n          this.item.id\n        );\n        this.spinnerService.hide();\n\n        this.disablesave = false;\n      },\n      (err) => {\n        this.disablesave = false;\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.txterror = \"El Contrato ya existe\";\n          this.notificationService.onError(\"El Contrato ya existe\");\n        } else if (err.status_code == 400) {\n          this.txterror = err.errors.message;\n          this.notificationService.onError(err.errors.message);\n        } else {\n          this.txterror = \"Se ha producido un error.\";\n          this.notificationService.onError(\"Se ha producido un error. <br>\");\n        }\n      }\n    );\n  }\n  cerrarmanual() {\n    this.cierremanualSwal.show();\n    return false;\n  }\n  changeTypeaheadLoading(e: boolean): void {\n    this.typeaheadLoading = e;\n  }\n\n  typeaheadOnSelect(e: TypeaheadMatch): void {\n    this.item.cliente_id = e.item.codigo_cliente;\n    this.cargarEstacionServicio();\n  }\n\n  changeTypeaheadLoading_art(e: boolean): void {\n    this.typeaheadLoading_art = e;\n  }\n\n  cargarProyectos() {\n    this.proyectosService.getproybycliente(this.item.cliente_id).subscribe(\n      (res) => {\n        this.proyects = res.data;\n        this.selectProyect = this.proyects.find(\n          (p) => p.codigo_proyecto === this.item.proyecto_id\n        );\n      },\n      (err) => { }\n    );\n  }\n\n  onChangeProyect(proyect) {\n    if (proyect != -1) {\n      this.item.proyecto_id = proyect.codigo_proyecto;\n      this.item.proyecto_description = proyect.descripcion;\n    } else {\n      this.item.proyecto_id = null;\n      this.item.proyecto_description = null;\n    }\n  }\n\n  typeaheadOnSelect_art(e: TypeaheadMatch): void {\n    this.materialnew.nombre = e.item.descripcion;\n    this.materialnew.referencia = e.item.codigo_articulo;\n  }\n  agregarmaterial() {\n    this.irespuesta.materiales.push(this.materialnew);\n    this.materialnew = new MaterialRespuesta();\n    this.articulodesc = \"\";\n  }\n  selectComponent(comp) {\n    if (comp.select) {\n      comp.select = false;\n    } else {\n      comp.select = true;\n    }\n    return false;\n  }\n  modalactuacion(item) {\n    this.componentesel = item;\n    if (!this.componentesel.actuaciones) {\n      this.componentesel.actuaciones = [];\n    }\n\n    this.createSwal.show();\n    return false;\n  }\n  agregaractuacion() {\n    this.componentesel.actuaciones.push(this.actuacionesNew);\n    this.actuacionesNew = new ComponenteActuacion();\n    this.actuacionesNew.tipo = \"-1\";\n  }\n  onvaluechanged(value) {\n    if (value.index === undefined || value.index === \"\") {\n      this.actuacionesNew.dias = value.dias;\n    } else {\n      this.componentesel.actuaciones[value.index].dias = value.dias;\n    }\n  }\n  clickcontrato(contrato, row) {\n    this.quitarobservaciones();\n    this.prioridades = contrato.contrato.tipocontrato.categoriaincidentes;\n    this.item.contrato_componente_id = contrato.id;\n    row.observacionescontrato = contrato.contrato.observaciones;\n    row.archivos = contrato.contrato.archivos;\n  }\n  quitarobservaciones() {\n    this.newcompo.componentes.forEach((element) => {\n      element.observacionescontrato = \"\";\n      element.archivos = [];\n    });\n  }\n  getclassestadoincidencia(estado) {\n    let result;\n    result = this.estadoincidente.filter(\n      (estadoinc) => estadoinc.value === estado\n    );\n    return result.length > 0 ? result[0].label : \"\";\n  }\n  onErrorItem(\n    item: FileItem,\n    response: string,\n    status: number,\n    headers: ParsedResponseHeaders\n  ): any {\n    let error = JSON.parse(response); //error server response\n    console.log(error);\n  }\n\n  public fileOverBase(e: any): void {\n    this.uploader.options.additionalParameter = {\n      incidencia_id: this.irespuesta.id_incidencia,\n      tipofotosiniestro: this.tipofotosiniestro,\n    };\n    this.hasBaseDropZoneOver = e;\n  }\n\n  public fileOverAnother(e: any): void {\n    this.uploader.options.additionalParameter = {\n      incidencia_id: this.irespuesta.id_incidencia,\n      tipofotosiniestro: this.tipofotosiniestro,\n    };\n    this.hasAnotherDropZoneOver = e;\n  }\n  onSuccessItem(\n    item: FileItem,\n    response: string,\n    status: number,\n    headers: ParsedResponseHeaders\n  ): any {\n    if (this.item.imagenes == undefined || this.item.imagenes == null) {\n      this.item.imagenes = [];\n    }\n    this.item.imagenes.push($.parseJSON(response).data);\n  }\n  tooglerogthmenu() {\n    $(\"body\").toggleClass(\"rmv-right-panel\");\n  }\n  guardarrespuesta() {\n    this.validform = false;\n    if (this.ctrlformrta.form.valid == false) {\n      this.validform = true;\n      return false;\n    }\n    this.disablesave = true;\n    this.txterror = \"\";\n    this.spinnerService.show();\n    this.candeactivateguard.setedit(false);\n    this.locationService.getCurrentPosition().subscribe(\n      (positiongps) => {\n        this.registrarRespuesta(positiongps.coords);\n      },\n      (err) => {\n        console.log(\"error\");\n      }\n    );\n  }\n  registrarRespuesta(positionGps) {\n    if (\n      this.item.contrato_componente_id != undefined ||\n      this.item.sincontrato != undefined\n    ) {\n      this.irespuesta.latrespuesta = positionGps.latitude;\n      this.irespuesta.longrespuesta = positionGps.longitude;\n      if (this.irespuesta.created_at != undefined) {\n        this.irespuesta.created_at = moment(this.irespuesta.created_at).format(\n          \"DD-MM-YYYY HH:mm:ss\"\n        );\n      }\n\n      this.respuestaService.add(this.irespuesta).subscribe(\n        (value) => {\n          this.disablesave = false;\n          this.spinnerService.hide();\n          this.registrarauditoria(\"respuesta\", \"Guardar\", value.id);\n          if (value.data.errorrepo == 1) {\n            this.notificationService.onError(\n              \"Existen tecnicos asociados sin terminar.\"\n            );\n          } else if (value.data.errorfotosiniestro == 1) {\n            this.notificationService.onError(\n              \"No tiene las imagenes de antes y despues del siniestro.\"\n            );\n          } else if (this.irespuesta.manual == true) {\n            this.irespuesta = new Respuesta();\n            this.getById();\n            this.notificationService.onSuccess(\"Respuesta agregada con exito.\");\n\n            this.materialnew = new MaterialRespuesta();\n            this.irespuesta.materiales = [];\n            this.irespuesta.manual = false;\n          } else {\n            this.notificationService.onSuccess(\"Respuesta agregada con exito.\");\n\n            this.router.navigateByUrl(\"incidencia\");\n          }\n        },\n        (err) => {\n          this.disablesave = false;\n          this.spinnerService.hide();\n          if (err.status_code == 422) {\n            this.txterror = \"El Respuesta ya existe\";\n            this.notificationService.onError(\"El Respuesta ya existe\");\n          } else if (err.status_code == 400) {\n            this.txterror = err.errors.message[0];\n            this.notificationService.onError(err.errors.message[0]);\n          } else {\n            this.txterror = \"Se ha producido un error.\";\n            this.notificationService.onError(\"Se ha producido un error.\");\n          }\n        }\n      );\n    } else {\n      this.txterror =\n        \"Para registrar el parte de trabajo debe seleccionar un contrato.\";\n      this.notificationService.onError(\n        \"Para registrar el parte de trabajo debe seleccionar un contrato.\"\n      );\n      this.spinnerService.hide();\n      this.disablesave = false;\n    }\n  }\n  abrirfirma() {\n    $(\"#contenedorsign\").css(\"display\", \"none\");\n    this.createSwal.show();\n  }\n\n  onvaluechangedfirma(value) {\n    $(\"#contenedorsign\").css(\"display\", \"\");\n    this.irespuesta.firmacliente = value;\n    this.createSwal.nativeSwal.close();\n  }\n  cancelarfirma(value) {\n    $(\"#contenedorsign\").css(\"display\", \"\");\n    this.createSwal.nativeSwal.close();\n  }\n  public ngAfterViewInit() {\n    console.log(\"NG AFTTERR VIEW INITT\")\n    $(\n      \".mini-nav, .sidebar-menu, .right-side-panel, .message-center, .right-sidebar\"\n    ).perfectScrollbar();\n    // this.adclock(this)\n\n    $('.clockpicker').clockpicker({\n      placement: 'bottom',\n      align: 'left',\n      autoclose: true,\n      donetext: 'Aceptar',\n\n      'default': 'now'\n    }).find('input').change(function () {\n      console.log(this.value);\n    });\n  }\n  FieldsChange(values: any) {\n    this.materialnew.pedido = values.currentTarget.checked;\n  }\n  ocultarmenu() {\n    $(\"body\").toggleClass(\"rmv-right-panel\");\n  }\n  addcomentario() {\n    if (this.item.comentarios == undefined) {\n      this.item.comentarios = [];\n    }\n    this.comentarionew.id_incidencia = this.item.id;\n\n    this.comentarioincidenteService.add(this.comentarionew).subscribe(\n      (value) => {\n        this.item.comentarios.push(value.data);\n        this.comentarionew = new ComentarioIncidente();\n        this.notificationService.onSuccess(\"Comentario agregado con exito.\");\n      },\n      (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError(\"Comentario ya existe\");\n        } else {\n          this.notificationService.onError(\"Se ha producido un error.\");\n        }\n      }\n    );\n  }\n  calculardias(fecha) {\n    let actual = moment();\n    fecha = moment(fecha);\n    let diff = actual.diff(fecha, \"days\");\n    return diff;\n  }\n  verparte(ptrab) {\n    this.respuestaview = ptrab;\n    this.partetrabajoSwal.show();\n    return false;\n  }\n  agregartecnicoadicional() {\n    if (this.tecnicoadicionalnew.id_usuario != -1) {\n      if (this.item.tecnicosadicionales == undefined) {\n        this.item.tecnicosadicionales = [];\n      }\n      let resul = this.usuariostec.filter(\n        (tec) => tec.id == this.tecnicoadicionalnew.id_usuario\n      );\n      resul[0].selected = true;\n      this.tecnicoadicionalnew.usuario = resul[0];\n      this.tecnicoadicionalnew.observaciones = this.tecnicoadicionalnew\n        .observaciones\n        ? this.tecnicoadicionalnew.observaciones\n        : \"N/A\";\n      this.item.tecnicosadicionales.push(this.tecnicoadicionalnew);\n      this.tecnicoadicionalnew = new Tecnicoadicional();\n      this.tecnicoadicionalnew.id_usuario = -1;\n      this.actualizarincidenye(this.item);\n    }\n  }\n  clicksincontrato(id) {\n    this.prioridades = [];\n    this.item.sincontrato = id;\n    this.item.contrato_componente_id = null;\n  }\n  essiniestro(event) {\n    this.item.siniestro = event.target.checked;\n  }\n  deleterecnico(i) {\n    this.item.tecnicosadicionales.splice(i, 1);\n    this.actualizarincidenye(this.item);\n  }\n  selecttipofoto() {\n    this.uploader.options.additionalParameter = {\n      incidencia_id: this.irespuesta.id_incidencia,\n      tipofotosiniestro: this.tipofotosiniestro,\n    };\n  }\n  eliminar_imagen(imagen) {\n    this.archivouploadService.delete(imagen.id, 1).subscribe((value) => {\n      let indice = this.item.imagenes.indexOf(imagen);\n      this.item.imagenes.splice(indice, 1);\n      this.notificationService.onSuccess(\"Imagen eliminada con exito.\");\n    });\n  }\n  registrarauditoria(campo, accion, desc) {\n    var opcion = this.router.url;\n    this.auditoriaService\n      .add({\n        id_incidencia: this.item.id,\n        acccion: accion,\n        campo: campo,\n        opcion: opcion,\n        descripcion: desc,\n      })\n      .subscribe((value) => {\n        console.log(\"auditoria almacenada\");\n      });\n  }\n  gpsuser() {\n    this.spinnerService.show();\n    if (navigator && navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          this.geolocationPosition = position;\n        },\n        (error) => {\n          switch (error.code) {\n            case 1:\n              alert(\"Permission Denied To Gps\");\n              break;\n            case 2:\n              alert(\"Position Unavailable To Gps\");\n              break;\n            case 3:\n              alert(\"Timeout To Gps\");\n              break;\n          }\n        }\n      );\n    }\n  }\n\n  view() {\n    this.router.navigate([\"incidencia/edit/\" + this.incidenceId]);\n  }\n\n  validaAsignacionUsuario(inc) {\n    this.incnew = inc;\n    let vencimiento, planeado, diferencia;\n    vencimiento = moment(inc.fecha_vencimiento, \"DD-MM-YYYY HH:mm:ss\");\n    planeado = moment(inc.fecha_programacion, \"DD-MM-YYYY HH:mm:ss\");\n    diferencia = planeado.diff(vencimiento);\n    console.log(\"diferencia\" + diferencia);\n    if (diferencia < 0) {\n      this.mensajePlaneacion =\n        \"Desea planear la incidencia?. <br>La fecha de planeación esta fuera de plazo.\";\n    } else {\n      this.mensajePlaneacion = \"Desea planear la incidencia?.\";\n    }\n\n    this.confirmplaneacionSwal.show();\n  }\n\n  onasignarusuario() {\n    this.incnew.estado = \"PLA\";\n    if (this.incnew.usuario_asignado_id) {\n      this.incnew.user_imbox_id = this.incnew.usuario_asignado_id;\n    }\n\n    this.actualizarincidenye(this.incnew);\n  }\n\n  actualizarincidenye(inc) {\n    let fectem = inc.fecha_programacion;\n    if (\n      inc.fecha_programacion != undefined &&\n      inc.fecha_programacion != null &&\n      inc.fecha_programacion != \"\"\n    ) {\n      if (\n        inc.hora_programacion != undefined &&\n        inc.hora_programacion != null &&\n        inc.hora_programacion != \"\"\n      ) {\n        if (!moment(inc.fecha_programacion, \"DD/MM/YYYY\").isValid()) {\n          inc.fecha_programacion = moment(inc.fecha_programacion).format(\n            \"YYYY-MM-DD\"\n          );\n        } else {\n          inc.fecha_programacion = moment(\n            inc.fecha_programacion,\n            \"DD/MM/YYYY\"\n          ).format(\"YYYY-MM-DD\");\n        }\n        inc.fecha_programacion = moment(\n          inc.fecha_programacion + \" \" + inc.hora_programacion\n        ).format(\"DD-MM-YYYY HH:mm:ss\");\n      } else {\n        if (!moment(inc.fecha_programacion, \"DD/MM/YYYY\").isValid()) {\n          inc.fecha_programacion = moment(inc.fecha_programacion).format(\n            \"YYYY-MM-DD\"\n          );\n        } else {\n          inc.fecha_programacion = moment(\n            inc.fecha_programacion,\n            \"DD/MM/YYYY\"\n          ).format(\"YYYY-MM-DD\");\n        }\n        inc.fecha_programacion = moment(\n          inc.fecha_programacion + \" \" + \"00:00:00\"\n        ).format(\"DD-MM-YYYY HH:mm:ss\");\n      }\n    }\n\n    this.incidenciaService.update(inc).subscribe(\n      (value) => {\n        if (value.data.noplaneado == 1) {\n          this.notificationService.onError(\n            \"Ya tiene asignado un incidente en esa hora.\"\n          );\n        } else if (value.data.errorusu == 1) {\n          this.notificationService.onError(\n            \"No se puede asignar el usuario por que es tecnico adicional\"\n          );\n        } else {\n          if (value.data.errorrec == undefined) {\n            inc.usuario_asignado = value.data.usuario_asignado;\n            inc.remotoinicio = value.data.remotoinicio;\n            inc.remotopausa = value.data.remotopausa;\n            inc.estado = value.data.estado;\n            this.incnew = null;\n            this.spinnerService.hide();\n            this.notificationService.onSuccess(\"Incidente Actualizado.\");\n\n            var _userIncidence = [];\n\n            if (inc.usuario_asignado != null) {\n              _userIncidence.push({\n                planificacion: \"Tecnico Principal\",\n                tecnico: inc.usuario_asignado.name,\n                tipo: \"Pincipal\",\n                fecha: this.item.fecha_programacion,\n                hora: this.item.hora_programacion,\n                estado: \"\",\n                principal: 1,\n              });\n\n              this.userIncidence = _userIncidence;\n            }\n          } else {\n            inc.estado = \"PLA\";\n            this.notificationService.onError(\n              \"Ya esta trabajando en un incidente\"\n            );\n          }\n        }\n      },\n      (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError(\"Incidente no Actualizado.\");\n        } else {\n          this.notificationService.onError(\"Incidente no Actualizado.\");\n        }\n      }\n    );\n    inc.fecha_programacion = fectem;\n  }\n\n  /**\n   * It removes the active class from the currently active nav-link and tab-pane, then adds the active\n   * class to the nav-link and tab-pane that correspond to the name of the tab that was clicked.\n   * @param name - The name of the tab you want to switch to.\n   */\n  toggleNav(name) {\n    document.querySelector(\".nav-link.active\").classList.remove(\"active\");\n    document.querySelector(\".tab-pane.active\").classList.remove(\"active\");\n    document.querySelector(\"#\" + name).classList.add(\"active\");\n    document.querySelector(\"#tab-\" + name).classList.add(\"active\");\n    this.adclock(this.item);\n  }\n\n  /**\n   * Compare two string objects by their property 'name'\n   * @return result - The result of the comparison\n   */\n  compare(a, b) {\n    if (a.name < b.name) return -1;\n    if (a.name > b.name) return 1;\n    return 0;\n  }\n\n  esTecnico() {\n    return this.user.relpefil.id == 1;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencia-edit-tab/incidencia-edit-tab.component.ts","module.exports = \"input[type=\\\"file\\\"] {\\r\\n    display: none;\\r\\n}\\r\\n.custom-file-upload {\\r\\n    border: 1px solid #ccc;\\r\\n    display: inline-block;\\r\\n    padding: 6px 12px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n.my-drop-zone { border: dotted 3px lightgray; }\\r\\n.nv-file-over { border: dotted 3px red; }\\r\\n/* Default class applied to drop zones on over */\\r\\n.another-file-over-class { border: dotted 3px green; }\\r\\n.list-group-item.active {\\r\\n    z-index: 2;\\r\\n    color: #212529;\\r\\n  \\r\\n}\\r\\n.right-sidebar {\\r\\n    z-index: 25;\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-edit/incidencia-edit.component.css\n// module id = ./src/app/incidencias/incidencia-edit/incidencia-edit.component.css\n// module chunks = incidencias.module","module.exports = \"<div class=\\\"page-wrapper\\\" id=\\\"contenedorsign\\\">\\n  <!-- ============================================================== -->\\n  <!-- Container fluid  -->\\n  <!-- ============================================================== -->\\n  <div class=\\\"container-fluid\\\">\\n    <!-- ============================================================== -->\\n    <!-- Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n\\n    <!-- ============================================================== -->\\n    <!-- End Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n    <!-- ============================================================== -->\\n    <!-- Start Page Content -->\\n    <!-- ============================================================== -->\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-lg-12\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"row\\\">\\n\\n            <div class=\\\"col-xlg-12 col-lg-12 col-md-12 bg-light border-left\\\">\\n\\n              <div class=\\\"card-body\\\">\\n                <button type=\\\"button \\\" class=\\\"btn btn-secondary m-r-10 m-b-10\\\" (click)=\\\"tooglerogthmenu()\\\"\\n                  title=\\\"Comentarios\\\"><i class=\\\" ti-comments font-18\\\"></i></button>\\n\\n                <div class=\\\"btn-group m-b-10 m-r-10 float-right\\\" role=\\\"group\\\"\\n                  aria-label=\\\"Button group with nested dropdown\\\">\\n\\n                  <a href=\\\"#\\\" *ngIf=\\\"!edit\\\" (click)=\\\"cerrarmanual()\\\" class=\\\"btn btn-info\\\">\\n                    Cierre Manual</a>\\n\\n                  <a routerLink=\\\"/incidencia\\\" class=\\\"btn btn-info\\\">Listado\\n                    Incidencias</a>\\n\\n                </div>\\n\\n\\n\\n              </div>\\n\\n              <div class=\\\"card-body\\\">\\n                <div class=\\\"alert alert-danger alert-rounded\\\" *ngIf=\\\"!item.usuario_asignado\\\">\\n                  El incidente no tiene usuario asignado por lo que no se pueden registrar partes de trabajo.\\n                  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"> <span\\n                      aria-hidden=\\\"true\\\">×</span> </button>\\n                </div>\\n                <form action=\\\"#\\\" id=\\\"form-id\\\" (ngSubmit)=\\\"add(false)\\\" #ctrlform=\\\"ngForm\\\">\\n                  <div class=\\\"form-body\\\">\\n                    <h3 class=\\\"card-title\\\">Información Basica</h3> <small>campos con * requeridos </small>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\">\\n                      <div class=\\\"col-md-3\\\">\\n                        <span class=\\\"badge badge-pill {{getclassestadoincidencia(item.estado)}} float-LEFT\\\">#{{item.id}}\\n                          - {{item.estado}}</span>\\n                        <ul>\\n                          <li *ngIf=\\\"item.usuario_asignado\\\">{{item.usuario_asignado?.name}}</li>\\n                          <b style=\\\"font-weight: 500;\\\">Adicionales:</b>\\n                          <li *ngFor=\\\"let tecad of item.tecnicosadicionales\\\">\\n                            <strong>{{tecad.usuario.name}}</strong>\\n                          </li>\\n                        </ul>\\n                      </div>\\n                      <div class=\\\"col-md-3\\\"> <label class=\\\"control-label\\\">Fecha Creación</label><br>\\n                        <i class=\\\"fas fa-calendar-check\\\"></i> {{item.created_at |date:'dd/MM/yyyy HH:mm:ss'}}</div>\\n                      <div class=\\\"col-md-3\\\"> <label class=\\\"control-label\\\">Fecha Vencimiento</label><br>\\n                        <input type=\\\"text\\\" id=\\\"ctrl_fecha\\\" class=\\\"form-control \\\" placeholder=\\\" Escriba la fecha\\\"\\n                          [(ngModel)]=\\\"item.fecha_vencimiento\\\" name=\\\"ctrl_fecha\\\" bsDatepicker\\n                          [bsValue]=\\\"item.fecha_vencimiento\\\" [disabled]=\\\"edit\\\"\\n                          (blur)=\\\"item.cambioFechaVencimiento=true\\\">\\n                      </div>\\n                      <div class=\\\"col-md-3\\\"> <label class=\\\"control-label\\\">Fecha Planeación</label><br>\\n                        <i class=\\\"fas fa-calendar-check\\\"></i> {{item.fecha_programacion |date:'dd/MM/yyyy HH:mm:ss'}}\\n                      </div>\\n                      <div class=\\\"col-lg-12\\\">\\n                        <hr>\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Cliente *</label>\\n\\n\\n                          <input [(ngModel)]=\\\"item.razonsocial\\\" [disabled]=\\\"edit\\\" [typeahead]=\\\"dataSource\\\"\\n                            [typeaheadAsync]=\\\"true\\\" required (typeaheadLoading)=\\\"changeTypeaheadLoading($event)\\\"\\n                            (typeaheadOnSelect)=\\\"typeaheadOnSelect($event)\\\" [typeaheadScrollable]=\\\"true\\\"\\n                            typeaheadOptionField=\\\"razon_social\\\" [typeaheadOptionsLimit]=\\\"100\\\"\\n                            placeholder=\\\"Seleccione el cliente\\\" class=\\\"form-control\\\" name=\\\"test\\\" autocomplete=\\\"off\\\"\\n                            #ctrlcliente=\\\"ngModel\\\">\\n                          <div *ngIf=\\\"typeaheadLoading\\\">Cargando..</div>\\n\\n                          <small class=\\\"form-control-feedback\\\"> Seleccione el cliente </small>\\n                          <div\\n                            *ngIf=\\\"(item.cliente_id==='0'||ctrlcliente.invalid) && (ctrlcliente.dirty || ctrlcliente.touched ||validform)\\\"\\n                            class=\\\"text-danger\\\">\\n\\n                            <div *ngIf=\\\"item.cliente_id==0||ctrlcliente.errors.required\\\">\\n                              Cliente es requerido es requerido.\\n                            </div>\\n\\n\\n                          </div>\\n                        </div>\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Estacion Servicio</label>\\n                          <select class=\\\"form-control custom-select\\\" [disabled]=\\\"edit\\\"\\n                            [(ngModel)]=\\\"item.estacion_servicio_id\\\" name=\\\"ctrlestacionservicio\\\"\\n                            (change)=\\\"onselectEstacionServicio($event)\\\" #ctrlestacionservicio=\\\"ngModel\\\" required>\\n                            <option [value]=\\\"-1\\\">Seleccione</option>\\n                            <option *ngFor=\\\"let o of estacionservicio\\\" [value]=\\\"o.id.toString()\\\">\\n                              {{ o.name }} ({{o.zonatecnica.name}})\\n\\n                            </option>\\n                          </select>\\n\\n                          <small class=\\\"form-control-feedback\\\"> Seleccione la Estacion de Servicio </small> </div>\\n                        <div\\n                          *ngIf=\\\"(item.estacion_servicio_id===-1||ctrlestacionservicio.invalid) && (ctrlestacionservicio.dirty || ctrlestacionservicio.touched ||validform)\\\"\\n                          class=\\\"text-danger\\\">\\n\\n                          <div *ngIf=\\\"item.estacion_servicio_id==-1||ctrlestacionservicio.errors.required\\\">\\n                            Estacion Servicio requerido.\\n                          </div>\\n\\n\\n                        </div>\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">N° Referencia Cliente</label>\\n\\n                          <input [(ngModel)]=\\\"item.noreferencia\\\" placeholder=\\\"N° referencia Cliente\\\"\\n                            class=\\\"form-control\\\" name=\\\"noreferencia\\\">\\n\\n                          <small class=\\\"form-control-feedback\\\"> Escriba el N° de referencia del cliente </small> </div>\\n\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Proyecto</label>\\n\\n                          <ng-select [multiple]=\\\"false\\\" [disabled]=\\\"esTecnico()\\\"\\n                            placeholder=\\\"Seleccione Proyecto\\\" [(ngModel)]=\\\"selectProyect\\\" (change)=\\\"onChangeProyect($event)\\\"\\n                             name=\\\"ctrlproyecto\\\">\\n                             <ng-option *ngFor=\\\"let p of proyects\\\" [value]=\\\"p\\\">{{ p.codigo_proyecto }} | {{ p.descripcion }}</ng-option>\\n                          </ng-select>\\n\\n                        </div>\\n                      </div>\\n                    </div>\\n                    <h3 class=\\\"card-title\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">Estacion Servicio</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo && newcompo.name!=undefined\\\">\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Estacion Servicio</strong> <br>{{newcompo.name}}</div>\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Zona Tecnica</strong><br>{{newcompo.zonatecnica.name}}\\n                      </div>\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Dirección</strong> <br>{{newcompo.direccion}}</div>\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Telefono</strong> <br>{{newcompo.telefono}}</div>\\n                      <div class=\\\"col-lg-12 col-sm-12\\\"><strong>Observaciones</strong> <br>{{newcompo.observaciones}}\\n                      </div>\\n                      <div class=\\\"col-lg-12 col-sm-12\\\"><strong>Archivos</strong>\\n                        <br>\\n                        <ul class=\\\"el-info list-inline\\\"\\n                          *ngIf=\\\"newcompo.archivos!=undefined&&newcompo.archivos.length>0\\\">\\n                          <li *ngFor=\\\"let imgprod of newcompo.archivos;\\\" class=\\\"col-lg-3 text-truncate\\\"\\n                            title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                            <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                              href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                              <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                              {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a></li>\\n\\n                        </ul>\\n                      </div>\\n                    </div>\\n                    <h3 class=\\\"card-title\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">Componentes</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">\\n                      <div class=\\\"table-responsive\\\">\\n                        <table id=\\\"example23\\\"\\n                          class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\" cellspacing=\\\"0\\\"\\n                          width=\\\"100%\\\">\\n                          <thead>\\n                            <tr>\\n                              <th>Tipo Componente</th>\\n                              <th>Informacion</th>\\n                              <th>Contratos</th>\\n\\n\\n                            </tr>\\n                          </thead>\\n\\n                          <tbody>\\n\\n\\n                            <ng-container *ngFor=\\\"let row of newcompo.componentes; let i = index\\\">\\n                               <!-- row.id && row.estado -->\\n                                <tr *ngIf=\\\"row.id\\\">\\n                                <td>\\n                                  {{row.tipocomponente.name}}\\n                                  <br>\\n                                  <p *ngIf=\\\"row.observacionescontrato!=''\\\">Observaciones:<span\\n                                      [innerHTML]=\\\"row.observacionescontrato\\\"></span></p>\\n                                  <ul class=\\\"el-info\\\" *ngIf=\\\"row.archivos!=undefined&&row.archivos.length>0\\\">\\n                                    <li *ngFor=\\\"let imgprod of row.archivos;\\\" class=\\\"col-lg-10 text-truncate\\\"\\n                                      title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                                      <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                                        href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                                        <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                                        {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a></li>\\n\\n                                  </ul>\\n                                </td>\\n                                <td>\\n                                  <ul>\\n                                    <li *ngFor=\\\"let field of row.componentfields\\\">\\n                                      <strong>{{field.tipocomponentfield.name}}:</strong> {{field.value}}\\n                                    </li>\\n                                  </ul>\\n                                </td>\\n                                <td>\\n                                  <ul class=\\\"list-group list-group-full\\\">\\n                                    <li class=\\\"list-group-item\\\" *ngFor=\\\"let contr of row.contratos; let j = index\\\">\\n\\n                                      <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\"><strong>Tipo</strong>\\n                                        <span\\n                                          [ngStyle]=\\\"{'background-color': contr.contrato.tipocontrato.color?contr.contrato.tipocontrato.color:'#ffffff'}\\\"\\n                                          class=\\\"badge badge-pill \\\"> {{contr.contrato.tipocontrato.name}}</span><br>\\n                                        <strong>Vto</strong> {{contr.contrato.fechafin}}</div>\\n                                      <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                                        style=\\\"display: inline; text-align: start;\\\">\\n                                        <input class=\\\"custom-control-input\\\" id=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"\\n                                          (click)=\\\"clickcontrato(contr,row)\\\" name=\\\"checkbox{{newcompo.id}}\\\" type=\\\"radio\\\"\\n                                          [disabled]=\\\"edit\\\" [checked]=\\\"item.contrato_componente_id==contr.id\\\">\\n\\n                                        <label class=\\\"custom-control-label\\\" for=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"><i\\n                                            *ngIf=\\\"edit && item.contrato_componente_id==contr.id\\\"\\n                                            class=\\\"fas fa-check-circle\\\"></i></label>\\n                                      </div>\\n                                    </li>\\n                                    <li class=\\\"list-group-item\\\"\\n                                      *ngIf=\\\"row.contratos==undefined||row.contratos.length==0\\\">\\n                                      <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\"> <strong>Sin\\n                                          Contrato</strong><br></div>\\n\\n                                      <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                                        style=\\\"display: inline; text-align: start;\\\">\\n                                        <input class=\\\"custom-control-input\\\" id=\\\"checkbox{{newcompo.id}}_{{i}}_sn\\\"\\n                                          name=\\\"checkbox{{newcompo.id}}\\\" type=\\\"radio\\\" value=\\\"check\\\"\\n                                          [checked]=\\\"item.sincontrato==row.id && item.contrato_componente_id==null\\\"\\n                                          [disabled]=\\\"edit\\\" (click)=\\\"clicksincontrato(row.id)\\\">\\n\\n                                        <label class=\\\"custom-control-label mb-3\\\"\\n                                          for=\\\"checkbox{{newcompo.id}}_{{i}}_sn\\\"><i\\n                                            *ngIf=\\\"edit && item.sincontrato==row.id\\\"\\n                                            class=\\\"fas fa-check-circle\\\"></i></label>\\n                                      </div>\\n                                    </li>\\n                                  </ul>\\n\\n                                </td>\\n\\n\\n                              </tr>\\n\\n\\n                            </ng-container>\\n                          </tbody>\\n                        </table>\\n                      </div>\\n                    </div>\\n\\n                    <div class=\\\"row p-t-20\\\">\\n                      <div class=\\\"col-md-12\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Titulo *</label>\\n\\n\\n                          <input [(ngModel)]=\\\"item.titulo\\\" [disabled]=\\\"edit\\\" maxlength=\\\"250\\\" required placeholder=\\\"Escriba el titulo\\\"\\n                            class=\\\"form-control\\\" name=\\\"titulo\\\" #ctrltitulo=\\\"ngModel\\\">\\n\\n                          <div *ngIf=\\\"(ctrltitulo.invalid) && (ctrltitulo.dirty || ctrltitulo.touched ||validform)\\\"\\n                            class=\\\"text-danger\\\">\\n\\n                            <div *ngIf=\\\"ctrltitulo.errors.required\\\">\\n                              Titulo es requerido.\\n                            </div>\\n\\n\\n                          </div>\\n                        </div>\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Siniestro</label>\\n                          <div class=\\\"custom-control custom-checkbox mr-sm-2\\\">\\n                            <input class=\\\"custom-control-input\\\" id=\\\"checkbox_pedir{{item.id}}\\\"\\n                              name=\\\"checkbox_pedir{{item.id}}\\\" (change)=\\\"essiniestro($event)\\\" type=\\\"checkbox\\\"\\n                              [checked]=\\\"item.siniestro\\\">\\n                            <label class=\\\"custom-control-label\\\" for=\\\"checkbox_pedir{{item.id}}\\\"> Seleccione si es\\n                              siniestro </label>\\n                          </div>\\n\\n                        </div>\\n\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Actuación</label>\\n                          <select class=\\\"form-control custom-select\\\" [disabled]=\\\"edit\\\" [(ngModel)]=\\\"item.actuacion\\\"\\n                            name=\\\"ctrlactuacion\\\">\\n                            <option value=\\\"-1\\\">Seleccione</option>\\n                            <option value=\\\"Correctivo\\\">Correctivo</option>\\n                            <option value=\\\"Preventivas\\\">Preventivas</option>\\n                            <option value=\\\"Instalaciones\\\">Instalaciones</option>\\n                            <option value=\\\"Obra\\\">Obra</option>\\n                          </select>\\n\\n                          <small class=\\\"form-control-feedback\\\"> Seleccione la Actuación </small> </div>\\n\\n                      </div>\\n                      <div class=\\\"col-md-4\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Prioridad *</label>\\n                          <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.categoria_incidente_id\\\"\\n                            name=\\\"ctrlprioridad\\\" #ctrlprioridad=\\\"ngModel\\\" required>\\n                            <option [value]=\\\"-1\\\">Seleccione</option>\\n                            <option [value]=\\\"-2\\\" *ngIf=\\\"prioridades.length==0\\\">Sin Prioridad</option>\\n                            <option *ngFor=\\\"let o of  prioridades \\\" [value]=\\\"o.id.toString()\\\">\\n                              {{ o.name }} ({{o.tiemporesolucion}}-{{o.tipotiempo}})\\n\\n                            </option>\\n                          </select>\\n\\n                          <small class=\\\"form-control-feedback\\\"> Seleccione la Prioridad </small> </div>\\n                        <div\\n                          *ngIf=\\\"(item.categoria_incidente_id===-1||ctrlprioridad.invalid) && (ctrlprioridad.dirty || ctrlprioridad.touched ||validform)\\\"\\n                          class=\\\"text-danger\\\">\\n\\n                          <div *ngIf=\\\"item.categoria_incidente_id==-1||ctrlprioridad.errors.required\\\">\\n                            La Prioridad es requerida.\\n                          </div>\\n\\n\\n                        </div>\\n                      </div>\\n\\n                      <div class=\\\"col-md-12\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Descripción de la incidencia *</label>\\n\\n                          <ckeditor [(ngModel)]=\\\"item.descripcion\\\" [readonly]=\\\"edit\\\" #myckeditordesc=\\\"ngModel\\\"\\n                            name=\\\"myckeditor\\\" [config]=\\\"ckeConfigdesc\\\" debounce=\\\"500\\\" (change)=\\\"onChange($event)\\\"\\n                            #ctrlobservaciones=\\\"ngModel\\\" maxlength=\\\"2500\\\" required>\\n                          </ckeditor>\\n\\n                          <small class=\\\"form-control-feedback\\\"> Escriba el la observacion del Contrato {{2500-(item.descripcion==undefined?0:item.descripcion.length)}}</small>\\n                        </div>\\n                        <div\\n                          *ngIf=\\\"ctrlobservaciones.invalid && (ctrlobservaciones.dirty || ctrlobservaciones.touched ||validform)\\\"\\n                          class=\\\"text-danger\\\">\\n\\n                          <div *ngIf=\\\"ctrlobservaciones.errors.required\\\">\\n                            La observacion del Contrato es requerido.\\n                          </div>\\n                          <div *ngIf=\\\"ctrlobservaciones.errors.maxlength\\\">\\n                            La observación debe contener 2500 caracteres.\\n                          </div>\\n\\n\\n                        </div>\\n                      </div>\\n                    </div>\\n                    <h3 class=\\\"card-title\\\">Tecnicos Adicionales</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\">\\n                      <div class=\\\"table-responsive\\\">\\n                        <table id=\\\"example23\\\"\\n                          class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\" cellspacing=\\\"0\\\"\\n                          width=\\\"100%\\\">\\n                          <thead>\\n                            <tr>\\n                              <th>Nombre tecnico</th>\\n                              <th>Observaciones</th>\\n                              <th></th>\\n\\n\\n                            </tr>\\n                          </thead>\\n                          <tfoot *ngIf=\\\"!edit\\\">\\n                            <tr>\\n                              <th>\\n\\n                                <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"tecnicoadicionalnew.id_usuario\\\"\\n                                  name=\\\"ctrltecadicional\\\">\\n                                  <option value=\\\"-1\\\">Seleccione</option>\\n                                  <ng-container *ngFor=\\\"let usr of usuariostec\\\">\\n                                    <option *ngIf=\\\"!usr.selected\\\" [value]=\\\"usr.id.toString()\\\">\\n                                      {{ usr.name }}\\n\\n                                    </option>\\n                                  </ng-container>\\n\\n                                </select>\\n                              </th>\\n                              <th><textarea class=\\\"form-control\\\" [(ngModel)]=\\\"tecnicoadicionalnew.observaciones\\\"\\n                                  name=\\\"txtobservaciontec\\\"></textarea></th>\\n                              <th><button type=\\\"button\\\" class=\\\"btn btn-info\\\" (click)=\\\"agregartecnicoadicional()\\\"><i\\n                                    class=\\\"fa fa-plus\\\"></i></button></th>\\n\\n\\n                            </tr>\\n                          </tfoot>\\n\\n                          <tbody>\\n\\n\\n                            <ng-container *ngFor=\\\"let row of item.tecnicosadicionales; let i = index\\\">\\n                              <tr>\\n                                <td>\\n                                  {{row.usuario.name}}\\n                                </td>\\n                                <td>\\n                                  {{row.observaciones}}\\n                                </td>\\n                                <td>\\n                                  <a class=\\\"preview\\\" *ngIf=\\\"item.estado=='PDA'||item.estado=='PLA'\\\" href=\\\"#\\\"\\n                                    [swal]=\\\"deletetecSwal\\\"> <i class=\\\"icon-trash\\\"></i></a>\\n                                  <swal #deletetecSwal title=\\\"Eliminar Tecnico adicional\\\"\\n                                    text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                    [focusCancel]=\\\"true\\\" (confirm)=\\\"deleterecnico(i)\\\">\\n                                  </swal>\\n\\n\\n                                </td>\\n\\n\\n                              </tr>\\n\\n\\n                            </ng-container>\\n                          </tbody>\\n                        </table>\\n                      </div>\\n                    </div>\\n                    <!--/span-->\\n\\n                    <!--/span-->\\n                  </div>\\n\\n                  <div class=\\\"form-actions\\\">\\n\\n                    <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"disablesave\\\"> <i class=\\\"fa fa-check\\\"></i>\\n                      Actualizar</button>\\n                    <button type=\\\"button\\\" class=\\\"btn btn-inverse\\\" routerLink=\\\"/incidencia\\\">Cancelar</button>\\n                  </div>\\n\\n                </form>\\n              </div>\\n              <div>\\n                <hr class=\\\"m-t-0\\\">\\n              </div>\\n              <div class=\\\"card-body \\\" *ngIf=\\\"item.usuario_asignado\\\">\\n                <h4><i class=\\\"ti-write\\\"></i> Parte de trabajo </h4>\\n                <div class=\\\"form-group col-lg-12\\\" *ngIf=\\\"!edit\\\">\\n\\n                  <div class=\\\"custom-control custom-checkbox mr-sm-2\\\">\\n                    <input class=\\\"custom-control-input\\\" type=\\\"checkbox\\\" id=\\\"checkbox_partermanual\\\"\\n                      name=\\\"checkbox_partermanual\\\" [(ngModel)]=\\\"irespuesta.manual\\\">\\n                    <label class=\\\"custom-control-label\\\" for=\\\"checkbox_partermanual\\\">Parte de trabajo manual</label>\\n                  </div>\\n                  <br>\\n                  <small class=\\\"form-control-feedback\\\"> Seleccione si es parte manual </small>\\n                </div>\\n                <form action=\\\"#\\\" class=\\\"row\\\" id=\\\"form-rta\\\" (ngSubmit)=\\\"guardarrespuesta()\\\" #ctrlformrta=\\\"ngForm\\\">\\n\\n                  <div class=\\\"form-group  col-lg-3\\\" *ngIf=\\\"irespuesta.manual\\\">\\n                    <label class=\\\"control-label\\\">Tecnico Parte Manual</label>\\n                    <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"irespuesta.user_id\\\"\\n                      name=\\\"ctrlTecnicoAdicional\\\" #ctrlTecnicoAdicional=\\\"ngModel\\\" required>\\n                      <option value=\\\"\\\">Seleccione</option>\\n                      <option *ngFor=\\\"let usr of usuariostecparte\\\" [value]=\\\"usr.id.toString()\\\">\\n                        {{ usr.name }}\\n\\n                      </option>\\n                    </select>\\n\\n                    <small *ngIf=\\\"ctrlTecnicoAdicional.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Seleccione el tecnico del parte manual. </small>\\n\\n                    <div\\n                      *ngIf=\\\"(ctrlTecnicoAdicional.invalid) && (ctrlTecnicoAdicional.dirty || ctrlTecnicoAdicional.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrlestadorespuesta.errors.required\\\">\\n                        Tecnico del parte manual. es requerido.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-3\\\" *ngIf=\\\"irespuesta.manual\\\">\\n                    <label class=\\\"control-label\\\">Fecha parte</label>\\n                    <input type=\\\"text\\\" id=\\\"ctrl_fecha_cierre\\\" class=\\\"form-control \\\" autocomplete=\\\"off\\\"\\n                      placeholder=\\\" Escriba la fecha de cierre\\\" [(ngModel)]=\\\"irespuesta.created_at\\\"\\n                      name=\\\"ctrl_fecha_cierre\\\" bsDatepicker>\\n                  </div>\\n                  <div class=\\\"form-group col-lg-12\\\">\\n                    <label class=\\\"control-label\\\">Parte de trabajo de la incidencia *</label>\\n\\n                    <ckeditor [(ngModel)]=\\\"irespuesta.descripcion\\\" #myckeditor=\\\"ngModel\\\" name=\\\"rtackeditor\\\"\\n                      [config]=\\\"ckeConfig\\\" debounce=\\\"500\\\" maxlength=\\\"2500\\\" (change)=\\\"onChange($event)\\\" required #rtackeditor=\\\"ngModel\\\">\\n                    </ckeditor>\\n                    <small *ngIf=\\\"rtackeditor.invalid && (rtackeditor.dirty || rtackeditor.touched ||validform)\\\"\\n                      class=\\\"messages text-danger\\\">\\n                      * requerida\\n                      <div *ngIf=\\\"rtackeditor.errors.maxlength\\\">\\n                        La observación debe contener 2500 caracteres.\\n                      </div>\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\"> Escriba el la Parte de trabajo de la Incidencia {{2500-(irespuesta.descripcion==undefined?0:irespuesta.descripcion.length)}}</small>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-3\\\">\\n                    <label class=\\\"control-label\\\">Estado Parte de trabajo</label>\\n                    <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"irespuesta.estadorespuesta\\\"\\n                      name=\\\"ctrlestadorespuesta\\\" #ctrlestadorespuesta=\\\"ngModel\\\" (change)=\\\"onChangeEstadoRespuesta($event.target.value)\\\" required>\\n                      <option value=\\\"\\\">Seleccione</option>\\n                      <option value=\\\"TE\\\">Terminada</option>\\n                      <option value=\\\"PM\\\">Pendiente por material</option>\\n                      <option value=\\\"PC\\\">Pendiente por restricciones de cliente.</option>\\n                      <option value=\\\"PS\\\">Pendiente por seguridad</option>\\n                      <option value=\\\"FJ\\\">Pendiente por fin de jornada</option>\\n                    </select>\\n                    <small *ngIf=\\\"ctrlestadorespuesta.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Seleccione el estado de la Parte de trabajo. </small>\\n\\n                    <div\\n                      *ngIf=\\\"(ctrlestadorespuesta.invalid) && (ctrlestadorespuesta.dirty || ctrlestadorespuesta.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrlestadorespuesta.errors.required\\\">\\n                        Estado Parte de trabajo es requerido.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n\\n                  <div class=\\\"form-group  col-lg-3\\\" *ngIf=\\\"irespuesta.estadorespuesta==='PM'\\\">\\n                    <label class=\\\"control-label\\\">\\n                      Motivo del material pendiente\\n                      <!-- <ng-container *ngIf=\\\"irespuesta.estadorespuesta != '' && irespuesta.estadorespuesta != 'TE'\\\">*</ng-container> -->\\n                    </label>\\n                    <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"irespuesta.tipopendientematerial\\\"\\n                      name=\\\"ctrltipopendientematerial\\\" #ctrltipopendientematerial=\\\"ngModel\\\"\\n                      [required]=\\\"true\\\"\\n                    >\\n                      <option value=\\\"\\\">Seleccione</option>\\n                      <option value=\\\"NM\\\">No se dispone del material</option>\\n                      <option value=\\\"RM\\\">Recambio en mal estado</option>\\n                    </select>\\n                    <small *ngIf=\\\"ctrltipopendientematerial.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Seleccione el motivo. </small>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-3\\\" *ngIf=\\\"currentPrioridad?.reporte_garantia=='1' && irespuesta.estadorespuesta=='PM'\\\">\\n                    <label class=\\\"control-label\\\">Motivo garantía</label>\\n                    <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"irespuesta.motivogarantia\\\"\\n                      name=\\\"ctrlmotivogarantia\\\" #ctrlmotivogarantia=\\\"ngModel\\\"\\n                      [required]=\\\"esContratoTipoGarantiaVenta()\\\"\\n                    >\\n                      <option value=\\\"\\\">Seleccione</option>\\n                      <option value=\\\"FM\\\">Fallo del montaje</option>\\n                      <option value=\\\"FMT\\\">Fallo del material</option>\\n                    </select>\\n                    <small *ngIf=\\\"ctrlmotivogarantia.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Seleccione el motivo. </small>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-3\\\">\\n                    <label class=\\\"control-label\\\">Tiempo Solución (Horas) *</label>\\n\\n                    <input type=\\\"number\\\" id=\\\"tiemporespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n                      #ctrltiemporesolucion=\\\"ngModel\\\" [(ngModel)]=\\\"irespuesta.tiemporespuesta\\\" name=\\\"tiemporespuesta\\\"\\n                      required (blur)=\\\"registrarauditoria('tiemporespuesta','Editar',irespuesta.tiemporespuesta)\\\">\\n                    <small *ngIf=\\\"ctrltiemporesolucion.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Escriba el tiempo de Solucion(Horas). </small>\\n\\n                    <div\\n                      *ngIf=\\\"(ctrltiemporesolucion.invalid) && (ctrltiemporesolucion.dirty || ctrltiemporesolucion.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrltiemporesolucion.errors.required\\\">\\n                        Tiempo de Solucion requerido.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-3\\\">\\n                    <label class=\\\"control-label\\\">Tiempo Distancia *</label>\\n                    <input type=\\\"number\\\" id=\\\"tiempodistancia\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n                      #ctrltiempodistancia=\\\"ngModel\\\" [(ngModel)]=\\\"irespuesta.horasdistancia\\\" name=\\\"tiempodistancia\\\"\\n                      required (blur)=\\\"registrarauditoria('horasdistancia','Editar',irespuesta.horasdistancia)\\\">\\n                    <small *ngIf=\\\"ctrltiempodistancia.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Escriba el tiempo distancia recorrida. </small>\\n\\n                    <div\\n                      *ngIf=\\\"(ctrltiempodistancia.invalid) && (ctrltiempodistancia.dirty || ctrltiempodistancia.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrltiempodistancia.errors.required\\\">\\n                        Tiempo distancia requerida.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-3\\\">\\n                    <label class=\\\"control-label\\\">Distancia Recorrida *</label>\\n                    <input type=\\\"number\\\" id=\\\"distanciarespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n                      #ctrltdistanciarespuesta=\\\"ngModel\\\" [(ngModel)]=\\\"irespuesta.distanciareportada\\\"\\n                      name=\\\"distanciarespuesta\\\" required\\n                      (blur)=\\\"registrarauditoria('distanciarespuesta','Editar',irespuesta.distanciareportada)\\\">\\n                    <small *ngIf=\\\"ctrltdistanciarespuesta.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Escriba la distancia recorrida. </small>\\n\\n                    <div\\n                      *ngIf=\\\"(ctrltdistanciarespuesta.invalid) && (ctrltdistanciarespuesta.dirty || ctrltdistanciarespuesta.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrltdistanciarespuesta.errors.required\\\">\\n                        Distancia recorrida requerida.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-lg-12\\\">\\n                    <h4><i class=\\\" ti-ruler-pencil\\\"></i> Materiales </h4>\\n                    <div class=\\\"table-responsive\\\">\\n                      <table class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\">\\n                        <thead>\\n                          <tr>\\n                            <th>Articulo</th>\\n                            <th>Cantidad</th>\\n                            <th>Pedir</th>\\n                            <th></th>\\n                          </tr>\\n                        </thead>\\n                        <tfoot>\\n                          <tr>\\n                            <th> <input [(ngModel)]=\\\"articulodesc\\\" [typeahead]=\\\"dataSource_art\\\" [typeaheadAsync]=\\\"true\\\"\\n                                (typeaheadLoading)=\\\"changeTypeaheadLoading_art($event)\\\"\\n                                (typeaheadOnSelect)=\\\"typeaheadOnSelect_art($event)\\\" [typeaheadScrollable]=\\\"true\\\"\\n                                [typeaheadOptionsLimit]=\\\"100\\\" typeaheadOptionField=\\\"descripcion\\\" class=\\\"form-control \\\"\\n                                placeholder=\\\"Articulo\\\" name=\\\"articulo\\\" autocomplete=\\\"off\\\" style=\\\"min-width: 120px;\\\">\\n                              <div *ngIf=\\\"typeaheadLoading_art\\\">Cargando..</div>\\n\\n\\n                            </th>\\n                            <th> <input type=\\\"number\\\" id=\\\"Cantidad\\\" class=\\\"form-control\\\" placeholder=\\\"Cantidad\\\"\\n                                [(ngModel)]=\\\"materialnew.cantidad\\\" name=\\\"cantidad\\\"></th>\\n                            <th>\\n                              <div class=\\\"custom-control custom-checkbox mr-sm-2\\\">\\n                                <input class=\\\"custom-control-input\\\" type=\\\"checkbox\\\" value=\\\"check\\\" id=\\\"checkbox_pedir\\\"\\n                                  name=\\\"checkbox_pedir\\\" (change)=\\\"FieldsChange($event)\\\">\\n                                <label class=\\\"custom-control-label\\\" for=\\\"checkbox_pedir\\\"></label>\\n                              </div>\\n                            </th>\\n                            <th><button type=\\\"button\\\" class=\\\"btn btn-info\\\" (click)=\\\"agregarmaterial()\\\"><i\\n                                  class=\\\"fa fa-plus\\\"></i></button></th>\\n                          </tr>\\n                        </tfoot>\\n                        <tbody>\\n                          <tr *ngFor=\\\"let itemmat of  irespuesta.materiales \\\">\\n                            <td>{{itemmat.nombre}}</td>\\n                            <td>{{itemmat.cantidad}}</td>\\n                            <td></td>\\n                            <td> <a class=\\\"preview\\\" href=\\\"#\\\" [swal]=\\\"deleteSwal\\\"> <i class=\\\"icon-trash\\\"></i></a>\\n                              <swal #deleteSwal title=\\\"Eliminar Material\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                (confirm)=\\\"deletematerial(itemmat)\\\">\\n                              </swal>\\n                            </td>\\n                          </tr>\\n                        </tbody>\\n                      </table>\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-lg-12\\\">\\n                    <h4><i class=\\\" ti-pencil\\\"></i> Firma Cliente <button type=\\\"button\\\" (click)=\\\"abrirfirma()\\\"\\n                        class=\\\"btn btn-success\\\"><i class=\\\"ti-pencil-alt\\\"></i></button></h4>\\n                    <img id=\\\"image\\\" *ngIf=\\\"irespuesta.firmacliente\\\" src=\\\"{{irespuesta.firmacliente}}\\\"\\n                      class=\\\"img-responsive\\\" alt=\\\"Firma Cliente\\\">\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-12\\\">\\n                    <label class=\\\"control-label\\\">Dni Firma Cliente *</label>\\n                    <input type=\\\"text\\\" id=\\\"dnicliente\\\" class=\\\"form-control\\\" placeholder=\\\"Dni CLiente\\\"\\n                      #ctrltdnicliente=\\\"ngModel\\\" [(ngModel)]=\\\"irespuesta.dnicliente\\\" name=\\\"dnicliente\\\" required>\\n                    <small *ngIf=\\\"ctrltdnicliente.errors\\\" class=\\\"messages text-danger\\\">\\n                      * requerida\\n                    </small>\\n                    <small class=\\\"form-control-feedback\\\">Escriba el dni del cliente que firma. </small>\\n\\n                    <div\\n                      *ngIf=\\\"(ctrltdnicliente.invalid) && (ctrltdnicliente.dirty || ctrltdnicliente.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n                      <div *ngIf=\\\"ctrltdnicliente.errors.required\\\">\\n                        Dni del cliente que firma requerida.\\n                      </div>\\n\\n\\n                    </div>\\n                  </div>\\n                  <div class=\\\"form-group  col-lg-12\\\">\\n                    <label class=\\\"control-label\\\">Observaciones Cliente</label>\\n\\n                    <textarea class=\\\"form-control\\\" rows=\\\"5\\\" maxlength=\\\"500\\\" [(ngModel)]=\\\"irespuesta.observacioncli\\\"\\n                      name=\\\"observacioncli\\\"  #observacioncli=\\\"ngModel\\\"></textarea>\\n                    <small class=\\\"form-control-feedback\\\">Escriba las observaciones del cliente.  {{500-(irespuesta.observacioncli==undefined?0:irespuesta.observacioncli.length)}} </small>\\n                    <div *ngIf=\\\"observacioncli.invalid && (observacioncli.dirty || observacioncli.touched ||validform)\\\"\\n                      class=\\\"text-danger\\\">\\n\\n\\n                      <div *ngIf=\\\"observacioncli.errors.maxlength\\\">\\n                        La observación debe contener 500 caracteres.\\n                      </div>\\n\\n\\n                    </div>\\n\\n\\n                  </div>\\n                  <div class=\\\"col-lg-12\\\">\\n                    <hr class=\\\"m-t-0\\\">\\n                  </div>\\n                  <div class=\\\"form-actions\\\">\\n                    <button type=\\\"submit\\\" class=\\\"btn btn-success\\\" [disabled]=\\\"disablesave\\\">\\n                      <i class=\\\"fa fa-check\\\"></i>\\n                      Guardar Parte de Trabajo</button>\\n\\n                    <button type=\\\"button\\\" class=\\\"btn btn-inverse\\\" routerLink=\\\"/incidencia\\\">Cancelar</button>\\n                    <br><small *ngIf=\\\"txterror\\\" class=\\\"form-control-feedback text-danger\\\">{{txterror}} </small>\\n                  </div>\\n                </form>\\n\\n              </div>\\n              <div>\\n                <hr class=\\\"m-t-0\\\">\\n              </div>\\n\\n              <div class=\\\"card-body\\\">\\n                <h4><i class=\\\"fa fa-paperclip m-r-10 m-b-10\\\"></i> Adjuntos <span>({{item.imagenes.length}})</span></h4>\\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-md-12 form-group   \\\" *ngIf=\\\"item.siniestro\\\">\\n                    <label class=\\\"control-label\\\">Tipo imagen siniestro</label>\\n                    <select class=\\\"form-control custom-select\\\" (change)=\\\"selecttipofoto()\\\"\\n                      [(ngModel)]=\\\"tipofotosiniestro\\\" name=\\\"ctrlestadorespuesta\\\">\\n                      <option value=\\\"\\\">Seleccione</option>\\n                      <option value=\\\"AR\\\">Antes de la reparación</option>\\n                      <option value=\\\"DR\\\">Despues de la reparación</option>\\n\\n                    </select></div>\\n                  <div class=\\\"col-md-12 my-drop-zone\\\" ng2FileDrop [ngClass]=\\\"{'nv-file-over': hasBaseDropZoneOver}\\\"\\n                    (fileOver)=\\\"fileOverBase($event)\\\" [uploader]=\\\"uploader\\\">\\n                    <label for=\\\"file-upload\\\" class=\\\"m-3\\\">\\n\\n                      <i class=\\\"ti-files fa-5x\\\"></i>\\n                    </label>\\n                    <div class=\\\"card-body\\\">\\n\\n                    </div>\\n                    <input type=\\\"file\\\" id=\\\"file-upload\\\" multiple ng2FileSelect (fileSelected)=\\\"fileOverBase($event)\\\"\\n                      [uploader]=\\\"uploader\\\" />\\n\\n                  </div>\\n                  <div class=\\\"col-md-12\\\" *ngIf=\\\"uploader.isUploading \\\">\\n                    <div class=\\\"alert alert-info alert-dismissible mt-8 myAlert-top\\\" role=\\\"alert\\\">\\n                      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span\\n                          aria-hidden=\\\"true\\\">&times;</span></button>\\n                      Cargando Archivo ...\\n\\n                      <div class=\\\"progress-bar bg-warning\\\" [ngStyle]=\\\"{ 'width': uploader.progress + '%' }\\\"\\n                        style=\\\" height:6px;\\\" role=\\\"progressbar\\\"> <span class=\\\"sr-only\\\">60% Complete</span> </div>\\n                    </div>\\n                  </div>\\n                  <div class=\\\"col-md-12\\\">\\n                    <ul class=\\\"el-info list-inline\\\">\\n                      <li *ngFor=\\\"let imgprod of item.imagenes;\\\" class=\\\"col-lg-3 text-truncate\\\"\\n                        title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                        <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                          href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                          <i class=\\\" ti-file\\\"></i>{{imgprod.tiposiniestro}}-\\n                          {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a>\\n                        <a href=\\\"#\\\" [swal]=\\\"deletefileSwal\\\" title=\\\"Borrar archivo\\\"><i class=\\\"ti-trash\\\"></i></a>\\n                        <swal #deletefileSwal title=\\\"Eliminar Archivo\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                          type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                          (confirm)=\\\"eliminar_imagen(imgprod)\\\">\\n                        </swal>\\n                      </li>\\n\\n                    </ul>\\n                  </div>\\n\\n\\n\\n                </div>\\n\\n              </div>\\n            </div>\\n\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <!-- ============================================================== -->\\n    <!-- End Page Content -->\\n    <!-- ============================================================== -->\\n    <!-- ============================================================== -->\\n    <!-- Right sidebar -->\\n    <!-- ============================================================== -->\\n    <!-- .right-sidebar -->\\n    <div class=\\\"right-sidebar\\\">\\n\\n      <div class=\\\"slimscrollright\\\">\\n        <div class=\\\"rpanel-title\\\"><i class=\\\"ti-comments\\\"></i> Comentarios</div>\\n        <div class=\\\"r-panel-body\\\">\\n          <div class=\\\"list-group\\\">\\n            <a href=\\\"javascript:void(0)\\\"\\n              class=\\\"list-group-item list-group-item-action flex-column align-items-start active\\\">\\n\\n              <form class=\\\" m-t-40\\\" #comForm=\\\"ngForm\\\" (ngSubmit)=\\\"addcomentario()\\\">\\n                <div class=\\\"form-group\\\">\\n                  <label>Comentario *</label>\\n\\n                  <textarea class=\\\"form-control\\\" name=\\\"txtcomment\\\" rows=\\\"5\\\" #txtcomment=\\\"ngModel\\\" required\\n                    [(ngModel)]=\\\"comentarionew.comentario\\\"></textarea>\\n                  <div *ngIf=\\\"txtcomment.invalid && (txtcomment.dirty || txtcomment.touched ||validform)\\\"\\n                    class=\\\"alert alert-danger\\\">\\n\\n                    <div *ngIf=\\\"txtcomment.errors.required\\\">\\n                      Requerido.\\n                    </div>\\n                    <div *ngIf=\\\"txtcomment.errors.minlength\\\">\\n                      Name must be at least 4 characters long.\\n                    </div>\\n                    <div *ngIf=\\\"txtcomment.errors.forbiddenName\\\">\\n                      Name cannot be Bob.\\n                    </div>\\n\\n                  </div>\\n                </div>\\n\\n                <button type=\\\"submit\\\" [disabled]=\\\"comForm.invalid\\\"\\n                  class=\\\"btn btn-success waves-effect waves-light m-r-10\\\">\\n                  <i class=\\\"fa fa-plus\\\"></i>\\n                  Agregar</button>\\n              </form>\\n\\n\\n            </a>\\n            <a href=\\\"javascript:void(0)\\\" *ngFor=\\\"let commentitm of item.comentarios;\\\"\\n              class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\">\\n              <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                <h5 class=\\\"mb-1\\\"><i class=\\\"ti-comment\\\"></i> {{commentitm.user.name}}</h5>\\n                <small class=\\\"text-muted\\\">hace {{calculardias(commentitm.created_at)}} dias.</small>\\n              </div>\\n              <p class=\\\"mb-1\\\">{{commentitm.comentario}}</p>\\n              <small class=\\\"text-muted\\\">{{commentitm.created_at}}</small>\\n            </a>\\n\\n          </div>\\n        </div>\\n        <div class=\\\"rpanel-title\\\"><i class=\\\"ti-link\\\"></i> Partes de Trabajo</div>\\n        <div class=\\\"r-panel-body\\\">\\n          <div class=\\\"list-group b-0 mail-list\\\">\\n            <a *ngFor=\\\"let ptrab of item.partestrabajo;\\\" (click)=\\\"verparte(ptrab)\\\" class=\\\"list-group-item\\\"><span\\n                class=\\\"fa fa-circle text-warning m-r-10\\\"></span>Parte # {{ptrab.id}} Creación {{ptrab.created_at}} <br>\\n              Técnico {{ptrab.usuario_respuesta.name}}</a>\\n\\n          </div>\\n        </div>\\n        <div class=\\\"rpanel-title\\\"><i class=\\\"ti-link\\\"></i> Incidencias Relacionadas</div>\\n        <div class=\\\"r-panel-body\\\">\\n          <div class=\\\"list-group b-0 mail-list\\\">\\n            <a *ngFor=\\\"let ptrab of item.incidentes_relacionados;\\\" routerLink=\\\"/incidencia/edit/{{ptrab.id}}\\\"\\n              target=\\\"_blank\\\" class=\\\"list-group-item\\\"><span class=\\\"fa fa-circle text-success m-r-10\\\"></span>{{ptrab.id}}\\n              {{ptrab.titulo}} {{ptrab.created_at}}</a>\\n          </div>\\n        </div>\\n\\n\\n      </div>\\n    </div>\\n    <!-- ============================================================== -->\\n    <!-- End Right sidebar -->\\n    <!-- ============================================================== -->\\n  </div>\\n  <!-- ============================================================== -->\\n  <!-- End Container fluid  -->\\n  <!-- ============================================================== -->\\n</div>\\n\\n<swal #createSwal title=\\\"Firma Cliente\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\" [showCancelButton]=\\\"false\\\"\\n  [showConfirmButton]=\\\"false\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Agregar'\\\" customClass=\\\"swal-wide\\\"\\n  showCloseButton=\\\"true\\\">\\n  <div *swalPartial>\\n    <app-singuser (onvaluechanged)=\\\"onvaluechangedfirma($event)\\\" (oncancel)=\\\"cancelarfirma($event)\\\"></app-singuser>\\n  </div>\\n</swal>\\n<swal #partetrabajoSwal title=\\\"Firma Cliente\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\" [showCancelButton]=\\\"false\\\"\\n  [showConfirmButton]=\\\"false\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Agregar'\\\" customClass=\\\"swal-wide\\\"\\n  showCloseButton=\\\"true\\\">\\n  <div *swalPartial>\\n\\n    <div class=\\\"card-body \\\">\\n      <h4><i class=\\\"ti-write\\\"></i> Parte de trabajo <a\\n          href=\\\"{{apiurl+'storage/respuestas/resp_'+respuestaview.id+'.pdf'}}\\\" download>Descargar Pdf</a></h4>\\n      <form action=\\\"#\\\" class=\\\"row\\\" id=\\\"form-rta\\\">\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">N° {{respuestaview.manual?'Manual':''}}</label>\\n          <input type=\\\"text\\\" id=\\\"numerorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"numero Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.id\\\" name=\\\"numerorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">Técnico</label>\\n          <input type=\\\"text\\\" id=\\\"tecnicorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tecnico Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.usuario_respuesta.name\\\" name=\\\"tecnicorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">Fecha Registro</label>\\n          <input type=\\\"text\\\" id=\\\"fecharespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"fecha Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.created_at\\\" name=\\\"fecharespuesta\\\">\\n\\n        </div>\\n\\n\\n        <div class=\\\"form-group col-lg-12\\\">\\n          <label class=\\\"control-label\\\">Parte de trabajo de la incidencia</label>\\n\\n          <ckeditor [(ngModel)]=\\\"respuestaview.descripcion\\\" #myckeditor=\\\"ngModel\\\" name=\\\"rtackeditor\\\"\\n            [config]=\\\"ckeConfig\\\" debounce=\\\"500\\\">\\n          </ckeditor>\\n\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Estado Parte de trabajo *</label>\\n          <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"respuestaview.estadorespuesta\\\"\\n            name=\\\"ctrlestadorespuesta\\\" required>\\n            <option value=\\\"\\\">Seleccione</option>\\n            <option value=\\\"TE\\\">Terminada</option>\\n            <option value=\\\"PM\\\">Pendiente por material</option>\\n            <option value=\\\"PC\\\">Pendiente por restricciones de cliente.</option>\\n            <option value=\\\"PS\\\">Pendiente por seguridad</option>\\n          </select>\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Tiempo Solución (Horas)</label>\\n          <input type=\\\"number\\\" id=\\\"tiemporespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.tiemporespuesta\\\" name=\\\"tiemporespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Tiempo Recorrido (Horas)</label>\\n          <input type=\\\"number\\\" id=\\\"tiemporecorrisorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.horasdistancia\\\" name=\\\"tiemporecorrisorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Distancia (Kms)</label>\\n          <input type=\\\"number\\\" id=\\\"distanciarespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.distanciareportada\\\" name=\\\"distanciarespuesta\\\">\\n\\n        </div>\\n\\n      </form>\\n    </div>\\n  </div>\\n</swal>\\n\\n<swal #cierremanualSwal title=\\\"Cierre manual Incidencia\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\"\\n  [showCancelButton]=\\\"true\\\" [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Guardar'\\\"\\n  showCloseButton=\\\"true\\\" (confirm)=\\\"add(true)\\\">\\n  <div *swalPartial>\\n\\n    <div class=\\\"card-body \\\">\\n      <h4><i class=\\\"ti-write\\\"></i> Cierre manual Incidencia</h4>\\n      <form action=\\\"#\\\" class=\\\"row\\\" id=\\\"form-rta\\\">\\n        <div class=\\\"form-group col-lg-12\\\">\\n          <label class=\\\"control-label\\\">N° Parte</label>\\n          <select id=\\\"numerorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"N° Parte\\\" name=\\\"numerorespuesta\\\"\\n            [(ngModel)]=\\\"item.no_parte_manual\\\">\\n            <option value=\\\"\\\">Seleccione</option>\\n            <option *ngFor=\\\"let ptrab of item.partestrabajo\\\" [value]=\\\"ptrab.id\\\">\\n              {{ ptrab.id }} Creación {{ptrab.created_at}} {{ptrab.manual?'Parte Manual':''}}\\n\\n            </option>\\n          </select>\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-12\\\">\\n          <label class=\\\"control-label\\\">Observaciones</label>\\n          <textarea class=\\\"form-control\\\" placeholder=\\\"Observaciones\\\" name=\\\"tecnicorespuesta\\\"\\n            [(ngModel)]=\\\"item.obs_parte_manual\\\"></textarea>\\n\\n        </div>\\n\\n\\n\\n\\n      </form>\\n    </div>\\n  </div>\\n</swal>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-edit/incidencia-edit.component.html\n// module id = ./src/app/incidencias/incidencia-edit/incidencia-edit.component.html\n// module chunks = incidencias.module","import { Component, OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { IncidenciaService } from './../incidencia.service';\nimport { Ng4LoadingSpinnerService } from 'ng4-loading-spinner';\nimport { NotificationService } from './../../shared';\nimport { LocalDataService } from './../../shared';\nimport { tipocomponente } from '../../viewmodel/tipocomponente';\nimport { Contrato } from '../../viewmodel/contrato';\nimport { Observable } from 'rxjs';\nimport { ClienteService } from '../../clientes/cliente.service';\nimport { TypeaheadMatch } from 'ngx-bootstrap/typeahead';\nimport { listLocales } from 'ngx-bootstrap/chronos';\nimport { BsDatepickerConfig, BsLocaleService } from 'ngx-bootstrap/datepicker';\nimport { mergeMap } from 'rxjs/operators';\nimport { TipocontratoService } from '../../tipocontrato/tipocontrato.service';\nimport { EstacionservicioService } from '../../estacionservicio/estacionservicio.service';\nimport { estacionservicio } from '../../viewmodel/estacionservicio';\nimport { tipocontrato } from '../../viewmodel/tipocontrato';\nimport { SwalComponent } from '@toverux/ngx-sweetalert2';\nimport { Componente } from '../../viewmodel/Componente';\nimport { ComponenteActuacion } from '../../viewmodel/componente_actuacion';\nimport { Incidencia } from '../../viewmodel/incidencia';\nimport { CategoriaIncidente } from '../../viewmodel/categoriaincidente';\nimport { FileUploader, FileLikeObject, FileItem, ParsedResponseHeaders } from 'ng2-file-upload';\nimport { environment } from '../../../environments/environment';\nimport * as moment from 'moment';\nimport { ESTADOINCIDENCIAS } from '../../mocks/estadoincidente';\nimport { Respuesta } from '../../viewmodel/respuesta';\nimport { RespuestasService } from '../../respuesta/respuestas.service';\nimport { ArticuloService } from '../../articulo/articulo.service';\nimport { MaterialRespuesta } from '../../viewmodel/MaterialRespuesta';\nimport { ComentarioIncidente } from '../../viewmodel/comentario_incidente';\nimport { ComentarioincidenteService } from '../../comentarioincidente/comentarioincidente.service';\nimport { Tecnicoadicional } from '../../viewmodel/tecnicoadicional';\nimport { Candeactivateguard } from '../../shared/can-deactivate-guard/can-deactivate-guard.service';\nimport { isNgTemplate } from '@angular/compiler';\nimport { ArchivouploadService } from '../../archivoupload/archivoupload.service';\nimport { LocationService } from '../../shared/location/location.service';\nimport { AuditoriaService } from '../../shared/auditoria/auditoria.service';\nimport { ProyectosService } from '../../proyectos/proyectos.service';\ndeclare var $;\n\n@Component({\n  selector: 'app-incidencia-edit',\n  templateUrl: './incidencia-edit.component.html',\n  styleUrls: ['./incidencia-edit.component.css']\n})\nexport class IncidenciaEditComponent implements OnInit, AfterViewInit {\n  public uploader: FileUploader = new FileUploader({\n    url: environment.apiUrl + 'api/archivoincidencia',\n    authTokenHeader: \"Authorization\",\n    authToken: \"Bearer \" + localStorage.getItem('access_token'),\n    isHTML5: true,\n    autoUpload: true,\n    maxFileSize: 5 * 1024 * 1024,\n\n  });\n\n  item: Incidencia;\n  /*autocomplete clicnte */\n  asyncSelected: string;\n  typeaheadLoading: boolean;\n  typeaheadNoResults: boolean;\n  dataSource: Observable<any>;\n  /*autocomplete articulo */\n  asyncSelected_art: string;\n  typeaheadLoading_art: boolean;\n  typeaheadNoResults_art: boolean;\n  dataSource_art: Observable<any>;\n\n  tipocontrato: any;\n  estacionservicio: any;\n  name = 'ng2-ckeditor';\n  ckeConfig: any;\n  ckeConfigdesc: any;\n  ckeConfigcom: any;\n  mycontent: string;\n  newcompo: estacionservicio;\n  tipocontratosel: tipocontrato;\n  componentesel: Componente;\n  actuacionesNew: ComponenteActuacion;\n  prioridades: CategoriaIncidente[];\n  irespuesta: Respuesta;\n  estadoincidente = ESTADOINCIDENCIAS;\n  apiurl: any;\n  edit: boolean;\n  txterror = \"\";\n  disablesave = false;\n  @ViewChild('myckeditor') ckeditor: any;\n  @ViewChild('myckeditordesc') ckeditordesc: any;\n  @ViewChild('rtackeditor') rtackeditor: any;\n  @ViewChild('createSwal') private createSwal: SwalComponent;\n  @ViewChild('partetrabajoSwal') private partetrabajoSwal: SwalComponent;\n  @ViewChild('cierremanualSwal') private cierremanualSwal: SwalComponent;\n  @ViewChild('ctrlform') ctrlform: any;\n  @ViewChild('ctrlformrta') ctrlformrta: any;\n  currentPrioridad=null;\n  articulodesc: any;\n  materialnew: MaterialRespuesta;\n  comentarionew: ComentarioIncidente;\n  respuestaview: Respuesta;\n  tecnicoadicionalnew: Tecnicoadicional;\n  usuariostec = [];\n  tipofotosiniestro = '';\n  validform: boolean;\n  usuariostecparte: any;\n  geolocationPosition: any;\n  user: any;\n\n  proyects : Array<any>;\n\n  selectProyect: any;\n  showTipoPendienteMaterial : boolean;\n  showGarantiaVentaMaterialP : boolean;\n\n  constructor(\n    private spinnerService: Ng4LoadingSpinnerService,\n    private incidenciaService: IncidenciaService,\n    private router: Router,\n    private notificationService: NotificationService,\n    private localDataService: LocalDataService,\n    private clienteService: ClienteService,\n    private localeService: BsLocaleService,\n    private tipocontratoService: TipocontratoService,\n    private estacionservicioService: EstacionservicioService,\n    private route: ActivatedRoute,\n    private respuestaService: RespuestasService,\n    private archivouploadService: ArchivouploadService,\n    private articuloService: ArticuloService,\n    private comentarioincidenteService: ComentarioincidenteService,\n    private candeactivateguard: Candeactivateguard,\n    private locationService: LocationService,\n    private auditoriaService: AuditoriaService,\n    private proyectosService: ProyectosService\n  ) {\n\n    this.localeService.use('es');\n    this.candeactivateguard.setedit(true);\n    this.dataSource = Observable.create((observer: any) => {\n      // Runs on every search\n      this.clienteService.gettoken(this.item.razonsocial).subscribe((value) => {\n        observer.next(value.data);\n\n      });\n    });\n    this.edit = true;\n\n    this.dataSource_art = Observable.create((observer: any) => {\n      // Runs on every search\n      this.articuloService.gettoken(this.articulodesc).subscribe((value) => {\n        observer.next(value.data);\n\n      });\n    });\n    this.apiurl = environment.apiUrl;\n    this.tecnicoadicionalnew = new Tecnicoadicional();\n    this.tecnicoadicionalnew.id_usuario = -1;\n\n  }\n\n  public hasBaseDropZoneOver: boolean = false;\n  public hasAnotherDropZoneOver: boolean = false;\n  ngOnInit() {\n\n    this.ckeConfig = {\n      allowedContent: false,\n      extraPlugins: 'divarea',\n      forcePasteAsPlainText: true,\n\n    };\n\n    this.ckeConfigdesc = {\n      allowedContent: false,\n      extraPlugins: 'divarea',\n      forcePasteAsPlainText: true\n    };\n    this.ckeConfigcom = {\n      allowedContent: false,\n      extraPlugins: 'divarea',\n      forcePasteAsPlainText: true,\n      toolbar: [{ name: 'basicstyles', items: ['Bold', 'Italic', 'Strike'] }],\n    };\n    this.item = new Incidencia;\n    this.item.cliente_id = '';\n    this.item.estacion_servicio_id = -1;\n    this.item.categoria_incidente_id = -1;\n    this.item.imagenes = [];\n    this.cargarTipoCOntrato();\n    this.cargarEstacionServicio();\n    this.newcompo = new estacionservicio();\n    this.prioridades = [];\n    this.irespuesta = new Respuesta();\n    this.materialnew = new MaterialRespuesta();\n    this.irespuesta.materiales = [];\n    this.irespuesta.manual = false;\n    this.getById();\n    this.user = this.localDataService.getLocalData('userInfo');\n\n    this.irespuesta.estadorespuesta = \"\";\n    this.uploader.onAfterAddingFile = (file: any) => { file.withCredentials = false; };\n    this.uploader.onErrorItem = (item, response, status, headers) => this.onErrorItem(item, response, status, headers);\n    this.uploader.onSuccessItem = (item, response, status, headers) => this.onSuccessItem(item, response, status, headers);\n    this.uploader.onWhenAddingFileFailed = (fileItem) => {\n      this.notificationService.onError('La imagen no se pudo cargar, '\n        + 'el tamaño maximo es de 5MB y el formato es png o jpg, INtentelo nuevamente');\n    };\n    this.comentarionew = new ComentarioIncidente();\n\n  }\n\n  onChange($event: any): void {\n    console.log(\"onChange\");\n\n  }\n\n  getById() {\n    this.spinnerService.show();\n    const $id = this.route.snapshot.paramMap.get('id');\n    this.uploader.options.additionalParameter = { incidencia_id: $id, tipofotosiniestro: this.tipofotosiniestro };\n    this.irespuesta.id_incidencia = $id;\n    this.incidenciaService.getById($id)\n      .subscribe((response) => {\n        this.item = response.data;\n        this.usuariostecparte = response.data.usuariostecparte;\n        this.usuariostec = this.removeMainUser(response.data.usuariostec, this.item.usuario_asignado.id);\n\n        this.edit = response.data.mismo;\n        if (response.data.mismo && this.item.estado != \"TRA\" && this.item.estado != \"PTE\" && this.item.estado != \"CLO\") {\n          this.candeactivateguard.setedit(false);\n          this.router.navigateByUrl('incidencia');\n        }\n        if (this.item.tiempo && this.item.estado == 'TRA') {\n          this.irespuesta.tiemporespuesta = Math.round((this.item.tiempo / 60 / 60) * 100) / 100;\n          this.irespuesta.distanciareportada = Math.round((this.item.distanciacalculada / 1000) * 100) / 100;\n          this.irespuesta.horasdistancia = Math.round((this.item.t_deplazamiento / 60 / 60) * 100) / 100;\n        }\n        if (!moment(this.item.fecha_vencimiento, 'DD/MM/YYYY').isValid()) {\n          this.item.fecha_vencimiento = moment(this.item.fecha_vencimiento).toDate();\n        }\n\n\n        this.cargarEstacionServicio();\n        if (response.data.contrato_componente != null) {\n          this.prioridades = response.data.contrato_componente.contrato.tipocontrato.categoriaincidentes;\n          this.currentPrioridad=this.prioridades.find((it)=>{\n            return it.id==this.item.categoria_incidente_id;\n          })\n        }\n        this.cargarProyectos();\n\n        this.spinnerService.hide();\n      });\n  }\n  cargarTipoCOntrato() {\n\n    this.tipocontratoService.get(1).subscribe((value) => {\n      this.tipocontrato = value.data;\n\n    });\n\n  }\n\n  /**\n   * It takes an array of objects and an id, and returns a new array of objects with the object that\n   * has the matching id removed\n   * @param data - the array of objects\n   * @param id - the id of the user to be removed\n   * @returns a new array with the user removed.\n   */\n  removeMainUser(data, id) {\n    return data.filter(user => user.id != id);\n  }\n\n  cargarEstacionServicio() {\n    let empresa = 0;\n    this.spinnerService.show();\n    empresa = this.localDataService.getLocalData('empresaSeleccionada').id;\n    this.estacionservicioService.getbycliente(empresa, this.item.cliente_id).subscribe((value) => {\n      this.estacionservicio = value.data;\n      if (this.item.estacion_servicio_id != -1) {\n        let result = this.estacionservicio.filter(comp => comp.id.toString() == this.item.estacion_servicio_id);\n\n\n        if (result.length > 0) {\n          this.newcompo = result[0];\n          this.quitarobservaciones();\n          this.setobservacioncontrato();\n        }\n      }\n      else {\n        this.newcompo = new estacionservicio();\n\n      }\n      this.spinnerService.hide();\n    });\n\n  }\n  setobservacioncontrato() {\n    this.newcompo.componentes.forEach(element => {\n      if (element.contratos.length > 0) {\n        element.contratos.forEach(contrato => {\n          if (contrato.id == this.item.contrato_componente_id) {\n            element.observacionescontrato = contrato.contrato.observaciones;\n            element.archivos = contrato.contrato.archivos;\n          }\n        });\n\n      }\n\n    });\n  }\n\n  onselectEstacionServicio(estacionserviciosel) {\n    if (estacionserviciosel.target.value != '-1') {\n      let result = this.estacionservicio.filter(comp => comp.id.toString() == estacionserviciosel.target.value);\n\n\n      if (result.length > 0) {\n        this.newcompo = result[0];\n      }\n    }\n    else {\n      this.newcompo = new estacionservicio();\n\n    }\n\n\n  }\n  onselecttipocontrato(tipocontratovalue) {\n\n    let result;\n    result = this.tipocontrato.filter(comp => comp.id.toString() == tipocontratovalue.target.value);\n\n\n    if (result.length > 0) {\n      this.tipocontratosel = result[0];\n    }\n  }\n\n  add(cierreManual) {\n    this.validform = false;\n    if (this.ctrlform.form.valid == false) {\n      this.validform = true;\n      return false;\n    }\n    if(this.item.proyecto_id == '-1'){\n      this.validform = true;\n      return false;\n    }\n    this.disablesave = true;\n    this.txterror = \"\";\n    this.spinnerService.show();\n    this.candeactivateguard.setedit(false);\n    this.item.empresa_id = this.localDataService.getLocalData('empresaSeleccionada').id;\n    this.item.usuario_id = this.localDataService.getLocalData('userInfo').id;\n    this.item.estacion_servicio_id = this.newcompo.id;\n    this.item.manual = cierreManual;\n    if (this.item.fecha_programacion != undefined && this.item.fecha_programacion != null && this.item.fecha_programacion != '') {\n      if (this.item.hora_programacion != undefined && this.item.hora_programacion != null\n        && this.item.hora_programacion != '') {\n\n        if (!moment(this.item.fecha_programacion, 'DD/MM/YYYY').isValid()) {\n          this.item.fecha_programacion = moment(this.item.fecha_programacion).format(\"YYYY-MM-DD\");\n        }\n        else {\n          this.item.fecha_programacion = moment(this.item.fecha_programacion, 'DD/MM/YYYY').format(\"YYYY-MM-DD\");\n        }\n        this.item.fecha_programacion = moment(this.item.fecha_programacion + ' ' + this.item.hora_programacion).format(\"DD-MM-YYYY HH:mm:ss\");\n      } else {\n\n        if (!moment(this.item.fecha_programacion, 'DD/MM/YYYY').isValid()) {\n          this.item.fecha_programacion = moment(this.item.fecha_programacion).format(\"YYYY-MM-DD\");\n        }\n        else {\n          this.item.fecha_programacion = moment(this.item.fecha_programacion, 'DD/MM/YYYY').format(\"YYYY-MM-DD\");\n        }\n        this.item.fecha_programacion = moment(this.item.fecha_programacion + ' ' + '00:00:00').format(\"DD-MM-YYYY HH:mm:ss\");\n      }\n    }\n    this.incidenciaService.update(this.item)\n      .subscribe((value) => {\n        if (value.data.errorusu == 1) {\n          this.notificationService.onError('No se puede asignar el usuario por que es tecnico adicional');\n        } else {\n          this.notificationService.onSuccess('Incidencia Actualizada con exito.');\n          this.router.navigateByUrl('incidencia');\n        }\n        this.registrarauditoria('Actualizar incidente', 'Guardar', this.item.id);\n        this.spinnerService.hide();\n\n        this.disablesave = false;\n      }, (err) => {\n        this.disablesave = false;\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.txterror = 'El Contrato ya existe';\n          this.notificationService.onError('El Contrato ya existe');\n        } else if (err.status_code == 400) {\n          this.txterror = err.errors.message;\n          this.notificationService.onError(err.errors.message);\n        } else {\n          this.txterror = 'Se ha producido un error.';\n          this.notificationService.onError('Se ha producido un error. <br>');\n        }\n      });\n  }\n  cerrarmanual() {\n    this.cierremanualSwal.show();\n    return false;\n  }\n  changeTypeaheadLoading(e: boolean): void {\n\n    this.typeaheadLoading = e;\n  }\n\n  typeaheadOnSelect(e: TypeaheadMatch): void {\n    this.item.cliente_id = e.item.codigo_cliente;\n    this.cargarEstacionServicio();\n  }\n\n  cargarProyectos(){\n    this.proyectosService.getproybycliente(this.item.cliente_id).subscribe(\n      res =>{\n        this.proyects = res.data;\n        this.selectProyect = this.proyects.find( p => p.codigo_proyecto === this.item.proyecto_id)\n      },\n      err => {\n\n      }\n    )\n  }\n\n  onChangeProyect(proyect){\n    if(proyect && proyect != -1){\n      this.item.proyecto_id = proyect.codigo_proyecto;\n      this.item.proyecto_description = proyect.descripcion;\n    }else{\n      this.item.proyecto_id = null;\n      this.item.proyecto_description = null;\n    }\n    \n  }\n\n  changeTypeaheadLoading_art(e: boolean): void {\n\n    this.typeaheadLoading_art = e;\n  }\n\n  typeaheadOnSelect_art(e: TypeaheadMatch): void {\n    this.materialnew.nombre = e.item.descripcion;\n    this.materialnew.referencia = e.item.codigo_articulo;\n  }\n  agregarmaterial() {\n    this.irespuesta.materiales.push(this.materialnew);\n    this.materialnew = new MaterialRespuesta();\n    this.articulodesc = \"\";\n  }\n  selectComponent(comp) {\n    if (comp.select) {\n      comp.select = false;\n    } else {\n      comp.select = true;\n    }\n    return false;\n  }\n  modalactuacion(item) {\n    this.componentesel = item;\n    if (!this.componentesel.actuaciones) {\n      this.componentesel.actuaciones = [];\n    }\n\n    this.createSwal.show();\n    return false;\n  }\n  agregaractuacion() {\n    this.componentesel.actuaciones.push(this.actuacionesNew);\n    this.actuacionesNew = new ComponenteActuacion();\n    this.actuacionesNew.tipo = '-1';\n  }\n  onvaluechanged(value) {\n    if (value.index === undefined || value.index === '') {\n      this.actuacionesNew.dias = value.dias;\n    } else {\n      this.componentesel.actuaciones[value.index].dias = value.dias;\n    }\n\n  }\n  clickcontrato(contrato, row) {\n    this.quitarobservaciones();\n    this.prioridades = contrato.contrato.tipocontrato.categoriaincidentes;\n    this.item.contrato_componente_id = contrato.id;\n    row.observacionescontrato = contrato.contrato.observaciones;\n    row.archivos = contrato.contrato.archivos;\n  }\n  quitarobservaciones() {\n    this.newcompo.componentes.forEach(element => {\n      element.observacionescontrato = \"\";\n      element.archivos = [];\n    });\n  }\n  getclassestadoincidencia(estado) {\n    let result;\n    result = this.estadoincidente.filter(estadoinc => estadoinc.value === estado);\n    return result.length > 0 ? result[0].label : '';\n  }\n  onErrorItem(item: FileItem, response: string, status: number, headers: ParsedResponseHeaders): any {\n    let error = JSON.parse(response); //error server response\n    console.log(error);\n  }\n\n  public fileOverBase(e: any): void {\n\n    this.uploader.options.additionalParameter = { incidencia_id: this.irespuesta.id_incidencia, tipofotosiniestro: this.tipofotosiniestro };\n    this.hasBaseDropZoneOver = e;\n  }\n\n  public fileOverAnother(e: any): void {\n    this.uploader.options.additionalParameter = { incidencia_id: this.irespuesta.id_incidencia, tipofotosiniestro: this.tipofotosiniestro };\n    this.hasAnotherDropZoneOver = e;\n  }\n  onSuccessItem(item: FileItem, response: string, status: number, headers: ParsedResponseHeaders): any {\n    if (this.item.imagenes == undefined || this.item.imagenes == null) {\n      this.item.imagenes = [];\n    }\n    this.item.imagenes.push($.parseJSON(response).data);\n  }\n  tooglerogthmenu() {\n    $('body').toggleClass('rmv-right-panel');\n  }\n  guardarrespuesta() {\n    \n    this.validform = false;\n    if (this.ctrlformrta.form.valid == false) {\n      console.log(\"validdd\")\n      this.validform = true;\n      return false;\n    }\n    this.disablesave = true;\n    this.txterror = \"\";\n    this.spinnerService.show();\n    this.candeactivateguard.setedit(false);\n    console.log(\"eeeeee\")\n    this.locationService.getCurrentPosition().subscribe((positiongps) => {\n      console.log(positiongps , \"positiongps\")\n      this.registrarRespuesta(positiongps.coords);\n    }, (err) => {\n      console.log('error');\n    });\n\n\n\n  }\n  registrarRespuesta(positionGps) {\n    console.log(\"registrarRespuesta\")\n    if (this.item.contrato_componente_id != undefined || this.item.sincontrato != undefined) {\n      this.irespuesta.latrespuesta = positionGps.latitude;\n      this.irespuesta.longrespuesta = positionGps.longitude;\n      if (this.irespuesta.created_at != undefined) {\n        this.irespuesta.created_at = moment(this.irespuesta.created_at).format(\"DD-MM-YYYY HH:mm:ss\");\n      }\n\n      this.respuestaService.add(this.irespuesta)\n        .subscribe((value) => {\n          console.log(value , \"respuestaService\")\n          this.disablesave = false;\n          this.spinnerService.hide();\n          this.registrarauditoria('respuesta', 'Guardar', value.id);\n          console.log( value , \"respuesta¡¡¡\")\n          console.log( value.data , \"error\")\n          if(  typeof value.data !== 'undefined' ){\n            console.log(\"paso 0\")\n            if (value.data.errorrepo == 1) {\n              this.notificationService.onError('Existen tecnicos asociados sin terminar.');\n            } else if (value.data.errorfotosiniestro == 1) {\n              this.notificationService.onError('No tiene las imagenes de antes y despues del siniestro.');\n            }\n          }\n          if (this.irespuesta.manual == true) {\n            console.log(\"paso 1\")\n            this.irespuesta = new Respuesta();\n            this.getById();\n            this.notificationService.onSuccess('Respuesta agregada con exito.');\n\n            this.materialnew = new MaterialRespuesta();\n            this.irespuesta.materiales = [];\n            this.irespuesta.manual = false;\n          }\n          else {\n            console.log(\"paso 2\")\n            this.notificationService.onSuccess('Respuesta agregada con exito.');\n\n            this.router.navigateByUrl('incidencia');\n          }\n\n\n        }, (err) => {\n          this.disablesave = false;\n          this.spinnerService.hide();\n          if (err.status_code == 422) {\n            this.txterror = \"El Respuesta ya existe\";\n            this.notificationService.onError('El Respuesta ya existe');\n          } else if (err.status_code == 400) {\n            this.txterror = err.errors.message[0];\n            this.notificationService.onError(err.errors.message[0]);\n          } else {\n            this.txterror = \"Se ha producido un error.\";\n            this.notificationService.onError('Se ha producido un error.');\n          }\n        });\n    } else {\n      this.txterror = \"Para registrar el parte de trabajo debe seleccionar un contrato.\";\n      this.notificationService.onError('Para registrar el parte de trabajo debe seleccionar un contrato.');\n      this.spinnerService.hide();\n      this.disablesave = false;\n    }\n  }\n  abrirfirma() {\n    $(\"#contenedorsign\").css('display', 'none');\n    this.createSwal.show();\n  }\n\n  onvaluechangedfirma(value) {\n    $(\"#contenedorsign\").css('display', '');\n    this.irespuesta.firmacliente = value;\n    this.createSwal.nativeSwal.close();\n  }\n  cancelarfirma(value) {\n\n    $(\"#contenedorsign\").css('display', '');\n    this.createSwal.nativeSwal.close();\n  }\n  public ngAfterViewInit() {\n    $('.mini-nav, .sidebar-menu, .right-side-panel, .message-center, .right-sidebar').perfectScrollbar();\n  }\n  FieldsChange(values: any) {\n    this.materialnew.pedido = values.currentTarget.checked;\n  }\n  ocultarmenu() {\n\n    $('body').toggleClass('rmv-right-panel');\n  }\n  addcomentario() {\n    if (this.item.comentarios == undefined) {\n      this.item.comentarios = [];\n    }\n    this.comentarionew.id_incidencia = this.item.id;\n\n    this.comentarioincidenteService.add(this.comentarionew)\n      .subscribe((value) => {\n        this.item.comentarios.push(value.data);\n        this.comentarionew = new ComentarioIncidente();\n        this.notificationService.onSuccess('Comentario agregado con exito.');\n\n      }, (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError('Comentario ya existe');\n        } else {\n          this.notificationService.onError('Se ha producido un error.');\n        }\n      });\n  }\n  calculardias(fecha) {\n    let actual = moment();\n    fecha = moment(fecha);\n    let diff = actual.diff(fecha, 'days');\n    return diff;\n  }\n  verparte(ptrab) {\n    this.respuestaview = ptrab;\n    this.partetrabajoSwal.show();\n    return false;\n  }\n  agregartecnicoadicional() {\n    if (this.tecnicoadicionalnew.id_usuario != -1) {\n      if (this.item.tecnicosadicionales == undefined) { this.item.tecnicosadicionales = []; }\n      let resul = this.usuariostec.filter(tec => tec.id == this.tecnicoadicionalnew.id_usuario);\n      resul[0].selected = true;\n      this.tecnicoadicionalnew.usuario = resul[0];\n      this.tecnicoadicionalnew.observaciones = this.tecnicoadicionalnew.observaciones ? this.tecnicoadicionalnew.observaciones : 'N/A';\n      this.item.tecnicosadicionales.push(this.tecnicoadicionalnew);\n      this.tecnicoadicionalnew = new Tecnicoadicional();\n      this.tecnicoadicionalnew.id_usuario = -1;\n    }\n\n  }\n  clicksincontrato(id) {\n    this.prioridades = [];\n    this.item.sincontrato = id;\n    this.item.contrato_componente_id = null;\n  }\n  essiniestro(event) {\n    this.item.siniestro = event.target.checked;\n\n  }\n  deleterecnico(i) {\n\n    this.item.tecnicosadicionales.splice(i, 1);\n  }\n  selecttipofoto() {\n    this.uploader.options.additionalParameter = { incidencia_id: this.irespuesta.id_incidencia, tipofotosiniestro: this.tipofotosiniestro };\n  }\n  eliminar_imagen(imagen) {\n    this.archivouploadService.delete(imagen.id, 1).subscribe((value) => {\n      let indice = this.item.imagenes.indexOf(imagen);\n      this.item.imagenes.splice(indice, 1);\n      this.notificationService.onSuccess('Imagen eliminada con exito.');\n    });\n  }\n  registrarauditoria(campo, accion, desc) {\n    var opcion = this.router.url;\n    this.auditoriaService.add({\n      id_incidencia: this.item.id, acccion: accion,\n      campo: campo, opcion: opcion, descripcion: desc\n    }).subscribe((value) => {\n      console.log('auditoria almacenada');\n    });\n  }\n  gpsuser() {\n    this.spinnerService.show();\n    if (navigator && navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          this.geolocationPosition = position;\n        },\n        error => {\n          switch (error.code) {\n            case 1:\n              alert('Permission Denied To Gps');\n              break;\n            case 2:\n              alert('Position Unavailable To Gps');\n              break;\n            case 3:\n              alert('Timeout To Gps');\n              break;\n          }\n        }\n      );\n    }\n  }\n\n  onChangeEstadoRespuesta(value) {\n      this.showTipoPendienteMaterial = true;\n\n      if (value == 'PM' && this.item.contrato_componente !== null \n          && this.item.contrato_componente.contrato !== null \n          && this.item.contrato_componente.contrato.tipocontrato_id !== null ) {\n        this.showGarantiaVentaMaterialP = true;\n      }\n  }\n\n  esTecnico() {\n    return this.user.relpefil.id == 1;\n  }\n\n  esContratoTipoGarantiaVenta() {\n    return this.item.contrato_componente.contrato.tipocontrato_id == 2;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencia-edit/incidencia-edit.component.ts","module.exports = \".message-box .message-widget .active {\\r\\n    border-left: 2px solid #fec107;\\r\\n    background: #e9ecef;\\r\\n}\\r\\n@media (min-width: 767px){\\r\\n.inceidentescroll{\\r\\n    max-height: calc(100vh - 300px);\\r\\n    overflow-y: auto;\\r\\n}\\r\\n.inceidentescroll.inceidentescroll-short{\\r\\n    max-height: 300px;\\r\\n}\\r\\n.tecnicosScroll{\\r\\n    overflow: auto;\\r\\n    max-height:calc(100vh - 300px);\\r\\n}\\r\\n}\\r\\n.pointer-link{\\r\\n    cursor: pointer;\\r\\n}\\r\\n.inceidentescroll .table td{\\r\\n    padding: 5px;\\r\\n}\\r\\n.mail-contnet.all {\\r\\n    text-align: center;\\r\\n    width: 100% !important;\\r\\n}\\r\\n.mail-contnet.all h5 {\\r\\n    font-weight: 500;\\r\\n}\\r\\n.message-box .message-widget a:hover {\\r\\n    cursor: pointer;\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-index/incidencia-index.component.css\n// module id = ./src/app/incidencias/incidencia-index/incidencia-index.component.css\n// module chunks = incidencias.module","module.exports = \"<div class=\\\"page-wrapper\\\">\\n  <!-- ============================================================== -->\\n  <!-- Container fluid  -->\\n  <!-- ============================================================== -->\\n  <div class=\\\"container-fluid\\\">\\n    <!-- ============================================================== -->\\n    <!-- Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n\\n    <!-- ============================================================== -->\\n    <!-- End Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n    <!-- ============================================================== -->\\n    <!-- Start Page Content -->\\n    <!-- ============================================================== -->\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-lg-12\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-lg-2 col-md-4\\\">\\n              <div class=\\\"card-body inbox-panel\\\">\\n                <a routerLink=\\\"/incidencia/add\\\" *ngIf=\\\"!istec\\\"\\n                  class=\\\"btn btn-info btn-rounded  m-b-20 p-10 btn-block waves-effect waves-light\\\"\\n                > Nuevo Incidente</a>\\n                <div class=\\\"message-box tecnicosScroll\\\">\\n                  <div class=\\\"message-widget message-scroll\\\">\\n\\n                    <a (click)=\\\"selAll()\\\" name=\\\"all\\\" class=\\\"{{selected_all?'active':''}}\\\">\\n                      <div class=\\\"mail-contnet all\\\">\\n                        <h5>TODOS</h5>\\n                      </div>\\n                    </a>\\n\\n                    <ng-container *ngFor=\\\"let usr of usuarios\\\">\\n                      <a (click)=\\\"selUsu(usr)\\\" name=\\\"usr{{usr.id}}\\\" class=\\\"{{usr.selected?'active':''}}\\\">\\n                        <div class=\\\"mail-contnet\\\">\\n                          <h5>{{usr.name}}</h5>\\n                        </div>\\n                      </a>\\n                    </ng-container>\\n\\n\\n                  </div>\\n                </div>\\n\\n\\n              </div>\\n            </div>\\n            <div class=\\\"col-lg-10 col-md-8 bg-light border-left\\\">\\n              <div *ngIf=\\\"ususel\\\" class=\\\"card-body\\\">\\n                <div class=\\\"btn-group m-b-10 m-r-10\\\" role=\\\"group\\\" aria-label=\\\"Button group with nested dropdown\\\">\\n                  <button type=\\\"button\\\" class=\\\"btn btn-secondary font-18\\\" title=\\\"Remover Filtros\\\"\\n                    (click)=\\\"removerfiltros()\\\"><i class=\\\"mdi mdi-filter-remove\\\"></i></button>\\n                  <button type=\\\"button\\\" *ngIf=\\\"!verplaning\\\" class=\\\"btn btn-secondary font-18\\\" title=\\\"Ver programación\\\"\\n                    (click)=\\\"verplanning()\\\"><i class=\\\"mdi mdi-calendar-clock\\\"></i></button>\\n                  <button type=\\\"button\\\" *ngIf=\\\"verplaning\\\" class=\\\"btn btn-secondary font-18\\\" title=\\\"Ver Lista\\\"\\n                    (click)=\\\"verlistamenu()\\\"><i class=\\\"mdi mdi-format-list-bulleted\\\"></i></button>\\n\\n                  <button type=\\\"button\\\" class=\\\"btn btn-secondary font-18\\\" (click)=\\\"verlistmaps()\\\"\\n                    title=\\\"Estaciones en mapa\\\"><i class=\\\"mdi mdi-google-maps\\\"></i></button>\\n                </div>\\n                <div class=\\\"btn-group m-b-10 m-r-10\\\" role=\\\"group\\\" aria-label=\\\"Button group with nested dropdown\\\">\\n\\n                  <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n                    <button id=\\\"btnGroupDrop1\\\" type=\\\"button\\\" class=\\\"btn btn-secondary dropdown-toggle\\\"\\n                      data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"> <i\\n                        class=\\\"mdi mdi-label font-18\\\"></i> </button>\\n                    <div class=\\\"dropdown-menu\\\" aria-labelledby=\\\"btnGroupDrop1\\\">\\n                      <a class=\\\"dropdown-item\\\" *ngFor=\\\"let ordervalue of order_values; let i=index;\\\"\\n                        (click)=\\\"ordering(i)\\\">{{ordervalue.name}} {{ordervalue.estado}} <i\\n                          class=\\\"ti-arrows-vertical\\\"></i></a>\\n                    </div>\\n\\n                  </div>\\n                  <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n\\n                    <button id=\\\"btnGroupDrop2\\\" type=\\\"button\\\" class=\\\"btn btn-secondary dropdown-toggle\\\"\\n                      data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"> <i\\n                        class=\\\"mdi mdi-label font-18 text-success\\\"></i> </button>\\n                    <div class=\\\"dropdown-menu\\\" aria-labelledby=\\\"btnGroupDrop2\\\">\\n                      <a class=\\\"dropdown-item\\\" *ngFor=\\\"let estacion of estacionesfilter; let i=index;\\\"\\n                        (click)=\\\"filterestacion(estacion.id)\\\">{{estacion.name}} <span class=\\\"label label-success\\\">\\n                          {{estacion.nocasosnew.length}}</span></a>\\n                    </div>\\n                  </div>\\n                </div>\\n                <button type=\\\"button \\\" class=\\\"btn btn-secondary m-r-10 m-b-10\\\" (click)=\\\"removerfiltros()\\\"><i\\n                    class=\\\"mdi mdi-reload font-18\\\"></i></button>\\n                <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n                  <button id=\\\"btnGroupDrop1\\\" type=\\\"button\\\" class=\\\"btn m-b-10 btn-secondary font-18\\\" aria-haspopup=\\\"true\\\"\\n                    aria-expanded=\\\"false\\\" (click)=\\\"openmorefilters()\\\"> Mas Filtros</button>\\n\\n                </div>\\n                <div class=\\\"btn-group \\\" role=\\\"group\\\">\\n                  <button id=\\\"btnGroupDrop1\\\" type=\\\"button\\\" class=\\\"btn m-b-10 btn-secondary font-18 dropdown-toggle\\\"\\n                    data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"true\\\"> Estados </button>\\n                  <div class=\\\"dropdown-menu \\\" aria-labelledby=\\\"btnGroupDrop1\\\" x-placement=\\\"bottom-start\\\"\\n                    style=\\\"position: absolute; transform: translate3d(0px, 41px, 0px); top: 0px; left: 0px; will-change: transform;\\\">\\n\\n                    <a *ngFor=\\\"let estinc of estadoincidente\\\" (click)=\\\"selEstado(estinc)\\\"\\n                      class=\\\"dropdown-item {{estinc.selected?'active':''}}\\\"><span\\n                        class=\\\"fa fa-circle {{estinc.color}} m-r-10\\\"></span>{{estinc.name}}</a>\\n                  </div>\\n                </div>\\n                <div class=\\\"card-body p-t-0\\\" *ngIf=\\\"!(ususel && !verlista)\\\">\\n                  <div class=\\\"card b-all shadow-none\\\">\\n                    <div *ngIf=\\\"verplaning\\\" class=\\\"inbox-center table-responsive\\\">\\n\\n\\n\\n                      <ng-fullcalendar #ucCalendar [options]=\\\"calendarOptions\\\" [(eventsModel)]=\\\"incidencias\\\"\\n                        (eventClick)=\\\"eventClick($event.detail)\\\" (eventDrop)=\\\"drop($event.detail)\\\"\\n                        (eventResize)=\\\"updateEvent($event.detail)\\\" (clickButton)=\\\"clickButton($event.detail)\\\"\\n                        (dayClick)=\\\"select($event.detail)\\\" (eventRender)=\\\"eventRender($event.detail)\\\"\\n                        (navLinkDayClick)=\\\"selectDAY($event.detail)\\\"></ng-fullcalendar>\\n\\n                    </div>\\n\\n                    <div *ngIf=\\\"verlista\\\" class=\\\"inbox-center table-responsive inceidentescroll\\\"\\n                      [ngClass]=\\\"{ 'inceidentescroll-short' : incidenceDetail }\\\">\\n                      <table class=\\\"table table-hover\\\" id=\\\"example23\\\">\\n                        <thead *ngIf=\\\"!istec\\\">\\n                          <tr>\\n                            <th>Acción</th>\\n                            <th>Fecha de Creación</th>\\n                            <th>N° Inc.</th>\\n                            <th>Cod. SAP</th>\\n                            <!-- <th>Cliente</th> -->\\n                            <th>Estación</th>\\n                            <th>Urgencia</th>\\n                            <th>Título</th>\\n                            <th>Tipo aviso</th>\\n                            <th>Fecha Vencimiento</th>\\n                            <th>Buzon</th>\\n                            <th>Estado</th>\\n                            <!-- <th>Tecnico</th>\\n                             <th></th> -->\\n                          </tr>\\n                        </thead>\\n                        <tbody *ngIf=\\\"!istec\\\">\\n                          <ng-container *ngFor=\\\"let inc of incidencias; let i=index;\\\">\\n                            <tr\\n                              class=\\\"unread\\\"\\n                              [ngClass]=\\\"{\\n                                  'selected': inc.id == incidenceId,\\n                                  'vencido': inc.vencido == 0,\\n                                  'ok': inc.vencido != 0\\n                              }\\\"\\n                              (click)=\\\"onGetIncidenceById(inc.id)\\\"\\n                            >\\n                              <td style=\\\"width:40px\\\">\\n\\n                                <a class=\\\"preview\\\" [swal]=\\\"backwardSwal\\\"\\n                                  *ngIf=\\\"!istec&& inc.estado!='CLO' && inc.estado!='INT'\\\" href=\\\"#\\\">\\n                                  <i class=\\\" ti-control-backward  fa-2x\\\" title=\\\"Reiniciar Incidencia\\\"></i>\\n                                </a>\\n                                <swal #backwardSwal title=\\\"Desea reiniciar la incidencia?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"onreiniciarincidente(inc)\\\">\\n                                </swal>\\n                                <a class=\\\"preview\\\" [swal]=\\\"skipSwal\\\"\\n                                  *ngIf=\\\"istec&& inc.estado!='CLO' && inc.estado!='INT'\\\" href=\\\"#\\\">\\n                                  <i class=\\\" ti-control-skip-backward fa-2x\\\" title=\\\"Saltar Incidencia\\\"></i>\\n                                </a>\\n                                <swal #skipSwal title=\\\"Desea frenara el recorrio de la incidencia?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"onskipincidente(inc)\\\">\\n                                </swal>\\n\\n                                <a class=\\\"preview\\\" *ngIf=\\\"istec\\\" href=\\\"#\\\" [swal]=\\\"llegadaSwal\\\">\\n                                  <i *ngIf=\\\"inc.estado=='REC'\\\" class=\\\"ti-thumb-up  fa-2x\\\" title=\\\"Llegada al aviso\\\"></i>\\n                                </a>\\n\\n                                <swal #llegadaSwal title=\\\"Llegada al aviso?\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                  type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                  (confirm)=\\\"updateestado(inc)\\\">\\n                                </swal>\\n\\n                                <a class=\\\"preview\\\" *ngIf=\\\"istec\\\" href=\\\"#\\\" [swal]=\\\"deleteSwal\\\"> <i\\n                                    *ngIf=\\\"inc.estado=='PLA'||inc.estado=='PDA'\\\" class=\\\" ti-timer  fa-2x\\\"\\n                                    title=\\\"En camino al aviso\\\"></i></a>\\n                                <swal #deleteSwal title=\\\"En camino al aviso?\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                  type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                  (confirm)=\\\"updateestado(inc,false,false)\\\">\\n                                </swal>\\n\\n                                <a class=\\\"preview\\\" href=\\\"#\\\" [swal]=\\\"remoteSwal\\\"\\n                                  *ngIf=\\\"(inc.estado!='CLO'&&inc.remoto&&inc.remotopausa)||inc.estado=='PLA'||inc.estado=='PDA'\\\">\\n                                  <i class=\\\" ti-control-play fa-2x\\\" title=\\\"Iniciar Remoto\\\"></i></a>\\n                                <swal #remoteSwal title=\\\"Va ha iniciar la incidencia teléfonicamente o remotamente?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"updateestado(inc,true,false)\\\">\\n                                </swal>\\n                                <a *ngIf=\\\"!inc.remotopausa&&inc.estado=='TRA'&&inc.remoto\\\" class=\\\"preview\\\" href=\\\"#\\\"\\n                                  [swal]=\\\"stopSwal\\\"> <i class=\\\"ti-control-pause fa-2x\\\"\\n                                    title=\\\"Pausar Incidencia\\\"></i></a>\\n                                <swal #stopSwal title=\\\"Desea Detener el Tiempo Para la Incidencia?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"updateestado(inc,true,true)\\\">\\n                                </swal>\\n\\n\\n\\n                              </td>\\n\\n                              <td><span class=\\\"pointer-link\\\">{{ inc.created_at\\n                                  |date:'dd/MM/yyyy HH:mm:ss' }}</span></td>\\n                              <td><span class=\\\"pointer-link\\\">{{ inc.id }}</span>\\n                              </td>\\n                              <td><span class=\\\"pointer-link\\\">{{ inc.codigosap\\n                                  }}</span></td>\\n                              <!-- <td><span class=\\\"pointer-link\\\">Hola {{ inc.razonsocial\\n                                  }}</span></td> -->\\n                              <td><span class=\\\"pointer-link\\\">{{\\n                                  inc.estacion_servicio.name }} </span></td>\\n                              <td><span class=\\\"pointer-link\\\">{{\\n                                  inc.categoria_incidente == null ? ( inc.categoria_incidente_id == -2 ? 'Sin Prioridad'\\n                                  : '' ) : inc.categoria_incidente.name }} </span></td>\\n                              <td><span class=\\\"pointer-link\\\">\\n                                  <div style=\\\"width: 300px;text-overflow: ellipsis;overflow: hidden;\\\">{{ inc.titulo }}\\n                                  </div>\\n                                </span></td>\\n                              <td><span class=\\\"pointer-link\\\">{{ inc.actuacion }}\\n                                </span></td>\\n                              <td><span class=\\\"pointer-link\\\">{{\\n                                  inc.fecha_vencimiento |date:'dd/MM/yyyy HH:mm:ss' }}</span></td>\\n                              <td>\\n                                <span class=\\\"pointer-link\\\">{{inc.usuario_inbox?.name}}</span>\\n                                <span class=\\\"pointer-link\\\" title=\\\"Asignar Imbox\\\" (click)=\\\"selectedUserInbox( inc.id )\\\"><i class=\\\"ti-user\\\"></i></span>\\n                              </td>\\n                              <td><span class=\\\"pointer-link\\\">{{ inc.estado\\n                                  }}</span></td>\\n\\n                              <!-- <td class=\\\"max-texts\\\" style=\\\"max-width: 40%; \\\"\\n                                routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\"> <a\\n                                  routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">\\n                                  <span\\n                                    class=\\\"badge badge-pill {{getclassestadoincidencia(inc.estado)}} float-left\\\">#{{inc.id}}\\n                                    - {{inc.estado}}</span><br>\\n                                  Empresa: {{inc.razonsocial}}\\n                                  <br>Estacion: {{inc.estacion_servicio.name}}({{inc.estacion_servicio.direccion}})\\n                                  <span *ngIf=\\\"inc.distanciacalculada!=undefined\\\"><br> D: {{(inc.distanciacalculada/1000)\\n                                  | number }} KM. T: {{(inc.tiempo/60/60) | number}} HRS.</span>\\n                                  <span *ngIf=\\\"inc.remoto\\\"><br>Soporte remoto.</span>\\n                                  <br>Titulo: {{inc.titulo}}\\n                                  <span *ngIf=\\\"istec\\\"><br>Descripción: <span\\n                                      [innerHTML]=\\\"inc.descripcion\\\"></span></span>\\n                                  <span *ngIf=\\\"inc.siniestro\\\"><br>Es Siniestro</span>\\n                                  <span *ngIf=\\\"inc.actuacion!=null && inc.actuacion!='-1' \\\"><br>Actuación:\\n                                    {{inc.actuacion}}</span>\\n                                  <br>Componente: <ng-container *ngIf=\\\"inc.contrato_componente!=null\\\">\\n                                    <ul class=\\\"list-inline\\\">\\n                                      <li *ngFor=\\\"let compo of inc.contrato_componente.componente.componentfields; \\\">\\n                                        {{compo.value}}</li>\\n                                    </ul>\\n\\n                                  </ng-container>\\n                                </a></td> -->\\n\\n\\n\\n                              <!--<td class=\\\"text-right\\\"  (click)=\\\"adclock(inc)\\\">\\n                                <span *ngIf=\\\"!inc.usuario_asignado_id\\\">Sin asignar</span>\\n                                <span *ngIf=\\\"inc.usuario_asignado_id\\\">{{inc.usuario_asignado?.name}}</span>\\n                                <a *ngIf=\\\"!inc.usuario_asignado_id\\\" class=\\\"btn \\\" (click)=\\\"verencalendario(inc)\\\"\\n                                  title=\\\"Ver en Calendario\\\"><i class=\\\"mdi mdi-calendar-clock\\\"></i></a> <a\\n                                  *ngIf=\\\"inc.estado=='CLO'\\\" class=\\\"btn \\\" title=\\\"Re-abrir\\\" [swal]=\\\"reopenSwal\\\"><i\\n                                    class=\\\"mdi mdi-lock-open\\\"></i></a>\\n\\n                                     <swal #reopenSwal title=\\\"Desea Re-Abrir El Incidente\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                  type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                  (confirm)=\\\"reabrir(inc.id)\\\">\\n                                </swal><br>\\n                                <i class=\\\"ti-alert\\\"></i>\\n                                {{inc.categoria_incidente?inc.categoria_incidente.name:''}}<br>\\n                                Pla: {{inc.fecha_programacion|date:'dd/MM/yyyy HH:mm:ss'}}\\n                                <br>Reg: {{inc.created_at|date:'dd/MM/yyyy  HH:mm:ss'}}\\n                                <br><span [className]=\\\"inc.modFechaProg ? 'text-info' : ''\\\">Vto: {{inc.fecha_vencimiento |date:'dd/MM/yyyy  HH:mm:ss'}}</span>\\n                                <br>Cierre: {{inc.fecha_cierre |date:'dd/MM/yyyy  HH:mm:ss'}}\\n                                <br> Codigo Sap: {{inc.codigosap}}\\n                                <br>\\n                                <a class=\\\"preview\\\"\\n                                *ngIf=\\\"inc.auditoria?.length>0\\\" routerLink=\\\"/reportes/auditoria/{{inc.id}}\\\"> Modificado\\n                                <i class=\\\"  ti-alert  \\\" title=\\\"Este Incidente ha sido modificado\\\"></i>\\n                              </a>\\n                              </td>\\n\\n                              <td class=\\\"hidden-xs-down\\\"><i *ngIf=\\\"inc.imagenes.length>0\\\" class=\\\"fa fa-paperclip\\\"></i>\\n                                <i *ngIf=\\\"inc.imagenes.length==0\\\" class=\\\"far fa-times-circle\\\"></i></td>-->\\n\\n                            </tr>\\n                            <tr class=\\\"unread\\\" *ngIf=\\\"inc.isEditable&&inc.estado!='CLO'\\\">\\n                              <td colspan=\\\"14\\\">\\n                                <form class=\\\"form-inline\\\">\\n                                  <label for=\\\"ctrlprioridad\\\" class=\\\" mr-2\\\">Tecnico</label>\\n                                  <select class=\\\"form-control  mr-sm-2 custom-select\\\" placeholder=\\\" Escriba la hora\\\"\\n                                    [(ngModel)]=\\\"inc.usuario_asignado_id\\\" name=\\\"ctrlprioridad{{i}}\\\"\\n                                    id=\\\"ctrlprioridad{{i}}\\\">\\n\\n\\n                                    <option *ngFor=\\\"let usr of usuariostec\\\" [value]=\\\"usr.id.toString()\\\">\\n                                      {{ usr.name }}\\n\\n                                    </option>\\n                                  </select>\\n                                  <label for=\\\"ctrl_fecha\\\" class=\\\" mr-2\\\">Fecha</label>\\n                                  <input type=\\\"text\\\" id=\\\"ctrl_fecha{{i}}\\\" class=\\\"form-control col-lg-2\\\"\\n                                    placeholder=\\\" Escriba la fecha\\\" [(ngModel)]=\\\"inc.fecha_programacion\\\"\\n                                    name=\\\"ctrl_fecha{{i}}\\\" bsDatepicker [minDate]='mindate'\\n                                    [bsValue]=\\\"inc.fecha_programacion\\\">\\n                                  <label for=\\\"ctrl_hora\\\" class=\\\" mr-2\\\">Hora</label>\\n                                  <div class=\\\"input-group clockpicker\\\" style=\\\"width: 120px\\\">\\n\\n                                    <input type=\\\"text\\\" class=\\\"form-control col-lg-8\\\" #ctrlhora name=\\\"ctrl_hora{{i}}\\\"\\n                                      (blur)=\\\"inc.hora_programacion=ctrlhora.value\\\" [(ngModel)]=\\\"inc.hora_programacion\\\">\\n                                    <div class=\\\"input-group-append\\\">\\n                                      <span class=\\\"input-group-text\\\"><i class=\\\"ti-alarm-clock\\\"></i></span>\\n                                    </div>\\n                                  </div>\\n                                  <a class=\\\"btn btn-info btn-rounded \\\" (click)=\\\"validaAsignacionUsuario(inc)\\\"><i\\n                                      class=\\\"ti-save\\\"></i></a>\\n                                  <a class=\\\"btn btn-danger btn-rounded \\\" (click)=\\\"inc.isEditable=false\\\"><i\\n                                      class=\\\"ti-close\\\"></i></a>\\n                                </form>\\n\\n                              </td>\\n                            </tr>\\n                          </ng-container>\\n                        </tbody>\\n                        <tbody *ngIf=\\\"istec\\\">\\n                          <ng-container *ngFor=\\\"let inc of incidencias; let i=index;\\\">\\n                            <tr class=\\\"unread\\\" [ngClass]=\\\"inc.vencido==0?'vencido':'ok'\\\" >\\n\\n\\n                              <td style=\\\"width:40px\\\">\\n\\n                                <a class=\\\"preview\\\" [swal]=\\\"backwardSwal\\\"\\n                                  *ngIf=\\\"!istec&& inc.estado!='CLO' && inc.estado!='INT'\\\" href=\\\"#\\\">\\n                                  <i class=\\\" ti-control-backward  fa-3x\\\" title=\\\"Reiniciar Incidencia\\\"></i>\\n                                </a>\\n                                <swal #backwardSwal title=\\\"Desea reiniciar la incidencia?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"onreiniciarincidente(inc)\\\">\\n                                </swal>\\n                                <a class=\\\"preview\\\" [swal]=\\\"skipSwal\\\"\\n                                  *ngIf=\\\"istec&& inc.estado!='CLO' && inc.estado!='INT'\\\" href=\\\"#\\\">\\n                                  <i class=\\\" ti-control-skip-backward fa-3x\\\" title=\\\"Saltar Incidencia\\\"></i>\\n                                </a>\\n                                <swal #skipSwal title=\\\"Desea frenara el recorrio de la incidencia?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"onskipincidente(inc)\\\">\\n                                </swal>\\n\\n                                <a class=\\\"preview\\\" *ngIf=\\\"istec\\\" href=\\\"#\\\" [swal]=\\\"llegadaSwal\\\">\\n                                  <i *ngIf=\\\"inc.estado=='REC'\\\" class=\\\"ti-thumb-up  fa-3x\\\" title=\\\"Llegada al aviso\\\"></i>\\n                                </a>\\n\\n                                <swal #llegadaSwal title=\\\"Llegada al aviso?\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                  type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                  (confirm)=\\\"updateestado(inc)\\\">\\n                                </swal>\\n\\n                                <a class=\\\"preview\\\" *ngIf=\\\"istec\\\" href=\\\"#\\\" [swal]=\\\"deleteSwal\\\"> <i\\n                                    *ngIf=\\\"inc.estado=='PLA'||inc.estado=='PDA'\\\" class=\\\" ti-timer  fa-3x\\\"\\n                                    title=\\\"En camino al aviso\\\"></i></a>\\n                                <swal #deleteSwal title=\\\"En camino al aviso?\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                  type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                  (confirm)=\\\"updateestado(inc,false,false)\\\">\\n                                </swal>\\n\\n                                <a class=\\\"preview\\\" href=\\\"#\\\" [swal]=\\\"remoteSwal\\\"\\n                                  *ngIf=\\\"(inc.estado!='CLO'&&inc.remoto&&inc.remotopausa)||inc.estado=='PLA'||inc.estado=='PDA'\\\">\\n                                  <i class=\\\" ti-control-play fa-3x\\\" title=\\\"Iniciar Remoto\\\"></i></a>\\n                                <swal #remoteSwal title=\\\"Va ha iniciar la incidencia teléfonicamente o remotamente?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"updateestado(inc,true,false)\\\">\\n                                </swal>\\n                                <a *ngIf=\\\"!inc.remotopausa&&inc.estado=='TRA'&&inc.remoto\\\" class=\\\"preview\\\" href=\\\"#\\\"\\n                                  [swal]=\\\"stopSwal\\\"> <i class=\\\"ti-control-pause fa-3x\\\"\\n                                    title=\\\"Pausar Incidencia\\\"></i></a>\\n                                <swal #stopSwal title=\\\"Desea Detener el Tiempo Para la Incidencia?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"updateestado(inc,true,true)\\\">\\n                                </swal>\\n\\n\\n\\n                              </td>\\n\\n                              <!-- <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.created_at |date:'dd/MM/yyyy HH:mm:ss' }}</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.id }}</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.codigosap }}</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.razonsocial }}</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.estacion_servicio.name }}({{ inc.estacion_servicio.direccion }})</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.categoria_incidente == null ? ( inc.categoria_incidente_id == -2 ? 'Sin Prioridad' : '' )  : inc.categoria_incidente.name }} </td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.titulo }}</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\"> {{ inc.actuacion }}  </td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.fecha_vencimiento |date:'dd/MM/yyyy HH:mm:ss' }}</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">--</td>\\n                              <td routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">{{ inc.estado }}</td> -->\\n\\n                              <td class=\\\"max-texts\\\" style=\\\"max-width: 40%; \\\"\\n                                routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\"> <a\\n                                  routerLink=\\\"/incidencia/{{inc.estado=='CLO'?'resumen':'edit'}}/{{inc.id}}\\\">\\n                                  <span\\n                                    class=\\\"badge badge-pill {{getclassestadoincidencia(inc.estado)}} float-left\\\">#{{inc.id}}\\n                                    - {{inc.estado}}</span><br>\\n                                  Empresa: {{inc.razonsocial}}\\n                                  <br>Estacion: {{inc.estacion_servicio.name}}({{inc.estacion_servicio.direccion}})\\n                                  <span *ngIf=\\\"inc.distanciacalculada!=undefined\\\"><br> D: {{(inc.distanciacalculada/1000)\\n                                  | number }} KM. T: {{(inc.tiempo/60/60) | number}} HRS.</span>\\n                                  <span *ngIf=\\\"inc.remoto\\\"><br>Soporte remoto.</span>\\n                                  <br>Titulo: {{inc.titulo}}\\n                                  <span *ngIf=\\\"istec\\\"><br>Descripción: <span\\n                                      [innerHTML]=\\\"inc.descripcion\\\"></span></span>\\n                                  <span *ngIf=\\\"inc.siniestro\\\"><br>Es Siniestro</span>\\n                                  <span *ngIf=\\\"inc.actuacion!=null && inc.actuacion!='-1' \\\"><br>Actuación:\\n                                    {{inc.actuacion}}</span>\\n                                  <br>Componente: <ng-container *ngIf=\\\"inc.contrato_componente!=null\\\">\\n                                    <ul class=\\\"list-inline\\\">\\n                                      <li *ngFor=\\\"let compo of inc.contrato_componente.componente.componentfields; \\\">\\n                                        {{compo.value}}</li>\\n                                    </ul>\\n\\n                                  </ng-container>\\n                                </a></td>\\n\\n\\n\\n                             <td class=\\\"text-right\\\"  (click)=\\\"adclock(inc)\\\">\\n                                <span *ngIf=\\\"!inc.usuario_asignado_id\\\">Sin asignar</span>\\n                                <span *ngIf=\\\"inc.usuario_asignado_id\\\">{{inc.usuario_asignado?.name}}</span>\\n                                <a *ngIf=\\\"!inc.usuario_asignado_id\\\" class=\\\"btn \\\" (click)=\\\"verencalendario(inc)\\\"\\n                                  title=\\\"Ver en Calendario\\\"><i class=\\\"mdi mdi-calendar-clock\\\"></i></a> <a\\n                                  *ngIf=\\\"inc.estado=='CLO'\\\" class=\\\"btn \\\" title=\\\"Re-abrir\\\" [swal]=\\\"reopenSwal\\\"><i\\n                                    class=\\\"mdi mdi-lock-open\\\"></i></a>\\n\\n                                <!--    --><swal #reopenSwal title=\\\"Desea Re-Abrir El Incidente\\\" text=\\\"Esta acción no se puede modificar.\\\"\\n                                  type=\\\"question\\\" [showCancelButton]=\\\"true\\\" [focusCancel]=\\\"true\\\"\\n                                  (confirm)=\\\"reabrir(inc.id)\\\">\\n                                </swal><br>\\n                                <i class=\\\"ti-alert\\\"></i>\\n                                {{inc.categoria_incidente?inc.categoria_incidente.name:''}}<br>\\n\\n                                Pla: {{inc.fecha_programacion|date:'dd/MM/yyyy HH:mm:ss'}}\\n                                <br>Reg: {{inc.created_at|date:'dd/MM/yyyy  HH:mm:ss'}}\\n                                <br><span [className]=\\\"inc.modFechaProg ? 'text-info' : ''\\\">Vto: {{inc.fecha_vencimiento |date:'dd/MM/yyyy  HH:mm:ss'}}</span>\\n                                <br>Cierre: {{inc.fecha_cierre |date:'dd/MM/yyyy  HH:mm:ss'}}\\n                                <br> Codigo Sap: {{inc.codigosap}}\\n                                <br>   <!-- -->\\n                                <a class=\\\"preview\\\"\\n                                *ngIf=\\\"inc.auditoria?.length>0\\\" routerLink=\\\"/reportes/auditoria/{{inc.id}}\\\"> Modificado\\n                                <i class=\\\"  ti-alert  \\\" title=\\\"Este Incidente ha sido modificado\\\"></i>\\n                              </a>\\n                              </td>\\n\\n                              <td class=\\\"hidden-xs-down\\\"><i *ngIf=\\\"inc.imagenes.length>0\\\" class=\\\"fa fa-paperclip\\\"></i>\\n                                <i *ngIf=\\\"inc.imagenes.length==0\\\" class=\\\"far fa-times-circle\\\"></i></td>\\n\\n                            </tr>\\n                            <tr class=\\\"unread\\\" *ngIf=\\\"inc.isEditable&&inc.estado!='CLO'\\\">\\n                              <td colspan=\\\"14\\\">\\n                                <form class=\\\"form-inline\\\">\\n                                  <label for=\\\"ctrlprioridad\\\" class=\\\" mr-2\\\">Tecnico</label>\\n                                  <select class=\\\"form-control  mr-sm-2 custom-select\\\" placeholder=\\\" Escriba la hora\\\"\\n                                    [(ngModel)]=\\\"inc.usuario_asignado_id\\\" name=\\\"ctrlprioridad{{i}}\\\"\\n                                    id=\\\"ctrlprioridad{{i}}\\\">\\n\\n\\n                                    <option *ngFor=\\\"let usr of usuariostec\\\" [value]=\\\"usr.id.toString()\\\">\\n                                      {{ usr.name }}\\n\\n                                    </option>\\n                                  </select>\\n                                  <label for=\\\"ctrl_fecha\\\" class=\\\" mr-2\\\">Fecha</label>\\n                                  <input type=\\\"text\\\" id=\\\"ctrl_fecha{{i}}\\\" class=\\\"form-control col-lg-2\\\"\\n                                    placeholder=\\\" Escriba la fecha\\\" [(ngModel)]=\\\"inc.fecha_programacion\\\"\\n                                    name=\\\"ctrl_fecha{{i}}\\\" bsDatepicker [minDate]='mindate'\\n                                    [bsValue]=\\\"inc.fecha_programacion\\\">\\n                                  <label for=\\\"ctrl_hora\\\" class=\\\" mr-2\\\">Hora</label>\\n                                  <div class=\\\"input-group clockpicker\\\" style=\\\"width: 120px\\\">\\n\\n                                    <input type=\\\"text\\\" class=\\\"form-control col-lg-8\\\" #ctrlhora name=\\\"ctrl_hora{{i}}\\\"\\n                                      (blur)=\\\"inc.hora_programacion=ctrlhora.value\\\" [(ngModel)]=\\\"inc.hora_programacion\\\">\\n                                    <div class=\\\"input-group-append\\\">\\n                                      <span class=\\\"input-group-text\\\"><i class=\\\"ti-alarm-clock\\\"></i></span>\\n                                    </div>\\n                                  </div>\\n                                  <a class=\\\"btn btn-info btn-rounded \\\" (click)=\\\"validaAsignacionUsuario(inc)\\\"><i\\n                                      class=\\\"ti-save\\\"></i></a>\\n                                  <a class=\\\"btn btn-danger btn-rounded \\\" (click)=\\\"inc.isEditable=false\\\"><i\\n                                      class=\\\"ti-close\\\"></i></a>\\n                                </form>\\n\\n                              </td>\\n                            </tr>\\n                          </ng-container>\\n                        </tbody>\\n                      </table>\\n                    </div>\\n                    <!-- ============================================================== -->\\n                    <!-- EDITA INCIDENCIA -->\\n                    <!-- ============================================================== -->\\n\\n                    <app-incidencia-edit-tab *ngIf=\\\"incidenceId >= 0\\\" [incidenceId]=\\\"incidenceId\\\"\\n                      (showIncidenceDetail)=\\\"showIncidenceDetail($event)\\\"></app-incidencia-edit-tab>\\n\\n\\n\\n                    <div class=\\\"inbox-center table-responsive\\\" [ngStyle]=\\\"{'display': vermaps  ? 'block' : 'none' }\\\">\\n                      <div id=\\\"markermap\\\" class=\\\"gmaps\\\" #gmap></div>\\n                    </div>\\n                  </div>\\n                </div>\\n              </div>\\n\\n              <div class=\\\"container my-4\\\" *ngIf=\\\"!ususel && !selected_all\\\">\\n                <div class=\\\"border border-light p-3 mb-4\\\">\\n                  <p class=\\\"font-weight-bold text-cente\\\">Seleccione un buzon para comenzar</p>\\n                </div>\\n              </div>\\n\\n              <div class=\\\"container\\\" *ngIf=\\\"ususel && !verlista\\\">\\n                <div class=\\\"border border-light py-0 px-3 mb-4\\\">\\n                  <p class=\\\"font-weight-bold text-cente\\\">No se han encontrado resultados</p>\\n                </div>\\n              </div>\\n\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <!-- ============================================================== -->\\n      <!-- End PAge Content -->\\n      <!-- ============================================================== -->\\n      <!-- ============================================================== -->\\n      <!-- Right sidebar -->\\n      <!-- ============================================================== -->\\n      <!-- .right-sidebar -->\\n\\n      <!-- ============================================================== -->\\n      <!-- End Right sidebar -->\\n      <!-- ============================================================== -->\\n    </div>\\n    <!-- ============================================================== -->\\n    <!-- End Container fluid  -->\\n    <!-- ============================================================== -->\\n  </div>\\n\\n\\n  <swal #createSwal title=\\\"Programar Incidencia\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\" [showCancelButton]=\\\"true\\\"\\n    [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Agregar'\\\"\\n    (confirm)=\\\"onasignarusuario()\\\" showCloseButton=\\\"true\\\">\\n    <div *swalPartial>\\n      <form>\\n        <div class=\\\"form-body\\\">\\n          <h3 class=\\\"card-title\\\">Incidencia</h3>\\n          <hr>\\n          <div class=\\\"row p-t-20\\\">\\n\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Titulo</label>\\n                <p>{{incnew.titulo}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Fecha creación</label>\\n                <p>{{incnew.created_at}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Cliente</label>\\n                <p>{{incnew.razonsocial}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Estacion Servicio</label>\\n                <p>{{incnew.estacion_servicio.name}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-12\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Componente</label>\\n                <p>\\n                  <ng-container *ngIf=\\\"incnew.contrato_componente!=null\\\">\\n                    <ul class=\\\"list-inline\\\">\\n                      <li *ngFor=\\\"let compo of incnew.contrato_componente.componente.componentfields; \\\">{{compo.value}}\\n                      </li>\\n                    </ul>\\n\\n                  </ng-container>\\n                </p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-12\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Descripción</label>\\n                <p [innerHtml]=\\\"incnew.descripcion\\\"></p>\\n              </div>\\n            </div>\\n          </div>\\n          <h3 class=\\\"card-title\\\">Programar a</h3>\\n          <hr>\\n          <div class=\\\"row p-t-20\\\">\\n            <div class=\\\"col-md-12\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Fecha Y hora</label>\\n                <p>{{incnew.start}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-12\\\">\\n              <div class=\\\"form-group\\\">\\n                <label for=\\\"ctrlprioridad\\\" class=\\\" mr-2\\\">Tecnico</label>\\n                <select class=\\\"form-control  mr-sm-2 custom-select\\\" placeholder=\\\" Escriba la hora\\\"\\n                  [(ngModel)]=\\\"incnew.usuario_asignado_id\\\" name=\\\"ctrlprioridad{{i}}\\\" id=\\\"ctrlprioridad{{i}}\\\">\\n                  <option selected>Seleccione</option>\\n\\n                  <option *ngFor=\\\"let usr of usuariostec\\\" [value]=\\\"usr.id.toString()\\\">\\n                    {{ usr.name }}\\n\\n                  </option>\\n                </select>\\n                <small class=\\\"form-control-feedback\\\"> Seleccione el tecnico </small>\\n              </div>\\n            </div>\\n\\n          </div>\\n        </div>\\n\\n      </form>\\n    </div>\\n  </swal>\\n  <!-- modal mas filtros -->\\n  <swal #filtroSwal title=\\\"Filtros\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\" [showCancelButton]=\\\"true\\\"\\n    [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Aceptar'\\\" (confirm)=\\\"getdata()\\\"\\n    showCloseButton=\\\"true\\\">\\n    <div *swalPartial>\\n      <form>\\n        <div class=\\\"form-body\\\">\\n\\n          <div class=\\\"row p-t-20\\\">\\n\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Fecha Registro</label>\\n                <input [(ngModel)]=\\\"f_fecharegistro\\\" type=\\\"date\\\" placeholder=\\\"Fecha de registro\\\" class=\\\"form-control\\\"\\n                  name=\\\"f_fecharegistro\\\">\\n\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Fecha Vencimiento</label>\\n                <input [(ngModel)]=\\\"f_fechacreacion\\\" type=\\\"date\\\" placeholder=\\\"Fecha de vencimiento\\\" class=\\\"form-control\\\"\\n                  name=\\\"f_fechacreacion\\\">\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Cliente</label>\\n                <input [(ngModel)]=\\\"f_cliente\\\" type=\\\"text\\\" placeholder=\\\"Nombre cliente\\\" class=\\\"form-control\\\"\\n                  name=\\\"f_cliente\\\">\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Estacion Servicio</label>\\n                <input [(ngModel)]=\\\"f_estacion\\\" type=\\\"text\\\" placeholder=\\\"Estacion Servicio\\\" class=\\\"form-control\\\"\\n                  name=\\\"f_estacion\\\">\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-6\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\"># Incidente</label>\\n                <input [(ngModel)]=\\\"f_incidente\\\" type=\\\"number\\\" placeholder=\\\"# Incidente\\\" class=\\\"form-control\\\"\\n                  name=\\\"f_incidente\\\">\\n              </div>\\n            </div>\\n            <div class=\\\"col-md-12\\\">\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"control-label\\\">Titulo</label>\\n                <input [(ngModel)]=\\\"f_itulo\\\" type=\\\"text\\\" placeholder=\\\"Titulo\\\" class=\\\"form-control\\\" name=\\\"f_itulo\\\">\\n              </div>\\n            </div>\\n          </div>\\n\\n        </div>\\n\\n      </form>\\n    </div>\\n  </swal>\\n\\n  <swal #confirmplaneacionSwal title=\\\"Confirmar Planeación\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\"\\n    [showCancelButton]=\\\"true\\\" [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Aceptar'\\\"\\n    (confirm)=\\\"onasignarusuario()\\\" showCloseButton=\\\"true\\\">\\n    <div *swalPartial>\\n      <form>\\n        <div class=\\\"form-body\\\">\\n\\n          <div class=\\\"row p-t-20\\\">\\n\\n            <div class=\\\"col-md-12\\\">\\n              <p class=\\\"text-center\\\" [innerHTML]=\\\"mensajePlaneacion\\\"></p>\\n            </div>\\n\\n          </div>\\n\\n        </div>\\n\\n      </form>\\n    </div>\\n  </swal>\\n\\n  <swal #assignInbox title=\\\"Técnico a Asignar\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\"\\n    [showCancelButton]=\\\"true\\\" [showConfirmButton]=\\\"true\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Aceptar'\\\"\\n    (confirm)=\\\"onAssignInbox()\\\" showCloseButton=\\\"true\\\">\\n    <div *swalPartial>\\n      <form>\\n        <div class=\\\"form-body\\\">\\n\\n          <div class=\\\"row p-t-20\\\">\\n\\n            <div class=\\\"col-md-12\\\">\\n              <select class=\\\"form-control  mr-sm-2 custom-select\\\" placeholder=\\\" Escriba la hora\\\"\\n                  [(ngModel)]=\\\"inboxusertec\\\" name=\\\"inboxusertec\\\">\\n\\n                  <ng-container *ngFor=\\\"let usr of usuarios; let i=index;\\\">\\n                  <option *ngIf=\\\"usr.perfil == '1'\\\" [value]=\\\"usr.id\\\">\\n                    {{ usr.name }}  \\n\\n                  </option>\\n                </ng-container>\\n                </select>\\n            </div>\\n\\n          </div>\\n\\n        </div>\\n\\n      </form>\\n    </div>\\n  </swal>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencia-index/incidencia-index.component.html\n// module id = ./src/app/incidencias/incidencia-index/incidencia-index.component.html\n// module chunks = incidencias.module","import {\n  Component,\n  OnInit,\n  AfterViewInit,\n  ViewChild,\n  OnDestroy,\n} from \"@angular/core\";\nimport { Ng4LoadingSpinnerService } from \"ng4-loading-spinner\";\nimport { NotificationService, LocalDataService } from \"./../../shared\";\nimport { IncidenciaService } from \"./../incidencia.service\";\nimport * as $ from \"jquery\";\n\nimport \"datatables.net\";\nimport \"datatables.net-bs4\";\nimport \"datatables.net-buttons\";\nimport { UsuariosService } from \"../../usuarios/usuarios.service\";\nimport { ESTADOINCIDENCIAS } from \"../../mocks/estadoincidente\";\nimport { BsLocaleService } from \"ngx-bootstrap/datepicker\";\nimport * as moment from \"moment\";\nimport { isNullOrUndefined } from \"util\";\nimport { OptionsInput } from \"fullcalendar\";\nimport { CalendarComponent } from \"ng-fullcalendar\";\n//import { Options } from 'fullcalendar';\n\nimport { Router } from \"@angular/router\";\nimport { Incidencia } from \"../../viewmodel/incidencia\";\nimport { SwalComponent } from \"@toverux/ngx-sweetalert2\";\n// import { } from '@types/googlemaps';\nimport { EstacionservicioService } from \"../../estacionservicio/estacionservicio.service\";\nimport { MapsService } from \"../../google-apis/maps.service\";\nimport { Subscription } from \"rxjs\";\nimport { timer } from \"rxjs/observable/timer\";\n@Component({\n  selector: \"app-incidencia-index\",\n  templateUrl: \"./incidencia-index.component.html\",\n  styleUrls: [\"./incidencia-index.component.css\"],\n})\nexport class IncidenciaIndexComponent\n  implements OnInit, AfterViewInit, OnDestroy\n{\n  table = null;\n  usuarios = [];\n  incidencias = [];\n  usuariostec = [];\n  estadoincidente = ESTADOINCIDENCIAS;\n  mytime: Date = new Date();\n  ususel: any;\n  estadosel: any;\n  mindate: any;\n  calendarOptions: OptionsInput;\n  displayEvent: any;\n  verplaning = false;\n  vermaps = true;\n  verlista = true;\n  incnew: Incidencia;\n  @ViewChild(\"gmap\") gmapElement: any;\n  map: google.maps.Map;\n  @ViewChild(CalendarComponent) ucCalendar: CalendarComponent;\n  @ViewChild(\"createSwal\") private createSwal: SwalComponent;\n  @ViewChild(\"filtroSwal\") private filtroSwal: SwalComponent;\n  @ViewChild(\"confirmplaneacionSwal\")\n  private confirmplaneacionSwal: SwalComponent;\n  @ViewChild(\"assignInbox\") private assignInbox: SwalComponent;\n  fechas: any;\n  lat = 40.50017;\n  long = -3.89239;\n  markers = [];\n  estaciones: any;\n  geolocationPosition: any;\n  istec = false;\n  selected_all = true;\n  usuario: any;\n  order_values = [\n    { name: \"Vencidos\", estado: \"asc\" },\n    { name: \"Cliente\", estado: \"asc\" },\n    { name: \"Fecha registro\", estado: \"asc\" },\n    { name: \"Fecha Planeado\", estado: \"asc\" },\n  ];\n  ordername: string;\n  orderestado: string;\n  f_fecharegistro: string;\n  f_fechacreacion: string;\n  f_cliente: string;\n  f_estacion: string;\n  f_itulo: string;\n  f_incidente: string;\n  alive = true;\n  subscription: Subscription;\n  estacionesfilter: any;\n  mensajePlaneacion: string;\n\n  incidenceDetail: boolean = false;\n  incidenceId: number;\n\n  inboxusertec: any;\n  selectedInboxInc : any = null;\n  currentProfile;\n  tecnicoWhiteList=[\"PLA\",\"PDA\",\"REC\",\"TRA\"]\n  constructor(\n    private spinnerService: Ng4LoadingSpinnerService,\n    private incidenciaService: IncidenciaService,\n    private usuariosService: UsuariosService,\n    private notificationService: NotificationService,\n    private localeService: BsLocaleService,\n    private localdataservice: LocalDataService,\n    private estacionservicioService: EstacionservicioService,\n    private mapsService: MapsService,\n    private router: Router\n  ) {\n    this.localeService.use(\"es\");\n    this.estadosel = \"\";\n    this.ususel = \"\";\n    this.mindate = new Date();\n    this.istec = this.localdataservice.getuser().perfil == 1;\n    this.usuario = this.localdataservice.getuser();\n    this.ususel = \"\";\n    this.f_cliente = \"\";\n    this.f_estacion = \"\";\n    this.f_fechacreacion = \"\";\n    this.f_fecharegistro = \"\";\n    this.f_itulo = \"\";\n    this.orderestado = \"\";\n    this.ordername = \"\";\n    this.f_incidente = \"\";\n    //this.subscribeToData();\n    this.currentProfile=this.localdataservice.getuser().perfil*1;\n  }\n\n  ngOnInit() {\n    this.spinnerService.show();\n    this.getdata();\n    this.initcalendar();\n    this.incnew = new Incidencia();\n    this.vermaps = false;\n  }\n  /*private subscribeToData(): void {\n    timer(0, 40000)\n      .takeWhile(() => this.alive) // only fires when component is alive\n      .subscribe(() => {\n        this.getdata(false);\n      });\n  }*/\n  initcalendar() {\n    const dateObj = new Date();\n    const yearMonth =\n      dateObj.getUTCFullYear() + \"-\" + (dateObj.getUTCMonth() + 1);\n\n    this.calendarOptions = {\n      editable: true,\n      eventLimit: false,\n      navLinks: true,\n      selectable: true,\n      locale: \"es\",\n\n      header: {\n        left: \"prev,next today\",\n        center: \"title\",\n        right: \"month,agendaWeek,agendaDay,listMonth\",\n      },\n      events: [],\n      allDayText: \"Todo el dia\",\n      buttonText: {\n        today: \"Hoy\",\n        month: \"Mes\",\n        week: \"Semana\",\n        day: \"Dia\",\n        list: \"Agenda\",\n      },\n    };\n  }\n  eventallow() {\n    alert(\"allow\");\n  }\n  getdata(hideList: boolean = true) {\n    if (hideList) {\n      this.verlista = false;\n    }\n\n    if (hideList) {\n      this.incidenceId = -1;\n    }\n    this.spinnerService.show();\n\n    if (this.localdataservice.getuser().perfil == \"1\") {\n      this.ususel = this.localdataservice.getuser().id;\n    }\n\n    if(this.selected_all) {\n      this.ususel = \"\";\n    }\n    this.incidenciaService\n      .getbytoken(\n        \"estado=\" +\n          this.estadosel +\n          \"&usu=\" +\n          this.ususel +\n          \"&filtro=\" +\n          this.ordername +\n          \"&tipoorden=\" +\n          this.orderestado +\n          \"&f_fecharegistro=\" +\n          this.f_fecharegistro +\n          \"&f_fechacreacion=\" +\n          this.f_fechacreacion +\n          \"&f_cliente=\" +\n          this.f_cliente +\n          \"&f_estacion=\" +\n          this.f_estacion +\n          \"&f_itulo=\" +\n          this.f_itulo +\n          \"&f_incidente=\" +\n          this.f_incidente\n      )\n      .subscribe((response) => {\n        this.usuarios =\n          isNullOrUndefined(this.usuarios) || this.usuarios.length == 0\n            ? response.data.usuarios\n            : this.usuarios;\n\n        this.usuarios = this.usuarios.sort((a, b) => a.name > b.name ? 1 : -1)\n        this.incidencias = response.data.incidencias;\n        if(this.currentProfile===1){ //teccnico\n          //INCIDENCIAS QUE NO SEA INT \n          this.incidencias=this.incidencias.filter((inc)=>{\n            return this.tecnicoWhiteList.includes(inc.estado);\n          })\n        }\n\n        if(this.ususel){\n          this.incidencias=this.incidencias.filter((it)=>{\n            const valid=it && it.usuario_inbox;\n            return valid && (it.usuario_inbox.id=== this.ususel);\n          });\n        }\n\n        this.verlista = !!this.incidencias.length;\n        this.usuariostec = response.data.usuariostec;\n        this.estacionesfilter = response.data.estaciones;\n        this.spinnerService.hide();\n        if(this.selected_all) this.ususel = -1;\n\n      });\n  }\n  loadtable() {\n    let exampleId: any = $(\"#example23\");\n\n    this.table = exampleId.DataTable({\n      dom: \"Bfrtip\",\n      buttons: [\"copy\", \"csv\", \"excel\", \"pdf\", \"print\"],\n      ordering: false,\n      oLanguage: {\n        sLengthMenu: \"_MENU_ registros por página\",\n        sInfoFiltered: \" - filtrada de _MAX_ registros\",\n        sSearch: \"Buscar: \",\n        sZeroRecords: \"No existen datos diponibles\",\n        sInfoEmpty: \" \",\n        sInfo: \"Mostrando _END_ de _TOTAL_\",\n        oPaginate: {\n          sPrevious: \"Anterior\",\n          sNext: \"Siguiente\",\n        },\n      },\n    });\n  }\n  private reInitDatatable(): void {\n    if (this.table) {\n      this.table.destroy();\n      this.table = null;\n    }\n    setTimeout(() => this.loadtable(), 0);\n  }\n  actualizarincidenye(inc) {\n    let fectem = inc.fecha_programacion;\n    if (\n      inc.fecha_programacion != undefined &&\n      inc.fecha_programacion != null &&\n      inc.fecha_programacion != \"\"\n    ) {\n      if (\n        inc.hora_programacion != undefined &&\n        inc.hora_programacion != null &&\n        inc.hora_programacion != \"\"\n      ) {\n        if (!moment(inc.fecha_programacion, \"DD/MM/YYYY\").isValid()) {\n          inc.fecha_programacion = moment(inc.fecha_programacion).format(\n            \"YYYY-MM-DD\"\n          );\n        } else {\n          inc.fecha_programacion = moment(\n            inc.fecha_programacion,\n            \"DD/MM/YYYY\"\n          ).format(\"YYYY-MM-DD\");\n        }\n        inc.fecha_programacion = moment(\n          inc.fecha_programacion + \" \" + inc.hora_programacion\n        ).format(\"DD-MM-YYYY HH:mm:ss\");\n      } else {\n        if (!moment(inc.fecha_programacion, \"DD/MM/YYYY\").isValid()) {\n          inc.fecha_programacion = moment(inc.fecha_programacion).format(\n            \"YYYY-MM-DD\"\n          );\n        } else {\n          inc.fecha_programacion = moment(\n            inc.fecha_programacion,\n            \"DD/MM/YYYY\"\n          ).format(\"YYYY-MM-DD\");\n        }\n        inc.fecha_programacion = moment(\n          inc.fecha_programacion + \" \" + \"00:00:00\"\n        ).format(\"DD-MM-YYYY HH:mm:ss\");\n      }\n    }\n\n    //inc.ignore_user = 1;\n\n    this.incidenciaService.update(inc).subscribe(\n      (value) => {\n        if (value.data.noplaneado == 1) {\n          this.notificationService.onError(\n            \"Ya tiene asignado un incidente en esa hora.\"\n          );\n        } else if (value.data.errorusu == 1) {\n          this.notificationService.onError(\n            \"No se puede asignar el usuario por que es tecnico adicional\"\n          );\n        } else {\n          if (value.data.errorrec == undefined) {\n            inc.usuario_asignado = value.data.usuario_asignado;\n            inc.remotoinicio = value.data.remotoinicio;\n            inc.remotopausa = value.data.remotopausa;\n            inc.estado = value.data.estado;\n            this.incnew = null;\n            this.spinnerService.hide();\n            this.notificationService.onSuccess(\"Incidente Actualizado.\");\n          } else {\n            inc.estado = \"PLA\";\n            this.notificationService.onError(\n              \"Ya esta trabajando en un incidente\"\n            );\n          }\n        }\n      },\n      (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError(\"Incidente no Actualizado.\");\n        } else {\n          this.notificationService.onError(\"Incidente no Actualizado.\");\n        }\n      }\n    );\n    inc.fecha_programacion = fectem;\n  }\n  validaAsignacionUsuario(inc) {\n    this.incnew = inc;\n    let vencimiento, planeado, diferencia;\n    vencimiento = moment(inc.fecha_vencimiento, \"DD-MM-YYYY HH:mm:ss\");\n    planeado = moment(inc.fecha_programacion, \"DD-MM-YYYY HH:mm:ss\");\n    diferencia = planeado.diff(vencimiento);\n    console.log(\"diferencia\" + diferencia);\n    if (diferencia < 0) {\n      this.mensajePlaneacion =\n        \"Desea planear la incidencia?. <br>La fecha de planeación esta fuera de plazo.\";\n    } else {\n      this.mensajePlaneacion = \"Desea planear la incidencia?.\";\n    }\n\n    this.confirmplaneacionSwal.show();\n  }\n  onasignarusuario() {\n    this.incnew.estado = \"PLA\";\n    this.actualizarincidenye(this.incnew);\n  }\n  onreiniciarincidente(inc) {\n    inc.estado = \"INT\";\n    inc.usuario_asignado_id = null;\n    this.actualizarincidenye(inc);\n  }\n\n  onskipincidente(inc) {\n    inc.estado = \"PLA\";\n\n    this.actualizarincidenye(inc);\n  }\n  getclassestadoincidencia(estado) {\n    let result;\n    result = this.estadoincidente.filter(\n      (estadoinc) => estadoinc.value === estado\n    );\n    return result.length > 0 ? result[0].label : \"\";\n  }\n  ngAfterViewInit() {\n    $.getScript(\"assets/dist/js/pages/clockpicker.js\");\n  }\n  adclock(inc) {\n    if (!this.istec) {\n      inc.isEditable = true;\n      if (\n        inc.fecha_programacion != undefined &&\n        inc.fecha_programacion != null &&\n        inc.fecha_programacion != \"\"\n      ) {\n        inc.fecha_programacion = moment(inc.fecha_programacion).format(\n          \"DD/MM/YYYY h:mm:ss\"\n        );\n      }\n      $.getScript(\"assets/dist/js/pages/clockpicker.js\");\n    }\n  }\n\n/**\n * Select the user and get their incidences\n * @param usuel - selected user\n */\n  selUsu(usuel) {\n    this.spinnerService.show();\n    this.resetFilter();\n    this.selected_all = false;\n    \n    for (let usr of this.usuarios) {\n      usr.selected = false;\n    }\n\n    this.ususel = usuel.id;\n    usuel.selected = true;\n    this.getdata();\n  }\n\n  /**\n   * Select all incidences\n   */\n  selAll() {\n    this.spinnerService.show();\n\n    this.resetFilter();\n    this.selected_all = true;\n\n    for (let usr of this.usuarios) {\n      usr.selected = false;\n    }\n\n    this.getdata();\n  }\n\n  /**\n   * It resets the values of the filter variables to empty strings.\n   */\n  resetFilter() {\n    this.estadosel = \"\";\n    this.ususel = \"\";\n    this.ordername = \"\";\n    this.orderestado = \"\";\n    this.f_fecharegistro = \"\";\n    this.f_fechacreacion = \"\";\n    this.f_cliente = \"\";\n    this.f_estacion = \"\";\n    this.f_itulo = \"\";\n    this.f_incidente = \"\";\n  }\n\n  selEstado(selestado) {\n    for (let estado of this.estadoincidente) {\n      estado.selected = false;\n    }\n\n    this.estadosel = selestado.value;\n    this.spinnerService.show();\n    selestado.selected = true;\n    this.getdata();\n    return false;\n  }\n  removerfiltros() {\n    for (let estado of this.estadoincidente) {\n      estado.selected = false;\n    }\n    for (let usr of this.usuarios) {\n      usr.selected = false;\n    }\n    this.selected_all = false;\n    this.resetFilter();\n    this.spinnerService.show();\n    this.getdata();\n  }\n  clickButton(model: any) {\n    console.log(model);\n  }\n  eventClick(model: any) {\n    if (model.event.estado == \"CLO\") {\n      this.router.navigate([\"/incidencia/resumen\", model.event.id]);\n    } else {\n      this.router.navigate([\"/incidencia/edit\", model.event.id]);\n    }\n  }\n  select(start) {\n    if (start.view.type != \"agendaDay\") {\n      this.ucCalendar.fullCalendar(\n        \"changeView\",\n        \"agendaDay\",\n        start.date.format(\"YYYY-MM-DD\")\n      );\n      this.ucCalendar.fullCalendar(\"gotoDate\", start.date);\n    } else if (start.view.type == \"agendaDay\") {\n      if (this.incnew.id != undefined) {\n        this.incnew.fecha_programacion = start.date;\n        this.incnew.hora_programacion = start.date.format(\"h:mm:ss\");\n        this.incnew.start = start.date.format(\"DD/MM/YYYY h:mm:ss a\");\n        this.createSwal.show();\n      }\n    }\n  }\n  selectDAY(start) {\n    this.ucCalendar.fullCalendar(\n      \"changeView\",\n      \"agendaDay\",\n      start.date.format(\"YYYY-MM-DD\")\n    );\n    this.ucCalendar.fullCalendar(\"gotoDate\", start.date);\n  }\n  updateEvent(model: any) {\n    model.event.fecha_programacion = model.event.start;\n    this.actualizarincidenye(model.event);\n  }\n  verplanning() {\n    this.getdata();\n    this.verlista = false;\n    this.verplaning = true;\n    this.vermaps = false;\n  }\n  verlistamenu() {\n    this.verlista = true;\n    this.verplaning = false;\n    this.vermaps = false;\n  }\n  verlistmaps() {\n    this.verlista = false;\n    this.verplaning = false;\n    this.vermaps = true;\n    let myLatlng = new google.maps.LatLng(this.lat, this.long);\n\n    let mapProp = {\n      center: myLatlng,\n      zoom: 5,\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\n    };\n    this.map = new google.maps.Map(this.gmapElement.nativeElement, mapProp);\n    this.getEstacionservicio();\n  }\n\n  eventRender(event) {\n    event.element\n      .find(\".fc-title, .fc-list-item-title\")\n      .html(\"<b>\" + event.event.title + \"</b>\");\n  }\n  drop(event) {\n    if (event.event.estado != \"CLO\") {\n      let inc = new Incidencia();\n      inc.id = event.event.id;\n      inc.categoria_incidente_id = event.event.id;\n      inc.cliente_id = event.event.cliente_id;\n      inc.contrato_componente_id = event.event.contrato_componente_id;\n      inc.descripcion = event.event.descripcion;\n      inc.empresa_id = event.event.empresa_id;\n      inc.estacion_servicio_id = event.event.estacion_servicio_id;\n      inc.fecha_cierre = event.event.fecha_cierre;\n      inc.fecha_programacion = moment(event.event.start).format(\"YYYY-MM-DD\");\n      inc.fecha_respuesta = event.event.fecha_respuesta;\n      inc.fecha_vencimiento = event.event.fecha_vencimiento;\n      inc.hora_programacion = moment(event.event.start).format(\"HH:mm:ss\");\n      inc.razonsocial = event.event.razonsocial;\n      inc.titulo = event.event.titulo;\n      inc.tipocontrato = event.event.tipocontrato;\n      inc.usuario_asignado = event.event.usuario_asignado;\n      inc.id = event.event.id;\n\n      this.actualizarincidenye(inc);\n    } else {\n      return false;\n    }\n  }\n\n  verencalendario(inc) {\n    if (!this.istec) {\n      this.verplanning();\n\n      this.incnew = inc;\n    }\n  }\n  getEstacionservicio() {\n    this.estacionservicioService.get(-1).subscribe((response) => {\n      this.estaciones = response.data;\n      let myLatlng = new google.maps.LatLng(this.lat, this.long);\n      for (let i = 0; i < this.estaciones.length; i++) {\n        let est = this.estaciones[i];\n        myLatlng = new google.maps.LatLng(est.lat, est.lng);\n        let marker = new google.maps.Marker({\n          position: myLatlng,\n          map: this.map,\n          animation: google.maps.Animation.DROP,\n          title: \"Hola!\",\n          label: est.name.substring(0, 1),\n        });\n        let contentString =\n          '<div class=\"info-window-content\"><h2>' +\n          est.name +\n          \"</h2>\" +\n          \"<p> \" +\n          est.direccion +\n          \"<br> \" +\n          est.telefonos +\n          \"</p></div>\";\n\n        let infowindow = new google.maps.InfoWindow({\n          content: contentString,\n        });\n\n        google.maps.event.addListener(marker, \"click\", function () {\n          infowindow.open(this.map, marker);\n        });\n      }\n      this.map.setCenter(myLatlng);\n      this.spinnerService.hide();\n    });\n  }\n  updateestado(inc, remoto, remotopausa) {\n    inc.remoto = remoto;\n    inc.remotopausa = remotopausa;\n    if (inc.remoto) {\n      inc.estado = \"TRA\";\n      this.actualizarincidenye(inc);\n    } else {\n      this.gpsuser(inc);\n    }\n  }\n\n  gpsuser(inc) {\n    this.spinnerService.show();\n    if (navigator && navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          this.geolocationPosition = position;\n          this.spinnerService.hide();\n          if (inc.estado == \"PLA\" || inc.estado == \"PDA\") {\n            inc.estado = \"REC\";\n            inc.latpartida = this.geolocationPosition.coords.latitude;\n            inc.lngpartida = this.geolocationPosition.coords.longitude;\n            this.mapsService\n              .getdistance(\n                inc.latpartida,\n                inc.lngpartida,\n                inc.estacion_servicio.lat,\n                inc.estacion_servicio.lng\n              )\n              .subscribe((response) => {\n                console.log(response);\n                if (\n                  response.rows.length > 0 &&\n                  response.rows[0].elements[0].duration != undefined\n                ) {\n                  inc.tiempo = response.rows[0].elements[0].duration.value;\n                  inc.distanciacalculada =\n                    response.rows[0].elements[0].distance.value;\n                }\n\n                this.actualizarincidenye(inc);\n              });\n          } else if (inc.estado == \"REC\") {\n            inc.estado = \"TRA\";\n            inc.latllegada = this.geolocationPosition.coords.latitude;\n            inc.lngllegada = this.geolocationPosition.coords.longitude;\n            this.actualizarincidenye(inc);\n          }\n        },\n        (error) => {\n          switch (error.code) {\n            case 1:\n              alert(\"Permission Denied To Gps\");\n              break;\n            case 2:\n              alert(\"Position Unavailable To Gps\");\n              break;\n            case 3:\n              alert(\"Timeout To Gps\");\n              break;\n          }\n        }\n      );\n    }\n  }\n  ordering(i) {\n    let value = this.order_values[i];\n    this.ordername = value.name;\n    this.orderestado = value.estado;\n    this.getdata();\n    if (value.estado == \"asc\") {\n      this.order_values[i].estado = \"desc\";\n    } else {\n      this.order_values[i].estado = \"asc\";\n    }\n  }\n  openmorefilters() {\n    this.filtroSwal.show();\n  }\n  ngOnDestroy() {\n    this.alive = false; // switches your IntervalObservable off\n  }\n  filterestacion(estacion) {\n    this.f_estacion = estacion;\n    this.getdata();\n  }\n  reabrir($id) {\n    this.spinnerService.show();\n    this.incidenciaService.getReopenById($id).subscribe(\n      (value) => {\n        this.spinnerService.hide();\n        this.notificationService.onSuccess(\"Incidente Actualizado.\");\n        this.getdata();\n      },\n      (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 400) {\n          this.notificationService.onError(err.errors.message[0]);\n        } else {\n          this.notificationService.onError(\"Incidente no Actualizado.\");\n        }\n      }\n    );\n  }\n\n  // ===================================================================================\n  onGetIncidenceById(id: number): void {\n    this.incidenceDetail = false;\n\n    this.incidenceId = id;\n  }\n\n  showIncidenceDetail(show) {\n    this.incidenceDetail = show;\n  }\n\n  selectedUserInbox( inc ){\n    this.selectedInboxInc = inc;\n    this.assignInbox.show();\n  }\n\n  onAssignInbox(){\n    this.incidenciaService.inboxUser( this.incidenceId , this.inboxusertec ).subscribe(\n      (value) => {\n        this.notificationService.onSuccess(\"Técnico Actualizado.\");\n        this.getdata();\n      },\n      (err) => {\n        this.notificationService.onError(err.errors.message[0]);\n        this.notificationService.onError(\"Técnico no Actualizado.\");\n      }\n    )\n\n  }\n\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencia-index/incidencia-index.component.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.css\n// module id = ./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.css\n// module chunks = incidencias.module","module.exports = \"<div class=\\\"page-wrapper\\\">\\n  <!-- ============================================================== -->\\n  <!-- Container fluid  -->\\n  <!-- ============================================================== -->\\n  <div class=\\\"container-fluid\\\">\\n    <!-- ============================================================== -->\\n    <!-- Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n    \\n    <!-- ============================================================== -->\\n    <!-- End Bread crumb and right sidebar toggle -->\\n    <!-- ============================================================== -->\\n    <!-- ============================================================== -->\\n    <!-- Start Page Content -->\\n    <!-- ============================================================== -->\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-lg-12\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"row\\\">\\n\\n            <div class=\\\"col-xlg-12 col-lg-12 col-md-12 bg-light border-left\\\">\\n              <div class=\\\"card-body\\\">\\n                <button type=\\\"button \\\" class=\\\"btn btn-secondary m-r-10 m-b-10\\\" (click)=\\\"tooglerogthmenu()\\\"\\n                  title=\\\"Comentarios\\\"><i class=\\\" ti-comments font-18\\\"></i></button>\\n\\n                <div class=\\\"btn-group m-b-10 m-r-10 float-right\\\" role=\\\"group\\\"\\n                  aria-label=\\\"Button group with nested dropdown\\\">\\n                  <a routerLink=\\\"/incidencia\\\"\\n                    class=\\\"btn btn-info btn-rounded  m-b-20 p-10 btn-block waves-effect waves-light\\\">Listado\\n                    Incidencias</a>\\n\\n                </div>\\n\\n\\n\\n              </div>\\n              <div class=\\\"card-body\\\">\\n                <form action=\\\"#\\\" id=\\\"form-id\\\" (ngSubmit)=\\\"add()\\\" #ctrlform=\\\"ngForm\\\">\\n                  <div class=\\\"form-body\\\">\\n                    <h3 class=\\\"card-title\\\">Información Basica</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\">\\n                      <div class=\\\"col-md-3\\\">\\n                        <span class=\\\"badge badge-pill {{getclassestadoincidencia(item.estado)}} float-LEFT\\\">#{{item.id}}\\n                          - {{item.estado}}</span>\\n                      </div>\\n                      <div class=\\\"col-md-3\\\"> <label class=\\\"control-label\\\">Fecha Creación</label><br>\\n                        <i class=\\\"fas fa-calendar-check\\\"></i> {{item.created_at |date:'dd/MM/yyyy HH:mm:ss'}}</div>\\n                      <div class=\\\"col-md-2\\\"> <label class=\\\"control-label\\\">Fecha Vencimiento</label><br>\\n                        <i class=\\\"fas fa-calendar-plus\\\"></i> {{item.fecha_vencimiento |date:'dd/MM/yyyy HH:mm:ss'}}\\n                      </div>\\n                      <div class=\\\"col-md-2\\\"> <label class=\\\"control-label\\\">Fecha Planeación</label><br>\\n                        <i class=\\\"fas fa-calendar-check\\\"></i> {{item.fecha_programacion |date:'dd/MM/yyyy HH:mm:ss'}}\\n                      </div>\\n                      <div class=\\\"col-md-2\\\"> <label class=\\\"control-label\\\">Fecha Cierre</label><br>\\n                        <div class=\\\"input-group \\\">\\n                          <input type=\\\"text\\\" id=\\\"ctrl_fecha\\\" class=\\\"form-control \\\" placeholder=\\\" Escriba la fecha\\\"\\n                          [(ngModel)]=\\\"item.fecha_cierre\\\" name=\\\"ctrl_fechacierre\\\" bsDatepicker\\n                          [bsValue]=\\\"item.fecha_cierre\\\" \\n                          >\\n                          <div class=\\\"input-group-append\\\">\\n                              <button class=\\\"btn btn-info\\\" (click)=\\\"editarfecha($event)\\\" type=\\\"button\\\"><i class=\\\"ti-save\\\"></i></button>\\n                          </div>\\n                      </div>\\n                        \\n                        <swal #backwardSwal title=\\\"Desea cambiar al fecha de cierre?\\\"\\n                                  text=\\\"Esta acción no se puede modificar.\\\" type=\\\"question\\\" [showCancelButton]=\\\"true\\\"\\n                                  [focusCancel]=\\\"true\\\" (confirm)=\\\"add()\\\">\\n                                </swal>\\n                      </div>\\n                      <div class=\\\"col-lg-3\\\" *ngIf=\\\"item.no_parte_manual\\\">\\n                        <label class=\\\"control-label\\\">N° Parte Manual</label><br>\\n                         {{item.no_parte_manual }}\\n                      </div>\\n                      <div class=\\\"col-lg-3\\\" *ngIf=\\\"item.fecha_parte_manual\\\">\\n                        <label class=\\\"control-label\\\">Fecha Cierre Parte Manual</label><br>\\n                       {{item.fecha_parte_manual |date:'dd/MM/yyyy HH:mm:ss'}}\\n                       \\n                      </div>\\n                      <div class=\\\"col-lg-3\\\" *ngIf=\\\"item.obs_parte_manual\\\">\\n                        <label class=\\\"control-label\\\">Observaciones Parte Manual</label><br>\\n                        {{item.obs_parte_manual }}\\n                      </div>\\n                      <div class=\\\"col-lg-3\\\" *ngIf=\\\"item.usr_parte_manual\\\">\\n                          <label class=\\\"control-label\\\">Usuario Cierre Parte Manual</label><br>\\n                           {{item.usuario_cierremanual.name }}\\n                        </div>\\n                      <div class=\\\"col-lg-12\\\">\\n                        <hr>\\n                      </div>\\n                      <div class=\\\"col-md-6\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Cliente</label>\\n\\n                          <p>{{item.razonsocial}}</p>\\n\\n                        </div>\\n                      </div>\\n                      <div class=\\\"col-md-6\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Estacion Servicio</label>\\n                          <select disabled class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.estacion_servicio_id\\\"\\n                            name=\\\"ctrlestacionservicio\\\" (change)=\\\"onselectEstacionServicio($event)\\\"\\n                            #ctrlestacionservicio=\\\"ngModel\\\" required>\\n                            <option [value]=\\\"-1\\\">Seleccione</option>\\n                            <option *ngFor=\\\"let o of estacionservicio\\\" [value]=\\\"o.id.toString()\\\">\\n                              {{ o.name }} ({{o.zonatecnica.name}})\\n\\n                            </option>\\n                          </select>\\n\\n                        </div>\\n\\n                      </div>\\n\\n                    </div>\\n                    <h3 class=\\\"card-title\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">Estacion Servicio</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo && newcompo.name!=undefined\\\">\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Estacion Servicio</strong> <br>{{newcompo.name}}</div>\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Zona Tecnica</strong><br>{{newcompo.zonatecnica.name}}\\n                      </div>\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Dirección</strong> <br>{{newcompo.direccion}}</div>\\n                      <div class=\\\"col-lg-3 col-sm-12\\\"><strong>Telefono</strong> <br>{{newcompo.telefono}}</div>\\n\\n                    </div>\\n                    <h3 class=\\\"card-title\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">Componentes</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\" *ngIf=\\\"newcompo&& newcompo.name!=undefined\\\">\\n                      <div class=\\\"table-responsive\\\">\\n                        <table id=\\\"example23\\\"\\n                          class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\" cellspacing=\\\"0\\\"\\n                          width=\\\"100%\\\">\\n                          <thead>\\n                            <tr>\\n                              <th>Tipo Componente</th>\\n                              <th>Informacion</th>\\n                              <th>Contratos</th>\\n\\n\\n                            </tr>\\n                          </thead>\\n\\n                          <tbody>\\n\\n\\n\\n                            <tr *ngIf=\\\"item.contrato_componente\\\">\\n                              <td>\\n                                {{item.contrato_componente.componente?.tipocomponente.name}}\\n                              </td>\\n                              <td>\\n                                <ul>\\n                                  <li *ngFor=\\\"let field of item.contrato_componente?.componente.componentfields\\\">\\n                                    <strong>{{field.tipocomponentfield.name}}:</strong> {{field.value}}\\n                                  </li>\\n                                </ul>\\n                              </td>\\n                              <td>\\n\\n                                <div *ngIf=\\\"item.contrato_componente.contrato\\\" class=\\\"col-lg-9\\\"\\n                                  style=\\\"display: inline-table;\\\"><strong>Tipo</strong>\\n                                  {{item.contrato_componente.contrato.tipocontrato.name}}<br>\\n                                  <strong>Vto</strong> {{item.contrato_componente.contrato.fechafin}}</div>\\n                                <div class=\\\"custom-control custom-radio mr-sm-2 col-lg-3\\\"\\n                                  style=\\\"display: inline; text-align: start;\\\">\\n                                  <input class=\\\"custom-control-input\\\" disabled id=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"\\n                                    (click)=\\\"clickcontrato(contr)\\\" name=\\\"checkbox{{newcompo.id}}\\\" type=\\\"radio\\\"\\n                                    [checked]=\\\"true\\\">\\n\\n                                  <label class=\\\"custom-control-label\\\" for=\\\"checkbox{{newcompo.id}}_{{i}}_{{j}}\\\"></label>\\n                                </div>\\n                                <div *ngIf=\\\"!item.contrato_componente.contrato\\\" class=\\\"col-lg-9\\\"\\n                                  style=\\\"display: inline-table;\\\">\\n                                  <strong>Sin Contrato</strong><br></div>\\n\\n\\n\\n\\n                              </td>\\n\\n\\n                            </tr>\\n                            <tr *ngIf=\\\"!item.contrato_componente\\\">\\n                              <td>\\n                                {{item.sincontrato_componente?.tipocomponente.name}}\\n                              </td>\\n                              <td>\\n                                <ul>\\n                                  <li *ngFor=\\\"let field of item.sincontrato_componente?.componentfields\\\">\\n                                    <strong>{{field.tipocomponentfield.name}}:</strong> {{field.value}}\\n                                  </li>\\n                                </ul>\\n                              </td>\\n                              <td>\\n\\n\\n                                <div class=\\\"col-lg-9\\\" style=\\\"display: inline-table;\\\">\\n                                  <strong>Sin Contrato</strong><br></div>\\n\\n\\n\\n\\n                              </td>\\n\\n\\n                            </tr>\\n\\n\\n\\n\\n                          </tbody>\\n                        </table>\\n                      </div>\\n                    </div>\\n\\n                    <div class=\\\"row p-t-20\\\">\\n                      <div class=\\\"col-md-12\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Titulo</label>\\n\\n\\n                          <input disabled [(ngModel)]=\\\"item.titulo\\\" required placeholder=\\\"Escriba el titulo\\\"\\n                            class=\\\"form-control\\\" name=\\\"titulo\\\" #ctrltitulo=\\\"ngModel\\\">\\n\\n                          <div *ngIf=\\\"(ctrltitulo.invalid) && (ctrltitulo.dirty || ctrltitulo.touched)\\\"\\n                            class=\\\"text-danger\\\">\\n\\n                            <div *ngIf=\\\"ctrltitulo.errors.required\\\">\\n                              Titulo es requerido.\\n                            </div>\\n\\n\\n                          </div>\\n                        </div>\\n                      </div>\\n                      <div class=\\\"col-md-6\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Actuación</label>\\n                          <select disabled class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.actuacion\\\"\\n                            name=\\\"ctrlactuacion\\\">\\n                            <option value=\\\"-1\\\">Seleccione</option>\\n                            <option value=\\\"Correctivo\\\">Correctivo</option>\\n                            <option value=\\\"Preventivas\\\">Preventivas</option>\\n                            <option value=\\\"Instalaciones\\\">Instalaciones</option>\\n                          </select>\\n\\n                        </div>\\n\\n                      </div>\\n                      <div class=\\\"col-md-6\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Prioridad</label>\\n                          <select disabled class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"item.categoria_incidente_id\\\"\\n                            name=\\\"ctrlprioridad\\\" #ctrlprioridad=\\\"ngModel\\\" required>\\n                            <option [value]=\\\"-1\\\">Seleccione</option>\\n                            <option [value]=\\\"-2\\\" *ngIf=\\\"prioridades.length==0\\\">Sin Prioridad</option>\\n                            <option *ngFor=\\\"let o of  prioridades \\\" [value]=\\\"o.id.toString()\\\">\\n                              {{ o.name }} ({{o.tiemporesolucion}}-{{o.tipotiempo}})\\n\\n                            </option>\\n                          </select>\\n\\n                        </div>\\n                        <div\\n                          *ngIf=\\\"(item.categoria_incidente_id===-1||ctrlprioridad.invalid) && (ctrlprioridad.dirty || ctrlprioridad.touched)\\\"\\n                          class=\\\"text-danger\\\">\\n\\n                          <div *ngIf=\\\"item.categoria_incidente_id==-1||ctrlprioridad.errors.required\\\">\\n                            La Prioridad es requerida.\\n                          </div>\\n\\n\\n                        </div>\\n                      </div>\\n\\n                      <div class=\\\"col-md-12\\\">\\n                        <div class=\\\"form-group\\\">\\n                          <label class=\\\"control-label\\\">Descripción de la incidencia</label>\\n\\n                          <ckeditor [(ngModel)]=\\\"item.descripcion\\\" #myckeditor=\\\"ngModel\\\" name=\\\"myckeditor\\\"\\n                            [config]=\\\"ckeConfig\\\" debounce=\\\"500\\\" (change)=\\\"onChange($event)\\\"\\n                            #ctrlobservaciones=\\\"ngModel\\\">\\n                          </ckeditor>\\n\\n                          <small class=\\\"form-control-feedback\\\"> Escriba el la observacion del Contrato </small>\\n                        </div>\\n                        <div *ngIf=\\\"ctrlobservaciones.invalid && (ctrlobservaciones.dirty || ctrlobservaciones.touched)\\\"\\n                          class=\\\"text-danger\\\">\\n\\n                          <div *ngIf=\\\"ctrlobservaciones.errors.required\\\">\\n                            La observacion del Contrato es requerido.\\n                          </div>\\n\\n\\n                        </div>\\n                      </div>\\n                    </div>\\n                    <h3 class=\\\"card-title\\\">Tecnicos Adicionales</h3>\\n                    <hr>\\n                    <div class=\\\"row p-t-20\\\">\\n                      <div class=\\\"table-responsive\\\">\\n                        <table id=\\\"example23\\\"\\n                          class=\\\"display nowrap table table-hover m-t-30  table-striped table-bordered\\\" cellspacing=\\\"0\\\"\\n                          width=\\\"100%\\\">\\n                          <thead>\\n                            <tr>\\n                              <th>Nombre tecnico</th>\\n                              <th>Observaciones</th>\\n\\n\\n\\n                            </tr>\\n                          </thead>\\n\\n\\n                          <tbody>\\n\\n\\n                            <ng-container *ngFor=\\\"let row of item.tecnicosadicionales; let i = index\\\">\\n                              <tr>\\n                                <td>\\n                                  {{row.usuario.name}}\\n                                </td>\\n                                <td>\\n                                  {{row.observaciones}}\\n                                </td>\\n\\n\\n                              </tr>\\n\\n\\n                            </ng-container>\\n                          </tbody>\\n                        </table>\\n                      </div>\\n                    </div>\\n                    <!--/span-->\\n\\n                    <!--/span-->\\n                  </div>\\n\\n\\n                </form>\\n              </div>\\n              <div>\\n                <hr class=\\\"m-t-0\\\">\\n              </div>\\n\\n\\n              <div class=\\\"card-body\\\">\\n                <h4><i class=\\\"fa fa-paperclip m-r-10 m-b-10\\\"></i> Adjuntos <span>({{item.imagenes.length}})</span></h4>\\n                <div class=\\\"row\\\">\\n\\n                  <div class=\\\"col-md-12\\\">\\n                    <ul class=\\\"el-info list-inline\\\">\\n                      <li *ngFor=\\\"let imgprod of item.imagenes;\\\" class=\\\"col-lg-2 text-truncate\\\"\\n                        title=\\\"{{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}\\\">\\n                        <a class=\\\"btn default btn-outline image-popup-vertical-fit\\\" target=\\\"_self\\\"\\n                          href=\\\"{{apiurl+'storage/'+imgprod.nombre}}\\\" download=\\\"{{imgprod.nombre}}\\\">\\n                          <i class=\\\" ti-file\\\"></i>\\n                          {{imgprod.nombrearchivo==null?imgprod.nombre:imgprod.nombrearchivo}}</a></li>\\n\\n                    </ul>\\n                  </div>\\n\\n\\n\\n                </div>\\n\\n              </div>\\n            </div>\\n\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <!-- ============================================================== -->\\n    <!-- End Page Content -->\\n    <!-- ============================================================== -->\\n    <!-- ============================================================== -->\\n    <!-- Right sidebar -->\\n    <!-- ============================================================== -->\\n    <!-- .right-sidebar -->\\n    <div class=\\\"right-sidebar\\\">\\n\\n      <div class=\\\"slimscrollright\\\">\\n        <div class=\\\"rpanel-title\\\"><i class=\\\"ti-comments\\\"></i> Comentarios</div>\\n        <div class=\\\"r-panel-body\\\">\\n          <div class=\\\"list-group\\\">\\n\\n            <a href=\\\"javascript:void(0)\\\" *ngFor=\\\"let commentitm of item.comentarios;\\\"\\n              class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\">\\n              <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                <h5 class=\\\"mb-1\\\"><i class=\\\"ti-comment\\\"></i> {{commentitm.user.name}}</h5>\\n                <small class=\\\"text-muted\\\">hace {{calculardias(commentitm.created_at)}} dias.</small>\\n              </div>\\n              <p class=\\\"mb-1\\\">{{commentitm.comentario}}</p>\\n              <small class=\\\"text-muted\\\">{{commentitm.created_at}}</small>\\n            </a>\\n\\n          </div>\\n        </div>\\n        <div class=\\\"rpanel-title\\\"><i class=\\\"ti-link\\\"></i> Partes de Trabajo</div>\\n        <div class=\\\"r-panel-body\\\">\\n          <div class=\\\"list-group b-0 mail-list\\\">\\n            <a *ngFor=\\\"let ptrab of item.partestrabajo;\\\" (click)=\\\"verparte(ptrab)\\\" class=\\\"list-group-item\\\">\\n              <span class=\\\"fa fa-circle text-warning m-r-10\\\"></span>Parte # {{ptrab.id}} Creación {{ptrab.created_at}}\\n              <br> Técnico {{ptrab.usuario_respuesta.name}}</a>\\n\\n          </div>\\n        </div>\\n        <div class=\\\"rpanel-title\\\"><i class=\\\"ti-link\\\"></i> Incidencias Relacionadas</div>\\n        <div class=\\\"r-panel-body\\\">\\n          <div class=\\\"list-group b-0 mail-list\\\">\\n            <a *ngFor=\\\"let ptrab of item.incidentes_relacionados;\\\" routerLink=\\\"/incidencia/edit/{{ptrab.id}}\\\"\\n              target=\\\"_blank\\\" class=\\\"list-group-item\\\"><span class=\\\"fa fa-circle text-success m-r-10\\\"></span>{{ptrab.id}}\\n              {{ptrab.titulo}} {{ptrab.created_at}}</a>\\n          </div>\\n        </div>\\n\\n\\n      </div>\\n    </div>\\n    <!-- ============================================================== -->\\n    <!-- End Right sidebar -->\\n    <!-- ============================================================== -->\\n  </div>\\n  <!-- ============================================================== -->\\n  <!-- End Container fluid  -->\\n  <!-- ============================================================== -->\\n</div>\\n\\n<swal #createSwal title=\\\"Firma Cliente\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\" [showCancelButton]=\\\"false\\\"\\n  [showConfirmButton]=\\\"false\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Agregar'\\\" customClass=\\\"swal-wide\\\"\\n  showCloseButton=\\\"true\\\">\\n  <div *swalPartial>\\n    <app-singuser (onvaluechanged)=\\\"onvaluechangedfirma($event)\\\" (oncancel)=\\\"cancelarfirma($event)\\\"></app-singuser>\\n  </div>\\n</swal>\\n<swal #partetrabajoSwal title=\\\"Parte de trabajo\\\" [backdrop]=\\\"true\\\" [allowOutsideClick]=\\\"false\\\"\\n  [showCancelButton]=\\\"false\\\" [showConfirmButton]=\\\"false\\\" [cancelButtonText]=\\\"'Cerrar'\\\" [confirmButtonText]=\\\"'Agregar'\\\"\\n  customClass=\\\"swal-wide\\\" showCloseButton=\\\"true\\\">\\n  <div *swalPartial>\\n\\n    <div class=\\\"card-body \\\">\\n      <h4><i class=\\\"ti-write\\\"></i> Parte de trabajo <a\\n          href=\\\"{{apiurl+'storage/respuestas/resp_'+respuestaview.id+'.pdf'}}\\\" download>Descargar Pdf</a></h4>\\n      <form action=\\\"#\\\" class=\\\"row\\\" id=\\\"form-rta\\\">\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">N° {{respuestaview.manual?'Manual':''}}</label>\\n          <input type=\\\"text\\\" id=\\\"numerorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"numero Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.id\\\" name=\\\"numerorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">Técnico</label>\\n          <input type=\\\"text\\\" id=\\\"tecnicorespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tecnico Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.usuario_respuesta.name\\\" name=\\\"tecnicorespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group col-lg-4\\\">\\n          <label class=\\\"control-label\\\">Fecha Registro</label>\\n          <input type=\\\"text\\\" id=\\\"fecharespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"fecha Respuesta\\\"\\n            [(ngModel)]=\\\"respuestaview.created_at\\\" name=\\\"fecharespuesta\\\">\\n\\n        </div>\\n\\n\\n        <div class=\\\"form-group col-lg-12\\\">\\n          <label class=\\\"control-label\\\">Parte de trabajo de la incidencia</label>\\n\\n          <ckeditor [(ngModel)]=\\\"respuestaview.descripcion\\\" #myckeditor=\\\"ngModel\\\" name=\\\"rtackeditor\\\"\\n            [config]=\\\"ckeConfig\\\" debounce=\\\"500\\\">\\n          </ckeditor>\\n\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Estado Parte de trabajo</label>\\n          <select class=\\\"form-control custom-select\\\" [(ngModel)]=\\\"respuestaview.estadorespuesta\\\"\\n            name=\\\"ctrlestadorespuesta\\\" required>\\n            <option value=\\\"\\\">Seleccione</option>\\n            <option value=\\\"TE\\\">Terminada</option>\\n            <option value=\\\"PM\\\">Pendiente por material</option>\\n            <option value=\\\"PC\\\">Pendiente por restricciones de cliente.</option>\\n            <option value=\\\"PS\\\">Pendiente por seguridad</option>\\n          </select>\\n\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Tiempo Solución (Horas)</label>\\n          <input type=\\\"number\\\" id=\\\"tiemporespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.tiemporespuesta\\\" name=\\\"tiemporespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Tiempo Recorrido (Horas)</label>\\n          <input type=\\\"number\\\" id=\\\"tiemporecorrido\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.horasdistancia\\\" name=\\\"tiemporecorrido\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-3\\\">\\n          <label class=\\\"control-label\\\">Distancia (Kms)</label>\\n          <input type=\\\"number\\\" id=\\\"distanciarespuesta\\\" class=\\\"form-control\\\" placeholder=\\\"Tiempo Solucion\\\"\\n            [(ngModel)]=\\\"respuestaview.distanciareportada\\\" name=\\\"distanciarespuesta\\\">\\n\\n        </div>\\n        <div class=\\\"form-group  col-lg-6\\\">\\n          <p>{{respuestaview.observacioncli}}</p>\\n        </div>\\n\\n      </form>\\n    </div>\\n  </div>\\n</swal>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.html\n// module id = ./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.html\n// module chunks = incidencias.module","import { Component, OnInit, ViewChild, AfterViewInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { IncidenciaService } from './../incidencia.service';\nimport { Ng4LoadingSpinnerService } from 'ng4-loading-spinner';\nimport { NotificationService } from './../../shared';\nimport { LocalDataService } from './../../shared';\nimport { tipocomponente } from '../../viewmodel/tipocomponente';\nimport { Contrato } from '../../viewmodel/contrato';\nimport { Observable } from 'rxjs';\nimport { ClienteService } from '../../clientes/cliente.service';\nimport { TypeaheadMatch } from 'ngx-bootstrap/typeahead';\nimport { listLocales } from 'ngx-bootstrap/chronos';\nimport { BsDatepickerConfig, BsLocaleService } from 'ngx-bootstrap/datepicker';\nimport { mergeMap } from 'rxjs/operators';\nimport { TipocontratoService } from '../../tipocontrato/tipocontrato.service';\nimport { EstacionservicioService } from '../../estacionservicio/estacionservicio.service';\nimport { estacionservicio } from '../../viewmodel/estacionservicio';\nimport { tipocontrato } from '../../viewmodel/tipocontrato';\nimport { SwalComponent } from '@toverux/ngx-sweetalert2';\nimport { Componente } from '../../viewmodel/Componente';\nimport { ComponenteActuacion } from '../../viewmodel/componente_actuacion';\nimport { Incidencia } from '../../viewmodel/incidencia';\nimport { CategoriaIncidente } from '../../viewmodel/categoriaincidente';\nimport { FileUploader, FileLikeObject, FileItem, ParsedResponseHeaders } from 'ng2-file-upload';\nimport { environment } from '../../../environments/environment';\nimport * as moment from 'moment';\nimport { ESTADOINCIDENCIAS } from '../../mocks/estadoincidente';\nimport { Respuesta } from '../../viewmodel/respuesta';\nimport { RespuestasService } from '../../respuesta/respuestas.service';\nimport { ArticuloService } from '../../articulo/articulo.service';\nimport { MaterialRespuesta } from '../../viewmodel/MaterialRespuesta';\nimport { ComentarioIncidente } from '../../viewmodel/comentario_incidente';\nimport { ComentarioincidenteService } from '../../comentarioincidente/comentarioincidente.service';\nimport { Tecnicoadicional } from '../../viewmodel/tecnicoadicional';\ndeclare var $;\n\n@Component({\n  selector: 'app-incidencias-resumen',\n  templateUrl: './incidencias-resumen.component.html',\n  styleUrls: ['./incidencias-resumen.component.css']\n})\nexport class IncidenciasResumenComponent implements OnInit, AfterViewInit {\n\n  public uploader: FileUploader = new FileUploader({\n    url: environment.apiUrl + 'api/archivoincidencia',\n    authTokenHeader: \"Authorization\",\n    authToken: \"Bearer \" + localStorage.getItem('access_token'),\n    isHTML5: true,\n    autoUpload: true,\n    maxFileSize: 5 * 1024 * 1024,\n\n  });\n\n  item: Incidencia;\n  /*autocomplete clicnte */\n  asyncSelected: string;\n  typeaheadLoading: boolean;\n  typeaheadNoResults: boolean;\n  dataSource: Observable<any>;\n  /*autocomplete articulo */\n  asyncSelected_art: string;\n  typeaheadLoading_art: boolean;\n  typeaheadNoResults_art: boolean;\n  dataSource_art: Observable<any>;\n\n  tipocontrato: any;\n  estacionservicio: any;\n  name = 'ng2-ckeditor';\n  ckeConfig: any;\n  mycontent: string;\n  newcompo: estacionservicio;\n  tipocontratosel: tipocontrato;\n  componentesel: Componente;\n  actuacionesNew: ComponenteActuacion;\n  prioridades: CategoriaIncidente[];\n  irespuesta: Respuesta;\n  estadoincidente = ESTADOINCIDENCIAS;\n  apiurl: any;\n  @ViewChild('myckeditor') ckeditor: any;\n  @ViewChild('rtackeditor') rtackeditor: any;\n  @ViewChild('createSwal') private createSwal: SwalComponent;\n  @ViewChild('backwardSwal') private backwardSwal: SwalComponent;\n\n  @ViewChild('partetrabajoSwal') private partetrabajoSwal: SwalComponent;\n  articulodesc: any;\n  materialnew: MaterialRespuesta;\n  comentarionew: ComentarioIncidente;\n  respuestaview: Respuesta;\n  tecnicoadicionalnew: Tecnicoadicional;\n  usuariostec = [];\n  constructor(\n    private spinnerService: Ng4LoadingSpinnerService,\n    private incidenciaService: IncidenciaService,\n    private router: Router,\n    private notificationService: NotificationService,\n    private localDataService: LocalDataService,\n    private clienteService: ClienteService,\n    private localeService: BsLocaleService,\n    private tipocontratoService: TipocontratoService,\n    private estacionservicioService: EstacionservicioService,\n    private route: ActivatedRoute,\n    private respuestaService: RespuestasService,\n    private articuloService: ArticuloService,\n    private comentarioincidenteService: ComentarioincidenteService\n\n  ) {\n\n    this.localeService.use('es');\n\n    this.dataSource = Observable.create((observer: any) => {\n      // Runs on every search\n      this.clienteService.gettoken(this.item.razonsocial).subscribe((value) => {\n        observer.next(value.data);\n\n      });\n    });\n\n    this.dataSource_art = Observable.create((observer: any) => {\n      // Runs on every search\n      this.articuloService.gettoken(this.articulodesc).subscribe((value) => {\n        observer.next(value.data);\n\n      });\n    });\n    this.apiurl = environment.apiUrl;\n    this.tecnicoadicionalnew = new Tecnicoadicional();\n    this.tecnicoadicionalnew.id_usuario = -1;\n  }\n\n  public hasBaseDropZoneOver: boolean = false;\n  public hasAnotherDropZoneOver: boolean = false;\n  ngOnInit() {\n\n    this.ckeConfig = {\n      allowedContent: false,\n      extraPlugins: 'divarea',\n      forcePasteAsPlainText: true,\n      readOnly: true\n    };\n    this.item = new Incidencia;\n    this.item.cliente_id = '';\n    this.item.estacion_servicio_id = -1;\n    this.item.categoria_incidente_id = -1;\n    this.item.imagenes = [];\n    this.cargarTipoCOntrato();\n    this.cargarEstacionServicio();\n    this.newcompo = new estacionservicio();\n    this.prioridades = [];\n    this.irespuesta = new Respuesta();\n    this.materialnew = new MaterialRespuesta();\n    this.irespuesta.materiales = [];\n    this.getById();\n\n    this.irespuesta.estadorespuesta = \"\";\n    this.uploader.onAfterAddingFile = (file: any) => { file.withCredentials = false; };\n    this.uploader.onErrorItem = (item, response, status, headers) => this.onErrorItem(item, response, status, headers);\n    this.uploader.onSuccessItem = (item, response, status, headers) => this.onSuccessItem(item, response, status, headers);\n    this.uploader.onWhenAddingFileFailed = (fileItem) => {\n      this.notificationService.onError('La imagen no se pudo cargar, '\n        + 'el tamaño maximo es de 5MB y el formato es png o jpg, INtentelo nuevamente');\n    };\n    this.comentarionew = new ComentarioIncidente();\n\n  }\n\n  onChange($event: any): void {\n    console.log(\"onChange\");\n\n  }\n  editarfecha($event) {\n    if($event!=undefined){\n      this.backwardSwal.show();\n    }\n    \n  }\n  getById() {\n    this.spinnerService.show();\n    const $id = this.route.snapshot.paramMap.get('id');\n    this.uploader.options.additionalParameter = { incidencia_id: $id };\n    this.irespuesta.id_incidencia = $id;\n    this.incidenciaService.getById($id)\n      .subscribe((response) => {\n        this.item = response.data;\n        this.usuariostec = response.data.usuariostec;\n        this.cargarEstacionServicio();\n        if (response.data.contrato_componente != null) {\n          this.prioridades = response.data.contrato_componente.contrato.tipocontrato.categoriaincidentes;\n        }\n        if (!moment(this.item.fecha_cierre, 'DD/MM/YYYY').isValid()) {\n          this.item.fecha_cierre = moment(this.item.fecha_cierre).toDate();\n        }\n\n        this.spinnerService.hide();\n      });\n  }\n  cargarTipoCOntrato() {\n\n    this.tipocontratoService.get(1).subscribe((value) => {\n      this.tipocontrato = value.data;\n\n    });\n\n  }\n\n  cargarEstacionServicio() {\n    let empresa = 0;\n    this.spinnerService.show();\n    empresa = this.localDataService.getLocalData('empresaSeleccionada').id;\n    this.estacionservicioService.getbycliente(empresa, this.item.cliente_id).subscribe((value) => {\n      this.estacionservicio = value.data;\n      if (this.item.estacion_servicio_id != -1) {\n        let result = this.estacionservicio.filter(comp => comp.id.toString() == this.item.estacion_servicio_id);\n\n\n        if (result.length > 0) {\n          this.newcompo = result[0];\n\n        }\n      }\n      else {\n        this.newcompo = new estacionservicio();\n\n      }\n      this.spinnerService.hide();\n    });\n\n  }\n\n  onselectEstacionServicio(estacionserviciosel) {\n    if (estacionserviciosel.target.value != '-1') {\n      let result = this.estacionservicio.filter(comp => comp.id.toString() == estacionserviciosel.target.value);\n\n\n      if (result.length > 0) {\n        this.newcompo = result[0];\n      }\n    }\n    else {\n      this.newcompo = new estacionservicio();\n\n    }\n\n\n  }\n  onselecttipocontrato(tipocontratovalue) {\n\n    let result;\n    result = this.tipocontrato.filter(comp => comp.id.toString() == tipocontratovalue.target.value);\n\n\n    if (result.length > 0) {\n      this.tipocontratosel = result[0];\n    }\n  }\n\n  add() {\n    this.spinnerService.show();\n\n    this.item.usuario_id = this.localDataService.getLocalData('userInfo').id;\n    if (!moment(this.item.fecha_cierre, 'DD/MM/YYYY').isValid()) {\n      this.item.fecha_cierre = moment(this.item.fecha_cierre).toDate();\n    } else {\n      this.item.fecha_cierre = moment(this.item.fecha_cierre).toDate();\n    }\n    if (this.item.fecha_programacion != undefined) {\n      this.item.fecha_programacion = moment(this.item.fecha_programacion).format(\"DD-MM-YYYY HH:mm:ss\");\n\n    }\n    this.incidenciaService.update(this.item)\n      .subscribe((value) => {\n        this.spinnerService.hide();\n        this.notificationService.onSuccess('Incidencia actualizada con exito.');\n        this.router.navigateByUrl('incidencia');\n      }, (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError('El Contrato ya existe');\n        } else {\n          this.notificationService.onError('Se ha producido un error.');\n        }\n      });\n  }\n  changeTypeaheadLoading(e: boolean): void {\n\n    this.typeaheadLoading = e;\n  }\n\n  typeaheadOnSelect(e: TypeaheadMatch): void {\n    this.item.cliente_id = e.item.CODIGO_CLIENTE;\n    this.cargarEstacionServicio();\n  }\n\n  changeTypeaheadLoading_art(e: boolean): void {\n\n    this.typeaheadLoading_art = e;\n  }\n\n  typeaheadOnSelect_art(e: TypeaheadMatch): void {\n    this.materialnew.nombre = e.item.DESCRIPCION_ARTICULO;\n    this.materialnew.referencia = e.item.CODIGO_ARTICULO;\n  }\n  agregarmaterial() {\n    this.irespuesta.materiales.push(this.materialnew);\n    this.materialnew = new MaterialRespuesta();\n    this.articulodesc = \"\";\n  }\n  selectComponent(comp) {\n    if (comp.select) {\n      comp.select = false;\n    } else {\n      comp.select = true;\n    }\n    return false;\n  }\n  modalactuacion(item) {\n    this.componentesel = item;\n    if (!this.componentesel.actuaciones) {\n      this.componentesel.actuaciones = [];\n    }\n\n    this.createSwal.show();\n    return false;\n  }\n  agregaractuacion() {\n    this.componentesel.actuaciones.push(this.actuacionesNew);\n    this.actuacionesNew = new ComponenteActuacion();\n    this.actuacionesNew.tipo = '-1';\n  }\n  onvaluechanged(value) {\n    if (value.index === undefined || value.index === '') {\n      this.actuacionesNew.dias = value.dias;\n    } else {\n      this.componentesel.actuaciones[value.index].dias = value.dias;\n    }\n\n  }\n  clickcontrato(contrato) {\n    this.prioridades = contrato.contrato.tipocontrato.categoriaincidentes;\n    this.item.contrato_componente_id = contrato.id;\n  }\n  getclassestadoincidencia(estado) {\n    let result;\n    result = this.estadoincidente.filter(estadoinc => estadoinc.value === estado);\n    return result.length > 0 ? result[0].label : '';\n  }\n  onErrorItem(item: FileItem, response: string, status: number, headers: ParsedResponseHeaders): any {\n    let error = JSON.parse(response); //error server response\n    console.log(error);\n  }\n\n  public fileOverBase(e: any): void {\n\n    this.hasBaseDropZoneOver = e;\n  }\n\n  public fileOverAnother(e: any): void {\n    this.hasAnotherDropZoneOver = e;\n  }\n  onSuccessItem(item: FileItem, response: string, status: number, headers: ParsedResponseHeaders): any {\n    if (this.item.imagenes == undefined || this.item.imagenes == null) {\n      this.item.imagenes = [];\n    }\n    this.item.imagenes.push($.parseJSON(response).data);\n  }\n  tooglerogthmenu() {\n    $('body').toggleClass('rmv-right-panel');\n  }\n  guardarrespuesta() {\n    this.spinnerService.show();\n    this.respuestaService.add(this.irespuesta)\n      .subscribe((value) => {\n        this.spinnerService.hide();\n        this.notificationService.onSuccess('Respuesta agregada con exito.');\n        this.router.navigateByUrl('incidencia');\n      }, (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError('El Respuesta ya existe');\n        } else {\n          this.notificationService.onError('Se ha producido un error.');\n        }\n      });\n  }\n  abrirfirma() {\n    this.createSwal.show();\n  }\n\n  onvaluechangedfirma(value) {\n    this.irespuesta.firmacliente = value;\n    this.createSwal.nativeSwal.close();\n  }\n  cancelarfirma(value) {\n    this.createSwal.nativeSwal.close();\n  }\n  public ngAfterViewInit() {\n    $('.mini-nav, .sidebar-menu, .right-side-panel, .message-center, .right-sidebar').perfectScrollbar();\n  }\n  FieldsChange(values: any) {\n    this.materialnew.pedido = values.currentTarget.checked;\n  }\n  ocultarmenu() {\n    $('body').toggleClass('rmv-right-panel');\n  }\n  addcomentario() {\n    if (this.item.comentarios == undefined) {\n      this.item.comentarios = [];\n    }\n    this.comentarionew.id_incidencia = this.item.id;\n\n    this.comentarioincidenteService.add(this.comentarionew)\n      .subscribe((value) => {\n        this.item.comentarios.push(value.data);\n        this.comentarionew = new ComentarioIncidente();\n        this.notificationService.onSuccess('Comentario agregado con exito.');\n\n      }, (err) => {\n        this.spinnerService.hide();\n        if (err.status_code == 422) {\n          this.notificationService.onError('Comentario ya existe');\n        } else {\n          this.notificationService.onError('Se ha producido un error.');\n        }\n      });\n  }\n  calculardias(fecha) {\n    let actual = moment();\n    fecha = moment(fecha);\n    let diff = actual.diff(fecha, 'days');\n    return diff;\n  }\n  verparte(ptrab) {\n    this.respuestaview = ptrab;\n    this.partetrabajoSwal.show();\n    return false;\n  }\n  agregartecnicoadicional() {\n    if (this.tecnicoadicionalnew.id_usuario != -1) {\n      if (this.item.tecnicosadicionales == undefined) { this.item.tecnicosadicionales = []; }\n      let resul = this.usuariostec.filter(tec => tec.id == this.tecnicoadicionalnew.id_usuario);\n      resul[0].selected = true;\n      this.tecnicoadicionalnew.usuario = resul[0];\n      this.item.tecnicosadicionales.push(this.tecnicoadicionalnew);\n      this.tecnicoadicionalnew = new Tecnicoadicional();\n      this.tecnicoadicionalnew.id_usuario = -1;\n    }\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencias-resumen/incidencias-resumen.component.ts","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IncidenciaIndexComponent } from './incidencia-index/incidencia-index.component';\nimport { IncidenciaAddComponent } from './incidencia-add/incidencia-add.component';\nimport { IncidenciaEditComponent } from './incidencia-edit/incidencia-edit.component';\nimport { IncidenciasResumenComponent } from './incidencias-resumen/incidencias-resumen.component';\nimport { Candeactivateguard } from '../shared/can-deactivate-guard/can-deactivate-guard.service';\n\nconst routes: Routes = [{ path: '', component: IncidenciaIndexComponent },\n{ path: 'add', component: IncidenciaAddComponent, canDeactivate: [Candeactivateguard] },\n{ path: 'edit/:id', component: IncidenciaEditComponent, canDeactivate: [Candeactivateguard] },\n{ path: 'resumen/:id', component: IncidenciasResumenComponent, canDeactivate: [Candeactivateguard] },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class IncidenciasRoutingModule { }\n \n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencias-routing.module.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\n/*modules */\n\nimport { AuthenticationModule } from './../shared';\nimport { EnvironmentModule } from './../shared';\nimport { HttpModule } from '@angular/http';\nimport { FormValidationModule } from './../shared';\nimport { NotificationModule } from './../shared';\nimport { LocalDataModule } from './../shared';\nimport { AlertModule } from 'ngx-bootstrap/alert';\nimport { SweetAlert2Module } from '@toverux/ngx-sweetalert2';\nimport { SnotifyModule, SnotifyService, ToastDefaults } from 'ng-snotify';\nimport { TypeaheadModule } from 'ngx-bootstrap/typeahead';\nimport { BsDatepickerModule } from 'ngx-bootstrap/datepicker';\nimport { TimepickerModule } from 'ngx-bootstrap/timepicker';\nimport * as $ from \"jquery\";\n\nimport { defineLocale } from 'ngx-bootstrap/chronos';\nimport { esLocale } from 'ngx-bootstrap/locale';\nimport { CKEditorModule } from 'ng2-ckeditor';\nimport { DiasWeekModule } from './../dias-week/dias-week.module';\n\nimport { IncidenciasRoutingModule } from './incidencias-routing.module';\nimport { IncidenciaIndexComponent } from './incidencia-index/incidencia-index.component';\nimport { IncidenciaService } from './incidencia.service';\nimport { RespuestasService } from './../respuesta/respuestas.service';\nimport { RequestInterceptor } from '../shared/interceptor/http_interceptor';\nimport { IncidenciaAddComponent } from './incidencia-add/incidencia-add.component';\nimport { IncidenciaEditComponent } from './incidencia-edit/incidencia-edit.component';\nimport { FullCalendarModule } from 'ng-fullcalendar';\nimport {FileUploadModule} from 'ng2-file-upload';\nimport { SinguserModule } from '../singuser/singuser.module';\nimport { ArticuloService } from '../articulo/articulo.service';\nimport { MapsService } from '../google-apis/maps.service';\nimport { ComentarioincidenteService } from '../comentarioincidente/comentarioincidente.service';\nimport { IncidenciasResumenComponent } from './incidencias-resumen/incidencias-resumen.component';\nimport { Candeactivateguard } from '../shared/can-deactivate-guard/can-deactivate-guard.service';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { NoDblClickDirectiveDirective } from '../directives/no-dbl-click-directive.directive';\nimport { IncidenciaEditTabComponent } from './incidencia-edit-tab/incidencia-edit-tab.component';\ndefineLocale('es', esLocale);\n@NgModule({\n  imports: [\n    CommonModule,\n    IncidenciasRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    BsDatepickerModule.forRoot(),\n    TimepickerModule.forRoot(),\n    AlertModule.forRoot(),\n    SweetAlert2Module.forRoot(),\n    SnotifyModule,\n    HttpModule,\n    AuthenticationModule,\n    EnvironmentModule,\n    FormValidationModule,\n    NotificationModule,\n    LocalDataModule,\n    TypeaheadModule.forRoot(),\n    BsDatepickerModule.forRoot(),\n\n    CKEditorModule,\n    DiasWeekModule,\n    FullCalendarModule,\n    FileUploadModule,\n    SinguserModule,\n    NgSelectModule,\n\n  ],\n  declarations: [IncidenciaIndexComponent, IncidenciaAddComponent, IncidenciaEditComponent,\n    IncidenciasResumenComponent,\n  NoDblClickDirectiveDirective,\n  IncidenciaEditTabComponent],\n  providers: [IncidenciaService,RespuestasService,\n    ArticuloService,MapsService,ComentarioincidenteService\n    ,Candeactivateguard,\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: RequestInterceptor,\n      multi: true,\n    }]\n})\nexport class IncidenciasModule {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/incidencias/incidencias.module.ts","import { Injectable } from '@angular/core';\nimport { Observable } from \"rxjs\";\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport { EnvironmentService } from './../shared/environment/environment.service';\nimport { Ng4LoadingSpinnerService } from 'ng4-loading-spinner';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\n\n\n@Injectable()\nexport class RespuestasService {\n\n  constructor(private _http: HttpClient,\n    private environmentService: EnvironmentService) { }\n\n  public get(page) {\n    let url = this.environmentService.setApiServiceWithPageEnterprise('respuesta', page);\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n\n  add(userData) {\n    let url = this.environmentService.setApiService('respuesta');\n    return this._http.post(url, userData)\n      .map(res => res)\n      .catch(this.handleError);\n  }\n\n\n  getById($id) {\n    let url = this.environmentService.setApiServiceById('respuesta', $id)\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n  public getbytoken(page) {\n    let url = this.environmentService.setApiServiceWithVars('respuesta', page)\n    return this._http.get(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n\n  update(userData) {\n    let url = this.environmentService.setApiServiceById('respuesta', userData.id)\n    return this._http.put(url, userData)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n  updatecomponent(userData) {\n    let url = this.environmentService.setApiService('respuesta');\n    return this._http.post(url, userData)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n  delete($id) {\n    let url = this.environmentService.setApiServiceById('respuesta', $id)\n    return this._http.delete(url)\n      .map(res => res)\n      .catch(this.handleError)\n  }\n\n\n  private handleError(error: HttpErrorResponse | any) {\n    let errMsg: string;\n    errMsg = error.error\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n\n  }\n \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/respuesta/respuestas.service.ts","module.exports = \"canvas{\\r\\n    border:1px solid #000000;\\r\\n    border-radius: 25px;\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/singuser/singuser.component.css\n// module id = ./src/app/singuser/singuser.component.css\n// module chunks = incidencias.module","module.exports = \"\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-lg-12\\\">\\n      <canvas #canvas></canvas>\\n  </div>\\n  <div class=\\\"col-lg-12\\\">\\n      <button type=\\\"button\\\" (click)=\\\"valuechanged()\\\" class=\\\"btn btn-success\\\" >Aceptar </button> \\n      <button type=\\\"button\\\" (click)=\\\"cancelarfirma()\\\" class=\\\"btn btn-inverse\\\" >Cancelar </button>\\n  </div>\\n\\n</div>\\n  \\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/singuser/singuser.component.html\n// module id = ./src/app/singuser/singuser.component.html\n// module chunks = incidencias.module","import {\n  Component, Input, ElementRef, AfterViewInit, ViewChild, EventEmitter, Output\n} from '@angular/core';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { switchMap, takeUntil, pairwise } from 'rxjs/operators';\nimport { SwalComponent } from '@toverux/ngx-sweetalert2';\n\n@Component({\n  selector: 'app-singuser',\n  templateUrl: './singuser.component.html',\n  styleUrls: ['./singuser.component.css']\n})\nexport class SinguserComponent implements AfterViewInit {\n\n  @ViewChild('canvas') public canvas: ElementRef;\n  @ViewChild('createSwal') private createSwal: SwalComponent;\n  @Input() public width = 800;\n  @Input() public height = 300;\n  @Output() onvaluechanged = new EventEmitter<any>();\n  @Output() oncancel = new EventEmitter<any>();\n  private cx: CanvasRenderingContext2D;\n\n  public ngAfterViewInit() {\n    const canvasEl: HTMLCanvasElement = this.canvas.nativeElement;\n    this.cx = canvasEl.getContext('2d');\n\n\n    this.width = window.innerWidth - 100;\n    this.height = window.innerHeight * 0.55;\n    canvasEl.width = this.width;\n    canvasEl.height = this.height;\n\n    this.cx.lineWidth = 3;\n    this.cx.lineCap = 'round';\n    this.cx.strokeStyle = '#000';\n\n    this.captureEvents(canvasEl);\n  }\n\n  private captureEvents(canvasEl: HTMLCanvasElement) {\n    // this will capture all mousedown events from the canvas element\n    fromEvent(canvasEl, 'mousedown')\n      .pipe(\n        switchMap((e) => {\n          // after a mouse down, we'll record all mouse moves\n          return fromEvent(canvasEl, 'mousemove')\n            .pipe(\n              // we'll stop (and unsubscribe) once the user releases the mouse\n              // this will trigger a 'mouseup' event    \n              takeUntil(fromEvent(canvasEl, 'mouseup')),\n              // we'll also stop (and unsubscribe) once the mouse leaves the canvas (mouseleave event)\n              takeUntil(fromEvent(canvasEl, 'mouseleave')),\n\n              // pairwise lets us get the previous value to draw a line from\n              // the previous point to the current point    \n              pairwise()\n            )\n        })\n      )\n      .subscribe((res: [MouseEvent, MouseEvent]) => {\n        const rect = canvasEl.getBoundingClientRect();\n\n        // previous and current position with the offset\n        const prevPos = {\n          x: res[0].clientX - rect.left,\n          y: res[0].clientY - rect.top\n        };\n\n        const currentPos = {\n          x: res[1].clientX - rect.left,\n          y: res[1].clientY - rect.top\n        };\n\n        // this method we'll implement soon to do the actual drawing\n        this.drawOnCanvas(prevPos, currentPos);\n      });\n\n    // mobile event \n    // this will capture all mousedown events from the canvas element\n    fromEvent(canvasEl, 'touchstart')\n      .pipe(\n        switchMap((e) => {\n          // after a mouse down, we'll record all mouse moves\n          return fromEvent(canvasEl, 'touchmove')\n            .pipe(\n              // we'll stop (and unsubscribe) once the user releases the mouse\n              // this will trigger a 'mouseup' event    \n              takeUntil(fromEvent(canvasEl, 'touchend')),\n              // we'll also stop (and unsubscribe) once the mouse leaves the canvas (mouseleave event)\n              takeUntil(fromEvent(canvasEl, 'mouseleave')),\n\n              // pairwise lets us get the previous value to draw a line from\n              // the previous point to the current point    \n              pairwise()\n            )\n        })\n      )\n      .subscribe((res: [TouchEvent, TouchEvent]) => {\n        const rect = canvasEl.getBoundingClientRect();\n\n        // previous and current position with the offset\n        const prevPos = {\n          x: res[0].touches[0].clientX - rect.left,\n          y: res[0].touches[0].clientY - rect.top\n        };\n\n        const currentPos = {\n          x: res[1].touches[0].clientX - rect.left,\n          y: res[1].touches[0].clientY - rect.top\n        };\n\n        // this method we'll implement soon to do the actual drawing\n        this.drawOnCanvas(prevPos, currentPos);\n      });\n  }\n\n  private drawOnCanvas(prevPos: { x: number, y: number }, currentPos: { x: number, y: number }) {\n    if (!this.cx) { return; }\n\n    this.cx.beginPath();\n\n    if (prevPos) {\n      this.cx.moveTo(prevPos.x, prevPos.y); // from\n      this.cx.lineTo(currentPos.x, currentPos.y);\n      this.cx.stroke();\n    }\n  }\n  valuechanged() {\n    const canvasEl: HTMLCanvasElement = this.canvas.nativeElement;\n    let image = canvasEl.toDataURL();\n    this.onvaluechanged.emit(image);\n  }\n  cancelarfirma() {\n    this.oncancel.emit('');\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/singuser/singuser.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SinguserComponent } from './singuser.component';\nimport { SweetAlert2Module } from '@toverux/ngx-sweetalert2';\n@NgModule({\n  imports: [\n    CommonModule,\n    SweetAlert2Module.forRoot(),\n  ],\n  declarations: [SinguserComponent],\n  exports:[SinguserComponent]\n})\nexport class SinguserModule { }\n \n\n\n// WEBPACK FOOTER //\n// ./src/app/singuser/singuser.module.ts","\r\nexport class MaterialRespuesta {\r\n  id: number;\r\n  id_incidencia: any;\r\n  id_respuesta: any;\r\n  referencia: string;\r\n  nombre: string;\r\n  cantidad: number;\r\n  pedido: boolean;\r\n  imagen: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewmodel/MaterialRespuesta.ts","\r\n\r\nexport class ComentarioIncidente {\r\n    id: number;\r\n    id_incidencia:any;\r\n    descripcion: string;\r\n    comentario: string;\r\n    user:number;\r\n   }\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewmodel/comentario_incidente.ts","import { ArchivoIncidencia } from \"./archivoIncidencia\";\r\nimport { estacionservicio } from \"./estacionservicio\";\r\nimport { ComentarioIncidente } from \"./comentario_incidente\";\r\nimport { Tecnicoadicional } from \"./tecnicoadicional\";\r\n\r\n\r\nexport class Incidencia {\r\n  id: number;\r\n  empresa_id: number;\r\n  estacion_servicio_id: number;\r\n  cliente_id: string;\r\n  razonsocial: string;\r\n  estado: string;\r\n  tipocontrato: string;\r\n  titulo: string;\r\n  descripcion: string;\r\n  fecha_vencimiento: any;\r\n  fecha_respuesta: string;\r\n  fecha_cierre: any;\r\n  usuario_id: number;\r\n  usuario_asignado: any;\r\n  fecha_programacion: any;\r\n  hora_programacion: any;\r\n  categoria_incidente_id: number;\r\n  contrato_componente_id: number;\r\n  isEditable: boolean;\r\n  contrato_componente: any;\r\n  created_at: any;\r\n  start: any;\r\n  imagenes: ArchivoIncidencia[];\r\n  fecha_partida: string;\r\n  fecha_llegada: string;\r\n  latpartida: number;\r\n  lngpartida: number;\r\n  latllegada: Number;\r\n  lngllegada: Number;\r\n  estacion_servicio: estacionservicio;\r\n  tiempo: number;\r\n  distanciacalculada: number;\r\n  remoto: boolean;\r\n  remotoinicio: any;\r\n  remotopausa: boolean;\r\n  remototiempo: number;\r\n  comentarios: ComentarioIncidente[];\r\n  partestrabajo: any;\r\n  incidentes_relacionados: any;\r\n  actuacion: string;\r\n  tecnicosadicionales: Tecnicoadicional[];\r\n  sincontrato: number;\r\n  siniestro: boolean;\r\n  noreferencia: string;\r\n  t_deplazamiento: any;\r\n  no_parte_manual: any;\r\n  fecha_parte_manual: any;\r\n  obs_parte_manual: any;\r\n  manual: any;\r\n  cambioFechaVencimiento: any;\r\n  user_imbox_id?:any;\r\n  usr_parte_manual:any;\r\n  proyecto_id?: string;\r\n  proyecto_description?: string;\r\n  usuario_asignado_id: number;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewmodel/incidencia.ts","import { MaterialRespuesta } from \"./MaterialRespuesta\";\r\n\r\nexport class Respuesta {\r\n  id: number;\r\n  id_incidencia: any;\r\n  descripcion: string;\r\n  estadorespuesta: string;\r\n  tipopendientematerial : string;\r\n  user_id: number;\r\n  ctrltiemporesolucion: number;\r\n  firmacliente: '';\r\n  materiales: MaterialRespuesta[];\r\n  tiemporespuesta: any;\r\n  fecha_partida: string;\r\n  fecha_llegada: string;\r\n  latpartida: number;\r\n  lngpartida: number;\r\n  latllegada: Number;\r\n  lngllegada: Number;\r\n  distanciareportada: number;\r\n  observacioncli: string;\r\n  horasdistancia: any;\r\n  manual: Boolean;\r\n  dnicliente: string;\r\n  distestllegada: number;\r\n  distestcierre: number;\r\n  latrespuesta: number;\r\n  longrespuesta: number;\r\n  created_at: any;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewmodel/respuesta.ts","\r\nexport class Tecnicoadicional {\r\n    id: number;\r\n    id_usuario: any;\r\n    id_incidencia:number;\r\n    observaciones: string;\r\n    usuario: any;\r\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewmodel/tecnicoadicional.ts"],"sourceRoot":"webpack:///"}